<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR-Strategieentwicklung Workflow - Manuel Weiss</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Custom Styles for HR Strategy Workflow -->
    <style>
        .hr-strategy-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
        }
        
        /* Workflow Sidebar */
        .workflow-sidebar {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            width: 280px;
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .workflow-sidebar.collapsed {
            width: 60px;
            padding: 1rem;
        }
        
        .sidebar-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .progress-summary {
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .current-state-indicator {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .maturity-score {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }
        
        .score-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            background: #3b82f6;
        }
        
        /* Assessment System Styles */
        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .assessment-category {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .assessment-category.clickable-category {
            cursor: pointer;
            position: relative;
        }
        
        .assessment-category.clickable-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-color: #3b82f6;
        }
        
        /* Allow clicks on the category itself, but prevent child elements from blocking */
        .assessment-category.clickable-category .category-header,
        .assessment-category.clickable-category .category-header * {
            pointer-events: none;
        }
        
        /* Allow slider interactions */
        .assessment-category.clickable-category .slider-container,
        .assessment-category.clickable-category input[type="range"],
        .assessment-category.clickable-category .slider-labels,
        .assessment-category.clickable-category .slider-value-display {
            pointer-events: auto;
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .category-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
        }
        
        .slider-container {
            margin-top: 1rem;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        
        .workflow-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .workflow-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="white" opacity="0.1"/><circle cx="80" cy="40" r="1.5" fill="white" opacity="0.1"/><circle cx="40" cy="70" r="1" fill="white" opacity="0.1"/></svg>');
            opacity: 0.3;
        }
        
        .workflow-header .content {
            position: relative;
            z-index: 1;
        }
        
        .smart-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .workflow-header h1 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.75rem;
        }
        
        .workflow-header p {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        .workflow-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        .progress-step {
            align-items: center;
            margin: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: #f3f4f6;
            border-radius: 25px;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.3s ease;
        .progress-step.active {
            background: #3b82f6;
        .progress-step.completed {
            background: #1d4ed8;
        .workflow-step {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        .step-header {
            margin-bottom: 1.5rem;
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-weight: 700;
            margin-right: 1rem;
        .step-title {
            font-size: 1.5rem;
            color: #1f2937;
        .step-description {
            line-height: 1.6;
        .form-group {
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #374151;
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            transition: border-color 0.3s ease;
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3b82f6;
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        .checkbox-item {
            padding: 1rem;
            cursor: pointer;
        .checkbox-item:hover {
            background: #f0f9ff;
        .checkbox-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: auto;
        .btn {
            border: none;
            text-decoration: none;
            display: inline-block;
        .btn:hover {
            transform: translateY(-2px);
        .btn-secondary {
            background: #6b7280;
        .btn-secondary:hover {
            background: #4b5563;
        .btn-success {
            background: #059669;
        .btn-success:hover {
            background: #047857;
        .harvard-mit-section {
            border: 2px solid #3b82f6;
            padding: 1.5rem;
            margin: 1.5rem 0;
        .harvard-mit-section h4 {
            color: #1d4ed8;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        .harvard-mit-section .methodology {
        .harvard-mit-section .methodology i {
            color: #3b82f6;
            margin-right: 0.5rem;
            width: 20px;
        .harvard-mit-section .methodology strong {
        .practical-implementation {
            background: #f0fdf4;
            border: 2px solid #10b981;
        .practical-implementation h5 {
            color: #059669;
        .export-section {
            margin-top: 2rem;
        .export-buttons {
            margin-top: 1.5rem;
        .btn-pdf {
            background: #dc2626;
            border: 2px solid white;
            padding: 1rem 2rem;
        .btn-pdf:hover {
            color: #dc2626;
        .btn-excel {
        .btn-excel:hover {
        .btn-word {
            background: #2563eb;
        .btn-word:hover {
            color: #2563eb;
        @media (max-width: 768px) {
            .workflow-progress {
                flex-direction: column;
                align-items: center;
            }
            
            .progress-step {
                margin: 0.25rem 0;
            .checkbox-group {
                grid-template-columns: 1fr;
            .export-buttons {
        /* AWS User System Styles - Integrated in Navigation */
        .user-system {
            margin-left: 20px;

        .user-info {
            gap: 12px;
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 8px 16px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
        .user-info:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        .user-avatar {
            width: 32px;
            height: 32px;
            overflow: hidden;
            border: 2px solid #6366f1;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        .user-avatar-img {
            height: 100%;
            object-fit: cover;
        .user-details {
            flex-direction: column;
            gap: 2px;
        .user-name {
            font-size: 0.8rem;
            color: #1e293b;
            line-height: 1.2;
        .user-email {
            font-size: 0.7rem;
            color: #64748b;
        .user-logout {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            width: 28px;
            height: 28px;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        .user-logout:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        .user-login {
        .btn-login {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 20px;
            gap: 6px;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        .btn-login:hover {
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        .btn-login i {
        /* Responsive Design for User System */
            .user-system {
                margin-left: 10px;
            .user-info {
                padding: 6px 12px;
                gap: 8px;
            .user-avatar {
                width: 28px;
                height: 28px;
            .user-name {
                font-size: 0.7rem;
            .user-email {
                font-size: 0.6rem;
            .btn-login {
    </style>
    <link rel="stylesheet" href="css/unified-auth-system.css">

    <!-- Progress Badge Styles -->
    <style>
        .user-progress-badge {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 14px;
            min-width: 200px;
        }
        
        .user-progress-badge .user-info,
        .user-progress-badge .progress-sync {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4a5568;
        }
        
        .user-progress-badge i {
            font-size: 16px;
            color: #667eea;
        }
        
        @media (max-width: 768px) {
            .user-progress-badge {
                top: auto;
                bottom: 20px;
                right: 10px;
                left: 10px;
                min-width: auto;
            }
        }
    </style>
</head>
<body data-page-id="hr-strategie-workflow">
    <!-- Critical Functions - Must be available immediately for onclick handlers -->
    <script>
        // Make functions globally available IMMEDIATELY (before HTML parsing)
        window.toggleSidebar = function() {
            const sidebar = document.getElementById('workflowSidebar');
            const icon = document.getElementById('sidebarToggleIcon');
            const content = document.getElementById('sidebarContent');
            
            if (!sidebar) {
                console.error('Sidebar not found');
                return;
            }
            
            if (sidebar.classList.contains('collapsed')) {
                sidebar.classList.remove('collapsed');
                if (icon) icon.className = 'fas fa-chevron-left';
                if (content) content.style.display = 'block';
            } else {
                sidebar.classList.add('collapsed');
                if (icon) icon.className = 'fas fa-chevron-right';
                if (content) content.style.display = 'none';
            }
        };
        
        window.openDetailAssessment = function(dimension) {
            console.log('openDetailAssessment called with dimension:', dimension);
            // Save current progress if function exists
            if (typeof saveProgress === 'function') {
                try {
                    saveProgress();
                } catch (e) {
                    console.warn('Could not save progress:', e);
                }
            }
            // Navigate to detail page
            const url = `hr-strategie-assessment-detail-${dimension}.html`;
            console.log('Navigating to:', url);
            window.location.href = url;
        };
        
        console.log('‚úÖ Critical functions defined immediately - toggleSidebar:', typeof window.toggleSidebar, 'openDetailAssessment:', typeof window.openDetailAssessment);
    </script>

    <!-- Progress Badge -->
    <div class="user-progress-badge" style="display: none;">
        <div class="user-info">
            <i class="fas fa-user-circle"></i>
            <span>Nicht angemeldet</span>
        </div>
        <div class="progress-sync">
            <i class="fas fa-cloud-off-alt"></i>
            <span>Fortschritt lokal</span>
        </div>
    </div>
    <div class="hr-strategy-container">
        <!-- Smart Workflow Sidebar -->
        <div class="workflow-sidebar" id="workflowSidebar">
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <i class="fas fa-chevron-left" id="sidebarToggleIcon"></i>
            </button>
            
            <div class="sidebar-content" id="sidebarContent">
                <div class="progress-summary">
                    <h4 style="margin: 0 0 1rem; font-size: 1rem;">Fortschritt</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" id="overallProgress" style="width: 0%;"></div>
                    </div>
                    <span class="progress-text" id="progressText">0% abgeschlossen</span>
                </div>
                
                <div class="current-state-indicator">
                    <div class="maturity-score">
                        <div class="score-circle" id="maturityCircle">1</div>
                        <div>
                            <div style="font-size: 0.875rem; color: #6b7280;">HR-Reifegrad</div>
                            <div id="maturityLevel">Anf√§nger</div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 0.75rem; margin-top: 1rem; flex-wrap: wrap;">
                    <button onclick="exportAllToExcel()" style="background: #217346; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; flex: 1; min-width: 120px;">
                        <i class="fas fa-file-excel"></i> Excel
                    </button>
                    <button onclick="exportAllToPDF()" style="background: #dc3545; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; flex: 1; min-width: 120px;">
                        <i class="fas fa-file-pdf"></i> PDF
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Header -->
        <div class="workflow-header">
            <div class="smart-badge">
                <i class="fas fa-graduation-cap ai-icon"></i>
                Harvard & MIT Methodologie
            </div>
            <h1><i class="fas fa-chart-line"></i> HR-Strategieentwicklung</h1>
            <p>Entwickeln Sie eine umfassende HR-Strategie mit bew√§hrten Harvard & MIT Methoden. Strategische Verankerung, Wertsch√∂pfung und ethische Implementierung f√ºr nachhaltigen Erfolg.</p>
        </div>
        
        <!-- Progress Indicator -->
        <div class="workflow-progress">
            <div class="progress-step active" data-step="0">
                <i class="fas fa-search"></i>
                <span>Ist-Analyse</span>
            </div>
            <div class="progress-step" data-step="1">
                <i class="fas fa-eye"></i>
                <span>Vision</span>
            </div>
            <div class="progress-step" data-step="2">
                <i class="fas fa-chart-bar"></i>
                <span>Wertsch√∂pfung</span>
            </div>
            <div class="progress-step" data-step="3">
                <i class="fas fa-database"></i>
                <span>Datenbasis</span>
            </div>
            <div class="progress-step" data-step="4">
                <i class="fas fa-users"></i>
                <span>Organisation</span>
            </div>
            <div class="progress-step" data-step="5">
                <i class="fas fa-shield-alt"></i>
                <span>Ethik</span>
            </div>
            <div class="progress-step" data-step="6">
                <i class="fas fa-expand-arrows-alt"></i>
                <span>Skalierung</span>
            </div>
            <div class="progress-step" data-step="7">
                <i class="fas fa-sync-alt"></i>
                <span>Lernen</span>
            </div>
        </div>
        
        <!-- Step 0: HR-Reifegrad Analyse -->
        <div class="workflow-step active" data-step="0">
            <div class="step-header">
                <div class="step-number">üîç</div>
                <div class="step-title">
                    <h2>HR-Reifegrad Analyse</h2>
                    <p>Harvard & MIT Research: Systematische Bewertung der aktuellen HR-Readiness in 7 Dimensionen</p>
                </div>
            </div>
            
            <div class="step-content">
                <div class="maturity-assessment-card" style="background: #f8fafc; border-radius: 16px; padding: 2rem; margin-bottom: 2rem; border: 2px solid #3b82f6;">
                    <h3 style="color: #1f2937; margin-bottom: 1rem;">üéØ Intelligente Ist-Zustand-Bewertung</h3>
                    <p style="color: #6b7280; margin-bottom: 1.5rem;">Bewerten Sie Ihre HR-Organisation in den kritischen Dimensionen. Diese Analyse bildet die Grundlage f√ºr Ihre ma√ügeschneiderte HR-Strategie.</p>
                    
                    <div class="assessment-grid">
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('strategicAnchoring')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                                    <i class="fas fa-anchor"></i>
                                </div>
                                <div>
                                    <h4>Strategische Verankerung</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">HR als strategischer Business Partner</p>
                                </div>
                                <div style="margin-left: auto; color: #3b82f6;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="strategicAnchoringSlider" oninput="updateAssessment('strategicAnchoring', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="strategicAnchoringValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #1d4ed8; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Schwach</span>
                                    <span>Exzellent</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('valueCreation')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div>
                                    <h4>Wertsch√∂pfung & Schl√ºsselfelder</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Messbarer Beitrag zum Unternehmenserfolg</p>
                                </div>
                                <div style="margin-left: auto; color: #10b981;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="valueCreationSlider" oninput="updateAssessment('valueCreation', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="valueCreationValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #059669; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Niedrig</span>
                                    <span>Hoch</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('dataInfrastructure')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                                    <i class="fas fa-database"></i>
                                </div>
                                <div>
                                    <h4>Daten- & Infrastruktur-Basis</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Robuste HR-Datenbasis f√ºr faktenbasierte Entscheidungen</p>
                                </div>
                                <div style="margin-left: auto; color: #8b5cf6;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="dataInfrastructureSlider" oninput="updateAssessment('dataInfrastructure', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="dataInfrastructureValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #7c3aed; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Schwach</span>
                                    <span>Stark</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('organizationModel')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                                    <i class="fas fa-sitemap"></i>
                                </div>
                                <div>
                                    <h4>Organisation & HR Operating Model</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Effektive HR-Organisation f√ºr maximale Zusammenarbeit</p>
                                </div>
                                <div style="margin-left: auto; color: #f59e0b;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="organizationModelSlider" oninput="updateAssessment('organizationModel', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="organizationModelValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #d97706; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Traditionell</span>
                                    <span>Modern</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('ethicsTrust')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #ec4899, #be185d);">
                                    <i class="fas fa-balance-scale"></i>
                                </div>
                                <div>
                                    <h4>Ethik, Fairness & Vertrauen</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Ethische HR-Praktiken und Vertrauen</p>
                                </div>
                                <div style="margin-left: auto; color: #ec4899;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="ethicsTrustSlider" oninput="updateAssessment('ethicsTrust', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="ethicsTrustValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #be185d; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Unvollst√§ndig</span>
                                    <span>Vollst√§ndig</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('scalingEcosystem')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
                                    <i class="fas fa-expand-arrows-alt"></i>
                                </div>
                                <div>
                                    <h4>Skalierung & HR-√ñkosystem</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Skalierbare HR-L√∂sungen und √ñkosystem-Nutzung</p>
                                </div>
                                <div style="margin-left: auto; color: #06b6d4;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="scalingEcosystemSlider" oninput="updateAssessment('scalingEcosystem', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="scalingEcosystemValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #0891b2; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Begrenzt</span>
                                    <span>Umfassend</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-category clickable-category" onclick="openDetailAssessment('learningAdaptation')" style="cursor: pointer;">
                            <div class="category-header">
                                <div class="category-icon" style="background: linear-gradient(135deg, #14b8a6, #0d9488);">
                                    <i class="fas fa-sync-alt"></i>
                                </div>
                                <div>
                                    <h4>Kontinuierliches Lernen & Anpassung</h4>
                                    <p style="font-size: 0.875rem; color: #6b7280; margin: 0;">Lernende Organisation und kontinuierliche Verbesserung</p>
                                </div>
                                <div style="margin-left: auto; color: #14b8a6;">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="1" max="5" value="1" class="slider" id="learningAdaptationSlider" oninput="updateAssessment('learningAdaptation', this.value)" onclick="event.stopPropagation();">
                                <div class="slider-value-display" id="learningAdaptationValue" style="text-align: center; font-size: 1.25rem; font-weight: 700; color: #0d9488; margin: 0.5rem 0;">1</div>
                                <div class="slider-labels">
                                    <span>Statisch</span>
                                    <span>Agil</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 1.5rem; margin-top: 2rem; text-align: center;">
                        <h4 style="color: #1f2937; margin-bottom: 1rem;">üìä Ihre HR-Readiness Bewertung</h4>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
                            <div class="score-circle" id="overallMaturityScore" style="width: 60px; height: 60px; font-size: 1.5rem;">1.0</div>
                            <div>
                                <div style="font-size: 1.25rem; font-weight: 700; color: #1f2937;" id="maturityDescription">HR-Einsteiger</div>
                                <div style="font-size: 0.875rem; color: #6b7280;" id="maturityRecommendation">Fokus auf Grundlagen und strategische Verankerung</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Step 1: Vision & strategische Verankerung -->
        <div class="workflow-step" id="step1" data-step="1" style="display: none;">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">Vision & strategische Verankerung</div>
            <div class="step-description">
                <p>Entwickeln Sie eine klare HR-Vision, die als strategischer Business Partner agiert und die Unternehmensstrategie aktiv mitgestaltet.</p>
            <div class="harvard-mit-section">
                <h4><i class="fas fa-graduation-cap"></i> Harvard & MIT Methodologie</h4>
                <div class="methodology">
                    <i class="fas fa-university"></i>
                    <strong>Harvard:</strong> HR muss als strategischer Business Partner agieren und die Unternehmensstrategie aktiv mitgestalten (Porter, Christensen).
                </div>
                    <i class="fas fa-cogs"></i>
                    <strong>MIT:</strong> HR als Treiber von Organisational Agility ‚Äì Menschen und Organisationen werden auf digitale, globale und disruptive M√§rkte vorbereitet.
                
                <div class="practical-implementation">
                    <h5>üëâ Praktische Umsetzung:</h5>
                    <ul>
                        <li>Leitbild entwickeln: ‚ÄûPeople Strategy as Business Strategy"</li>
                        <li>HR-Strategie mit Unternehmenszielen verkn√ºpfen (Wachstum, Innovation, Nachhaltigkeit, Internationalisierung)</li>
                        <li>Stakeholder (Gesch√§ftsf√ºhrung, F√ºhrungskr√§fte, Betriebsrat) fr√ºh einbinden</li>
                    </ul>
            <div class="form-group">
                <label for="companyVision">Unternehmensvision</label>
                <textarea id="companyVision" rows="3" placeholder="Beschreiben Sie Ihre Unternehmensvision und -ziele..."></textarea>
                <label for="hrVision">HR-Vision</label>
                <textarea id="hrVision" rows="3" placeholder="Wie soll HR zur Unternehmensvision beitragen?"></textarea>
                <label>Strategische Ziele</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="growth" value="growth">
                        <label for="growth">Wachstum & Expansion</label>
                    </div>
                        <input type="checkbox" id="innovation" value="innovation">
                        <label for="innovation">Innovation & Digitalisierung</label>
                        <input type="checkbox" id="sustainability" value="sustainability">
                        <label for="sustainability">Nachhaltigkeit & ESG</label>
                        <input type="checkbox" id="internationalization" value="internationalization">
                        <label for="internationalization">Internationalisierung</label>
                        <input type="checkbox" id="digitalization" value="digitalization">
                        <label for="digitalization">Digitale Transformation</label>
                        <input type="checkbox" id="agility" value="agility">
                        <label for="agility">Organisational Agility</label>
        <!-- Step 2: Wertsch√∂pfung & Schl√ºsselfelder -->
        <div class="workflow-step" id="step2" data-step="2" style="display: none;">
                <div class="step-number">2</div>
                <div class="step-title">Wertsch√∂pfung & Schl√ºsselfelder der HR-Strategie</div>
                <p>Definieren Sie die strategischen Handlungsfelder, die messbar zum Unternehmenserfolg beitragen.</p>
                    <strong>Harvard:</strong> Fokus auf den ‚ÄûReturn on People" ‚Äì wie HR messbar zum Unternehmenserfolg beitr√§gt.
                    <strong>MIT:</strong> Analytische Szenarien & Datenorientierung ‚Äì HR entscheidet faktenbasiert statt rein erfahrungsbasiert.
                <label>Strategische Handlungsfelder</label>
                        <input type="checkbox" id="talentAcquisition" value="talent-acquisition">
                        <label for="talentAcquisition">Talent Acquisition & Employer Branding</label>
                        <input type="checkbox" id="learningDevelopment" value="learning-development">
                        <label for="learningDevelopment">Learning & Development</label>
                        <input type="checkbox" id="employeeExperience" value="employee-experience">
                        <label for="employeeExperience">Employee Experience & Engagement</label>
                        <input type="checkbox" id="workforcePlanning" value="workforce-planning">
                        <label for="workforcePlanning">Workforce Planning</label>
                        <input type="checkbox" id="diversityInclusion" value="diversity-inclusion">
                        <label for="diversityInclusion">Diversity, Equity & Inclusion</label>
                        <input type="checkbox" id="performanceManagement" value="performance-management">
                        <label for="performanceManagement">Performance Management</label>
                <label for="keyMetrics">Wichtige HR-Metriken</label>
                <textarea id="keyMetrics" rows="4" placeholder="Definieren Sie die wichtigsten KPIs f√ºr Ihre HR-Strategie..."></textarea>
        <!-- Step 3: Daten- und Infrastruktur-Basis -->
        <div class="workflow-step" id="step3" data-step="3" style="display: none;">
                <div class="step-number">3</div>
                <div class="step-title">Daten- und Infrastruktur-Basis</div>
                <p>Bauen Sie eine robuste HR-Datenbasis auf f√ºr faktenbasierte Entscheidungen.</p>
                    <strong>Harvard:</strong> Menschenbezogene Daten als strategisches Asset.
                    <strong>MIT:</strong> Fokus auf Workforce Analytics & ‚ÄûEvidence-Based HR".
                <label>HR-Systeme & Tools</label>
                        <input type="checkbox" id="hris" value="hris">
                        <label for="hris">HRIS-Systeme (SAP SuccessFactors, Workday)</label>
                        <input type="checkbox" id="ats" value="ats">
                        <label for="ats">Applicant Tracking System (ATS)</label>
                        <input type="checkbox" id="lms" value="lms">
                        <label for="lms">Learning Management System (LMS)</label>
                        <input type="checkbox" id="surveyTools" value="survey-tools">
                        <label for="surveyTools">Umfragetools & Pulse Checks</label>
                        <input type="checkbox" id="analyticsTools" value="analytics-tools">
                        <label for="analyticsTools">People Analytics Tools</label>
                        <input type="checkbox" id="performanceTools" value="performance-tools">
                        <label for="performanceTools">Performance Management Tools</label>
                <label for="dataGovernance">Data Governance</label>
                <textarea id="dataGovernance" rows="3" placeholder="Beschreiben Sie Ihre Datenrichtlinien und -sicherheit..."></textarea>
        <!-- Step 4: Organisation & HR Operating Model -->
        <div class="workflow-step" id="step4" data-step="4" style="display: none;">
                <div class="step-number">4</div>
                <div class="step-title">Organisation & HR Operating Model</div>
                <p>Gestalten Sie Ihre HR-Organisation f√ºr maximale Effektivit√§t und Zusammenarbeit.</p>
                    <strong>Harvard:</strong> HR-Organisation muss professionalisiert werden (Center of Excellence).
                    <strong>MIT:</strong> Fokus auf Cross-Functional Collaboration ‚Äì HR arbeitet eng mit Business, IT und Operations zusammen.
                <label>Neue HR-Rollen</label>
                        <input type="checkbox" id="peopleAnalytics" value="people-analytics">
                        <label for="peopleAnalytics">People Analytics Manager</label>
                        <input type="checkbox" id="talentStrategist" value="talent-strategist">
                        <label for="talentStrategist">Talent Strategist</label>
                        <input type="checkbox" id="changeManager" value="change-manager">
                        <label for="changeManager">Change Manager</label>
                        <input type="checkbox" id="experienceDesigner" value="experience-designer">
                        <label for="experienceDesigner">Employee Experience Designer</label>
                        <input type="checkbox" id="cultureManager" value="culture-manager">
                        <label for="cultureManager">Culture & Engagement Manager</label>
                        <input type="checkbox" id="diversityManager" value="diversity-manager">
                        <label for="diversityManager">Diversity & Inclusion Manager</label>
        <!-- Step 5: Ethik, Fairness & Vertrauen -->
        <div class="workflow-step" id="step5" data-step="5" style="display: none;">
                <div class="step-number">5</div>
                <div class="step-title">Ethik, Fairness & Vertrauen</div>
                <p>Etablieren Sie ethische Grunds√§tze und Vertrauen als Basis f√ºr nachhaltige HR-Strategie.</p>
                    <strong>Harvard:</strong> HR ist Treiber von Corporate Social Responsibility und Kultur.
                    <strong>MIT:</strong> Faire und transparente Entscheidungen sind Voraussetzung f√ºr eine zukunftsf√§hige Workforce.
                <label>Ethische Grunds√§tze</label>
                        <input type="checkbox" id="fairness" value="fairness">
                        <label for="fairness">Fairness & Transparenz</label>
                        <input type="checkbox" id="diversity" value="diversity">
                        <label for="diversity">Diversity & Inclusion</label>
                        <input type="checkbox" id="privacy" value="privacy">
                        <label for="privacy">Datenschutz & Privatsph√§re</label>
                        <label for="sustainability">Nachhaltigkeit</label>
                        <input type="checkbox" id="wellbeing" value="wellbeing">
                        <label for="wellbeing">Employee Wellbeing</label>
                        <input type="checkbox" id="transparency" value="transparency">
                        <label for="transparency">Transparente Kommunikation</label>
        <!-- Step 6: Skalierung & HR-√ñkosystem -->
        <div class="workflow-step" id="step6" data-step="6" style="display: none;">
                <div class="step-number">6</div>
                <div class="step-title">Skalierung & HR-√ñkosystem</div>
                <p>Nutzen Sie externe Partnerschaften und √ñkosysteme f√ºr skalierbare HR-L√∂sungen.</p>
                    <strong>Harvard:</strong> HR muss als Teil eines gr√∂√üeren Partner- und Branchen√∂kosystems gedacht werden.
                    <strong>MIT:</strong> Offene Systeme, Plattformen und Kooperationen (Start-ups, Hochschulen, Netzwerke).
                <label>√ñkosystem-Partnerschaften</label>
                        <input type="checkbox" id="universities" value="universities">
                        <label for="universities">Universit√§ten & Business Schools</label>
                        <input type="checkbox" id="startups" value="startups">
                        <label for="startups">HR-Tech Start-ups</label>
                        <input type="checkbox" id="consultants" value="consultants">
                        <label for="consultants">Externe Berater</label>
                        <input type="checkbox" id="networks" value="networks">
                        <label for="networks">HR-Netzwerke</label>
                        <input type="checkbox" id="platforms" value="platforms">
                        <label for="platforms">Talent-Plattformen</label>
                        <input type="checkbox" id="benchmarks" value="benchmarks">
                        <label for="benchmarks">Benchmarking-Partner</label>
        <!-- Step 7: Kontinuierliches Lernen & Anpassung -->
        <div class="workflow-step" id="step7" data-step="7" style="display: none;">
                <div class="step-number">7</div>
                <div class="step-title">Kontinuierliches Lernen & Anpassung</div>
                <p>Etablieren Sie Feedback-Loops und kontinuierliche Verbesserung f√ºr Ihre HR-Strategie.</p>
                    <strong>Harvard:</strong> Strategie ist ein dynamischer Prozess (Disruption, ‚ÄûInnovator's Dilemma").
                    <strong>MIT:</strong> Living Strategy ‚Äì HR-Strategie wird iterativ angepasst.
                <label>KPI-Monitoring</label>
                        <input type="checkbox" id="turnover" value="turnover">
                        <label for="turnover">Fluktuationsraten</label>
                        <input type="checkbox" id="timeToHire" value="time-to-hire">
                        <label for="timeToHire">Time-to-Hire</label>
                        <input type="checkbox" id="engagement" value="engagement">
                        <label for="engagement">Engagement Scores</label>
                        <input type="checkbox" id="satisfaction" value="satisfaction">
                        <label for="satisfaction">Mitarbeiterzufriedenheit</label>
                        <input type="checkbox" id="development" value="development">
                        <label for="development">Entwicklungsfortschritt</label>
                        <label for="diversity">Diversity-Metriken</label>
                <label for="feedbackLoops">Feedback-Loops</label>
                <textarea id="feedbackLoops" rows="3" placeholder="Beschreiben Sie Ihre Feedback-Mechanismen..."></textarea>
                <label>Weitere eigene Angaben</label>
                <div class="custom-inputs">
                    <div class="custom-input-item">
                        <input type="text" id="customInput1" placeholder="Eigene Angabe 1">
                        <button class="btn btn-small btn-secondary" onclick="removeCustomInput(this)">
                            <i class="fas fa-trash"></i>
                        </button>
                        <input type="text" id="customInput2" placeholder="Eigene Angabe 2">
                    <button class="btn btn-primary btn-small" onclick="addCustomInput()">
                        <i class="fas fa-plus"></i> Weitere Angabe hinzuf√ºgen
                    </button>
                <label>Bewertung der HR-Strategie</label>
                <div class="rating-section">
                    <div class="rating-item">
                        <label>Strategische Verankerung (1-10):</label>
                        <div class="star-rating" data-rating="strategic-anchoring">
                            <span class="star" data-value="1">‚òÖ</span>
                            <span class="star" data-value="2">‚òÖ</span>
                            <span class="star" data-value="3">‚òÖ</span>
                            <span class="star" data-value="4">‚òÖ</span>
                            <span class="star" data-value="5">‚òÖ</span>
                            <span class="star" data-value="6">‚òÖ</span>
                            <span class="star" data-value="7">‚òÖ</span>
                            <span class="star" data-value="8">‚òÖ</span>
                            <span class="star" data-value="9">‚òÖ</span>
                            <span class="star" data-value="10">‚òÖ</span>
                        </div>
                        <label>Datenqualit√§t (1-10):</label>
                        <div class="star-rating" data-rating="data-quality">
                        <label>Change Readiness (1-10):</label>
                        <div class="star-rating" data-rating="change-readiness">
        <!-- Export Section -->
        <div class="export-section">
            <h3><i class="fas fa-download"></i> HR-Strategie herunterladen</h3>
            <p>Ihre entwickelte HR-Strategie ist bereit! Laden Sie die Zusammenfassung herunter und implementieren Sie sie in Ihrem Unternehmen.</p>
            <div class="export-buttons">
                <a href="#" class="btn-pdf" onclick="exportHRStrategyToPDF()">
                    <i class="fas fa-file-pdf"></i> Als PDF
                </a>
                <a href="#" class="btn-excel" onclick="exportHRStrategyToExcel()">
                    <i class="fas fa-file-excel"></i> Als Excel
                <a href="#" class="btn-word" onclick="exportHRStrategyToWord()">
                    <i class="fas fa-file-word"></i> Als Word
        <!-- Navigation Buttons -->
        <div style="text-align: center; margin-top: 2rem;">
            <button class="btn btn-secondary" id="prevBtn" onclick="changeStep(-1)" style="display: none;">
                <i class="fas fa-arrow-left"></i> Zur√ºck
            </button>
            <button class="btn btn-success" id="nextBtn" onclick="changeStep(1)">
                Weiter <i class="fas fa-arrow-right"></i>
    </div>
<!-- Auth Modals -->
<div id="authModalsContainer"></div>
<script>
        // Old variables removed - using new assessment system below
    // Load auth modals
    async function loadAuthModals() {
        try {
            const response = await fetch('components/auth-modals.html');
            const html = await response.text();
            document.getElementById('authModalsContainer').innerHTML = html;
        } catch (error) {
            console.error('Error loading auth modals:', error);
    }
    // AWS User System Functions
    function loginUser() {
        const modal = document.getElementById('loginModal');
        if (modal) {
            modal.style.display = 'flex';
    function logoutUser() {
        if (window.awsAuth) {
            window.awsAuth.signOut().then(() => {
                console.log('Erfolgreich abgemeldet');
            }).catch(error => {
                console.error('Fehler beim Abmelden:', error);
            });
    // Initialize auth system
    document.addEventListener('DOMContentLoaded', async function() {
        await loadAuthModals();
        // Check user status
            window.awsAuth.checkUserStatus();
    });
    function changeStep(direction) {
            const prevStep = currentStep;
            currentStep += direction;
            if (currentStep < 1) currentStep = 1;
            if (currentStep > totalSteps) currentStep = totalSteps;
            if (currentStep !== prevStep) {
                updateStepDisplay();
                updateProgress();
                updateNavigation();
        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.workflow-step').forEach(step => {
                step.style.display = 'none';
            });
            // Show current step
            const currentStepElement = document.querySelector(`.workflow-step[data-step="${currentStep}"]`);
            if (currentStepElement) {
                currentStepElement.style.display = 'block';
            }
        function updateProgress() {
                const progressStep = document.getElementById(`step${i}-progress`);
                if (i < currentStep) {
                    progressStep.classList.remove('active');
                    progressStep.classList.add('completed');
                } else if (i === currentStep) {
                    progressStep.classList.remove('completed');
                    progressStep.classList.add('active');
                } else {
                    progressStep.classList.remove('active', 'completed');
                }
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const currentStepSpan = document.getElementById('currentStep');
            const totalStepsSpan = document.getElementById('totalSteps');
            
            if (prevBtn) prevBtn.disabled = currentStep === 0;
            if (nextBtn) {
                nextBtn.innerHTML = currentStep === totalSteps - 1 
                    ? '<i class="fas fa-download"></i> Strategie generieren'
                    : 'Weiter <i class="fas fa-arrow-right"></i>';
            }
            if (currentStepSpan) currentStepSpan.textContent = currentStep + 1;
            if (totalStepsSpan) totalStepsSpan.textContent = totalSteps;
        }
        
        function generateStrategy() {
            // Collect all form data
            const strategyData = {
                companyVision: document.getElementById('companyVision').value || '',
                hrVision: document.getElementById('hrVision').value || '',
                strategicGoals: Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                    .map(cb => cb.value),
                keyMetrics: document.getElementById('keyMetrics').value || '',
                dataGovernance: document.getElementById('dataGovernance').value || '',
                feedbackLoops: document.getElementById('feedbackLoops').value || '',
                timestamp: new Date().toISOString()
            };
            console.log('HR Strategy Data:', strategyData);
            alert('‚úÖ HR-Strategie erfolgreich generiert! Sie k√∂nnen jetzt die Zusammenfassung herunterladen.');
        function exportHRStrategyToPDF() {
            const strategyData = collectStrategyData();
            const content = generateStrategyContent(strategyData);
            // Create PDF content
            const pdfContent = `
# HR-Strategie f√ºr ${strategyData.company || 'Ihr Unternehmen'}
## Vision & strategische Verankerung
${strategyData.companyVision || 'Nicht definiert'}
## HR-Vision
${strategyData.hrVision || 'Nicht definiert'}
## Strategische Ziele
${strategyData.strategicGoals.join(', ') || 'Keine Ziele definiert'}
## Wichtige Metriken
${strategyData.keyMetrics || 'Nicht definiert'}
## Data Governance
${strategyData.dataGovernance || 'Nicht definiert'}
## Feedback-Loops
${strategyData.feedbackLoops || 'Nicht definiert'}
Erstellt am: ${strategyData.timestamp}
            `;
            downloadFile(pdfContent, 'hr-strategie.pdf', 'application/pdf');
        function exportHRStrategyToExcel() {
            downloadFile(content, 'hr-strategie.xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
        function exportHRStrategyToWord() {
            downloadFile(content, 'hr-strategie.docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document');
        function collectStrategyData() {
            return {
                company: 'Ihr Unternehmen',
        function generateStrategyContent(data) {
            return `# HR-Strategie f√ºr ${data.company}
## 1. Vision & strategische Verankerung
**Unternehmensvision:** ${data.companyVision || 'Nicht definiert'}
**HR-Vision:** ${data.hrVision || 'Nicht definiert'}
## 2. Strategische Ziele
${data.strategicGoals.join(', ') || 'Keine Ziele definiert'}
## 3. Wichtige Metriken
${data.keyMetrics || 'Nicht definiert'}
## 4. Data Governance
${data.dataGovernance || 'Nicht definiert'}
## 5. Feedback-Loops
${data.feedbackLoops || 'Nicht definiert'}
---
Erstellt am: ${data.timestamp}
Entwickelt mit Harvard & MIT Methodologie`;
        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert(`‚úÖ ${filename} erfolgreich heruntergeladen!`);
        function addCustomInput() {
            const customInputs = document.querySelector('.custom-inputs');
            const inputCount = customInputs.querySelectorAll('.custom-input-item').length;
            const newInputId = `customInput${inputCount + 1}`;
            const newInputItem = document.createElement('div');
            newInputItem.className = 'custom-input-item';
            newInputItem.innerHTML = `
                <input type="text" id="${newInputId}" placeholder="Eigene Angabe ${inputCount + 1}">
                <button class="btn btn-small btn-secondary" onclick="removeCustomInput(this)">
                    <i class="fas fa-trash"></i>
                </button>
            const addButton = customInputs.querySelector('button');
            customInputs.insertBefore(newInputItem, addButton);
        function removeCustomInput(button) {
            button.parentElement.remove();
        // Initialize star ratings
        document.addEventListener('DOMContentLoaded', function() {
            const starRatings = document.querySelectorAll('.star-rating');
            starRatings.forEach(rating => {
                const stars = rating.querySelectorAll('.star');
                stars.forEach((star, index) => {
                    star.addEventListener('click', function() {
                        const value = parseInt(this.dataset.value);
                        setRating(rating, value);
                    });
                    
                    star.addEventListener('mouseenter', function() {
                        highlightStars(rating, value);
                });
                rating.addEventListener('mouseleave', function() {
                    const currentRating = rating.dataset.currentRating || 0;
                    highlightStars(rating, currentRating);
        });
        function setRating(rating, value) {
            rating.dataset.currentRating = value;
            highlightStars(rating, value);
            console.log(`Rating set to ${value} for ${rating.dataset.rating}`);
        function highlightStars(rating, value) {
            const stars = rating.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < value) {
                    star.classList.add('active');
                    star.classList.remove('active');
        // HR-Readiness Assessment System
        let hrMaturityData = {
            strategicAnchoring: 1,
            valueCreation: 1,
            dataInfrastructure: 1,
            organizationModel: 1,
            ethicsTrust: 1,
            scalingEcosystem: 1,
            learningAdaptation: 1
        };
        let overallHrMaturity = 1.0;
        let currentStep = 0;
        const totalSteps = 8; // 0 = Assessment, 1-7 = Workflow steps
        
        // Sidebar functionality - Functions already defined in head, just keep local reference
        function toggleSidebar() {
            if (window.toggleSidebar) {
                window.toggleSidebar();
            } else {
                console.error('window.toggleSidebar not available');
            }
        }
        
        // Assessment functions
        function updateAssessment(dimension, value) {
            hrMaturityData[dimension] = parseInt(value);
            const valueDisplay = document.getElementById(`${dimension}Value`);
            if (valueDisplay) {
                valueDisplay.textContent = value;
            }
            calculateOverallMaturity();
            updateMaturityDisplay();
        }
        
        function calculateOverallMaturity() {
            const sum = Object.values(hrMaturityData).reduce((acc, val) => acc + val, 0);
            overallHrMaturity = (sum / Object.keys(hrMaturityData).length).toFixed(1);
        }
        
        function updateMaturityDisplay() {
            const circle = document.getElementById('overallMaturityScore');
            const description = document.getElementById('maturityDescription');
            const recommendation = document.getElementById('maturityRecommendation');
            const sidebarCircle = document.getElementById('maturityCircle');
            const sidebarLevel = document.getElementById('maturityLevel');
            
            if (circle) circle.textContent = overallHrMaturity;
            
            let level, desc, rec, colorClass;
            if (overallHrMaturity <= 1.5) {
                level = 'Anf√§nger';
                desc = 'HR-Einsteiger';
                rec = 'Fokus auf Grundlagen und strategische Verankerung';
                colorClass = 'score-beginner';
            } else if (overallHrMaturity <= 2.5) {
                level = 'Aufsteiger';
                desc = 'HR-Aufsteiger';
                rec = 'Grundlagen vorhanden, weitere Entwicklung n√∂tig';
                colorClass = 'score-intermediate';
            } else if (overallHrMaturity <= 3.5) {
                level = 'Fortgeschritten';
                desc = 'HR-Fortgeschritten';
                rec = 'Solide Basis, Optimierung m√∂glich';
                colorClass = 'score-advanced';
            } else if (overallHrMaturity <= 4.5) {
                level = 'Experte';
                desc = 'HR-Experte';
                rec = 'Hohe Reife, kleine Verbesserungen m√∂glich';
                colorClass = 'score-expert';
            } else {
                level = 'Exzellent';
                desc = 'HR-Exzellenz';
                rec = 'Hervorragende HR-Organisation';
                colorClass = 'score-expert';
            }
            
            if (description) description.textContent = desc;
            if (recommendation) recommendation.textContent = rec;
            if (sidebarCircle) {
                sidebarCircle.textContent = Math.round(overallHrMaturity);
                sidebarCircle.className = `score-circle ${colorClass}`;
            }
            if (sidebarLevel) sidebarLevel.textContent = level;
        }
        
        // openDetailAssessment already defined in head, just keep local reference
        function openDetailAssessment(dimension) {
            if (window.openDetailAssessment) {
                window.openDetailAssessment(dimension);
            } else {
                console.error('window.openDetailAssessment not available');
            }
        }
        
        // Verify functions are still available
        console.log('Functions verified - toggleSidebar:', typeof window.toggleSidebar, 'openDetailAssessment:', typeof window.openDetailAssessment);
        
        // Navigation functions
        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                updateProgress();
                saveProgress();
            } else {
                generateStrategy();
            }
        }
        
        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateProgress();
            }
        }
        
        function updateProgress() {
            // Update progress indicators
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < currentStep) {
                    step.classList.add('completed');
                } else if (index === currentStep) {
                    step.classList.add('active');
                }
            });
            
            // Update step visibility
            document.querySelectorAll('.workflow-step').forEach((step, index) => {
                step.classList.remove('active');
                step.style.display = 'none';
                if (index === currentStep) {
                    step.classList.add('active');
                    step.style.display = 'block';
                }
            });
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            if (prevBtn) prevBtn.disabled = currentStep === 0;
            if (nextBtn) {
                nextBtn.textContent = currentStep === totalSteps - 1 ? 'Strategie generieren' : 'Weiter';
            }
            
            // Update sidebar progress
            updateOverallProgress();
        }
        
        function updateOverallProgress() {
            const progress = ((currentStep + 1) / totalSteps) * 100;
            const progressFill = document.getElementById('overallProgress');
            const progressText = document.getElementById('progressText');
            if (progressFill) progressFill.style.width = `${progress}%`;
            if (progressText) progressText.textContent = `${Math.round(progress)}% abgeschlossen`;
        }
        
        function saveProgress() {
            const progressData = {
                currentStep: currentStep,
                hrMaturityData: hrMaturityData,
                overallMaturity: overallHrMaturity,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('hrStrategieWorkflow', JSON.stringify(progressData));
        }
        
        function loadProgress() {
            const saved = localStorage.getItem('hrStrategieWorkflow');
            if (saved) {
                const data = JSON.parse(saved);
                currentStep = data.currentStep || 0;
                if (data.hrMaturityData) {
                    hrMaturityData = data.hrMaturityData;
                    Object.keys(hrMaturityData).forEach(dimension => {
                        const slider = document.getElementById(`${dimension}Slider`);
                        const valueDisplay = document.getElementById(`${dimension}Value`);
                        if (slider) slider.value = hrMaturityData[dimension];
                        if (valueDisplay) valueDisplay.textContent = hrMaturityData[dimension];
                    });
                }
                calculateOverallMaturity();
                updateMaturityDisplay();
                updateProgress();
            }
        }
        
        function generateStrategy() {
            // Generate final HR strategy
            alert('HR-Strategie wird generiert...');
        }
        
        // Export functions
        let workflowExporter = null;
        
        async function exportAllToExcel() {
            if (!workflowExporter) {
                workflowExporter = new AssessmentExporter();
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            const data = prepareCompleteExportData();
            await workflowExporter.exportToExcel(data, `HR-Strategie-Gesamt-Assessment-${new Date().toISOString().split('T')[0]}`);
        }
        
        async function exportAllToPDF() {
            if (!workflowExporter) {
                workflowExporter = new AssessmentExporter();
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            const data = prepareCompleteExportData();
            await workflowExporter.exportToPDF(data, `HR-Strategie-Gesamt-Assessment-${new Date().toISOString().split('T')[0]}`);
        }
        
        function prepareCompleteExportData() {
            return {
                overall: overallHrMaturity,
                dimensions: {
                    strategicAnchoring: { aggregated: hrMaturityData.strategicAnchoring },
                    valueCreation: { aggregated: hrMaturityData.valueCreation },
                    dataInfrastructure: { aggregated: hrMaturityData.dataInfrastructure },
                    organizationModel: { aggregated: hrMaturityData.organizationModel },
                    ethicsTrust: { aggregated: hrMaturityData.ethicsTrust },
                    scalingEcosystem: { aggregated: hrMaturityData.scalingEcosystem },
                    learningAdaptation: { aggregated: hrMaturityData.learningAdaptation }
                },
                maturityData: hrMaturityData,
                timestamp: new Date().toISOString()
            };
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            calculateOverallMaturity();
            updateMaturityDisplay();
        updateProgress();
            workflowExporter = new AssessmentExporter();
            
            // Setup click handlers for assessment categories as fallback
            const categories = document.querySelectorAll('.clickable-category');
            console.log('Found', categories.length, 'clickable categories');
            
            categories.forEach((category, index) => {
                // Extract dimension from onclick and store in data attribute
                const onclick = category.getAttribute('onclick');
                const dimensionMatch = onclick ? onclick.match(/openDetailAssessment\('([^']+)'\)/) : null;
                const dimension = dimensionMatch ? dimensionMatch[1] : category.getAttribute('data-dimension');
                
                if (dimension) {
                    category.setAttribute('data-dimension', dimension);
                    console.log(`Category ${index + 1} dimension:`, dimension);
                }
                
                category.addEventListener('click', function(e) {
                    // Don't trigger if clicking on slider, slider container, or slider labels
                    const clickedElement = e.target;
                    if (clickedElement.tagName === 'INPUT' || 
                        clickedElement.type === 'range' ||
                        clickedElement.closest('.slider-container') || 
                        clickedElement.closest('input[type="range"]') ||
                        clickedElement.closest('.slider-labels') ||
                        clickedElement.closest('.slider-value-display')) {
                        console.log('Click on slider, ignoring');
                        return;
                    }
                    
                    // Get dimension from data attribute or onclick
                    const dim = this.getAttribute('data-dimension') || 
                               (this.getAttribute('onclick')?.match(/openDetailAssessment\('([^']+)'\)/)?.[1]);
                    
                    if (dim) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Opening detail assessment for:', dim);
                        if (window.openDetailAssessment) {
                            window.openDetailAssessment(dim);
                        } else {
                            console.error('window.openDetailAssessment is not defined!');
                        }
                    } else {
                        console.warn('No dimension found for category');
                    }
                }, true); // Use capture phase to ensure it fires
            });
            
            // Ensure sidebar toggle button works
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    window.toggleSidebar();
                });
            }
            
            console.log('‚úÖ HR-Strategy Workflow initialized successfully');
        });
    </script>
    
    <!-- Assessment Export Script -->
    <script src="js/assessment-export.js"></script>

    <!-- AWS Configuration -->
    <script>
        window.AWS_CONFIG = {
            region: 'eu-central-1',
            userPoolId: 'eu-central-1_8gP4gLK9r',
            clientId: '7kc5tt6a23fgh53d60vkefm812',
            apiBaseUrl: 'https://of2iwj7h2c.execute-api.eu-central-1.amazonaws.com/prod',
            dynamoDB: {
                tableName: 'mawps-user-profiles',
                region: 'eu-central-1'
            },
            s3: {
                bucket: 'mawps-user-files-1760106396',
                region: 'eu-central-1'
            }
        };
    </script>
    
    <!-- AWS SDK -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1490.0.min.js"></script>
    
    <!-- Auth & Progress Tracking -->
    <script src="/js/aws-profile-api.js"></script>
    <script src="/js/real-user-auth-system.js?v=20250116"></script>
    <script src="/js/user-progress-tracker.js"></script>
    <script src="/js/personality-auth-integration.js"></script>
</body>
</html>
