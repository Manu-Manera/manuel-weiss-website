<div class="section-header">
    <h2>üë§ Website-Benutzer Verwaltung</h2>
    <p>Verwalte Website-Benutzer (normale User, nicht Admin)</p>
</div>

<div class="section-toolbar">
    <div class="toolbar-left">
        <button class="btn btn-primary" id="btn-create-website-user">
            <i class="fas fa-user-plus"></i>
            Neuen Website-Benutzer erstellen
        </button>
        <button class="btn btn-outline" id="btn-refresh-website-users">
            <i class="fas fa-sync"></i>
            Liste aktualisieren
        </button>
    </div>
    <div class="toolbar-right">
        <input type="search" class="search-input" id="search-website-users" placeholder="User suchen...">
    </div>
</div>

<!-- Website-User Liste -->
<div class="website-users-section" style="margin-top: 2rem;">
    <div class="section-card">
        <h3>Website-Benutzer Liste</h3>
        <div id="website-users-list" class="users-list">
            <div class="loading-placeholder" style="text-align: center; padding: 2rem;">
                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #667eea;"></i>
                <p>Lade Website-Benutzer...</p>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Neuen Website-Benutzer erstellen -->
<div class="modal" id="modal-create-website-user">
    <div class="modal-content">
        <div class="modal-header">
            <h3>
                <i class="fas fa-user-plus" style="margin-right: 0.5rem; color: #667eea;"></i>
                Neuen Website-Benutzer erstellen
            </h3>
            <button class="modal-close" data-dismiss="modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="form-create-website-user">
                <div class="form-group">
                    <label for="website-user-email">
                        <i class="fas fa-envelope"></i> E-Mail-Adresse *
                    </label>
                    <input 
                        type="email" 
                        id="website-user-email" 
                        name="email" 
                        required
                        placeholder="user@example.com"
                        autocomplete="email"
                    >
                    <small class="form-hint">Die E-Mail-Adresse wird als Username verwendet</small>
                </div>
                
                <div class="form-group">
                    <label for="website-user-password">
                        <i class="fas fa-lock"></i> Passwort *
                    </label>
                    <input 
                        type="password" 
                        id="website-user-password" 
                        name="password" 
                        required
                        placeholder="Mindestens 8 Zeichen"
                        autocomplete="new-password"
                        minlength="8"
                    >
                    <small class="form-hint">Mindestens 8 Zeichen, Gro√ü-/Kleinbuchstaben, Zahlen. Das Passwort wird sofort gesetzt.</small>
                </div>
                
                <div class="form-group">
                    <label for="website-user-name">
                        <i class="fas fa-user"></i> Name (optional)
                    </label>
                    <input 
                        type="text" 
                        id="website-user-name" 
                        name="name" 
                        placeholder="Max Mustermann"
                    >
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input 
                            type="checkbox" 
                            id="website-user-send-email" 
                            name="sendEmail"
                        >
                        <span>Willkommens-E-Mail senden (optional)</span>
                    </label>
                    <small class="form-hint">Wenn aktiviert, wird eine E-Mail mit tempor√§rem Passwort gesendet. Da wir das Passwort direkt setzen, ist dies optional.</small>
                </div>
                
                <div class="info-box" style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0; color: #1e40af; font-size: 0.875rem;">
                        <i class="fas fa-info-circle" style="margin-right: 0.5rem;"></i>
                        <strong>Hinweis:</strong> Dieser User wird als normaler Website-Benutzer erstellt und hat keine Admin-Rechte.
                    </p>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">
                        Abbrechen
                    </button>
                    <button type="submit" class="btn btn-primary" id="btn-submit-create-website-user">
                        <i class="fas fa-user-plus"></i>
                        User erstellen
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: User bearbeiten -->
<div class="modal" id="modal-edit-website-user">
    <div class="modal-content">
        <div class="modal-header">
            <h3>
                <i class="fas fa-user-edit" style="margin-right: 0.5rem; color: #667eea;"></i>
                User bearbeiten
            </h3>
            <button class="modal-close" data-dismiss="modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="form-edit-website-user">
                <input type="hidden" id="edit-user-username" name="username">
                
                <div class="form-group">
                    <label for="edit-user-email">
                        <i class="fas fa-envelope"></i> E-Mail-Adresse *
                    </label>
                    <input 
                        type="email" 
                        id="edit-user-email" 
                        name="email" 
                        required
                        placeholder="user@example.com"
                        autocomplete="email"
                    >
                    <small class="form-hint">Die E-Mail-Adresse wird als Username verwendet</small>
                </div>
                
                <div class="form-group">
                    <label for="edit-user-name">
                        <i class="fas fa-user"></i> Name
                    </label>
                    <input 
                        type="text" 
                        id="edit-user-name" 
                        name="name" 
                        placeholder="Max Mustermann"
                    >
                </div>
                
                <div class="form-group">
                    <label for="edit-user-status">
                        <i class="fas fa-info-circle"></i> Status
                    </label>
                    <select id="edit-user-status" name="status" class="form-control">
                        <option value="CONFIRMED">Best√§tigt</option>
                        <option value="UNCONFIRMED">Nicht best√§tigt</option>
                        <option value="FORCE_CHANGE_PASSWORD">Passwort √§ndern erforderlich</option>
                        <option value="RESET_REQUIRED">Reset erforderlich</option>
                    </select>
                    <small class="form-hint">Status des Benutzers im System</small>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input 
                            type="checkbox" 
                            id="edit-user-email-verified" 
                            name="emailVerified"
                        >
                        <span>E-Mail-Adresse verifiziert</span>
                    </label>
                </div>
                
                <div class="info-box" style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0; color: #92400e; font-size: 0.875rem;">
                        <i class="fas fa-info-circle" style="margin-right: 0.5rem;"></i>
                        <strong>Hinweis:</strong> √Ñnderungen an der E-Mail-Adresse √§ndern auch den Username. Der User muss sich danach mit der neuen E-Mail-Adresse anmelden.
                    </p>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">
                        Abbrechen
                    </button>
                    <button type="submit" class="btn btn-primary" id="btn-submit-edit-website-user">
                        <i class="fas fa-save"></i>
                        √Ñnderungen speichern
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: Passwort zur√ºcksetzen -->
<div class="modal" id="modal-reset-password-website-user">
    <div class="modal-content">
        <div class="modal-header">
            <h3>
                <i class="fas fa-key" style="margin-right: 0.5rem; color: #667eea;"></i>
                Passwort zur√ºcksetzen
            </h3>
            <button class="modal-close" data-dismiss="modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="form-reset-password-website-user">
                <input type="hidden" id="reset-password-username" name="username">
                
                <p>M√∂chten Sie das Passwort f√ºr <strong id="reset-password-email"></strong> zur√ºcksetzen?</p>
                
                <div class="form-group">
                    <label for="reset-password-new">
                        <i class="fas fa-lock"></i> Neues Passwort *
                    </label>
                    <input 
                        type="password" 
                        id="reset-password-new" 
                        name="password" 
                        required
                        placeholder="Mindestens 8 Zeichen"
                        autocomplete="new-password"
                        minlength="8"
                    >
                    <small class="form-hint">Mindestens 8 Zeichen, Gro√ü-/Kleinbuchstaben, Zahlen</small>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-label">
                        <input 
                            type="checkbox" 
                            id="reset-password-temporary" 
                            name="temporary"
                        >
                        <span>Tempor√§res Passwort (User muss es bei n√§chster Anmeldung √§ndern)</span>
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" data-dismiss="modal">
                        Abbrechen
                    </button>
                    <button type="submit" class="btn btn-primary" id="btn-submit-reset-password">
                        <i class="fas fa-key"></i>
                        Passwort zur√ºcksetzen
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: User l√∂schen best√§tigen -->
<div class="modal" id="modal-delete-website-user">
    <div class="modal-content">
        <div class="modal-header">
            <h3>
                <i class="fas fa-exclamation-triangle" style="margin-right: 0.5rem; color: #ef4444;"></i>
                User l√∂schen
            </h3>
            <button class="modal-close" data-dismiss="modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p>M√∂chten Sie den User <strong id="delete-user-email"></strong> wirklich l√∂schen?</p>
            <p style="color: #ef4444; font-size: 0.875rem; margin-top: 1rem;">
                <i class="fas fa-exclamation-circle"></i>
                <strong>Warnung:</strong> Diese Aktion kann nicht r√ºckg√§ngig gemacht werden. Alle Daten des Users werden gel√∂scht.
            </p>
            <div class="form-actions">
                <button type="button" class="btn btn-outline" data-dismiss="modal">
                    Abbrechen
                </button>
                <button type="button" class="btn btn-danger" id="btn-confirm-delete-website-user">
                    <i class="fas fa-trash"></i>
                    Ja, User l√∂schen
                </button>
            </div>
        </div>
    </div>
</div>

