<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datenqualität & -verfügbarkeit - KI-Readiness Assessment - Manuel Weiss</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Detaillierte Bewertung der Datenqualität und -verfügbarkeit für KI-Readiness in HR. Wissenschaftlich fundierte Kriterien basierend auf Stanford Research.">
    <meta name="keywords" content="Datenqualität, HR-Daten, KI-Readiness, Datenverfügbarkeit, Data Quality Assessment">
    <meta name="author" content="Manuel Weiss">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Custom Styles for Detail Assessment -->
    <link rel="stylesheet" href="css/ki-assessment-detail.css">
    <style>
        .detail-assessment-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .detail-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .detail-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        
        .detail-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-4px);
        }
        
        .criterion-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .criterion-card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }
        
        .criterion-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .criterion-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .criterion-title-section {
            flex: 1;
        }
        
        .criterion-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .criterion-description {
            color: #6b7280;
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }
        
        .criterion-examples {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            margin-top: 1rem;
        }
        
        .criterion-examples h5 {
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .criterion-examples ul {
            margin: 0;
            padding-left: 1.5rem;
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .criterion-examples li {
            margin-bottom: 0.25rem;
        }
        
        .slider-section {
            margin-top: 1.5rem;
        }
        
        .slider-wrapper {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .slider-labels-top {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .detail-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .detail-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        
        .detail-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
        }
        
        .detail-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        
        .detail-slider::-moz-range-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.6);
        }
        
        .sub-criterion-slider::-webkit-slider-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .sub-criterion-slider::-moz-range-thumb {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .slider-value-display {
            text-align: center;
            font-size: 1.25rem;
            font-weight: 700;
            color: #667eea;
            margin-top: 0.5rem;
        }
        
        .sub-criterion-value {
            color: #764ba2;
        }
        
        .criterion-average-value {
            color: #764ba2;
        }
        
        .slider-scale {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #9ca3af;
            margin-top: 0.25rem;
        }
        
        .aggregated-score {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            margin-top: 2rem;
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3);
        }
        
        .aggregated-score h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .score-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .score-circle-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 800;
            backdrop-filter: blur(10px);
        }
        
        .score-description {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .save-button {
            display: block;
            width: 100%;
            padding: 1rem 2rem;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        
        @media (max-width: 768px) {
            .detail-header h1 {
                font-size: 2rem;
            }
            
            .criterion-card {
                padding: 1.5rem;
            }
            
            .criterion-title {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="manuel-weiss-photo.svg" alt="MW" class="nav-logo">
                <span class="nav-name">Manuel Weiss</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="ki-strategieentwicklung.html" class="nav-link">KI-Strategieentwicklung</a>
                <a href="index.html#about" class="nav-link">Über mich</a>
                <a href="index.html#contact" class="nav-link">Kontakt</a>
            </div>
        </div>
    </nav>
    
    <div class="detail-assessment-container">
        <div class="detail-header">
            <a href="ki-strategie-workflow.html" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Zurück zur Übersicht
            </a>
            <h1><i class="fas fa-chart-bar"></i> Datenqualität & -verfügbarkeit</h1>
            <p>Bewerten Sie die Qualität und Verfügbarkeit Ihrer HR-Daten für KI-Anwendungen. Strukturierte, integrierte und qualitativ hochwertige Daten sind die Grundlage für erfolgreiche KI-Projekte.</p>
        </div>
        
        <div id="criteriaContainer">
            <!-- Criteria will be dynamically loaded -->
        </div>
        
        <div class="aggregated-score">
            <h3>Gesamtbewertung</h3>
            <div class="score-display">
                <div class="score-circle-large" id="aggregatedScore">1.0</div>
                <div class="score-description" id="scoreDescription">Bewerten Sie die Kriterien, um Ihre Gesamtbewertung zu sehen</div>
            </div>
            <button class="save-button" onclick="saveAndReturn()">
                <i class="fas fa-save"></i> Bewertung speichern und zurück
            </button>
        </div>
    </div>
    
    <script>
        // Criteria definitions for Data Quality & Availability
        const dataQualityCriteria = [
            {
                id: 'dataCompleteness',
                title: 'Datenvollständigkeit',
                description: 'Wie vollständig sind Ihre HR-Daten? Fehlen wichtige Informationen oder Datensätze?',
                icon: 'fa-check-circle',
                subCriteria: [
                    { 
                        id: 'completeEmployeeData', 
                        title: 'Alle Mitarbeiterdaten sind vollständig erfasst',
                        description: 'Wie vollständig sind die Mitarbeiterdaten?',
                        examples: ['100% Datenabdeckung', 'Alle Pflichtfelder ausgefüllt', 'Vollständige Stammdaten']
                    },
                    { 
                        id: 'noMissingFields', 
                        title: 'Keine fehlenden Felder in kritischen Datensätzen',
                        description: 'Gibt es fehlende Felder in wichtigen Datensätzen?',
                        examples: ['Keine Lücken in kritischen Feldern', 'Datenvalidierung aktiv', 'Automatische Prüfungen']
                    },
                    { 
                        id: 'historicalData', 
                        title: 'Historische Daten sind vollständig verfügbar',
                        description: 'Wie vollständig ist der historische Datenbestand?',
                        examples: ['Vollständige Historie seit Systemstart', 'Archivierte Daten zugänglich', 'Keine Datenverluste']
                    },
                    { 
                        id: 'dataCoverage', 
                        title: 'Vollständige Abdeckung aller HR-Prozesse',
                        description: 'Werden alle HR-Prozesse durch Daten abgedeckt?',
                        examples: ['Recruiting bis Offboarding', 'Alle HR-Lifecycle-Events', 'Vollständige Prozessdaten']
                    }
                ]
            },
            {
                id: 'dataAccuracy',
                title: 'Datenqualität & Genauigkeit',
                description: 'Wie genau und fehlerfrei sind Ihre HR-Daten? Gibt es Duplikate, Inkonsistenzen oder Fehler?',
                icon: 'fa-bullseye',
                subCriteria: [
                    { 
                        id: 'noDuplicates', 
                        title: 'Keine Duplikate in Mitarbeiterdaten',
                        description: 'Gibt es Duplikate in den Mitarbeiterdaten?',
                        examples: ['Deduplizierung aktiv', 'Einheitliche Mitarbeiter-IDs', 'Automatische Duplikatserkennung']
                    },
                    { 
                        id: 'consistentData', 
                        title: 'Konsistente Dateneingabe über alle Systeme',
                        description: 'Wie konsistent ist die Dateneingabe?',
                        examples: ['Einheitliche Formate', 'Standardisierte Eingabemasken', 'Validierungsregeln']
                    },
                    { 
                        id: 'dataQualityChecks', 
                        title: 'Regelmäßige Datenqualitätsprüfungen',
                        description: 'Wie regelmäßig werden Datenqualitätsprüfungen durchgeführt?',
                        examples: ['Monatliche Qualitätsreviews', 'Automatisierte Checks', 'Datenqualitäts-Dashboards']
                    },
                    { 
                        id: 'errorCorrection', 
                        title: 'Schnelle Fehlerkorrekturprozesse',
                        description: 'Wie schnell werden Datenfehler korrigiert?',
                        examples: ['Sofortige Fehlerbenachrichtigung', 'Klarer Korrekturprozess', 'Verantwortlichkeiten definiert']
                    }
                ]
            },
            {
                id: 'dataIntegration',
                title: 'System-Integration & Datenverbindung',
                description: 'Wie gut sind Ihre HR-Systeme integriert? Gibt es eine zentrale Datenquelle oder isolierte Systeme?',
                icon: 'fa-link',
                subCriteria: [
                    { 
                        id: 'centralPlatform', 
                        title: 'Zentrale HR-Datenplattform vorhanden',
                        description: 'Gibt es eine zentrale Plattform für alle HR-Daten?',
                        examples: ['Single Source of Truth', 'Zentrales HRIS', 'Unified Data Platform']
                    },
                    { 
                        id: 'apiIntegration', 
                        title: 'APIs für System-Integration verfügbar',
                        description: 'Wie gut sind Ihre Systeme über APIs verbunden?',
                        examples: ['REST/GraphQL APIs', 'Standardisierte Schnittstellen', 'API-First Architektur']
                    },
                    { 
                        id: 'realtimeSync', 
                        title: 'Echtzeit-Synchronisation zwischen Systemen',
                        description: 'Wie aktuell sind die Daten zwischen Systemen?',
                        examples: ['Event-basierte Updates', 'Sub-Sekunden Latenz', 'Bidirektionale Sync']
                    },
                    { 
                        id: 'dataConsistency', 
                        title: 'Konsistente Daten über alle Systeme',
                        description: 'Sind die Daten über alle Systeme konsistent?',
                        examples: ['Einheitliche Datenmodelle', 'Synchronisierte Masterdaten', 'Keine Inkonsistenzen']
                    }
                ]
            },
            {
                id: 'dataStructure',
                title: 'Datenstruktur & Standardisierung',
                description: 'Wie strukturiert und standardisiert sind Ihre Daten? Folgen sie einem einheitlichen Schema?',
                icon: 'fa-sitemap',
                subCriteria: [
                    { 
                        id: 'uniformFormats', 
                        title: 'Einheitliche Datenformate und -strukturen',
                        description: 'Nutzen Sie einheitliche Datenformate?',
                        examples: ['JSON/XML Standards', 'Einheitliche Feldnamen', 'Konsistente Datentypen']
                    },
                    { 
                        id: 'standardizedCategories', 
                        title: 'Standardisierte Kategorien und Klassifikationen',
                        description: 'Gibt es standardisierte Kategorien?',
                        examples: ['ISO-Standards', 'Einheitliche Taxonomien', 'Klare Klassifikationen']
                    },
                    { 
                        id: 'dataModeling', 
                        title: 'Datenmodellierung nach Best Practices',
                        description: 'Folgt Ihre Datenmodellierung Best Practices?',
                        examples: ['Normalisierte Datenmodelle', 'Entity-Relationship-Diagramme', 'Dokumentierte Schemas']
                    },
                    { 
                        id: 'metadata', 
                        title: 'Vollständige Metadaten und Dokumentation',
                        description: 'Gibt es vollständige Metadaten?',
                        examples: ['Data Dictionary', 'Vollständige Dokumentation', 'Metadata Management']
                    }
                ]
            },
            {
                id: 'dataAccessibility',
                title: 'Datenzugriff & Verfügbarkeit',
                description: 'Wie einfach ist der Zugriff auf HR-Daten? Gibt es technische oder organisatorische Barrieren?',
                icon: 'fa-unlock',
                subCriteria: [
                    { 
                        id: 'selfServiceAccess', 
                        title: 'Selbstbedienungszugriff für autorisierte Nutzer',
                        description: 'Können Nutzer selbstständig auf Daten zugreifen?',
                        examples: ['Self-Service Portale', 'Benutzerfreundliche Interfaces', '24/7 Verfügbarkeit']
                    },
                    { 
                        id: 'fastQueries', 
                        title: 'Schnelle Datenabfragen möglich',
                        description: 'Wie schnell sind Datenabfragen?',
                        examples: ['Sub-Sekunden Antwortzeiten', 'Optimierte Queries', 'Caching-Strategien']
                    },
                    { 
                        id: 'noLongProcesses', 
                        title: 'Keine langwierigen Genehmigungsprozesse',
                        description: 'Wie schnell ist der Datenzugriff genehmigt?',
                        examples: ['Automatisierte Berechtigungen', 'Schnelle Freigaben', 'Selbstbedienung']
                    },
                    { 
                        id: 'dataPortals', 
                        title: 'Benutzerfreundliche Datenportale verfügbar',
                        description: 'Gibt es benutzerfreundliche Portale?',
                        examples: ['Intuitive Dashboards', 'Suchfunktionen', 'Filter und Sortierung']
                    }
                ]
            },
            {
                id: 'dataGovernance',
                title: 'Daten-Governance & Verantwortlichkeiten',
                description: 'Gibt es klare Verantwortlichkeiten und Prozesse für Datenqualität und -pflege?',
                icon: 'fa-shield-alt',
                subCriteria: [
                    { 
                        id: 'clearResponsibilities', 
                        title: 'Klare Datenverantwortlichkeiten definiert',
                        description: 'Gibt es klare Verantwortlichkeiten?',
                        examples: ['Data Stewards', 'Klare Rollen', 'Verantwortlichkeitsmatrix']
                    },
                    { 
                        id: 'regularReviews', 
                        title: 'Regelmäßige Datenqualitätsreviews',
                        description: 'Wie regelmäßig werden Reviews durchgeführt?',
                        examples: ['Monatliche Reviews', 'Quartalsweise Audits', 'Kontinuierliche Überwachung']
                    },
                    { 
                        id: 'documentedStandards', 
                        title: 'Dokumentierte Datenqualitätsstandards',
                        description: 'Gibt es dokumentierte Standards?',
                        examples: ['Datenqualitätsrichtlinien', 'Best Practices', 'Standard Operating Procedures']
                    },
                    { 
                        id: 'governanceFramework', 
                        title: 'Etabliertes Daten-Governance-Framework',
                        description: 'Gibt es ein Governance-Framework?',
                        examples: ['DAMA Framework', 'Strukturierte Prozesse', 'Governance Board']
                    }
                ]
            },
            {
                id: 'dataRealTime',
                title: 'Echtzeit-Datenverfügbarkeit',
                description: 'Wie aktuell sind Ihre Daten? Gibt es Echtzeit-Updates oder verzögerte Synchronisation?',
                icon: 'fa-clock',
                subCriteria: [
                    { 
                        id: 'realtimeUpdates', 
                        title: 'Echtzeit-Updates bei Datenänderungen',
                        description: 'Wie schnell werden Daten aktualisiert?',
                        examples: ['Sofortige Updates', 'Event-driven Architecture', 'Real-time Processing']
                    },
                    { 
                        id: 'minimalDelay', 
                        title: 'Minimale Verzögerung bei Datensynchronisation',
                        description: 'Wie gering ist die Verzögerung?',
                        examples: ['Sub-Sekunden Latenz', 'Streaming Data', 'Minimaler Lag']
                    },
                    { 
                        id: 'currentData', 
                        title: 'Aktuelle Daten für alle Stakeholder verfügbar',
                        description: 'Sind die Daten für alle aktuell?',
                        examples: ['Single Source of Truth', 'Konsistente Views', 'Aktuelle Informationen']
                    },
                    { 
                        id: 'dataFreshness', 
                        title: 'Hohe Datenaktualität (Data Freshness)',
                        description: 'Wie aktuell sind die Daten?',
                        examples: ['Tägliche Updates', 'Kontinuierliche Synchronisation', 'Fresh Data Indicators']
                    }
                ]
            },
            {
                id: 'dataSecurity',
                title: 'Datensicherheit & Compliance',
                description: 'Wie sicher sind Ihre HR-Daten? Gibt es angemessene Sicherheitsmaßnahmen und Compliance?',
                icon: 'fa-lock',
                subCriteria: [
                    { 
                        id: 'encryptedStorage', 
                        title: 'Verschlüsselte Datenspeicherung',
                        description: 'Sind die Daten verschlüsselt?',
                        examples: ['Encryption at Rest', 'TLS in Transit', 'Strong Encryption']
                    },
                    { 
                        id: 'accessControls', 
                        title: 'Zugriffskontrollen und Berechtigungen',
                        description: 'Wie sind Zugriffe kontrolliert?',
                        examples: ['Role-Based Access', 'Least Privilege', 'Access Logging']
                    },
                    { 
                        id: 'gdprCompliance', 
                        title: 'DSGVO-konforme Datenverarbeitung',
                        description: 'Ist die Datenverarbeitung DSGVO-konform?',
                        examples: ['Privacy by Design', 'Data Minimization', 'Right to be Forgotten']
                    },
                    { 
                        id: 'securityMonitoring', 
                        title: 'Kontinuierliches Sicherheitsmonitoring',
                        description: 'Wie wird Sicherheit überwacht?',
                        examples: ['SIEM-Systeme', 'Security Audits', 'Threat Detection']
                    }
                ]
            }
        ];
        
        let assessmentValues = {};
        
        function initializeAssessment() {
            const saved = JSON.parse(localStorage.getItem('kiDetailAssessments') || '{}');
            if (saved.dataQuality && saved.dataQuality.details) {
                assessmentValues = saved.dataQuality.details;
            }
            
            // Initialize sub-criteria values if not present
            dataQualityCriteria.forEach(criterion => {
                criterion.subCriteria.forEach(subCriterion => {
                    const key = `${criterion.id}_${subCriterion.id}`;
                    if (!assessmentValues[key]) {
                        assessmentValues[key] = 1;
                    }
                });
            });
            
            renderCriteria();
            updateAggregatedScore();
        }
        
        function renderCriteria() {
            const container = document.getElementById('criteriaContainer');
            container.innerHTML = dataQualityCriteria.map(criterion => {
                // Calculate average for this criterion
                const subValues = criterion.subCriteria.map(sub => {
                    const key = `${criterion.id}_${sub.id}`;
                    return assessmentValues[key] || 1;
                });
                const criterionAverage = (subValues.reduce((sum, val) => sum + val, 0) / subValues.length).toFixed(1);
                
                return `
                <div class="criterion-card">
                    <div class="criterion-header">
                        <div class="criterion-icon">
                            <i class="fas ${criterion.icon}"></i>
                        </div>
                        <div class="criterion-title-section">
                            <h3 class="criterion-title">${criterion.title}</h3>
                            <p class="criterion-description">${criterion.description}</p>
                        </div>
                    </div>
                    <div class="sub-criteria-container">
                        ${criterion.subCriteria.map(subCriterion => {
                            const key = `${criterion.id}_${subCriterion.id}`;
                            const value = assessmentValues[key] || 1;
                            return `
                            <div class="sub-criterion-item" style="border-left-color: #764ba2;">
                                <div class="sub-criterion-label">${subCriterion.title}</div>
                                ${subCriterion.description ? `<div class="sub-criterion-description" style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem;">${subCriterion.description}</div>` : ''}
                                ${subCriterion.examples && subCriterion.examples.length > 0 ? `
                                <div class="sub-criterion-examples" style="background: #f8fafc; padding: 0.75rem; border-radius: 6px; margin-bottom: 0.75rem; font-size: 0.8rem; color: #6b7280;">
                                    <strong style="color: #374151; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;">Beispiele:</strong>
                                    <ul style="margin: 0.5rem 0 0 1.25rem; padding: 0;">
                                        ${subCriterion.examples.map(ex => `<li style="margin-bottom: 0.25rem;">${ex}</li>`).join('')}
                                    </ul>
                                </div>
                                ` : ''}
                                <div class="sub-criterion-slider-wrapper">
                                    <input 
                                        type="range" 
                                        min="1" 
                                        max="5" 
                                        step="1"
                                        value="${value}"
                                        class="sub-criterion-slider" 
                                        id="slider-${key}"
                                        style="accent-color: #764ba2;"
                                        oninput="updateSubCriterionValue('${criterion.id}', '${subCriterion.id}', this.value)"
                                    >
                                    <div class="sub-criterion-value" id="value-${key}">${value}</div>
                                    <div class="sub-criterion-scale">
                                        <span>1</span>
                                        <span>2</span>
                                        <span>3</span>
                                        <span>4</span>
                                        <span>5</span>
                                    </div>
                                </div>
                            </div>
                            `;
                        }).join('')}
                        <div class="criterion-average">
                            <span class="criterion-average-label">Durchschnitt für "${criterion.title}":</span>
                            <span class="criterion-average-value" id="avg-${criterion.id}">${criterionAverage}</span>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }
        
        function updateSubCriterionValue(criterionId, subCriterionId, value) {
            const key = `${criterionId}_${subCriterionId}`;
            assessmentValues[key] = parseInt(value);
            document.getElementById(`value-${key}`).textContent = value;
            
            // Update criterion average
            const criterion = dataQualityCriteria.find(c => c.id === criterionId);
            const subValues = criterion.subCriteria.map(sub => {
                const subKey = `${criterionId}_${sub.id}`;
                return assessmentValues[subKey] || 1;
            });
            const criterionAverage = (subValues.reduce((sum, val) => sum + val, 0) / subValues.length).toFixed(1);
            document.getElementById(`avg-${criterionId}`).textContent = criterionAverage;
            
            updateAggregatedScore();
        }
        
        function updateAggregatedScore() {
            // Calculate average for each main criterion, then overall average
            const criterionAverages = dataQualityCriteria.map(criterion => {
                const subValues = criterion.subCriteria.map(sub => {
                    const key = `${criterion.id}_${sub.id}`;
                    return assessmentValues[key] || 1;
                });
                return subValues.reduce((sum, val) => sum + val, 0) / subValues.length;
            });
            
            const overallAverage = (criterionAverages.reduce((sum, val) => sum + val, 0) / criterionAverages.length).toFixed(1);
            
            document.getElementById('aggregatedScore').textContent = overallAverage;
            
            let description = '';
            if (overallAverage <= 1.5) {
                description = 'Mangelhaft - Erhebliche Verbesserungen erforderlich';
            } else if (overallAverage <= 2.5) {
                description = 'Verbesserungswürdig - Grundlagen vorhanden, Optimierung nötig';
            } else if (overallAverage <= 3.5) {
                description = 'Gut - Solide Basis, weitere Optimierung möglich';
            } else if (overallAverage <= 4.5) {
                description = 'Sehr gut - Hohe Datenqualität, kleine Verbesserungen möglich';
            } else {
                description = 'Exzellent - Hervorragende Datenqualität für KI-Projekte';
            }
            
            document.getElementById('scoreDescription').textContent = description;
        }
        
        function saveAndReturn() {
            // Calculate overall average from criterion averages
            const criterionAverages = dataQualityCriteria.map(criterion => {
                const subValues = criterion.subCriteria.map(sub => {
                    const key = `${criterion.id}_${sub.id}`;
                    return assessmentValues[key] || 1;
                });
                return subValues.reduce((sum, val) => sum + val, 0) / subValues.length;
            });
            
            const aggregated = (criterionAverages.reduce((sum, val) => sum + val, 0) / criterionAverages.length).toFixed(1);
            
            let saved = JSON.parse(localStorage.getItem('kiDetailAssessments') || '{}');
            saved.dataQuality = {
                aggregated: parseFloat(aggregated),
                details: assessmentValues,
                criterionAverages: dataQualityCriteria.map(criterion => {
                    const subValues = criterion.subCriteria.map(sub => {
                        const key = `${criterion.id}_${sub.id}`;
                        return assessmentValues[key] || 1;
                    });
                    return {
                        criterionId: criterion.id,
                        average: subValues.reduce((sum, val) => sum + val, 0) / subValues.length
                    };
                }),
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('kiDetailAssessments', JSON.stringify(saved));
            
            window.location.href = 'ki-strategie-workflow.html';
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeAssessment);
    </script>
</body>
</html>

