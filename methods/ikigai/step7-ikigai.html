<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Ikigai Step 7: Aktionsplan</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Erstelle einen konkreten Aktionsplan zur Umsetzung deines Ikigai im Alltag. Setze deine Erkenntnisse in die Praxis um.">
    <meta name="keywords" content="ikigai, aktionsplan, umsetzung, ziele, planung, lebenszweck">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="css/ikigai-styles.css">
    <link rel="stylesheet" href="css/step7-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- PDF.js f√ºr echte PDF-Erstellung -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../../manuel-weiss-photo.svg">
</head>
<body>
    <!-- Header -->
    <header class="step-header">
        <div class="step-header-content">
            <div class="step-info">
                <h1>üéØ Ikigai Step 7: Aktionsplan</h1>
                <p class="step-description">Erstelle einen konkreten Plan zur Umsetzung deines Ikigai im Alltag.</p>
            </div>
            <div class="step-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%"></div>
                </div>
                <span class="progress-text">7 von 7 - Fertig!</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="step-main">
        <div class="step-container">
            <!-- Left Column: Questions -->
            <div class="questions-column">
                <div class="step-intro">
                    <h2>Deinen Ikigai umsetzen</h2>
                    <p>Jetzt geht es darum, dein Ikigai in die Praxis umzusetzen. Erstelle einen konkreten, umsetzbaren Plan f√ºr die n√§chsten Schritte.</p>
                </div>

                <form class="reflection-form" id="actionPlanForm">
                    <!-- Frage 1: Kurzfristige Ziele -->
                    <div class="form-group">
                        <label for="shortTerm">Was sind deine kurzfristigen Ziele (n√§chste 3 Monate)?</label>
                        <p class="question-hint">Definiere konkrete, messbare Schritte, die du in den n√§chsten 3 Monaten umsetzen kannst.</p>
                        <textarea id="shortTerm" name="shortTerm" rows="6" placeholder="Beschreibe deine kurzfristigen Ziele..."></textarea>
                        <div class="detailed-hints">
                            <h5>üí° Denkanst√∂√üe:</h5>
                            <ul>
                                <li><strong>Lernen:</strong> Welche F√§higkeiten willst du entwickeln?</li>
                                <li><strong>Netzwerk:</strong> Mit wem willst du dich vernetzen?</li>
                                <li><strong>Erfahrung:</strong> Welche praktischen Erfahrungen willst du sammeln?</li>
                                <li><strong>Ressourcen:</strong> Welche Tools oder Ressourcen brauchst du?</li>
                                <li><strong>Gewohnheiten:</strong> Welche neuen Routinen willst du etablieren?</li>
                                <li><strong>Erste Schritte:</strong> Was ist der erste konkrete Schritt?</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Frage 2: Mittelfristige Ziele -->
                    <div class="form-group">
                        <label for="mediumTerm">Was sind deine mittelfristigen Ziele (6-12 Monate)?</label>
                        <p class="question-hint">√úberlege, wo du in 6-12 Monaten stehen m√∂chtest und welche gr√∂√üeren Ver√§nderungen n√∂tig sind.</p>
                        <textarea id="mediumTerm" name="mediumTerm" rows="6" placeholder="Beschreibe deine mittelfristigen Ziele..."></textarea>
                        <div class="detailed-hints">
                            <h5>üí° Denkanst√∂√üe:</h5>
                            <ul>
                                <li><strong>Berufliche Ver√§nderung:</strong> Jobwechsel, Karrierewechsel, Selbstst√§ndigkeit?</li>
                                <li><strong>Projekte:</strong> Welche gr√∂√üeren Projekte willst du starten?</li>
                                <li><strong>Bildung:</strong> Welche Ausbildungen oder Zertifikate willst du?</li>
                                <li><strong>Beziehungen:</strong> Welche neuen Beziehungen willst du aufbauen?</li>
                                <li><strong>Lifestyle:</strong> Wie willst du leben und arbeiten?</li>
                                <li><strong>Wirkung:</strong> Welchen Einfluss willst du haben?</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Frage 3: Langfristige Vision -->
                    <div class="form-group">
                        <label for="longTerm">Was ist deine langfristige Vision (2-5 Jahre)?</label>
                        <p class="question-hint">Denke gro√ü! Wo willst du in 2-5 Jahren stehen? Wie sieht dein ideales Leben aus?</p>
                        <textarea id="longTerm" name="longTerm" rows="6" placeholder="Beschreibe deine langfristige Vision..."></textarea>
                        <div class="detailed-hints">
                            <h5>üí° Denkanst√∂√üe:</h5>
                            <ul>
                                <li><strong>Karriere:</strong> Wo willst du beruflich stehen?</li>
                                <li><strong>Finanzen:</strong> Welche finanzielle Situation willst du?</li>
                                <li><strong>Beziehungen:</strong> Welche Art von Beziehungen willst du?</li>
                                <li><strong>Gesundheit:</strong> Wie willst du leben und dich f√ºhlen?</li>
                                <li><strong>Beitrag:</strong> Wie willst du zur Welt beitragen?</li>
                                <li><strong>Legacy:</strong> Was willst du hinterlassen?</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Frage 4: Hindernisse & L√∂sungen -->
                    <div class="form-group">
                        <label for="obstacles">Welche Hindernisse siehst du und wie willst du sie √ºberwinden?</label>
                        <p class="question-hint">Identifiziere m√∂gliche Herausforderungen und entwickle Strategien zu ihrer Bew√§ltigung.</p>
                        <textarea id="obstacles" name="obstacles" rows="6" placeholder="Beschreibe Hindernisse und deine L√∂sungsans√§tze..."></textarea>
                        <div class="detailed-hints">
                            <h5>üí° Denkanst√∂√üe:</h5>
                            <ul>
                                <li><strong>Finanzielle Hindernisse:</strong> Geld, Investitionen, Sicherheit?</li>
                                <li><strong>Zeitliche Hindernisse:</strong> Zeitmanagement, Priorit√§ten?</li>
                                <li><strong>F√§higkeits-Hindernisse:</strong> Skills, Wissen, Erfahrung?</li>
                                <li><strong>Soziale Hindernisse:</strong> Unterst√ºtzung, Netzwerk, Familie?</li>
                                <li><strong>Psychologische Hindernisse:</strong> √Ñngste, Selbstzweifel, Motivation?</li>
                                <li><strong>Externe Hindernisse:</strong> Markt, Konkurrenz, Rahmenbedingungen?</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Frage 5: Unterst√ºtzung -->
                    <div class="form-group">
                        <label for="support">Wer oder was kann dich bei der Umsetzung unterst√ºtzen?</label>
                        <p class="question-hint">√úberlege, welche Ressourcen, Menschen und Systeme dir helfen k√∂nnen.</p>
                        <textarea id="support" name="support" rows="6" placeholder="Beschreibe deine Unterst√ºtzungsquellen..."></textarea>
                        <div class="detailed-hints">
                            <h5>üí° Denkanst√∂√üe:</h5>
                            <ul>
                                <li><strong>Mentoren:</strong> Wer kann dich beraten und f√ºhren?</li>
                                <li><strong>Netzwerk:</strong> Mit wem kannst du zusammenarbeiten?</li>
                                <li><strong>Community:</strong> Welche Gruppen k√∂nnen dich unterst√ºtzen?</li>
                                <li><strong>Ressourcen:</strong> Welche Tools, Kurse, B√ºcher helfen?</li>
                                <li><strong>Finanzierung:</strong> Wer kann dich finanziell unterst√ºtzen?</li>
                                <li><strong>Emotionale Unterst√ºtzung:</strong> Wer gibt dir Kraft und Motivation?</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="form-navigation">
                        <a href="step6-ikigai.html" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i>
                            Zur√ºck zu Synthese
                        </a>
                        <button type="button" class="btn btn-primary" onclick="saveAndContinue()">
                            <i class="fas fa-check"></i>
                            Ikigai Workflow abschlie√üen
                        </button>
                    </div>
                </form>
            </div>

            <!-- Right Column: Tools & Resources -->
            <div class="sidebar">
                <div class="tools-box">
                    <h4><i class="fas fa-rocket"></i> Aktionsplan-Tools</h4>
                    
                    <div class="tool-categories">
                        <div class="tool-category">
                            <h5>Zielsetzung</h5>
                            <ul>
                                <li><strong>SMART Goals:</strong> Spezifisch, Messbar, Erreichbar, Relevant, Terminiert</li>
                                <li><strong>OKR Framework:</strong> Objectives & Key Results</li>
                                <li><strong>Backwards Planning:</strong> Vom Ziel r√ºckw√§rts planen</li>
                                <li><strong>Milestone Planning:</strong> Meilensteine definieren</li>
                            </ul>
                        </div>
                        
                        <div class="tool-category">
                            <h5>Umsetzung</h5>
                            <ul>
                                <li><strong>Habit Stacking:</strong> Neue Gewohnheiten etablieren</li>
                                <li><strong>Time Blocking:</strong> Zeit f√ºr wichtige Aufgaben reservieren</li>
                                <li><strong>Accountability Partner:</strong> Jemanden zur Verantwortung ziehen</li>
                                <li><strong>Progress Tracking:</strong> Fortschritt messen und dokumentieren</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="resources-box">
                    <h4><i class="fas fa-book"></i> Aktionsplan-Ressourcen</h4>
                    
                    <div class="resource-links">
                        <div class="resource-section">
                            <h5>B√ºcher</h5>
                            <ul>
                                <li><strong>"Atomic Habits"</strong> von James Clear</li>
                                <li><strong>"The 7 Habits"</strong> von Stephen Covey</li>
                                <li><strong>"Getting Things Done"</strong> von David Allen</li>
                                <li><strong>"The Power of Now"</strong> von Eckhart Tolle</li>
                            </ul>
                        </div>
                        
                        <div class="resource-section">
                            <h5>Tools & Apps</h5>
                            <ul>
                                <li><strong>Notion:</strong> All-in-one Workspace</li>
                                <li><strong>Trello:</strong> Projektmanagement</li>
                                <li><strong>Habitica:</strong> Gamification von Gewohnheiten</li>
                                <li><strong>Forest:</strong> Fokus und Produktivit√§t</li>
                            </ul>
                        </div>
                        
                        <div class="resource-section">
                            <h5>Verwandte Workflows</h5>
                            <ul>
                                <li><a href="../raisec/index-raisec.html">RAISEC-Test</a> - Berufliche Interessen</li>
                                <li><a href="../swot/index-swot.html">SWOT-Analyse</a> - St√§rken und Schw√§chen</li>
                                <li><a href="../wheel-of-life/index-wheel.html">Wheel of Life</a> - Lebensbereiche</li>
                                <li><a href="../../persoenlichkeitsentwicklung.html">Pers√∂nlichkeitsentwicklung</a> - √úbersicht</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="js/ikigai-workflow.js"></script>
    
    <script>
        function saveAndContinue() {
            // Save form data to localStorage
            const formData = {
                shortTerm: document.getElementById('shortTerm').value,
                mediumTerm: document.getElementById('mediumTerm').value,
                longTerm: document.getElementById('longTerm').value,
                obstacles: document.getElementById('obstacles').value,
                support: document.getElementById('support').value,
                step: 7,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('ikigaiStep7', JSON.stringify(formData));
            
            // Generate final Ikigai analysis
            generateFinalAnalysis();
            
            // Zeige Erfolgsmeldung mit PDF-Download Option
            const userChoice = confirm('üéâ Herzlichen Gl√ºckwunsch! Du hast deinen Ikigai-Workflow erfolgreich abgeschlossen!\n\nM√∂chtest du jetzt eine sch√∂ne PDF-Zusammenfassung deines Ikigai herunterladen?');
            
            if (userChoice) {
                // Generiere und lade PDF herunter
                generatePDF();
            } else {
                // Nur zur Index-Seite wenn kein PDF gew√ºnscht
                window.location.href = 'index-ikigai.html';
            }
        }
        
        function generateFinalAnalysis() {
            // Collect all step data
            const allSteps = {};
            for (let i = 1; i <= 7; i++) {
                const stepData = localStorage.getItem(`ikigaiStep${i}`);
                if (stepData) {
                    allSteps[`step${i}`] = JSON.parse(stepData);
                }
            }
            
            // Create final analysis
            const finalAnalysis = {
                timestamp: new Date().toISOString(),
                steps: allSteps,
                ikigai: {
                    passion: allSteps.step2 || {},
                    mission: allSteps.step3 || {},
                    profession: allSteps.step4 || {},
                    vocation: allSteps.step5 || {},
                    synthesis: allSteps.step6 || {},
                    actionPlan: allSteps.step7 || {}
                },
                summary: generateSummary(allSteps)
            };
            
            // Save final analysis
            localStorage.setItem('ikigaiFinalAnalysis', JSON.stringify(finalAnalysis));
        }
        
        function generateSummary(steps) {
            return {
                totalSteps: 7,
                completedSteps: Object.keys(steps).length,
                completionDate: new Date().toISOString(),
                nextReviewDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() // 30 days from now
            };
        }
        
        // Initialize workflow
        window.addEventListener('load', function() {
            if (typeof IkigaiSmartWorkflow !== 'undefined') {
                window.ikigaiSmartWorkflow = new IkigaiSmartWorkflow();
                window.ikigaiSmartWorkflow.currentStep = 7;
                window.ikigaiSmartWorkflow.updateProgress();
            }
        });
        
        // Load saved data if available
        window.addEventListener('load', function() {
            const savedData = localStorage.getItem('ikigaiStep7');
            if (savedData) {
                const data = JSON.parse(savedData);
                document.getElementById('shortTerm').value = data.shortTerm || '';
                document.getElementById('mediumTerm').value = data.mediumTerm || '';
                document.getElementById('longTerm').value = data.longTerm || '';
                document.getElementById('obstacles').value = data.obstacles || '';
                document.getElementById('support').value = data.support || '';
            }
        });
        
        // Auto-save on input
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', function() {
                const formData = {
                    shortTerm: document.getElementById('shortTerm').value,
                    mediumTerm: document.getElementById('mediumTerm').value,
                    longTerm: document.getElementById('longTerm').value,
                    obstacles: document.getElementById('obstacles').value,
                    support: document.getElementById('support').value,
                    step: 7,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem('ikigaiStep7', JSON.stringify(formData));
            });
        });
        
        // PDF Export Funktion
        function generatePDF() {
            console.log('üéØ Starte PDF-Generierung...');
            
            // Sammle alle Daten aus allen Steps
            const allData = {};
            for (let i = 1; i <= 7; i++) {
                const stepData = localStorage.getItem(`ikigaiStep${i}`);
                if (stepData) {
                    allData[`step${i}`] = JSON.parse(stepData);
                    console.log(`‚úÖ Step ${i} Daten gefunden:`, allData[`step${i}`]);
                } else {
                    console.log(`‚ö†Ô∏è Keine Daten f√ºr Step ${i} gefunden`);
                }
            }
            
            console.log('üìä Alle gesammelten Daten:', allData);
            
            // Erstelle PDF mit jsPDF
            createRealPDF(allData);
        }
        
        // Helper-Funktionen f√ºr PDF-Erstellung
        function getStepTitle(step) {
            const titles = {
                1: 'Selbstreflexion',
                2: 'Passion',
                3: 'Mission', 
                4: 'Profession',
                5: 'Vocation',
                6: 'Synthese',
                7: 'Aktionsplan'
            };
            return titles[step] || `Step ${step}`;
        }
        
        function getQuestionText(step, key) {
            const questions = {
                1: {
                    'question1': 'Was macht dich wirklich gl√ºcklich?',
                    'question2': 'Wof√ºr brennst du?',
                    'question3': 'Was w√ºrdest du tun, wenn Geld keine Rolle spielen w√ºrde?',
                    'question4': 'Wann f√ºhlst du dich am lebendigsten?',
                    'question5': 'Was liebst du an dir selbst?',
                    'question6': 'Was sind deine tiefsten Werte?'
                },
                2: {
                    'passion1': 'Was sind deine gr√∂√üten Leidenschaften?',
                    'passion2': 'Wof√ºr begeisterst du dich?',
                    'passion3': 'Was macht dir am meisten Spa√ü?'
                },
                3: {
                    'mission1': 'Was ist deine Mission im Leben?',
                    'mission2': 'Wie m√∂chtest du die Welt ver√§ndern?',
                    'mission3': 'Was ist dein Beitrag zur Gesellschaft?'
                },
                4: {
                    'profession1': 'Womit verdienst du dein Geld?',
                    'profession2': 'Was ist dein Beruf?',
                    'profession3': 'Welche F√§higkeiten verkaufst du?'
                },
                5: {
                    'vocation1': 'Was kannst du besonders gut?',
                    'vocation2': 'Welche Talente hast du?',
                    'vocation3': 'Wo bist du Experte?'
                },
                6: {
                    'synthesis1': 'Wie verbindest du alle Bereiche?',
                    'synthesis2': 'Was ist dein Ikigai?',
                    'synthesis3': 'Wie findest du den Schnittpunkt?'
                },
                7: {
                    'shortTermGoals': 'Kurzfristige Ziele (1-3 Monate)',
                    'mediumTermGoals': 'Mittelfristige Ziele (3-12 Monate)',
                    'longTermGoals': 'Langfristige Ziele (1+ Jahre)',
                    'challenges': 'Herausforderungen',
                    'support': 'Unterst√ºtzung'
                }
            };
            return questions[step]?.[key] || key;
        }
        
        // EINFACHE PDF-ERSTELLUNG MIT WINDOW.PRINT()
        function createRealPDF(data) {
            console.log('üéØ Erstelle PDF mit window.print()...');
            
            // Erstelle HTML-Inhalt f√ºr PDF
            const htmlContent = createPDFHTML(data);
            
            // √ñffne neues Fenster und drucke
            const printWindow = window.open('', '_blank');
            printWindow.document.write(htmlContent);
            printWindow.document.close();
            
            // Warte kurz und drucke dann
            setTimeout(() => {
                printWindow.print();
            }, 500);
        }
        
        function createPDFHTML(data) {
            const currentDate = new Date().toLocaleDateString('de-DE');
            
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>Mein Ikigai - Pers√∂nliche Zusammenfassung</title>
                    <style>
                        @media print {
                            body { margin: 0; padding: 20px; }
                            .page-break { page-break-before: always; }
                        }
                        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 40px; }
                        .header { text-align: center; margin-bottom: 40px; border-bottom: 3px solid #667eea; padding-bottom: 20px; }
                        .header h1 { color: #667eea; font-size: 2.5rem; margin: 0; }
                        .header p { color: #666; font-size: 1.1rem; margin: 10px 0; }
                        .ikigai-explanation { background: #f8f9ff; padding: 30px; border-radius: 15px; margin: 30px 0; border-left: 5px solid #667eea; }
                        .ikigai-explanation h2 { color: #667eea; margin-top: 0; }
                        .step-section { margin: 40px 0; padding: 25px; background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                        .step-section h3 { color: #667eea; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
                        .question { font-weight: 600; color: #333; margin: 15px 0 5px 0; }
                        .answer { margin-left: 20px; margin-bottom: 15px; color: #555; }
                        .synthesis { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 30px; border-radius: 15px; margin: 30px 0; }
                        .synthesis h3 { color: white; border: none; }
                        .action-plan { background: #e8f5e8; padding: 25px; border-radius: 10px; margin: 20px 0; }
                        .footer { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 2px solid #667eea; color: #666; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üéØ Mein Ikigai</h1>
                        <p>Pers√∂nliche Zusammenfassung</p>
                        <p>Erstellt am: ${currentDate}</p>
                    </div>
                    
                    <div class="ikigai-explanation">
                        <h2>Was ist Ikigai?</h2>
                        <p>Ikigai ist ein japanisches Konzept, das "Lebenszweck" oder "Grund zu leben" bedeutet. Es ist der Schnittpunkt von vier wichtigen Bereichen:</p>
                        <ul>
                            <li><strong>Was du liebst</strong> - Deine Leidenschaften und Interessen</li>
                            <li><strong>Was die Welt braucht</strong> - Deine Mission und dein Beitrag zur Gesellschaft</li>
                            <li><strong>Was du gut kannst</strong> - Deine Talente und F√§higkeiten</li>
                            <li><strong>Womit du Geld verdienst</strong> - Deine Profession und Einkommensquelle</li>
                        </ul>
                        <p>Wenn diese vier Bereiche sich √ºberschneiden, findest du dein Ikigai - deinen pers√∂nlichen Lebenszweck.</p>
                    </div>
                    
                    ${generateStepContent(data)}
                    
                    <div class="synthesis">
                        <h3>üéØ Dein pers√∂nliches Ikigai</h3>
                        <p><strong>Dein Ikigai ist der Schnittpunkt aller vier Bereiche und repr√§sentiert deinen Lebenszweck.</strong></p>
                        <p>Basierend auf deinen Antworten hast du einen einzigartigen Weg gefunden, deine Leidenschaften, Talente, Mission und Profession zu verbinden.</p>
                    </div>
                    
                    <div class="action-plan">
                        <h3>üìã Dein Aktionsplan</h3>
                        <p><strong>Kurzfristige Ziele (1-3 Monate):</strong></p>
                        <p>${data.step7?.shortTermGoals || 'Noch nicht definiert'}</p>
                        
                        <p><strong>Mittelfristige Ziele (3-12 Monate):</strong></p>
                        <p>${data.step7?.mediumTermGoals || 'Noch nicht definiert'}</p>
                        
                        <p><strong>Langfristige Ziele (1+ Jahre):</strong></p>
                        <p>${data.step7?.longTermGoals || 'Noch nicht definiert'}</p>
                        
                        <p><strong>Herausforderungen:</strong></p>
                        <p>${data.step7?.challenges || 'Noch nicht definiert'}</p>
                        
                        <p><strong>Unterst√ºtzung:</strong></p>
                        <p>${data.step7?.support || 'Noch nicht definiert'}</p>
                    </div>
                    
                    <div class="footer">
                        <p>Erstellt mit dem Ikigai-Workflow von Manuel Weiss</p>
                        <p>Website: https://mawps.netlify.app</p>
                    </div>
                </body>
                </html>
            `;
        }
        
        function generateStepContent(data) {
            let content = '';
            
            for (let step = 1; step <= 7; step++) {
                const stepData = data[`step${step}`];
                if (!stepData) continue;
                
                content += `<div class="step-section">`;
                content += `<h3>Step ${step}: ${getStepTitle(step)}</h3>`;
                
                Object.keys(stepData).forEach(key => {
                    if (stepData[key] && stepData[key].trim()) {
                        const question = getQuestionText(step, key);
                        const answer = stepData[key];
                        content += `<div class="question">${question}</div>`;
                        content += `<div class="answer">${answer}</div>`;
                    }
                });
                
                content += `</div>`;
            }
            
            return content;
        }
    </script>
</body>
</html>
