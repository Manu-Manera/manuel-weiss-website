<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mein Profil | Manuel Weiss</title>
    <link rel="stylesheet" href="css/user-profile.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- Modern Navigation -->
    <nav class="profile-nav">
        <div class="nav-container">
            <a href="javascript:void(0)" class="nav-back" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
                <span>Zurück</span>
            </a>
            <div class="nav-title">
                <h1>Mein Profil</h1>
            </div>
            <div class="nav-actions">
                <button class="btn-save" onclick="saveProfile()">
                    <i class="fas fa-save"></i>
                    Speichern
                </button>
            </div>
        </div>
    </nav>

    <!-- Profile Content -->
    <main class="profile-main">
        <div class="profile-container">
            <!-- Profile Header -->
            <section class="profile-header">
                <div class="profile-avatar">
                    <div class="avatar-container">
                        <img src="manuel-weiss-photo.svg" alt="Profilbild" id="profileImage">
                        <button class="avatar-upload" onclick="uploadAvatar()">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                </div>
                <div class="profile-info">
                    <h2 id="userName">Manuel Weiss</h2>
                    <p id="userEmail">manuel.weiss@example.com</p>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="completedMethods">0</span>
                            <span class="stat-label">Abgeschlossene Methoden</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="totalProgress">0%</span>
                            <span class="stat-label">Gesamtfortschritt</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="streakDays">0</span>
                            <span class="stat-label">Tage in Folge</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Profile Tabs -->
            <section class="profile-tabs">
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab="personal">
                        <i class="fas fa-user"></i>
                        Persönliche Daten
                    </button>
                    <button class="tab-btn" data-tab="applications">
                        <i class="fas fa-briefcase"></i>
                        Bewerbungsmanager
                    </button>
                    <button class="tab-btn" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        Einstellungen
                    </button>
                    <button class="tab-btn" data-tab="progress">
                        <i class="fas fa-chart-line"></i>
                        Fortschritt
                    </button>
                    <button class="tab-btn" data-tab="achievements">
                        <i class="fas fa-trophy"></i>
                        Erfolge
                    </button>
                </div>
            </section>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Personal Data Tab -->
                <div class="tab-panel active" id="personal">
                    <div class="form-section">
                        <h3><i class="fas fa-user"></i> Persönliche Informationen</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="firstName">Vorname</label>
                                <input type="text" id="firstName" value="Manuel" placeholder="Dein Vorname">
                            </div>
                            <div class="form-group">
                                <label for="lastName">Nachname</label>
                                <input type="text" id="lastName" value="Weiss" placeholder="Dein Nachname">
                            </div>
                            <div class="form-group">
                                <label for="email">E-Mail</label>
                                <input type="email" id="email" value="manuel.weiss@example.com" placeholder="Deine E-Mail">
                            </div>
                            <div class="form-group">
                                <label for="phone">Telefon</label>
                                <input type="tel" id="phone" placeholder="Deine Telefonnummer">
                            </div>
                            <div class="form-group">
                                <label for="birthDate">Geburtsdatum</label>
                                <input type="date" id="birthDate">
                            </div>
                            <div class="form-group">
                                <label for="location">Standort</label>
                                <input type="text" id="location" placeholder="Dein Standort">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-briefcase"></i> Berufliche Informationen</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="profession">Beruf</label>
                                <input type="text" id="profession" placeholder="Dein Beruf">
                            </div>
                            <div class="form-group">
                                <label for="company">Unternehmen</label>
                                <input type="text" id="company" placeholder="Dein Unternehmen">
                            </div>
                            <div class="form-group">
                                <label for="experience">Berufserfahrung</label>
                                <select id="experience">
                                    <option value="">Wähle deine Erfahrung</option>
                                    <option value="0-2">0-2 Jahre</option>
                                    <option value="3-5">3-5 Jahre</option>
                                    <option value="6-10">6-10 Jahre</option>
                                    <option value="10+">10+ Jahre</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="industry">Branche</label>
                                <input type="text" id="industry" placeholder="Deine Branche">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-heart"></i> Persönliche Ziele</h3>
                        <div class="form-group">
                            <label for="goals">Deine Ziele</label>
                            <textarea id="goals" placeholder="Beschreibe deine persönlichen und beruflichen Ziele..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="interests">Interessen</label>
                            <textarea id="interests" placeholder="Deine Hobbys und Interessen..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Applications Tab (Bewerbungsmanager) -->
                <div class="tab-panel" id="applications">
                    <div class="applications-dashboard">
                        <!-- Dashboard Header -->
                        <div class="dashboard-header">
                            <div class="dashboard-actions">
                                <button class="btn-primary" id="startNewApplication">
                                    <i class="fas fa-plus"></i>
                                    Neue Bewerbung erstellen
                                </button>
                            </div>
                        </div>

                        <!-- Statistics Overview -->
                        <div class="applications-stats">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    <i class="fas fa-briefcase"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="totalApplications">0</h3>
                                    <p>Gesamt Bewerbungen</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="activeApplications">0</h3>
                                    <p>Aktive Bewerbungen</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="successRate">0%</h3>
                                    <p>Erfolgsrate</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="stat-content">
                                    <h3 id="interviewsScheduled">0</h3>
                                    <p>Interviews geplant</p>
                                </div>
                            </div>
                        </div>

                        <!-- Applications List -->
                        <div class="applications-section">
                            <div class="section-header">
                                <h3><i class="fas fa-list"></i> Meine Bewerbungen</h3>
                                <div class="filter-controls">
                                    <select id="statusFilter" class="filter-select">
                                        <option value="all">Alle Status</option>
                                        <option value="preparation">Vorbereitung</option>
                                        <option value="sent">Versendet</option>
                                        <option value="confirmed">Bestätigt</option>
                                        <option value="interview">Interview</option>
                                        <option value="offer">Angebot</option>
                                        <option value="rejected">Abgelehnt</option>
                                    </select>
                                </div>
                            </div>
                            <div id="applicationsList" class="applications-list">
                                <!-- Wird dynamisch gefüllt -->
                                <div class="empty-state">
                                    <i class="fas fa-briefcase"></i>
                                    <h4>Noch keine Bewerbungen</h4>
                                    <p>Erstelle deine erste Bewerbung mit dem Smart Workflow</p>
                                    <button class="btn-primary" onclick="document.getElementById('startNewApplication').click()">
                                        <i class="fas fa-plus"></i>
                                        Neue Bewerbung erstellen
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Cover Letters Section -->
                        <div class="applications-section">
                            <div class="section-header">
                                <h3><i class="fas fa-envelope"></i> Meine Anschreiben</h3>
                                <div class="filter-controls">
                                    <button class="btn-secondary" onclick="window.userProfile.createNewCoverLetter()">
                                        <i class="fas fa-plus"></i>
                                        Neues Anschreiben
                                    </button>
                                </div>
                            </div>
                            <div id="coverLettersList" class="applications-list">
                                <!-- Wird dynamisch gefüllt -->
                                <div class="empty-state">
                                    <i class="fas fa-envelope"></i>
                                    <h4>Noch keine Anschreiben</h4>
                                    <p>Erstelle dein erstes Anschreiben mit KI-Unterstützung</p>
                                    <button class="btn-primary" onclick="window.userProfile.createNewCoverLetter()">
                                        <i class="fas fa-plus"></i>
                                        Neues Anschreiben erstellen
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Resumes Section -->
                        <div class="applications-section">
                            <div class="section-header">
                                <h3><i class="fas fa-file-alt"></i> Meine Lebensläufe</h3>
                                <div class="filter-controls">
                                    <a href="applications/resume-editor.html" class="btn-secondary">
                                        <i class="fas fa-plus"></i>
                                        Neuer Lebenslauf
                                    </a>
                                </div>
                            </div>
                            <div id="resumesList" class="applications-list">
                                <!-- Wird dynamisch gefüllt -->
                                <div class="empty-state">
                                    <i class="fas fa-file-alt"></i>
                                    <h4>Noch keine Lebensläufe</h4>
                                    <p>Erstelle deinen ersten Lebenslauf manuell oder lade eine PDF hoch</p>
                                    <a href="applications/resume-editor.html" class="btn-primary">
                                        <i class="fas fa-plus"></i>
                                        Neuen Lebenslauf erstellen
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-panel" id="settings">
                    <div class="form-section">
                        <h3><i class="fas fa-bell"></i> Benachrichtigungen</h3>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>E-Mail Benachrichtigungen</h4>
                                    <p>Erhalte Updates zu deinem Fortschritt</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="emailNotifications" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Wöchentliche Zusammenfassung</h4>
                                    <p>Wöchentlicher Fortschrittsbericht</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="weeklySummary" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Erinnerungen</h4>
                                    <p>Erinnerungen für tägliche Übungen</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="reminders">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-palette"></i> Design-Einstellungen</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="theme">Design-Theme</label>
                                <select id="theme">
                                    <option value="light">Hell</option>
                                    <option value="dark">Dunkel</option>
                                    <option value="auto">Automatisch</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="language">Sprache</label>
                                <select id="language">
                                    <option value="de">Deutsch</option>
                                    <option value="en">English</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-shield-alt"></i> Datenschutz</h3>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Daten teilen</h4>
                                    <p>Anonymisierte Daten für Verbesserungen teilen</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="dataSharing">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progress Tab -->
                <div class="tab-panel" id="progress">
                    <div class="progress-dashboard">
                        <div class="dashboard-header">
                            <h3><i class="fas fa-chart-line"></i> Dein Fortschritt</h3>
                            <p>Verfolge deine Entwicklung in der Persönlichkeitsentwicklung</p>
                        </div>

                        <!-- Overall Progress -->
                        <div class="progress-overview">
                            <div class="overview-card">
                                <div class="card-header">
                                    <h4>Gesamtfortschritt</h4>
                                    <span class="progress-percentage" id="overallProgress">0%</span>
                                </div>
                                <div class="progress-ring">
                                    <svg class="progress-ring-svg" width="120" height="120">
                                        <circle class="progress-ring-circle" cx="60" cy="60" r="54" fill="transparent" stroke="#e5e7eb" stroke-width="8"/>
                                        <circle class="progress-ring-circle progress-ring-fill" cx="60" cy="60" r="54" fill="transparent" stroke="#6366f1" stroke-width="8" stroke-linecap="round"/>
                                    </svg>
                                    <div class="progress-text">
                                        <span class="progress-number" id="overallProgressNumber">0</span>
                                        <span class="progress-label">von 29 Methoden</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Method Categories -->
                        <div class="categories-grid">
                            <div class="category-card">
                                <div class="category-header">
                                    <div class="category-icon">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                    <div class="category-info">
                                        <h4>Selbstfindung</h4>
                                        <p>5 Methoden</p>
                                    </div>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 60%"></div>
                                    </div>
                                    <span class="progress-text">3/5 abgeschlossen</span>
                                </div>
                            </div>

                            <div class="category-card">
                                <div class="category-header">
                                    <div class="category-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <div class="category-info">
                                        <h4>Entwicklung</h4>
                                        <p>8 Methoden</p>
                                    </div>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 25%"></div>
                                    </div>
                                    <span class="progress-text">2/8 abgeschlossen</span>
                                </div>
                            </div>

                            <div class="category-card">
                                <div class="category-header">
                                    <div class="category-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="category-info">
                                        <h4>Beziehungen</h4>
                                        <p>6 Methoden</p>
                                    </div>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <span class="progress-text">0/6 abgeschlossen</span>
                                </div>
                            </div>

                            <div class="category-card">
                                <div class="category-header">
                                    <div class="category-icon">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                    <div class="category-info">
                                        <h4>Karriere</h4>
                                        <p>4 Methoden</p>
                                    </div>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%"></div>
                                    </div>
                                    <span class="progress-text">3/4 abgeschlossen</span>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="activity-section">
                            <h4><i class="fas fa-clock"></i> Letzte Aktivitäten</h4>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h5>Werte-Klärung abgeschlossen</h5>
                                        <p>vor 2 Tagen</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h5>Ikigai-Methode abgeschlossen</h5>
                                        <p>vor 1 Woche</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-play-circle"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h5>Emotionale Intelligenz gestartet</h5>
                                        <p>vor 3 Tagen</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Achievements Tab -->
                <div class="tab-panel" id="achievements">
                    <div class="achievements-dashboard">
                        <div class="dashboard-header">
                            <h3><i class="fas fa-trophy"></i> Deine Erfolge</h3>
                            <p>Feiere deine Fortschritte und erreiche neue Meilensteine</p>
                        </div>

                        <div class="achievements-grid">
                            <div class="achievement-card earned">
                                <div class="achievement-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Erste Schritte</h4>
                                    <p>Erste Methode abgeschlossen</p>
                                </div>
                                <div class="achievement-date">
                                    <i class="fas fa-calendar"></i>
                                    <span>vor 2 Tagen</span>
                                </div>
                            </div>

                            <div class="achievement-card earned">
                                <div class="achievement-icon">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Werte-Entdecker</h4>
                                    <p>Werte-Klärung abgeschlossen</p>
                                </div>
                                <div class="achievement-date">
                                    <i class="fas fa-calendar"></i>
                                    <span>vor 2 Tagen</span>
                                </div>
                            </div>

                            <div class="achievement-card locked">
                                <div class="achievement-icon">
                                    <i class="fas fa-fire"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Streak-Master</h4>
                                    <p>7 Tage in Folge aktiv</p>
                                </div>
                                <div class="achievement-progress">
                                    <span>3/7 Tage</span>
                                </div>
                            </div>

                            <div class="achievement-card locked">
                                <div class="achievement-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="achievement-info">
                                    <h4>Entwicklungs-Experte</h4>
                                    <p>10 Methoden abgeschlossen</p>
                                </div>
                                <div class="achievement-progress">
                                    <span>5/10 Methoden</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- AWS Configuration -->
    <script>
        window.AWS_CONFIG = {
            region: 'eu-central-1',
            userPoolId: 'eu-central-1_8gP4gLK9r',
            clientId: '7kc5tt6a23fgh53d60vkefm812',
            apiBaseUrl: 'https://of2iwj7h2c.execute-api.eu-central-1.amazonaws.com/prod',
            dynamoDB: {
                tableName: 'mawps-user-profiles',
                region: 'eu-central-1'
            }
        };
        
        // Initialize AWS with configuration
        if (typeof AWS !== 'undefined') {
            AWS.config.update({
                region: window.AWS_CONFIG.region
            });
            window.AWS_COGNITO_CONFIG = {
                UserPoolId: window.AWS_CONFIG.userPoolId,
                ClientId: window.AWS_CONFIG.clientId
            };
        }
    </script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1490.0.min.js"></script>
    <script src="js/real-user-auth-system.js?v=20250116"></script>
    <script src="js/aws-profile-api.js"></script>
    <script src="js/user-profile.js"></script>
    <script>
        // Intelligente Zurück-Navigation
        function goBack() {
            // Prüfe ob es einen sinnvollen Referrer gibt
            const referrer = document.referrer;
            
            if (referrer) {
                // Wenn von einer internen Seite gekommen
                const isInternal = referrer.includes(window.location.hostname) || 
                                   referrer.includes('manuel-weiss.ch') ||
                                   referrer.includes('localhost');
                
                if (isInternal) {
                    // Zurück zur vorherigen Seite
                    history.back();
                    return;
                }
            }
            
            // Fallback: Prüfe ob von Bewerbungsmanager oder Persönlichkeitsentwicklung
            const urlParams = new URLSearchParams(window.location.search);
            const source = urlParams.get('source');
            
            if (source === 'dashboard' || source === 'bewerbungsmanager') {
                window.location.href = 'applications/dashboard.html';
            } else if (source === 'coaching') {
                window.location.href = 'applications/coaching.html';
            } else {
                // Standard-Fallback: Persönlichkeitsentwicklung
                window.location.href = 'persoenlichkeitsentwicklung-uebersicht.html';
            }
        }
    </script>
</body>
</html>
