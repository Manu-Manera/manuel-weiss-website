<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR-Prozessautomatisierung nach Standortbestimmung - Manuel Weiss</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Auf Basis Ihrer HR-Standortbestimmung: Strukturierter Workflow für Prozessautomatisierung nach Harvard & MIT. RPA, KI-Integration, BPMN.">
    <meta name="keywords" content="HR-Standortbestimmung, HR-Automatisierung Workflow, RPA, KI-Integration, HR-Self-Service, Prozessoptimierung">
    <meta name="author" content="Manuel Weiss">
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/starry-background.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Custom Styles for HR Automation Workflow -->
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
            min-height: 100vh;
            padding-top: 70px;
        }
        
        .workflow-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            padding-bottom: 100px; /* Platz für fixierte Navigation */
            position: relative;
        }
        
        .workflow-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem 2rem;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: white;
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
                        0 2px 8px rgba(0, 0, 0, 0.05),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .workflow-header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            opacity: 0.8;
            z-index: -1;
        }
        
        .workflow-header h1 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.75rem;
        }
        
        .workflow-header p {
            font-size: 1rem;
            opacity: 0.95;
            max-width: 600px;
            position: relative;
            z-index: 1;
        }
        
        .workflow-progress {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .progress-step {
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }
        
        .progress-step:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        
        .progress-step.active {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: #10b981;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }
        
        .progress-step.completed {
            background: rgba(5, 150, 105, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: white;
        }
        .workflow-step {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
                        0 2px 8px rgba(0, 0, 0, 0.05),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            display: none;
        }
        
        .workflow-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12),
                        inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }
        
        .workflow-step.active {
            display: block;
        }
        
        .step-header {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(16, 185, 129, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }
        
        .step-number {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .step-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .step-title {
            flex: 1;
        }
        
        .step-title h2 {
            font-size: 1.8rem;
            color: #1f2937;
            margin: 0;
        }
        
        .step-title p {
            color: #6b7280;
            margin: 0.5rem 0 0;
        }
        
        .step-content {
            margin-top: 2rem;
        }
        
        .step-nav-inline {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
            padding: 1.5rem 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(16, 185, 129, 0.06);
            border-radius: 0 0 16px 16px;
            flex-wrap: wrap;
        }
        .step-nav-inline .step-nav-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            font-weight: 500;
        }
        .step-nav-inline .btn { min-width: 120px; }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            display: block;
        }
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1),
                        0 4px 12px rgba(16, 185, 129, 0.15);
            background: rgba(255, 255, 255, 1);
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(240, 253, 244, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .checkbox-item:hover {
            background: rgba(240, 253, 244, 0.8);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.4);
        }
        
        .checkbox-item input[type="checkbox"] {
            width: auto;
        }
        
        .checkbox-item.checked {
            background: rgba(16, 185, 129, 0.2);
        }
        
        .use-case-card {
            background: rgba(248, 250, 252, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #10b981;
            border: 1px solid rgba(16, 185, 129, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08),
                        inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }
        
        .use-case-card h4 {
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .use-case-card p {
            color: #6b7280;
            margin: 0;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .kpi-item {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            padding: 1rem;
        }
        
        .kpi-item input {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .kpi-item label {
            font-size: 0.875rem;
            color: #374151;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .workflow-navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.98);
            backdrop-filter: blur(20px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .workflow-navigation .btn {
            padding: 0.875rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            text-decoration: none;
        }
        
        .workflow-navigation .btn-primary {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
        }
        
        .workflow-navigation .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        
        .workflow-navigation .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .workflow-navigation .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .workflow-navigation .btn-secondary:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .step-indicator {
            color: white;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .btn {
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .btn-secondary {
            background: rgba(107, 114, 128, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(107, 114, 128, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(75, 85, 99, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(75, 85, 99, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .export-section {
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(248, 250, 252, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .export-section h3 {
            font-size: 1.5rem;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        
        .export-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .btn-pdf {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.9));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-pdf:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(239, 68, 68, 0.4);
        }
        
        .btn-excel {
            background: linear-gradient(135deg, rgba(33, 115, 70, 0.9), rgba(22, 101, 52, 0.9));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-excel:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(33, 115, 70, 0.4);
        }
        
        .btn-word {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(29, 78, 216, 0.9));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-word:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
        }

        .chatbot-section {
            background: rgba(240, 253, 244, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 2px solid rgba(16, 185, 129, 0.3);
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .chatbot-section h3 {
            color: #059669;
            margin-bottom: 1rem;
        }
        
        .chatbot-info p {
            line-height: 1.6;
            color: #374151;
        }
        
        .chatbot-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .feature-item {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            padding: 1rem;
        }
        
        .feature-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.25);
        }
        
        .feature-item i {
            margin-right: 0.75rem;
            color: #10b981;
        }
        
        .feature-item span {
            color: #374151;
        }
        
        .chatbot-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .chatbot-actions .btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }
        
        .custom-inputs {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .custom-input-item {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .custom-input-item input {
            flex: 1;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
        }
        
        .btn-small {
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
            border-radius: 8px;
        }
        
        .summary-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .summary-card h4 {
            color: #1f2937;
            margin-bottom: 1rem;
        }
        
        .summary-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(229, 231, 235, 0.5);
        }
        
        .summary-item:last-child {
            border-bottom: none;
        }
        
        .summary-item strong {
            color: #1f2937;
        }
        
        .summary-item span {
            color: #6b7280;
        }
        
        /* View Switcher & Prozess-Optimierung */
        .view-switcher {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        .view-switcher .btn-view {
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            font-weight: 600;
            border: 2px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.15);
            color: white;
            cursor: pointer;
            transition: all 0.25s ease;
        }
        .view-switcher .btn-view:hover {
            background: rgba(255,255,255,0.25);
        }
        .view-switcher .btn-view.active {
            background: rgba(255,255,255,0.95);
            color: #10b981;
            border-color: #10b981;
        }
        .view-process-optimization { display: none; }
        .view-process-optimization.visible { display: block; }
        .view-strategy.visible { display: block; }
        .view-strategy.hidden { display: none; }
        .process-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .process-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 1.25rem;
            border: 1px solid rgba(16,185,129,0.2);
            cursor: pointer;
            transition: all 0.25s ease;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
        }
        .process-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(16,185,129,0.2);
        }
        .process-card .process-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        .process-card .process-name { font-weight: 700; color: #1f2937; margin-bottom: 0.25rem; }
        .process-card .process-desc { font-size: 0.85rem; color: #6b7280; margin-bottom: 0.5rem; }
        .process-card .process-status {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            display: inline-block;
        }
        .process-card .process-status.pending { background: #fef3c7; color: #92400e; }
        .process-card .process-status.in_progress { background: #dbeafe; color: #1e40af; }
        .process-card .process-status.completed { background: #d1fae5; color: #065f46; }
        .process-detail-panel {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 1.5rem;
            border: 1px solid rgba(16,185,129,0.2);
            display: none;
        }
        .process-detail-panel.visible { display: block; }
        .process-detail-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        .process-detail-header h2 { margin: 0; font-size: 1.35rem; color: #1f2937; }
        .process-tabs {
            display: flex;
            gap: 0.25rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .process-tabs .tab-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: #6b7280;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
        }
        .process-tabs .tab-btn:hover { color: #10b981; }
        .process-tabs .tab-btn.active { color: #10b981; border-bottom-color: #10b981; }
        .process-tab-pane { display: none; }
        .process-tab-pane.active { display: block; }
        .process-notes-editor { width: 100%; min-height: 180px; padding: 0.75rem; border-radius: 12px; border: 1px solid #e5e7eb; font-family: inherit; }
        .process-sketch-container { border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #fff; }
        .process-sketch-canvas { display: block; width: 100%; cursor: crosshair; }
        .process-dictation-area { width: 100%; min-height: 120px; padding: 0.75rem; border-radius: 12px; border: 1px solid #e5e7eb; }
        .process-bpmn-placeholder { padding: 1.5rem; background: #f8fafc; border-radius: 12px; border: 1px dashed #cbd5e1; color: #64748b; text-align: center; }
        
        @media (max-width: 768px) {
            body {
                padding-top: 60px;
            }
            
            .workflow-container {
                padding: 1rem;
                padding-bottom: 100px;
            }
            
            .workflow-header {
                padding: 1.5rem 1rem;
                border-radius: 16px;
            }
            
            .workflow-header h1 {
                font-size: 1.5rem;
            }
            
            .workflow-progress {
                gap: 0.5rem;
                overflow-x: auto;
                padding: 0.5rem 0;
                justify-content: flex-start;
            }
            
            .progress-step {
                padding: 0.5rem 0.75rem;
                font-size: 0.75rem;
                white-space: nowrap;
                flex-shrink: 0;
            }
            
            .workflow-step {
                padding: 1.25rem;
                border-radius: 16px;
            }
            
            .step-header {
                text-align: center;
                padding: 1rem;
            }
            
            .step-title h2 {
                font-size: 1.25rem;
            }
            
            .form-group input,
            .form-group textarea,
            .form-group select {
                font-size: 16px; /* Verhindert iOS Zoom */
            }
            
            .workflow-navigation {
                padding: 0.75rem 1rem;
            }
            
            .workflow-navigation .btn {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr !important;
            }
        }
        /* AWS User System Styles - Integrated in Navigation */
        .user-system {
            margin-left: 20px;
        }
        .user-info {
            gap: 12px;
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 8px 16px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
        }
        .user-info:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .user-avatar {
            width: 32px;
            height: 32px;
            overflow: hidden;
            border: 2px solid #6366f1;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }
        .user-avatar-img {
            height: 100%;
            object-fit: cover;
        }
        .user-details {
            flex-direction: column;
            gap: 2px;
        }
        .user-name {
            color: #1e293b;
            line-height: 1.2;
        }
        .user-email {
            font-size: 0.7rem;
            color: #64748b;
        }
        .user-logout {
            width: 28px;
            height: 28px;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }
        .user-logout:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }
        .user-login {
        }
        .btn-login {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 20px;
            gap: 6px;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }
        .btn-login:hover {
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }
        .btn-login i {
        }
        /* Responsive Design for User System */
        @media (max-width: 768px) {
            .user-system {
                margin-left: 10px;
            }
            .user-info {
                padding: 6px 12px;
                gap: 8px;
            }
            .user-avatar {
                width: 28px;
                height: 28px;
            }
            .user-name {
                font-size: 0.7rem;
            }
            .user-email {
                font-size: 0.6rem;
            }
            .btn-login {
            }
        }
    </style>
    <link rel="stylesheet" href="css/unified-auth-system.css">

    <!-- Progress Badge Styles -->
    <style>
        .user-progress-badge {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 14px;
            min-width: 200px;
        }
        
        .user-progress-badge .user-info,
        .user-progress-badge .progress-sync {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #4a5568;
        }
        
        .user-progress-badge i {
            font-size: 16px;
            color: #667eea;
        }
        
        @media (max-width: 768px) {
            .user-progress-badge {
                top: auto;
                bottom: 20px;
                right: 10px;
                left: 10px;
                min-width: auto;
            }
        }
    </style>
</head>
<body class="starry-theme" data-page-id="hr-automation-workflow">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="manuel-weiss-photo.svg" alt="MW" class="nav-logo">
                <span class="nav-name">Manuel Weiss</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="hr-prozessautomatisierung.html" class="nav-link">HR-Automatisierung</a>
                <a href="index.html#about" class="nav-link">Über mich</a>
                <a href="index.html#contact" class="nav-link">Kontakt</a>
                <!-- AWS User System - Nur auf Service-Unterseiten -->
                <div class="user-system" id="userSystem">
                    <div class="user-info" id="userInfo" style="display: none;">
                        <div class="user-avatar">
                            <img id="userAvatar" src="manuel-weiss-photo.svg" alt="User Avatar" class="user-avatar-img">
                        </div>
                        <div class="user-details">
                            <span class="user-name" id="userName">Benutzer</span>
                            <span class="user-email" id="userEmail">benutzer@example.com</span>
                        </div>
                        <button class="user-logout" id="userLogout" onclick="logoutUser()">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                    
                    <div class="user-login" id="userLogin">
                        <button class="btn-login" onclick="loginUser()">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Anmelden</span>
                        </button>
                    </div>
                
        </div>
    </nav>

    <!-- Progress Badge -->
    <div class="user-progress-badge" style="display: none;">
        <div class="user-info">
            <i class="fas fa-user-circle"></i>
            <span>Nicht angemeldet</span>
        </div>
        <div class="progress-sync">
            <i class="fas fa-cloud-off-alt"></i>
            <span>Fortschritt lokal</span>
        </div>
    </div>
    <div class="workflow-container">
        <!-- Workflow Header -->
        <div class="workflow-header">
            <h1>HR-Prozessautomatisierung</h1>
            <p>Entwickeln Sie eine umfassende Automatisierungsstrategie für Ihr HR mit bewährten Harvard & MIT Methoden</p>
            <p style="margin-top: 0.75rem; font-size: 0.95rem; opacity: 0.9;">
                <i class="fas fa-compass"></i> Auf Basis Ihrer <a href="hr-selbsttest.html" style="color: rgba(255,255,255,0.95); text-decoration: underline;">Standortbestimmung</a> – Vision, Kultur, Organisation und Prozesse bewertet.
            </p>
        </div>
        <!-- View Switcher -->
        <div class="view-switcher">
            <button type="button" class="btn-view active" id="btnViewStrategy" onclick="hrAutomationShowView('strategy')">Strategie-Workflow</button>
            <button type="button" class="btn-view" id="btnViewProcess" onclick="hrAutomationShowView('process')">Prozess-Optimierung</button>
        </div>
        <!-- Prozess-Automatisierung Workflow (8 Schritte) -->
        <div class="view-strategy visible" id="viewStrategy">
        <!-- Progress Indicator (klickbar – direkt zu Schritt springen) -->
        <div class="workflow-progress" id="workflowProgress">
            <div class="progress-step active" data-step="1" onclick="goToStep(1)" role="button" tabindex="0" title="Schritt 1: Analyse">
                <i class="fas fa-search"></i>
                <span>Analyse</span>
            </div>
            <div class="progress-step" data-step="2" onclick="goToStep(2)" role="button" tabindex="0" title="Schritt 2: Ist-Zustand">
                <i class="fas fa-clipboard-list"></i>
                <span>Ist-Zustand</span>
            </div>
            <div class="progress-step" data-step="3" onclick="goToStep(3)" role="button" tabindex="0" title="Schritt 3: Ziele">
                <i class="fas fa-bullseye"></i>
                <span>Ziele</span>
            </div>
            <div class="progress-step" data-step="4" onclick="goToStep(4)" role="button" tabindex="0" title="Schritt 4: Zeichnen">
                <i class="fas fa-pencil-alt"></i>
                <span>Zeichnen</span>
            </div>
            <div class="progress-step" data-step="5" onclick="goToStep(5)" role="button" tabindex="0" title="Schritt 5: Diktieren">
                <i class="fas fa-microphone"></i>
                <span>Diktieren</span>
            </div>
            <div class="progress-step" data-step="6" onclick="goToStep(6)" role="button" tabindex="0" title="Schritt 6: BPMN">
                <i class="fas fa-project-diagram"></i>
                <span>BPMN</span>
            </div>
            <div class="progress-step" data-step="7" onclick="goToStep(7)" role="button" tabindex="0" title="Schritt 7: Umsetzung">
                <i class="fas fa-road"></i>
                <span>Umsetzung</span>
            </div>
            <div class="progress-step" data-step="8" onclick="goToStep(8)" role="button" tabindex="0" title="Schritt 8: Monitoring">
                <i class="fas fa-chart-bar"></i>
                <span>Monitoring</span>
            </div>
        </div>
        <!-- Step 1: Vision & strategische Verankerung -->
        <div class="workflow-step active" data-step="1">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">
                    <h2>Vision & strategische Verankerung</h2>
                    <p>Harvard: Prozessautomatisierung muss messbar zur HR-Exzellenz beitragen</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Unternehmensname</label>
                    <input type="text" id="companyName" placeholder="Ihr Unternehmen">
                </div>
                <div class="form-group">
                    <label>Branche</label>
                    <select id="industry">
                        <option value="">Branche auswählen</option>
                        <option value="technology">Technologie</option>
                        <option value="finance">Finanzdienstleistungen</option>
                        <option value="healthcare">Gesundheitswesen</option>
                        <option value="manufacturing">Produktion</option>
                        <option value="retail">Einzelhandel</option>
                        <option value="consulting">Beratung</option>
                        <option value="other">Andere</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Mitarbeiteranzahl</label>
                    <select id="employeeCount">
                        <option value="">Anzahl auswählen</option>
                        <option value="1-50">1-50</option>
                        <option value="51-200">51-200</option>
                        <option value="201-500">201-500</option>
                        <option value="501-1000">501-1000</option>
                        <option value="1000+">1000+</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>HR-Ziele durch Automatisierung verbessern</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item"><input type="checkbox" id="goal1" value="time-to-hire"><label for="goal1">Time-to-Hire reduzieren</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="goal2" value="employee-self-service"><label for="goal2">Employee Self-Service ausbauen</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="goal3" value="cost-reduction"><label for="goal3">Kostenreduktion</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="goal4" value="process-efficiency"><label for="goal4">Prozesseffizienz steigern</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="goal5" value="employee-experience"><label for="goal5">Employee Experience verbessern</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="goal6" value="compliance"><label for="goal6">Compliance sicherstellen</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>HR-Vision mit KI-Automatisierung</label>
                    <textarea id="hrVision" placeholder="Beschreiben Sie Ihre HR-Vision mit KI-Automatisierung: 'People First, but AI Powered'..."></textarea>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 1 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
        
        <!-- Step 2: Wertschöpfung & Use Cases -->
        <div class="workflow-step" data-step="2">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">
                    <h2>Wertschöpfung & Use Cases</h2>
                    <p>MIT: "Use Case Factory" - kleine Automatisierungen pilotieren, dann skalieren</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Prioritäre HR-Bereiche für Automatisierung</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item"><input type="checkbox" id="area1" value="recruiting"><label for="area1">Recruiting & Onboarding</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="area2" value="administration"><label for="area2">HR-Administration</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="area3" value="payroll"><label for="area3">Payroll & Compliance</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="area4" value="learning"><label for="area4">Learning & Development</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="area5" value="analytics"><label for="area5">People Analytics</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="area6" value="self-service"><label for="area6">Employee Self-Service</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Konkrete Automatisierungs-Use Cases</label>
                    <div class="use-case-card">
                        <h4>Recruiting & Onboarding</h4>
                        <p>Automatisierte Terminplanung, KI-gestützte Dokumentenprüfung, Chatbots für Bewerberfragen</p>
                    </div>
                    <div class="use-case-card">
                        <h4>HR-Administration</h4>
                        <p>Automatisierte Vertragserstellung, digitale Assistenten für Urlaubsanträge, KI für HR-Ticketing</p>
                    </div>
                    <div class="use-case-card">
                        <h4>Payroll & Compliance</h4>
                        <p>Automatisierte Dokumentprüfung, KI-gestützte Anomalieerkennung, Compliance-Checks</p>
                    </div>
                </div>
                <div class="form-group">
                    <label>Erwartete Werthebel</label>
                    <div class="kpi-grid">
                        <div class="kpi-item"><label>Zeitersparnis (Stunden/Monat)</label><input type="number" id="timeSavings" placeholder="0"></div>
                        <div class="kpi-item"><label>Kosteneinsparungen (€/Jahr)</label><input type="number" id="costSavings" placeholder="0"></div>
                        <div class="kpi-item"><label>Fehlerreduktion (%)</label><input type="number" id="errorReduction" placeholder="0"></div>
                        <div class="kpi-item"><label>Mitarbeiterzufriedenheit (1-10)</label><input type="number" id="employeeSatisfaction" placeholder="0" min="1" max="10"></div>
                    </div>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 2 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
        
        <!-- Step 3: Daten- und Technologie-Architektur -->
        <div class="workflow-step" data-step="3">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">
                    <h2>Daten- und Technologie-Architektur</h2>
                    <p>Harvard: Datenqualität & Governance - MIT: "Data Infrastructure Readiness"</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Bestehende HR-Systeme</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item"><input type="checkbox" id="system1" value="ats"><label for="system1">ATS (Applicant Tracking System)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="system2" value="hris"><label for="system2">HRIS (HR Information System)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="system3" value="payroll"><label for="system3">Payroll System</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="system4" value="lms"><label for="system4">LMS (Learning Management System)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="system5" value="performance"><label for="system5">Performance Management</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="system6" value="other"><label for="system6">Andere Systeme</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Automatisierungstechnologien</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item"><input type="checkbox" id="tech1" value="rpa"><label for="tech1">RPA (Robotic Process Automation)</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tech2" value="nlp"><label for="tech2">NLP für Dokumentenerkennung</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tech3" value="chatbots"><label for="tech3">Chatbots & Conversational AI</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tech4" value="ml"><label for="tech4">Machine Learning für Anomalien</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tech5" value="low-code"><label for="tech5">Low-Code/No-Code Plattformen</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="tech6" value="process-mining"><label for="tech6">Process Mining</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Datenqualität bewerten</label>
                    <div class="kpi-grid">
                        <div class="kpi-item"><label>Datenvollständigkeit (%)</label><input type="number" id="dataCompleteness" placeholder="0"></div>
                        <div class="kpi-item"><label>System-Integration (%)</label><input type="number" id="systemIntegration" placeholder="0"></div>
                        <div class="kpi-item"><label>Datenqualität (1-10)</label><input type="number" id="dataQuality" placeholder="0" min="1" max="10"></div>
                        <div class="kpi-item"><label>API-Verfügbarkeit (%)</label><input type="number" id="apiAvailability" placeholder="0"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Technologie-Architektur Anforderungen</label>
                    <textarea id="techRequirements" placeholder="Beschreiben Sie Ihre Anforderungen an die Automatisierungs-Architektur..."></textarea>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 3 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
        <!-- Step 4: Prozess-Zeichnen -->
        <div class="workflow-step" data-step="4">
            <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">
                    <h2><i class="fas fa-pencil-alt"></i> Prozess-Zeichnen</h2>
                    <p>Skizzieren Sie Ihre HR-Prozesse visuell auf dem Canvas</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Wählen Sie einen Prozess zum Zeichnen:</label>
                    <select id="processToSketch" onchange="loadProcessForSketching(this.value)">
                        <option value="">Prozess auswählen...</option>
                        <option value="recruiting">Recruiting</option>
                        <option value="onboarding">Onboarding</option>
                        <option value="payroll">Payroll</option>
                        <option value="performance">Performance Management</option>
                        <option value="learning">Learning & Development</option>
                        <option value="offboarding">Offboarding</option>
                        <option value="hr-admin">HR-Administration</option>
                    </select>
                </div>
                
                <div class="sketch-area">
                    <div class="sketch-toolbar" style="margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button type="button" class="btn btn-secondary btn-small" onclick="setSketchColor('#1f2937')"><i class="fas fa-pen"></i> Schwarz</button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="setSketchColor('#6366f1')"><i class="fas fa-pen"></i> Lila</button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="setSketchColor('#10b981')"><i class="fas fa-pen"></i> Grün</button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="setSketchColor('#ef4444')"><i class="fas fa-pen"></i> Rot</button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="setSketchWidth(2)">Dünn</button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="setSketchWidth(5)">Dick</button>
                    </div>
                    
                    <div class="process-sketch-container" style="border: 2px solid rgba(255,255,255,0.2); border-radius: 16px; overflow: hidden; background: white;">
                        <canvas id="step4Canvas" class="process-sketch-canvas" width="800" height="450" style="width: 100%; cursor: crosshair;"></canvas>
                    </div>
                    
                    <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button type="button" class="btn btn-secondary" onclick="clearStep4Canvas()">
                            <i class="fas fa-eraser"></i> Canvas löschen
                        </button>
                        <button type="button" class="btn btn-primary" onclick="saveStep4Sketch()">
                            <i class="fas fa-save"></i> Skizze speichern
                        </button>
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 1.5rem;">
                    <label>Notizen zur Skizze:</label>
                    <textarea id="sketchNotes" placeholder="Beschreiben Sie die wichtigsten Prozessschritte, die Sie gezeichnet haben..." rows="4"></textarea>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 4 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
        <!-- Step 5: Spracheingabe / Diktat -->
        <div class="workflow-step" data-step="5">
            <div class="step-header">
                <div class="step-number">5</div>
                <div class="step-title">
                    <h2><i class="fas fa-microphone"></i> Spracheingabe</h2>
                    <p>Beschreiben Sie Ihre Prozesse per Text oder Diktat für die BPMN-Generierung</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Wählen Sie den Prozess zur Beschreibung:</label>
                    <select id="processToDictate">
                        <option value="">Prozess auswählen...</option>
                        <option value="recruiting">Recruiting</option>
                        <option value="onboarding">Onboarding</option>
                        <option value="payroll">Payroll</option>
                        <option value="performance">Performance Management</option>
                        <option value="learning">Learning & Development</option>
                        <option value="offboarding">Offboarding</option>
                        <option value="hr-admin">HR-Administration</option>
                    </select>
                </div>
                
                <div class="dictation-area" style="background: rgba(255,255,255,0.05); border-radius: 16px; padding: 1.5rem; border: 1px solid rgba(255,255,255,0.1);">
                    <div class="dictation-controls" style="margin-bottom: 1rem; display: flex; gap: 0.5rem; align-items: center;">
                        <button type="button" class="btn btn-primary" id="startDictationBtn" onclick="startDictation()">
                            <i class="fas fa-microphone"></i> Diktat starten
                        </button>
                        <button type="button" class="btn btn-secondary" id="stopDictationBtn" onclick="stopDictation()" style="display: none;">
                            <i class="fas fa-stop"></i> Stoppen
                        </button>
                        <span id="dictationStatus" style="color: rgba(255,255,255,0.7); font-size: 0.9rem;"></span>
                    </div>
                    
                    <label>Prozessbeschreibung (tippen oder diktieren):</label>
                    <textarea id="processDescription" class="process-dictation-area" rows="10" placeholder="Beschreiben Sie den Prozess Schritt für Schritt:

Beispiel für Recruiting:
1. Stellenanforderung wird vom Fachbereich eingereicht
2. HR prüft Budget und Genehmigung
3. Stellenausschreibung wird erstellt und veröffentlicht
4. Bewerbungen werden gesammelt und gesichtet
5. Vorauswahl durch HR (CV-Screening)
6. Erstgespräche werden terminiert
7. Interviews werden durchgeführt
8. Entscheidung und Vertragsangebot
..."></textarea>
                    
                    <div style="margin-top: 1rem;">
                        <button type="button" class="btn btn-primary" onclick="saveDictation()">
                            <i class="fas fa-save"></i> Beschreibung speichern
                        </button>
                    </div>
                </div>
                
                <div class="info-box" style="margin-top: 1.5rem; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 12px; padding: 1rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; color: #a5b4fc; margin-bottom: 0.5rem;">
                        <i class="fas fa-info-circle"></i>
                        <strong>Tipp für bessere BPMN-Generierung</strong>
                    </div>
                    <ul style="color: rgba(255,255,255,0.8); margin: 0; padding-left: 1.25rem; font-size: 0.9rem;">
                        <li>Beschreiben Sie jeden Schritt in einer neuen Zeile</li>
                        <li>Nummerieren Sie die Schritte (1., 2., 3., ...)</li>
                        <li>Nennen Sie Entscheidungspunkte explizit ("Wenn ja..., wenn nein...")</li>
                        <li>Geben Sie Verantwortlichkeiten an (HR, Fachbereich, Mitarbeiter)</li>
                    </ul>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 5 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
        <!-- Step 6: BPMN-Generierung -->
        <div class="workflow-step" data-step="6">
            <div class="step-header">
                <div class="step-number">6</div>
                <div class="step-title">
                    <h2><i class="fas fa-project-diagram"></i> BPMN-Generierung</h2>
                    <p>Automatische Erstellung eines BPMN-Modells aus Ihrer Prozessbeschreibung</p>
                </div>
            </div>
            <div class="step-content">
                <div class="bpmn-generation-area">
                    <div class="form-group">
                        <label>Prozessbeschreibung aus Schritt 5:</label>
                        <div id="bpmnSourceText" style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1rem; min-height: 100px; color: rgba(255,255,255,0.8); border: 1px solid rgba(255,255,255,0.1);">
                            <em>Laden Sie zuerst eine Prozessbeschreibung aus Schritt 5...</em>
                        </div>
                    </div>
                    
                    <div style="margin: 1.5rem 0; display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center;">
                        <button type="button" class="btn btn-primary btn-large" onclick="generateBPMN()" style="padding: 1rem 2rem; font-size: 1.1rem;">
                            <i class="fas fa-magic"></i> BPMN-Modell generieren
                        </button>
                        <button type="button" class="btn btn-primary btn-large" onclick="generateBPMNWithGPT()" style="padding: 1rem 2rem; font-size: 1.1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-brain"></i> Mit GPT 5.2 generieren
                        </button>
                    </div>
                    
                    <div id="bpmnGenerationStatus" style="display: none; padding: 1rem; background: rgba(251, 191, 36, 0.1); border-radius: 12px; border: 1px solid rgba(251, 191, 36, 0.3); margin-bottom: 1rem;">
                        <i class="fas fa-spinner fa-spin"></i> BPMN wird generiert...
                    </div>
                    
                    <div class="bpmn-result" id="bpmnResult" style="display: none;">
                        <label>Generiertes BPMN-Modell (XML):</label>
                        <div style="background: #1e293b; border-radius: 12px; padding: 1rem; overflow: auto; max-height: 400px;">
                            <pre id="bpmnXmlOutput" style="color: #10b981; font-family: monospace; font-size: 0.85rem; white-space: pre-wrap; margin: 0;"></pre>
                        </div>
                        
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button type="button" class="btn btn-primary" onclick="downloadBPMN()">
                                <i class="fas fa-download"></i> BPMN herunterladen
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="copyBPMN()">
                                <i class="fas fa-copy"></i> XML kopieren
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="openBPMNInDemo()">
                                <i class="fas fa-external-link-alt"></i> In demo.bpmn.io öffnen
                            </button>
                        </div>
                        <p style="margin-top: 0.75rem; font-size: 0.875rem;">
                            <a href="bpmn-generator.html" style="color: #667eea;">BPMN-Generator als eigene Seite öffnen</a>
                        </p>
                    </div>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 6 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
        <!-- Step 7: Umsetzung -->
        <div class="workflow-step" data-step="7">
            <div class="step-header">
                <div class="step-number">7</div>
                <div class="step-title">
                    <h2><i class="fas fa-road"></i> Umsetzung</h2>
                    <p>Roadmap und Tool-Auswahl für Ihre Prozessautomatisierung</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Automatisierungs-Tools auswählen:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="tool1" value="uipath">
                            <label for="tool1">UiPath (RPA)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tool2" value="power-automate">
                            <label for="tool2">Microsoft Power Automate</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tool3" value="zapier">
                            <label for="tool3">Zapier</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tool4" value="workato">
                            <label for="tool4">Workato</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tool5" value="camunda">
                            <label for="tool5">Camunda (BPMN Engine)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="tool6" value="custom">
                            <label for="tool6">Eigenentwicklung</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Umsetzungs-Priorität:</label>
                    <select id="implementationPriority">
                        <option value="">Priorität wählen...</option>
                        <option value="quick-wins">Quick Wins zuerst (< 2 Wochen)</option>
                        <option value="high-impact">High Impact zuerst (größter ROI)</option>
                        <option value="low-risk">Low Risk zuerst (einfache Prozesse)</option>
                        <option value="strategic">Strategisch (nach Roadmap)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Geplanter Starttermin:</label>
                    <input type="date" id="implementationStart">
                </div>
                <div class="form-group">
                    <label>Verantwortlicher / Projektleiter:</label>
                    <input type="text" id="projectLead" placeholder="Name des Projektleiters">
                </div>
                <div class="form-group">
                    <label>Budget (CHF)</label>
                    <input type="text" id="budget" placeholder="z. B. 50.000">
                </div>
                <div class="form-group">
                    <label>Umsetzungs-Notizen:</label>
                    <textarea id="implementationNotes" rows="4" placeholder="Weitere Details zur Umsetzung..."></textarea>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 7 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-arrow-right"></i> Weiter</button>
                </div>
            </div>
        </div>
                <!-- Step 8: Monitoring -->
        <div class="workflow-step" data-step="8">
            <div class="step-header">
                <div class="step-number">8</div>
                <div class="step-title">
                    <h2><i class="fas fa-chart-bar"></i> Monitoring & KPIs</h2>
                    <p>Definieren Sie Erfolgskennzahlen und kontinuierliche Verbesserung</p>
                </div>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label>Wichtigste KPIs für Ihre Automatisierung:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="kpi1" value="time-savings">
                            <label for="kpi1">Zeitersparnis (Stunden/Monat)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="kpi2" value="cost-savings">
                            <label for="kpi2">Kosteneinsparung (CHF/Jahr)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="kpi3" value="error-rate">
                            <label for="kpi3">Fehlerquote (%)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="kpi4" value="processing-time">
                            <label for="kpi4">Durchlaufzeit (Tage)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="kpi5" value="satisfaction">
                            <label for="kpi5">Mitarbeiterzufriedenheit</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="kpi6" value="automation-rate">
                            <label for="kpi6">Automatisierungsgrad (%)</label>
                        </div>
                    </div>
                </div>
                
                <div class="kpi-targets" style="margin-top: 1.5rem;">
                    <label>KPI-Zielwerte definieren:</label>
                    <div class="kpi-grid">
                    <div class="kpi-item">
                        <label>Ziel Zeitersparnis</label>
                        <input type="number" id="targetTimeSavings" placeholder="z. B. 100">
                    </div>
                    <div class="kpi-item">
                        <label>Kosten-Ziel (CHF/Jahr)</label>
                        <input type="number" id="targetCostSavings" placeholder="z. B. 50000">
                    </div>
                    <div class="kpi-item">
                        <label>Fehlerquote-Ziel (%)</label>
                        <input type="number" id="targetErrorRate" placeholder="z. B. 2">
                    </div>
                    <div class="kpi-item">
                        <label>Automatisierungsgrad (%)</label>
                        <input type="number" id="targetAutomationRate" placeholder="z. B. 80">
                    </div>
                </div>
                <div class="form-group">
                    <label>Review-Rhythmus</label>
                    <select id="reviewCycle">
                        <option value="">Rhythmus wählen...</option>
                        <option value="weekly">Wöchentlich</option>
                        <option value="biweekly">Alle 2 Wochen</option>
                        <option value="monthly">Monatlich</option>
                        <option value="quarterly">Quartalsweise</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Kontinuierliche Verbesserung - nächste Schritte:</label>
                    <textarea id="nextSteps" rows="4" placeholder="Was sind die nächsten konkreten Schritte nach diesem Assessment?"></textarea>
                </div>
                <div class="step-nav-inline">
                    <button type="button" class="btn btn-secondary" data-action="workflow-prev" onclick="previousStep(); return false;"><i class="fas fa-arrow-left"></i> Zurück</button>
                    <span class="step-nav-label">Schritt 8 von 8</span>
                    <button type="button" class="btn btn-primary" data-action="workflow-next" onclick="nextStep(); return false;"><i class="fas fa-check"></i> Zusammenfassung</button>
                </div>
                
                <div class="summary-actions" style="margin-top: 2rem; padding: 1.5rem; background: rgba(16, 185, 129, 0.1); border-radius: 16px; border: 1px solid rgba(16, 185, 129, 0.3);">
                    <h3 style="color: #10b981; margin-bottom: 1rem;"><i class="fas fa-check-circle"></i> Workflow abschließen</h3>
                    <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">Sie haben alle 8 Schritte durchlaufen. Jetzt können Sie Ihre Ergebnisse exportieren.</p>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button type="button" class="btn btn-primary" onclick="exportWorkflowResults()">
                            <i class="fas fa-download"></i> Alle Ergebnisse exportieren
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetWorkflow()">
                            <i class="fas fa-redo"></i> Workflow zurücksetzen
                        </button>
                    </div>
                </div>
            </div>
        </div>
<!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="manuel-weiss-photo.svg" alt="MW" class="nav-logo">
                <span class="nav-name">Manuel Weiss</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="hr-prozessautomatisierung.html" class="nav-link">HR-Automatisierung</a>
                <a href="index.html#about" class="nav-link">Über mich</a>
                <a href="index.html#contact" class="nav-link">Kontakt</a>
                <!-- AWS User System - Nur auf Service-Unterseiten -->
                <div class="user-system" id="userSystem">
                    <div class="user-info" id="userInfo" style="display: none;">
                        <div class="user-avatar">
                            <img id="userAvatar" src="manuel-weiss-photo.svg" alt="User Avatar" class="user-avatar-img">
                        </div>
                        <div class="user-details">
                            <span class="user-name" id="userName">Benutzer</span>
                            <span class="user-email" id="userEmail">benutzer@example.com</span>
                        </div>
                        <button class="user-logout" id="userLogout" onclick="logoutUser()">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                    
                    <div class="user-login" id="userLogin">
                        <button class="btn-login" onclick="loginUser()">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Anmelden</span>
                        </button>
                    </div>
                
        </div>
    </nav>

<!-- Navigation - FIXIERT AM UNTEREN RAND (nur im Strategie-Workflow sichtbar) -->
    <div class="workflow-navigation" id="workflowNavigation" data-visible-for="strategy">
        <button type="button" class="btn btn-secondary" id="prevBtn" data-action="workflow-prev" onclick="previousStep(); return false;" disabled>
            <i class="fas fa-arrow-left"></i>
            <span>Zurück</span>
        </button>
        <div class="step-indicator">
            Schritt <span id="currentStep">1</span> von <span id="totalSteps">8</span>
        </div>
        <button type="button" class="btn btn-primary" id="nextBtn" data-action="workflow-next" onclick="nextStep(); return false;">
            <span>Weiter</span>
            <i class="fas fa-arrow-right"></i>
        </button>
    </div>
    
    <!-- Prozess-Optimierung: Dashboard + Detail -->
    <div class="view-process-optimization" id="viewProcessOptimization">
            <div class="process-dashboard" id="processDashboard"></div>
            <div class="process-detail-panel" id="processDetailPanel">
                <div class="process-detail-header">
                    <h2 id="processDetailTitle">Prozess auswählen</h2>
                    <button type="button" class="btn btn-secondary" id="btnProcessDetailBack" onclick="hrAutomationShowProcessList()">
                        <i class="fas fa-arrow-left"></i> Zurück
                    </button>
                </div>
                <div class="process-tabs">
                    <button type="button" class="tab-btn active" data-tab="notes" onclick="hrAutomationSwitchTab('notes')">Notizen</button>
                    <button type="button" class="tab-btn" data-tab="sketch" onclick="hrAutomationSwitchTab('sketch')">Skizze</button>
                    <button type="button" class="tab-btn" data-tab="dictation" onclick="hrAutomationSwitchTab('dictation')">Diktat</button>
                    <button type="button" class="tab-btn" data-tab="bpmn" onclick="hrAutomationSwitchTab('bpmn')">BPMN</button>
                </div>
                <div id="processTabNotes" class="process-tab-pane active">
                    <textarea class="process-notes-editor" id="processNotesEditor" placeholder="Notizen zu diesem Prozess…"></textarea>
                    <button type="button" class="btn btn-primary" style="margin-top:0.5rem;" onclick="hrAutomationSaveNotes()"><i class="fas fa-save"></i> Speichern</button>
                </div>
                <div id="processTabSketch" class="process-tab-pane">
                    <div class="process-sketch-container">
                        <canvas id="processSketchCanvas" class="process-sketch-canvas" width="800" height="400"></canvas>
                    </div>
                    <button type="button" class="btn btn-secondary" style="margin-top:0.5rem;" onclick="hrAutomationSketchClear()"><i class="fas fa-eraser"></i> Löschen</button>
                    <button type="button" class="btn btn-primary" style="margin-top:0.5rem;" onclick="hrAutomationSketchSave()"><i class="fas fa-save"></i> Skizze speichern</button>
                </div>
                <div id="processTabDictation" class="process-tab-pane">
                    <textarea class="process-dictation-area" id="processDictationText" placeholder="Prozess beschreiben (getippt oder diktiert) – wird für BPMN-Generierung verwendet."></textarea>
                    <button type="button" class="btn btn-primary" style="margin-top:0.5rem;" onclick="hrAutomationSaveDictation()"><i class="fas fa-save"></i> Speichern</button>
                    <button type="button" class="btn btn-secondary" style="margin-top:0.5rem;" onclick="hrAutomationGenerateBpmn()"><i class="fas fa-project-diagram"></i> BPMN aus Text generieren</button>
                </div>
                <div id="processTabBpmn" class="process-tab-pane">
                    <div class="process-bpmn-placeholder" id="processBpmnPlaceholder">BPMN-Modell wird aus dem Diktat-Text generiert. Zuerst unter „Diktat“ Text eingeben und „BPMN aus Text generieren“ klicken.</div>
                    <div id="processBpmnDiagram" style="display:none;"></div>
                </div>
            </div>
        </div>
    </div>
<!-- Auth Modals -->
<div id="authModalsContainer"></div>
<script src="js/aws-app-config.js"></script>
<script src="js/aws-api-settings.js"></script>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1490.0.min.js"></script>
<script src="js/aws-auth.js"></script>
<script src="js/workflow-export.js"></script>
<script src="js/hr-process-improvement-state.js"></script>
    <script>
        let currentStep = 1;
        const totalSteps = 8;
    // Load auth modals
    async function loadAuthModals() {
        try {
            const response = await fetch('components/auth-modals.html');
            const html = await response.text();
            document.getElementById('authModalsContainer').innerHTML = html;
        } catch (error) {
            console.error('Error loading auth modals:', error);
        }
    }
    // AWS User System Functions
    function loginUser() {
        const modal = document.getElementById('loginModal');
        if (modal) {
            modal.style.display = 'flex';
        }
    }
    function logoutUser() {
        if (window.awsAuth) {
            window.awsAuth.signOut().then(() => {
                console.log('Erfolgreich abgemeldet');
            }).catch(error => {
                console.error('Fehler beim Abmelden:', error);
            });
        }
    }
    // Initialize auth system and workflow navigation
    document.addEventListener('DOMContentLoaded', async function() {
        await loadAuthModals();
        if (window.awsAuth) {
            window.awsAuth.checkUserStatus();
        }
        // Workflow-Schritte und Nav beim Start synchronisieren
        if (typeof updateProgress === 'function') updateProgress();
        // Weiter/Zurück-Buttons direkt binden (falls onclick/Delegation nicht greift)
        function bindWorkflowNav() {
            document.querySelectorAll('[data-action="workflow-next"]').forEach(function(btn) {
                btn.removeEventListener('click', handleNext);
                btn.addEventListener('click', handleNext);
            });
            document.querySelectorAll('[data-action="workflow-prev"]').forEach(function(btn) {
                btn.removeEventListener('click', handlePrev);
                btn.addEventListener('click', handlePrev);
            });
        }
        function handleNext(e) { e.preventDefault(); e.stopPropagation(); nextStep(); }
        function handlePrev(e) { e.preventDefault(); e.stopPropagation(); previousStep(); }
        bindWorkflowNav();
    });
    function updateProgress() {
            // Update progress indicators
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
            // Update step visibility
            document.querySelectorAll('.workflow-step').forEach((step, index) => {
                step.classList.remove('active');
                if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
            // Initialize canvas when Step 4 active
            if (currentStep === 4) {
                setTimeout(initStep4Canvas, 100);
            }
            // Sync BPMN text when Step 6 active
            if (currentStep === 6) {
                const text = document.getElementById('processDescription').value || '';
                if (text) {
                    document.getElementById('bpmnSourceText').innerHTML = text.replace(/\\n/g, '<br>');
                }
            }
            // Update navigation (nur im Strategie-Workflow)
            var prevBtn = document.getElementById('prevBtn');
            var nextBtn = document.getElementById('nextBtn');
            if (prevBtn) { prevBtn.disabled = currentStep === 1; prevBtn.setAttribute('aria-disabled', currentStep === 1); }
            if (nextBtn) {
                nextBtn.disabled = false;
                nextBtn.textContent = currentStep === totalSteps ? 'Zusammenfassung' : 'Weiter';
            }
            var cur = document.getElementById('currentStep');
            var tot = document.getElementById('totalSteps');
            if (cur) cur.textContent = currentStep;
            if (tot) tot.textContent = totalSteps;
            // Inline-Nav in jedem Schritt aktualisieren
            document.querySelectorAll('.step-nav-inline').forEach(function (nav) {
                var lbl = nav.querySelector('.step-nav-label');
                var prev = nav.querySelector('.btn-secondary');
                var nxt = nav.querySelector('.btn-primary');
                if (lbl) lbl.textContent = 'Schritt ' + currentStep + ' von ' + totalSteps;
                if (prev) { prev.disabled = currentStep === 1; prev.style.display = currentStep === 1 ? 'none' : ''; }
                if (nxt) {
                    nxt.disabled = false;
                    nxt.textContent = currentStep === totalSteps ? 'Zusammenfassung' : 'Weiter';
                    nxt.innerHTML = (currentStep === totalSteps ? '<i class=\"fas fa-check\"></i> ' : '<i class=\"fas fa-arrow-right\"></i> ') + nxt.textContent;
                }
            });
    }
    function goToStep(step) {
            var s = parseInt(step, 10);
            if (s >= 1 && s <= totalSteps) {
                currentStep = s;
                updateProgress();
                if (currentStep === totalSteps) generateSummary();
            }
    }
    function nextStep() {
            try {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateProgress();
                    if (currentStep === totalSteps) {
                        generateSummary();
                    }
                }
            } catch (e) {
                console.error('nextStep:', e);
            }
    }
    function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
            }
    }
    // Global verfügbar und Delegation (nach Definition der Funktionen)
    window.nextStep = nextStep;
    window.previousStep = previousStep;
    window.goToStep = goToStep;
    window.updateProgress = updateProgress;
    document.addEventListener('click', function(e) {
        var t = e.target.closest('[data-action="workflow-next"]');
        if (t) { e.preventDefault(); e.stopPropagation(); nextStep(); return; }
        t = e.target.closest('[data-action="workflow-prev"]');
        if (t) { e.preventDefault(); e.stopPropagation(); previousStep(); return; }
    }, true);
    function generateSummary() {
            const companyName = document.getElementById('companyName')?.value || '-';
            const industry = document.getElementById('industry')?.value || '-';
            const employeeCount = document.getElementById('employeeCount')?.value || '-';
            const summaryCompanyEl = document.getElementById('summaryCompany');
            if (summaryCompanyEl) summaryCompanyEl.textContent = companyName;
            const summaryIndustryEl = document.getElementById('summaryIndustry');
            if (summaryIndustryEl) summaryIndustryEl.textContent = industry;
            const summaryEmployeesEl = document.getElementById('summaryEmployees');
            if (summaryEmployeesEl) summaryEmployeesEl.textContent = employeeCount;
            // Collect selected goals
            const selectedGoals = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                .map(cb => cb.nextElementSibling.textContent)
                .join(', ');
            const summaryGoalsEl = document.getElementById('summaryGoals');
            if (summaryGoalsEl) summaryGoalsEl.textContent = selectedGoals || '-';
            // Collect selected areas (step 2 area checkboxes)
            const areaCbs = document.querySelectorAll('#area1, #area2, #area3, #area4, #area5, #area6');
            const selectedAreas = Array.from(areaCbs).filter(cb => cb && cb.checked).map(cb => cb.nextElementSibling ? cb.nextElementSibling.textContent : '').join(', ');
            var summaryAreas = document.getElementById('summaryAreas');
            if (summaryAreas) summaryAreas.textContent = selectedAreas || '-';
            // Generate next steps
            const nextSteps = [
                '1. HR Automation CoE einrichten',
                '2. Quick Wins identifizieren und pilotieren',
                '3. Technologie-Architektur aufbauen',
                '4. HR-Teams schulen und sensibilisieren',
                '5. Transparenz und Vertrauen aufbauen',
                '6. KPI-System implementieren und monitoren'
            ];
            var summaryNext = document.getElementById('summaryNextSteps');
            if (summaryNext) summaryNext.innerHTML = nextSteps.map(step => `<div>• ${step}</div>`).join('');
    }
    function getWorkflowData() {
            var areaIds = ['area1','area2','area3','area4','area5','area6'];
            var areas = areaIds.map(function(id) {
                var el = document.getElementById(id);
                return el && el.checked && el.nextElementSibling ? el.nextElementSibling.textContent : null;
            }).filter(Boolean);
            return {
                company: document.getElementById('companyName').value || '',
                industry: document.getElementById('industry').value || '',
                employeeCount: document.getElementById('employeeCount').value || '',
                goals: Array.from(document.querySelectorAll('#goal1,#goal2,#goal3,#goal4,#goal5,#goal6')).filter(function(cb){ return cb && cb.checked; }).map(function(cb){ return cb.nextElementSibling ? cb.nextElementSibling.textContent : ''; }),
                areas: areas,
                timeSavings: document.getElementById('timeSavings') ? document.getElementById('timeSavings').value : 0,
                productivityGain: document.getElementById('productivityGain') ? document.getElementById('productivityGain').value : 0,
                employeeSatisfaction: document.getElementById('employeeSatisfaction') ? document.getElementById('employeeSatisfaction').value : 0,
                collaborationEfficiency: document.getElementById('collaborationEfficiency') ? document.getElementById('collaborationEfficiency').value : 0,
                customInputs: Array.from(document.querySelectorAll('.custom-input-item input'))
                    .map(function(input){ return input.value; })
                    .filter(function(value){ return value.trim() !== ''; })
            };
    }
    var step4CanvasCtx = null;
    var step4Drawing = false;
    var currentSketchColor = '#1f2937';
    var currentSketchWidth = 2;

    function initStep4Canvas() {
        var canvas = document.getElementById('step4Canvas');
        if (!canvas) return;
        step4CanvasCtx = canvas.getContext('2d');
        canvas.onmousedown = function(e) {
            step4Drawing = true;
            var r = canvas.getBoundingClientRect();
            step4CanvasCtx.beginPath();
            step4CanvasCtx.moveTo(e.clientX - r.left, e.clientY - r.top);
        };
        canvas.onmousemove = function(e) {
            if (!step4Drawing) return;
            var r = canvas.getBoundingClientRect();
            step4CanvasCtx.lineTo(e.clientX - r.left, e.clientY - r.top);
            step4CanvasCtx.stroke();
        };
        canvas.onmouseup = canvas.onmouseleave = function() {
            step4Drawing = false;
        };
        canvas.ontouchstart = function(e) {
            e.preventDefault();
            step4Drawing = true;
            var r = canvas.getBoundingClientRect();
            var touch = e.touches[0];
            step4CanvasCtx.beginPath();
            step4CanvasCtx.moveTo(touch.clientX - r.left, touch.clientY - r.top);
        };
        canvas.ontouchmove = function(e) {
            e.preventDefault();
            if (!step4Drawing) return;
            var r = canvas.getBoundingClientRect();
            var touch = e.touches[0];
            step4CanvasCtx.lineTo(touch.clientX - r.left, touch.clientY - r.top);
            step4CanvasCtx.stroke();
        };
        canvas.ontouchend = function() {
            step4Drawing = false;
        };
        step4CanvasCtx.strokeStyle = currentSketchColor;
        step4CanvasCtx.lineWidth = currentSketchWidth;
        step4CanvasCtx.lineCap = 'round';
    }

    function setSketchColor(color) {
        currentSketchColor = color;
        if (step4CanvasCtx) step4CanvasCtx.strokeStyle = color;
    }

    function setSketchWidth(width) {
        currentSketchWidth = width;
        if (step4CanvasCtx) step4CanvasCtx.lineWidth = width;
    }

    function clearStep4Canvas() {
        var canvas = document.getElementById('step4Canvas');
        if (canvas) canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);
    }

    function saveStep4Sketch() {
        var canvas = document.getElementById('step4Canvas');
        var process = document.getElementById('processToSketch').value || 'allgemein';
        if (canvas) {
            var dataUrl = canvas.toDataURL('image/png');
            localStorage.setItem('hrWorkflow_sketch_' + process, dataUrl);
            alert('Skizze für \"' + process + '\" gespeichert!');
        }
    }

    function loadProcessForSketching(processId) {
        if (!processId) return;
        var saved = localStorage.getItem('hrWorkflow_sketch_' + processId);
        clearStep4Canvas();
        if (saved) {
            var canvas = document.getElementById('step4Canvas');
            var ctx = canvas ? canvas.getContext('2d') : null;
            if (ctx) {
                var img = new Image();
                img.onload = function() {
                    ctx.drawImage(img, 0, 0);
                };
                img.src = saved;
            }
        }
    }

    var recognition = null;
    var dictationStartValue = ''; // Text im Textarea beim Start des Diktats – wird nicht überschrieben

    function startDictation() {
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            alert('Spracherkennung wird von Ihrem Browser nicht unterstützt. Bitte tippen Sie den Text.');
            return;
        }
        var textarea = document.getElementById('processDescription');
        if (textarea) dictationStartValue = textarea.value;
        var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        recognition = new SpeechRecognition();
        recognition.lang = 'de-DE';
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.onresult = function(event) {
            var textarea = document.getElementById('processDescription');
            if (!textarea) return;
            var transcript = '';
            for (var i = 0; i < event.results.length; i++) {
                transcript += event.results[i][0].transcript;
            }
            textarea.value = dictationStartValue + transcript;
        };
        recognition.onstart = function() {
            document.getElementById('startDictationBtn').style.display = 'none';
            document.getElementById('stopDictationBtn').style.display = 'inline-flex';
            document.getElementById('dictationStatus').textContent = '🔴 Aufnahme läuft...';
        };
        recognition.onend = function() {
            document.getElementById('startDictationBtn').style.display = 'inline-flex';
            document.getElementById('stopDictationBtn').style.display = 'none';
            document.getElementById('dictationStatus').textContent = '';
            var textarea = document.getElementById('processDescription');
            if (textarea) dictationStartValue = textarea.value;
        };
        recognition.start();
    }

    function stopDictation() {
        if (recognition) recognition.stop();
    }

    function saveDictation() {
        var process = document.getElementById('processToDictate').value || 'allgemein';
        var text = document.getElementById('processDescription').value;
        localStorage.setItem('hrWorkflow_dictation_' + process, text);
        alert('Beschreibung für \"' + process + '\" gespeichert!');
    }

    function generateBPMN() {
        var text = document.getElementById('processDescription').value || localStorage.getItem('hrWorkflow_dictation_allgemein') || '';
        if (!text.trim()) {
            alert('Bitte geben Sie zuerst eine Prozessbeschreibung ein.');
            return;
        }
        document.getElementById('bpmnSourceText').innerHTML = text.replace(/\\n/g, '<br>');
        document.getElementById('bpmnGenerationStatus').style.display = 'block';
        document.getElementById('bpmnResult').style.display = 'none';
        var apiUrl = (window.getApiUrl && window.getApiUrl('TEXT_TO_BPMN')) || (window.AWS_APP_CONFIG && window.AWS_APP_CONFIG.API_BASE ? window.AWS_APP_CONFIG.API_BASE + '/text-to-bpmn' : '');
        if (!apiUrl) { showFallbackBPMN(text); return; }
        fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text: text })
        }).then(function(response) {
            return response.json();
        }).then(function(data) {
            document.getElementById('bpmnGenerationStatus').style.display = 'none';
            document.getElementById('bpmnResult').style.display = 'block';
            if (data && data.bpmnXml) {
                document.getElementById('bpmnXmlOutput').textContent = data.bpmnXml;
                localStorage.setItem('hrWorkflow_bpmn', data.bpmnXml);
            } else {
                showFallbackBPMN(text);
            }
        }).catch(function() {
            document.getElementById('bpmnGenerationStatus').style.display = 'none';
            document.getElementById('bpmnResult').style.display = 'block';
            showFallbackBPMN(text);
        });
    }

    function showFallbackBPMN(text) {
        var safeName = (text.substring(0, 50) || 'Prozess').replace(/[<>"']/g, '').replace(/&/g, '&amp;');
        if (!safeName.trim()) safeName = 'Prozess';
        var fallbackXml = '<?xml version="1.0" encoding="UTF-8"?>\n' +
            '<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI">\n' +
            '  <bpmn:process id="Process_1" isExecutable="true">\n' +
            '    <bpmn:startEvent id="StartEvent_1" name="Start"/>\n' +
            '    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="Task_1"/>\n' +
            '    <bpmn:task id="Task_1" name="' + safeName + '"/>\n' +
            '    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_1" targetRef="EndEvent_1"/>\n' +
            '    <bpmn:endEvent id="EndEvent_1" name="Ende"/>\n' +
            '  </bpmn:process>\n' +
            '  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n' +
            '    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n' +
            '      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1"><dc:Bounds x="152" y="102" width="36" height="36"/></bpmndi:BPMNShape>\n' +
            '      <bpmndi:BPMNShape id="Task_1_di" bpmnElement="Task_1"><dc:Bounds x="240" y="80" width="100" height="80"/></bpmndi:BPMNShape>\n' +
            '      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1"><dc:Bounds x="382" y="102" width="36" height="36"/></bpmndi:BPMNShape>\n' +
            '      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1"><di:waypoint x="188" y="120"/><di:waypoint x="240" y="120"/></bpmndi:BPMNEdge>\n' +
            '      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2"><di:waypoint x="340" y="120"/><di:waypoint x="382" y="120"/></bpmndi:BPMNEdge>\n' +
            '    </bpmndi:BPMNPlane>\n' +
            '  </bpmndi:BPMNDiagram>\n' +
            '</bpmn:definitions>';
        var out = document.getElementById('bpmnXmlOutput');
        if (out) out.textContent = fallbackXml;
        localStorage.setItem('hrWorkflow_bpmn', fallbackXml);
    }
    function downloadBPMN() {
        var xml = document.getElementById('bpmnXmlOutput').textContent;
        if (!xml) return;
        var blob = new Blob([xml], { type: 'application/xml' });
        var url = URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = 'hr-prozess.bpmn';
        a.click();
        URL.revokeObjectURL(url);
    }
    function copyBPMN() {
        var xml = document.getElementById('bpmnXmlOutput').textContent;
        if (!xml || !navigator.clipboard) return;
        navigator.clipboard.writeText(xml).then(function() { alert('BPMN-XML in Zwischenablage kopiert!'); });
    }
    function openBPMNInDemo() {
        var xml = document.getElementById('bpmnXmlOutput').textContent;
        if (!xml || !navigator.clipboard) return;
        navigator.clipboard.writeText(xml).then(function() {
            window.open('https://demo.bpmn.io/new', '_blank');
            alert('XML wurde kopiert. In demo.bpmn.io mit Strg+V einfügen.');
        });
    }
    async function generateBPMNWithGPT() {
        var text = document.getElementById('processDescription').value || localStorage.getItem('hrWorkflow_dictation_allgemein') || '';
        if (!text.trim()) {
            alert('Bitte geben Sie zuerst eine Prozessbeschreibung ein.');
            return;
        }
        document.getElementById('bpmnSourceText').innerHTML = text.replace(/\n/g, '<br>');
        document.getElementById('bpmnGenerationStatus').style.display = 'block';
        document.getElementById('bpmnResult').style.display = 'none';
        var openaiApiKey = '';
        if (window.awsAPISettings && typeof window.awsAPISettings.getFullApiKey === 'function') {
            try {
                var key = await window.awsAPISettings.getFullApiKey('openai');
                if (key && typeof key === 'string' && key.length > 10) openaiApiKey = key;
            } catch (e) { console.warn('OpenAI-Key nicht geladen:', e); }
        }
        var apiUrl = (window.getApiUrl && window.getApiUrl('TEXT_TO_BPMN_GPT')) || (window.AWS_APP_CONFIG && window.AWS_APP_CONFIG.API_BASE ? window.AWS_APP_CONFIG.API_BASE + '/text-to-bpmn-gpt' : '');
        if (!apiUrl) { showFallbackBPMN(text); return; }
        fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text: text, openaiApiKey: openaiApiKey })
        }).then(function(r) { return r.json(); }).then(function(data) {
            document.getElementById('bpmnGenerationStatus').style.display = 'none';
            document.getElementById('bpmnResult').style.display = 'block';
            if (data && data.success && data.bpmnXml) {
                document.getElementById('bpmnXmlOutput').textContent = data.bpmnXml;
                localStorage.setItem('hrWorkflow_bpmn', data.bpmnXml);
            } else {
                showFallbackBPMN(text);
            }
        }).catch(function() {
            document.getElementById('bpmnGenerationStatus').style.display = 'none';
            document.getElementById('bpmnResult').style.display = 'block';
            showFallbackBPMN(text);
        });
    }
    function exportWorkflowResults() {
        var results = { timestamp: new Date().toISOString(), sketches: {}, dictations: {}, bpmn: localStorage.getItem('hrWorkflow_bpmn'), formData: {} };
        for (var key in localStorage) {
            if (key.startsWith('hrWorkflow_sketch_')) results.sketches[key.replace('hrWorkflow_sketch_', '')] = localStorage.getItem(key);
            if (key.startsWith('hrWorkflow_dictation_')) results.dictations[key.replace('hrWorkflow_dictation_', '')] = localStorage.getItem(key);
        }
        document.querySelectorAll('input, select, textarea').forEach(function(input) {
            if (input.id && input.value) results.formData[input.id] = input.type === 'checkbox' ? input.checked : input.value;
        });
        var blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
        var url = URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = 'hr-automation-workflow-results.json';
        a.click();
        URL.revokeObjectURL(url);
    }
    function resetWorkflow() {
        if (!confirm('Möchten Sie wirklich alle Daten zurücksetzen?')) return;
        for (var key in localStorage) { if (key.startsWith('hrWorkflow_')) localStorage.removeItem(key); }
        document.querySelectorAll('input, select, textarea').forEach(function(input) {
            if (input.type === 'checkbox' || input.type === 'radio') input.checked = false;
            else input.value = '';
        });
        document.querySelectorAll('.checkbox-item').forEach(function(item) { item.classList.remove('checked'); });
        clearStep4Canvas();
        var src = document.getElementById('bpmnSourceText');
        if (src) src.innerHTML = 'Die Beschreibung aus Schritt 5 erscheint hier.';
        var res = document.getElementById('bpmnResult');
        if (res) res.style.display = 'none';
        updateProgress();
    }
    function addCustomInput() {
            const customInputs = document.querySelector('.custom-inputs');
            const inputCount = customInputs.querySelectorAll('.custom-input-item').length;
            const newInputId = `customInput${inputCount + 1}`;
            const newInputItem = document.createElement('div');
            newInputItem.className = 'custom-input-item';
            newInputItem.innerHTML = `
                <input type="text" id="${newInputId}" placeholder="Eigene Angabe ${inputCount + 1}">
                <button class="btn btn-small btn-secondary" onclick="removeCustomInput(this)">
                    <i class="fas fa-trash"></i>
            `;
            // Insert before the "Add" button
            const addButton = customInputs.querySelector('button');
            customInputs.insertBefore(newInputItem, addButton);
    }
    function removeCustomInput(button) {
        button.parentElement.remove();
    }
    function startChatbotWorkflow() {
        console.log('🤖 Starting Chatbot Workflow...');
        window.location.href = 'chatbot-workflow.html';
    }
    function viewChatbotDemo() {
        console.log('👁️ Viewing Chatbot Demo...');
        alert('🤖 Chatbot-Demo wird geladen...\n\nDer Chatbot kann:\n• OpenAI GPT-4 Integration\n• REST API Endpunkte\n• System-Integration (HR, CRM, ERP)\n• Sicherheit & Compliance\n• Download & Deployment\n\nKlicken Sie auf "Chatbot-Workflow starten" für die vollständige Konfiguration!');
    }
        // Initialize
        if (typeof updateProgress === 'function') updateProgress();
        // Add event listeners for checkboxes
        document.querySelectorAll('input[type="checkbox"]').forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
                var item = this.closest('.checkbox-item');
                if (item) {
                    if (this.checked) {
                        item.classList.add('checked');
                    } else {
                        item.classList.remove('checked');
                    }
                }
            });
        });
        // --- Prozess-Optimierung ---
        var hrAutomationRegistry = [];
        var hrAutomationCurrentProcessId = null;
        var hrAutomationSketchCtx = null;
        var hrAutomationSketchDrawing = false;
        function hrAutomationShowView(view) {
            var strategy = document.getElementById('viewStrategy');
            var process = document.getElementById('viewProcessOptimization');
            var btnS = document.getElementById('btnViewStrategy');
            var btnP = document.getElementById('btnViewProcess');
            var nav = document.getElementById('workflowNavigation');
            if (view === 'strategy') {
                if (strategy) strategy.classList.add('visible'), strategy.classList.remove('hidden');
                if (process) process.classList.remove('visible');
                if (btnS) btnS.classList.add('active'); if (btnP) btnP.classList.remove('active');
                if (nav) nav.style.display = 'flex';
            } else {
                if (strategy) strategy.classList.add('hidden'), strategy.classList.remove('visible');
                if (process) process.classList.add('visible');
                if (btnS) btnS.classList.remove('active'); if (btnP) btnP.classList.add('active');
                if (nav) nav.style.display = 'none';
                hrAutomationLoadRegistryAndRender();
            }
        }
        function hrAutomationLoadRegistryAndRender() {
            fetch('data/hr-process-registry.json')
                .then(function(r){ return r.json(); })
                .then(function(data){
                    hrAutomationRegistry = data.processes || [];
                    hrAutomationRenderProcessDashboard();
                })
                .catch(function(){ hrAutomationRegistry = []; hrAutomationRenderProcessDashboard(); });
        }
        function hrAutomationRenderProcessDashboard() {
            var el = document.getElementById('processDashboard');
            if (!el) return;
            var list = typeof HRProcessImprovementState !== 'undefined'
                ? HRProcessImprovementState.getAllProcessesWithState(hrAutomationRegistry)
                : hrAutomationRegistry.map(function(p){ return Object.assign({}, p, { status: 'pending', hasNotes: false, hasSketch: false, hasDictation: false, hasBpmn: false }); });
            el.innerHTML = list.map(function(p){
                var statusClass = (p.status === 'completed' ? 'completed' : (p.status === 'in_progress' ? 'in_progress' : 'pending'));
                var statusLabel = (p.status === 'completed' ? 'Abgeschlossen' : (p.status === 'in_progress' ? 'In Bearbeitung' : 'Zu verbessern'));
                var badges = [];
                if (p.hasNotes) badges.push('Notizen');
                if (p.hasSketch) badges.push('Skizze');
                if (p.hasDictation) badges.push('Diktat');
                if (p.hasBpmn) badges.push('BPMN');
                return '<div class="process-card" data-process-id="' + p.id + '" onclick="hrAutomationOpenProcess(\'' + p.id + '\')">' +
                    '<div class="process-icon" style="background:' + (p.color || '#10b981') + '"><i class="fas ' + (p.icon || 'fa-cog') + '"></i></div>' +
                    '<div class="process-name">' + (p.name || p.id) + '</div>' +
                    '<div class="process-desc">' + (p.description || '') + '</div>' +
                    '<span class="process-status ' + statusClass + '">' + statusLabel + '</span>' +
                    (badges.length ? ' <small style="color:#6b7280">(' + badges.join(', ') + ')</small>' : '') +
                    '</div>';
            }).join('');
        }
        function hrAutomationShowProcessList() {
            document.getElementById('processDetailPanel').classList.remove('visible');
            document.getElementById('processDashboard').style.display = 'grid';
            hrAutomationCurrentProcessId = null;
        }
        function hrAutomationOpenProcess(id) {
            hrAutomationCurrentProcessId = id;
            document.getElementById('processDashboard').style.display = 'none';
            var panel = document.getElementById('processDetailPanel');
            panel.classList.add('visible');
            var p = hrAutomationRegistry.find(function(x){ return x.id === id; }) || { id: id, name: id, description: '' };
            document.getElementById('processDetailTitle').textContent = p.name || id;
            hrAutomationSwitchTab('notes');
            document.querySelectorAll('.process-tabs .tab-btn').forEach(function(btn){ btn.classList.toggle('active', btn.getAttribute('data-tab') === 'notes'); });
            document.querySelectorAll('.process-tab-pane').forEach(function(pane){ pane.classList.toggle('active', pane.id === 'processTabNotes'); });
            if (typeof HRProcessImprovementState !== 'undefined') {
                document.getElementById('processNotesEditor').value = HRProcessImprovementState.getNotes(id) || '';
                var sketchUrl = HRProcessImprovementState.getSketch(id);
                hrAutomationSketchLoad(sketchUrl);
                document.getElementById('processDictationText').value = HRProcessImprovementState.getDictation(id) || '';
                var bpmn = HRProcessImprovementState.getBpmn(id);
                if (bpmn && bpmn.xml) {
                    document.getElementById('processBpmnPlaceholder').style.display = 'none';
                    document.getElementById('processBpmnDiagram').style.display = 'block';
                    document.getElementById('processBpmnDiagram').innerHTML = '<pre style="white-space:pre-wrap;font-size:0.85rem;">' + (bpmn.xml.substring(0, 2000) + (bpmn.xml.length > 2000 ? '…' : '')) + '</pre>';
                } else {
                    document.getElementById('processBpmnPlaceholder').style.display = 'block';
                    document.getElementById('processBpmnDiagram').style.display = 'none';
                }
            } else {
                document.getElementById('processNotesEditor').value = '';
                document.getElementById('processDictationText').value = '';
                hrAutomationSketchLoad('');
            }
        }
        function hrAutomationSwitchTab(tab) {
            document.querySelectorAll('.process-tabs .tab-btn').forEach(function(btn){ btn.classList.toggle('active', btn.getAttribute('data-tab') === tab); });
            document.querySelectorAll('.process-tab-pane').forEach(function(pane){
                var paneId = 'processTab' + tab.charAt(0).toUpperCase() + tab.slice(1);
                pane.classList.toggle('active', pane.id === paneId);
            });
            if (tab === 'sketch') hrAutomationSketchInit();
        }
        function hrAutomationSaveNotes() {
            if (!hrAutomationCurrentProcessId) return;
            var text = document.getElementById('processNotesEditor').value || '';
            if (typeof HRProcessImprovementState !== 'undefined') {
                HRProcessImprovementState.saveNotes(hrAutomationCurrentProcessId, text);
                HRProcessImprovementState.setProcessStatus(hrAutomationCurrentProcessId, 'in_progress');
            }
        }
        function hrAutomationSketchInit() {
            var canvas = document.getElementById('processSketchCanvas');
            if (!canvas) return;
            hrAutomationSketchCtx = canvas.getContext('2d');
            canvas.onmousedown = function(e){ hrAutomationSketchDrawing = true; var r = canvas.getBoundingClientRect(); hrAutomationSketchCtx.beginPath(); hrAutomationSketchCtx.moveTo(e.clientX - r.left, e.clientY - r.top); };
            canvas.onmousemove = function(e){ if (!hrAutomationSketchDrawing) return; var r = canvas.getBoundingClientRect(); hrAutomationSketchCtx.lineTo(e.clientX - r.left, e.clientY - r.top); hrAutomationSketchCtx.stroke(); };
            canvas.onmouseup = canvas.onmouseleave = function(){ hrAutomationSketchDrawing = false; };
            hrAutomationSketchCtx.strokeStyle = '#1f2937'; hrAutomationSketchCtx.lineWidth = 2;
        }
        function hrAutomationSketchLoad(dataUrl) {
            var canvas = document.getElementById('processSketchCanvas');
            if (!canvas || !dataUrl) return;
            var ctx = canvas.getContext('2d');
            var img = new Image();
            img.onload = function(){ ctx.drawImage(img, 0, 0); };
            img.src = dataUrl;
        }
        function hrAutomationSketchClear() {
            var canvas = document.getElementById('processSketchCanvas');
            if (canvas) canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);
        }
        function hrAutomationSketchSave() {
            if (!hrAutomationCurrentProcessId) return;
            var canvas = document.getElementById('processSketchCanvas');
            var dataUrl = canvas ? canvas.toDataURL('image/png') : '';
            if (typeof HRProcessImprovementState !== 'undefined') {
                HRProcessImprovementState.saveSketch(hrAutomationCurrentProcessId, dataUrl);
                HRProcessImprovementState.setProcessStatus(hrAutomationCurrentProcessId, 'in_progress');
            }
        }
        function hrAutomationSaveDictation() {
            if (!hrAutomationCurrentProcessId) return;
            var text = document.getElementById('processDictationText').value || '';
            if (typeof HRProcessImprovementState !== 'undefined') {
                HRProcessImprovementState.saveDictation(hrAutomationCurrentProcessId, text);
                HRProcessImprovementState.setProcessStatus(hrAutomationCurrentProcessId, 'in_progress');
            }
        }
        function hrAutomationGenerateBpmn() {
            if (!hrAutomationCurrentProcessId) return;
            var text = document.getElementById('processDictationText').value || '';
            if (!text.trim()) { alert('Bitte zuerst Prozessbeschreibung unter Diktat eingeben.'); return; }
            var placeholder = document.getElementById('processBpmnPlaceholder');
            var diagram = document.getElementById('processBpmnDiagram');
            placeholder.textContent = 'BPMN wird generiert…';
            var safeName = (text.substring(0, 50) || 'Prozess').replace(/[<>"']/g, '').replace(/&/g, '&amp;');
            var fallbackXml = '<?xml version="1.0" encoding="UTF-8"?>\n<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI"><bpmn:process id="Proc_' + hrAutomationCurrentProcessId + '" isExecutable="true"><bpmn:startEvent id="Start_1" name="Start"/><bpmn:sequenceFlow id="Flow_1" sourceRef="Start_1" targetRef="Task_1"/><bpmn:task id="Task_1" name="' + safeName + '"/><bpmn:sequenceFlow id="Flow_2" sourceRef="Task_1" targetRef="End_1"/><bpmn:endEvent id="End_1" name="Ende"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Proc_' + hrAutomationCurrentProcessId + '"><bpmndi:BPMNShape id="Start_1_di" bpmnElement="Start_1"><dc:Bounds x="152" y="102" width="36" height="36"/></bpmndi:BPMNShape><bpmndi:BPMNShape id="Task_1_di" bpmnElement="Task_1"><dc:Bounds x="240" y="80" width="100" height="80"/></bpmndi:BPMNShape><bpmndi:BPMNShape id="End_1_di" bpmnElement="End_1"><dc:Bounds x="382" y="102" width="36" height="36"/></bpmndi:BPMNShape><bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1"><di:waypoint x="188" y="120"/><di:waypoint x="240" y="120"/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2"><di:waypoint x="340" y="120"/><di:waypoint x="382" y="120"/></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';
            function applyBpmn(simpleXml) {
                if (typeof HRProcessImprovementState !== 'undefined') {
                    HRProcessImprovementState.saveBpmn(hrAutomationCurrentProcessId, simpleXml, new Date().toISOString());
                }
                if (placeholder) placeholder.style.display = 'none';
                if (diagram) { diagram.style.display = 'block'; diagram.innerHTML = '<pre style="white-space:pre-wrap;font-size:0.85rem;">' + simpleXml.replace(/</g,'&lt;').replace(/>/g,'&gt;') + '</pre>'; }
            }
            var apiUrl = (window.getApiUrl && window.getApiUrl('TEXT_TO_BPMN')) || (window.AWS_APP_CONFIG && window.AWS_APP_CONFIG.API_BASE ? window.AWS_APP_CONFIG.API_BASE + '/text-to-bpmn' : '');
            if (!apiUrl) { applyBpmn(fallbackXml); return; }
            fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text, processId: hrAutomationCurrentProcessId })
            }).then(function(r){ return r.json(); }).then(function(data){
                if (data && data.success && data.bpmnXml) applyBpmn(data.bpmnXml);
                else applyBpmn(fallbackXml);
            }).catch(function(){ applyBpmn(fallbackXml); });
        }
    </script>

    <!-- AWS Configuration -->
    <script>
        window.AWS_CONFIG = {
            region: 'eu-central-1',
            userPoolId: 'eu-central-1_8gP4gLK9r',
            clientId: '7kc5tt6a23fgh53d60vkefm812',
            apiBaseUrl: 'https://of2iwj7h2c.execute-api.eu-central-1.amazonaws.com/prod',
            dynamoDB: {
                tableName: 'mawps-user-profiles',
                region: 'eu-central-1'
            },
            s3: {
                bucket: 'mawps-user-files-1760106396',
                region: 'eu-central-1'
            }
        };
    </script>
    
    <!-- AWS SDK -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1490.0.min.js"></script>
    
    <!-- Auth & Progress Tracking -->
    <script src="/js/aws-profile-api.js"></script>
    <script src="/js/real-user-auth-system.js?v=20250116"></script>
    <script src="/js/user-progress-tracker.js"></script>
    <script src="/js/personality-auth-integration.js"></script>
    <script src="js/shooting-stars.js"></script>
</body>
</html>
<!-- Deploy trigger Sun Feb  1 01:23:32 CET 2026 -->