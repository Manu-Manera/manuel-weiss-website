#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const data_stack_1 = require("../lib/data-stack");
const api_stack_1 = require("../lib/api-stack");
const auth_stack_1 = require("../lib/auth-stack");
const observability_stack_1 = require("../lib/observability-stack");
const security_stack_1 = require("../lib/security-stack");
const website_api_stack_1 = require("../lib/website-api-stack");
const websocket_stack_1 = require("../lib/websocket-stack");
const app = new cdk.App();
// Environment configuration
const env = {
    account: process.env.CDK_DEFAULT_ACCOUNT,
    region: process.env.CDK_DEFAULT_REGION || 'eu-central-1'
};
// Get context values
const projectName = app.node.tryGetContext('projectName') || 'ai-investment';
const environment = app.node.tryGetContext('environment') || 'dev';
// Create stacks
const securityStack = new security_stack_1.SecurityStack(app, `${projectName}-security-${environment}`, {
    env,
    description: 'Security and KMS keys for AI Investment System'
});
const dataStack = new data_stack_1.DataStack(app, `${projectName}-data-${environment}`, {
    env,
    description: 'Data storage for AI Investment System',
    kmsKey: securityStack.kmsKey
});
const authStack = new auth_stack_1.AuthStack(app, `${projectName}-auth-${environment}`, {
    env,
    description: 'Authentication and authorization for AI Investment System'
});
// ComputeStack temporär auskommentiert wegen fehlendem Asset (nicht Teil der Website-Migration)
// const computeStack = new ComputeStack(app, `${projectName}-compute-${environment}`, {
//   env,
//   description: 'Compute resources for AI Investment System',
//   dataStack,
//   authStack,
//   kmsKey: securityStack.kmsKey
// });
const computeStack = null; // Temporär deaktiviert
const apiStack = new api_stack_1.ApiStack(app, `${projectName}-api-${environment}`, {
    env,
    description: 'API Gateway for AI Investment System',
    computeStack: null,
    authStack
});
const observabilityStack = new observability_stack_1.ObservabilityStack(app, `${projectName}-observability-${environment}`, {
    env,
    description: 'Monitoring and observability for AI Investment System',
    computeStack: null,
    apiStack
});
// Add dependencies
dataStack.addDependency(securityStack);
// computeStack.addDependency(dataStack);
// computeStack.addDependency(authStack);
// computeStack.addDependency(securityStack);
// apiStack.addDependency(computeStack);
apiStack.addDependency(authStack);
// observabilityStack.addDependency(computeStack);
observabilityStack.addDependency(apiStack);
// Outputs
new cdk.CfnOutput(apiStack, 'ApiGatewayUrl', {
    value: apiStack.apiGateway.url,
    description: 'API Gateway URL'
});
// WebSocket Stack für Echtzeit-Multiplayer-Spiele
const webSocketStack = new websocket_stack_1.WebSocketStack(app, `${projectName}-websocket-${environment}`, {
    env,
    environment,
    description: 'WebSocket API für Multiplayer-Spiele'
});
new cdk.CfnOutput(dataStack, 'DynamoDbTableName', {
    value: dataStack.signalsTable.tableName,
    description: 'DynamoDB Signals Table Name'
});
new cdk.CfnOutput(dataStack, 'S3BucketName', {
    value: dataStack.rawDataBucket.bucketName,
    description: 'S3 Raw Data Bucket Name'
});
new cdk.CfnOutput(authStack, 'UserPoolId', {
    value: authStack.userPool.userPoolId,
    description: 'Cognito User Pool ID'
});
new cdk.CfnOutput(authStack, 'UserPoolClientId', {
    value: authStack.userPoolClient.userPoolClientId,
    description: 'Cognito User Pool Client ID'
});
new cdk.CfnOutput(observabilityStack, 'DashboardUrl', {
    value: `https://console.aws.amazon.com/cloudwatch/home?region=${env.region}#dashboards:name=${observabilityStack.dashboard.dashboardName}`,
    description: 'CloudWatch Dashboard URL'
});
// ========================================
// WEBSITE API STACK (Netlify Migration)
// ========================================
const websiteApiStack = new website_api_stack_1.WebsiteApiStack(app, 'manuel-weiss-website-api', {
    env,
    description: 'Website API für manuel-weiss.ch (ersetzt Netlify Functions)'
});
new cdk.CfnOutput(websiteApiStack, 'WebsiteApiEndpoint', {
    value: websiteApiStack.api.url,
    description: 'Website API URL - Ersetze /.netlify/functions/ mit dieser URL'
});
// Tags
cdk.Tags.of(app).add('Project', projectName);
cdk.Tags.of(app).add('Environment', environment);
cdk.Tags.of(app).add('ManagedBy', 'CDK');
cdk.Tags.of(app).add('CostCenter', 'AI-Investment');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsa0RBQThDO0FBQzlDLGdEQUE0QztBQUU1QyxrREFBOEM7QUFDOUMsb0VBQWdFO0FBQ2hFLDBEQUFzRDtBQUN0RCxnRUFBMkQ7QUFDM0QsNERBQXdEO0FBRXhELE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLDRCQUE0QjtBQUM1QixNQUFNLEdBQUcsR0FBRztJQUNWLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQjtJQUN4QyxNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsSUFBSSxjQUFjO0NBQ3pELENBQUM7QUFFRixxQkFBcUI7QUFDckIsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLElBQUksZUFBZSxDQUFDO0FBQzdFLE1BQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssQ0FBQztBQUVuRSxnQkFBZ0I7QUFDaEIsTUFBTSxhQUFhLEdBQUcsSUFBSSw4QkFBYSxDQUFDLEdBQUcsRUFBRSxHQUFHLFdBQVcsYUFBYSxXQUFXLEVBQUUsRUFBRTtJQUNyRixHQUFHO0lBQ0gsV0FBVyxFQUFFLGdEQUFnRDtDQUM5RCxDQUFDLENBQUM7QUFFSCxNQUFNLFNBQVMsR0FBRyxJQUFJLHNCQUFTLENBQUMsR0FBRyxFQUFFLEdBQUcsV0FBVyxTQUFTLFdBQVcsRUFBRSxFQUFFO0lBQ3pFLEdBQUc7SUFDSCxXQUFXLEVBQUUsdUNBQXVDO0lBQ3BELE1BQU0sRUFBRSxhQUFhLENBQUMsTUFBTTtDQUM3QixDQUFDLENBQUM7QUFFSCxNQUFNLFNBQVMsR0FBRyxJQUFJLHNCQUFTLENBQUMsR0FBRyxF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RUFBRSwwQkFBMEIsRUFBRTtJQUMzRSxHQUFHO0lBQ0gsV0FBVyxFQUFFLDZEQUE2RDtDQUMzRSxDQUFDLENBQUM7QUFFSCxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFO0lBQ3ZELEtBQUssRUFBRSxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDOUIsV0FBVyxFQUFFLCtEQUErRDtDQUM3RSxDQUFDLENBQUM7QUFFSCxPQUFPO0FBQ1AsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUM3QyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ2pELEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBEYXRhU3RhY2sgfSBmcm9tICcuLi9saWIvZGF0YS1zdGFjayc7XG5pbXBvcnQgeyBBcGlTdGFjayB9IGZyb20gJy4uL2xpYi9hcGktc3RhY2snO1xuaW1wb3J0IHsgQ29tcHV0ZVN0YWNrIH0gZnJvbSAnLi4vbGliL2NvbXB1dGUtc3RhY2snO1xuaW1wb3J0IHsgQXV0aFN0YWNrIH0gZnJvbSAnLi4vbGliL2F1dGgtc3RhY2snO1xuaW1wb3J0IHsgT2JzZXJ2YWJpbGl0eVN0YWNrIH0gZnJvbSAnLi4vbGliL29ic2VydmFiaWxpdHktc3RhY2snO1xuaW1wb3J0IHsgU2VjdXJpdHlTdGFjayB9IGZyb20gJy4uL2xpYi9zZWN1cml0eS1zdGFjayc7XG5pbXBvcnQgeyBXZWJzaXRlQXBpU3RhY2sgfSBmcm9tICcuLi9saWIvd2Vic2l0ZS1hcGktc3RhY2snO1xuaW1wb3J0IHsgV2ViU29ja2V0U3RhY2sgfSBmcm9tICcuLi9saWIvd2Vic29ja2V0LXN0YWNrJztcblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcblxuLy8gRW52aXJvbm1lbnQgY29uZmlndXJhdGlvblxuY29uc3QgZW52ID0ge1xuICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxuICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTiB8fCAnZXUtY2VudHJhbC0xJ1xufTtcblxuLy8gR2V0IGNvbnRleHQgdmFsdWVzXG5jb25zdCBwcm9qZWN0TmFtZSA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ3Byb2plY3ROYW1lJykgfHwgJ2FpLWludmVzdG1lbnQnO1xuY29uc3QgZW52aXJvbm1lbnQgPSBhcHAubm9kZS50cnlHZXRDb250ZXh0KCdlbnZpcm9ubWVudCcpIHx8ICdkZXYnO1xuXG4vLyBDcmVhdGUgc3RhY2tzXG5jb25zdCBzZWN1cml0eVN0YWNrID0gbmV3IFNlY3VyaXR5U3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tc2VjdXJpdHktJHtlbnZpcm9ubWVudH1gLCB7XG4gIGVudixcbiAgZGVzY3JpcHRpb246ICdTZWN1cml0eSBhbmQgS01TIGtleXMgZm9yIEFJIEludmVzdG1lbnQgU3lzdGVtJ1xufSk7XG5cbmNvbnN0IGRhdGFTdGFjayA9IG5ldyBEYXRhU3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tZGF0YS0ke2Vudmlyb25tZW50fWAsIHtcbiAgZW52LFxuICBkZXNjcmlwdGlvbjogJ0RhdGEgc3RvcmFnZSBmb3IgQUkgSW52ZXN0bWVudCBTeXN0ZW0nLFxuICBrbXNLZXk6IHNlY3VyaXR5U3RhY2sua21zS2V5XG59KTtcblxuY29uc3QgYXV0aFN0YWNrID0gbmV3IEF1dGhTdGFjayhhcHAsIGAke3Byb2plY3ROYW1lfS1hdXRoLSR7ZW52aXJvbm1lbnR9YCwge1xuICBlbnYsXG4gIGRlc2NyaXB0aW9uOiAnQXV0aGVudGljYXRpb24gYW5kIGF1dGhvcml6YXRpb24gZm9yIEFJIEludmVzdG1lbnQgU3lzdGVtJ1xufSk7XG5cbi8vIENvbXB1dGVTdGFjayB0ZW1wb3LDpHIgYXVza29tbWVudGllcnQgd2VnZW4gZmVobGVuZGVtIEFzc2V0IChuaWNodCBUZWlsIGRlciBXZWJzaXRlLU1pZ3JhdGlvbilcbi8vIGNvbnN0IGNvbXB1dGVTdGFjayA9IG5ldyBDb21wdXRlU3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tY29tcHV0ZS0ke2Vudmlyb25tZW50fWAsIHtcbi8vICAgZW52LFxuLy8gICBkZXNjcmlwdGlvbjogJ0NvbXB1dGUgcmVzb3VyY2VzIGZvciBBSSBJbnZlc3RtZW50IFN5c3RlbScsXG4vLyAgIGRhdGFTdGFjayxcbi8vICAgYXV0aFN0YWNrLFxuLy8gICBrbXNLZXk6IHNlY3VyaXR5U3RhY2sua21zS2V5XG4vLyB9KTtcbmNvbnN0IGNvbXB1dGVTdGFjayA9IG51bGw7IC8vIFRlbXBvcsOkciBkZWFrdGl2aWVydFxuXG5jb25zdCBhcGlTdGFjayA9IG5ldyBBcGlTdGFjayhhcHAsIGAke3Byb2plY3ROYW1lfS1hcGktJHtlbnZpcm9ubWVudH1gLCB7XG4gIGVudixcbiAgZGVzY3JpcHRpb246ICdBUEkgR2F0ZXdheSBmb3IgQUkgSW52ZXN0bWVudCBTeXN0ZW0nLFxuICBjb21wdXRlU3RhY2s6IG51bGwsIC8vIFRlbXBvcsOkciBkZWFrdGl2aWVydFxuICBhdXRoU3RhY2tcbn0pO1xuXG5jb25zdCBvYnNlcnZhYmlsaXR5U3RhY2sgPSBuZXcgT2JzZXJ2YWJpbGl0eVN0YWNrKGFwcCwgYCR7cHJvamVjdE5hbWV9LW9ic2VydmFiaWxpdHktJHtlbnZpcm9ubWVudH1gLCB7XG4gIGVudixcbiAgZGVzY3JpcHRpb246ICdNb25pdG9yaW5nIGFuZCBvYnNlcnZhYmlsaXR5IGZvciBBSSBJbnZlc3RtZW50IFN5c3RlbScsXG4gIGNvbXB1dGVTdGFjazogbnVsbCwgLy8gVGVtcG9yw6RyIGRlYWt0aXZpZXJ0XG4gIGFwaVN0YWNrXG59KTtcblxuLy8gQWRkIGRlcGVuZGVuY2llc1xuZGF0YVN0YWNrLmFkZERlcGVuZGVuY3koc2VjdXJpdHlTdGFjayk7XG4vLyBjb21wdXRlU3RhY2suYWRkRGVwZW5kZW5jeShkYXRhU3RhY2spO1xuLy8gY29tcHV0ZVN0YWNrLmFkZERlcGVuZGVuY3koYXV0aFN0YWNrKTtcbi8vIGNvbXB1dGVTdGFjay5hZGREZXBlbmRlbmN5KHNlY3VyaXR5U3RhY2spO1xuLy8gYXBpU3RhY2suYWRkRGVwZW5kZW5jeShjb21wdXRlU3RhY2spO1xuYXBpU3RhY2suYWRkRGVwZW5kZW5jeShhdXRoU3RhY2spO1xuLy8gb2JzZXJ2YWJpbGl0eVN0YWNrLmFkZERlcGVuZGVuY3koY29tcHV0ZVN0YWNrKTtcbm9ic2VydmFiaWxpdHlTdGFjay5hZGREZXBlbmRlbmN5KGFwaVN0YWNrKTtcblxuLy8gT3V0cHV0c1xubmV3IGNkay5DZm5PdXRwdXQoYXBpU3RhY2ssICdBcGlHYXRld2F5VXJsJywge1xuICB2YWx1ZTogYXBpU3RhY2suYXBpR2F0ZXdheS51cmwsXG4gIGRlc2NyaXB0aW9uOiAnQVBJIEdhdGV3YXkgVVJMJ1xufSk7XG5cbi8vIFdlYlNvY2tldCBTdGFjayBmw7xyIEVjaHR6ZWl0LU11bHRpcGxheWVyLVNwaWVsZVxuY29uc3Qgd2ViU29ja2V0U3RhY2sgPSBuZXcgV2ViU29ja2V0U3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0td2Vic29ja2V0LSR7ZW52aXJvbm1lbnR9YCwge1xuICBlbnYsXG4gIGVudmlyb25tZW50LFxuICBkZXNjcmlwdGlvbjogJ1dlYlNvY2tldCBBUEkgZsO8ciBNdWx0aXBsYXllci1TcGllbGUnXG59KTtcblxubmV3IGNkay5DZm5PdXRwdXQoZGF0YVN0YWNrLCAnRHluYW1vRGJUYWJsZU5hbWUnLCB7XG4gIHZhbHVlOiBkYXRhU3RhY2suc2lnbmFsc1RhYmxlLnRhYmxlTmFtZSxcbiAgZGVzY3JpcHRpb246ICdEeW5hbW9EQiBTaWduYWxzIFRhYmxlIE5hbWUnXG59KTtcblxubmV3IGNkay5DZm5PdXRwdXQoZGF0YVN0YWNrLCAnUzNCdWNrZXROYW1lJywge1xuICB2YWx1ZTogZGF0YVN0YWNrLnJhd0RhdGFCdWNrZXQuYnVja2V0TmFtZSxcbiAgZGVzY3JpcHRpb246ICdTMyBSYXcgRGF0YSBCdWNrZXQgTmFtZSdcbn0pO1xuXG5uZXcgY2RrLkNmbk91dHB1dChhdXRoU3RhY2ssICdVc2VyUG9vbElkJywge1xuICB2YWx1ZTogYXV0aFN0YWNrLnVzZXJQb29sLnVzZXJQb29sSWQsXG4gIGRlc2NyaXB0aW9uOiAnQ29nbml0byBVc2VyIFBvb2wgSUQnXG59KTtcblxubmV3IGNkay5DZm5PdXRwdXQoYXV0aFN0YWNrLCAnVXNlclBvb2xDbGllbnRJZCcsIHtcbiAgdmFsdWU6IGF1dGhTdGFjay51c2VyUG9vbENsaWVudC51c2VyUG9vbENsaWVudElkLFxuICBkZXNjcmlwdGlvbjogJ0NvZ25pdG8gVXNlciBQb29sIENsaWVudCBJRCdcbn0pO1xuXG5uZXcgY2RrLkNmbk91dHB1dChvYnNlcnZhYmlsaXR5U3RhY2ssICdEYXNoYm9hcmRVcmwnLCB7XG4gIHZhbHVlOiBgaHR0cHM6Ly9jb25zb2xlLmF3cy5hbWF6b24uY29tL2Nsb3Vkd2F0Y2gvaG9tZT9yZWdpb249JHtlbnYucmVnaW9ufSNkYXNoYm9hcmRzOm5hbWU9JHtvYnNlcnZhYmlsaXR5U3RhY2suZGFzaGJvYXJkLmRhc2hib2FyZE5hbWV9YCxcbiAgZGVzY3JpcHRpb246ICdDbG91ZFdhdGNoIERhc2hib2FyZCBVUkwnXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gV0VCU0lURSBBUEkgU1RBQ0sgKE5ldGxpZnkgTWlncmF0aW9uKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuY29uc3Qgd2Vic2l0ZUFwaVN0YWNrID0gbmV3IFdlYnNpdGVBcGlTdGFjayhhcHAsICdtYW51ZWwtd2Vpc3Mtd2Vic2l0ZS1hcGknLCB7XG4gIGVudixcbiAgZGVzY3JpcHRpb246ICdXZWJzaXRlIEFQSSBmw7xyIG1hbnVlbC13ZWlzcy5jaCAoZXJzZXR6dCBOZXRsaWZ5IEZ1bmN0aW9ucyknXG59KTtcblxubmV3IGNkay5DZm5PdXRwdXQod2Vic2l0ZUFwaVN0YWNrLCAnV2Vic2l0ZUFwaUVuZHBvaW50Jywge1xuICB2YWx1ZTogd2Vic2l0ZUFwaVN0YWNrLmFwaS51cmwsXG4gIGRlc2NyaXB0aW9uOiAnV2Vic2l0ZSBBUEkgVVJMIC0gRXJzZXR6ZSAvLm5ldGxpZnkvZnVuY3Rpb25zLyBtaXQgZGllc2VyIFVSTCdcbn0pO1xuXG4vLyBUYWdzXG5jZGsuVGFncy5vZihhcHApLmFkZCgnUHJvamVjdCcsIHByb2plY3ROYW1lKTtcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdFbnZpcm9ubWVudCcsIGVudmlyb25tZW50KTtcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdNYW5hZ2VkQnknLCAnQ0RLJyk7XG5jZGsuVGFncy5vZihhcHApLmFkZCgnQ29zdENlbnRlcicsICdBSS1JbnZlc3RtZW50Jyk7XG4iXX0=