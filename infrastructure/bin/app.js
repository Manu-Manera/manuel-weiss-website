#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const data_stack_1 = require("../lib/data-stack");
const api_stack_1 = require("../lib/api-stack");
const compute_stack_1 = require("../lib/compute-stack");
const auth_stack_1 = require("../lib/auth-stack");
const observability_stack_1 = require("../lib/observability-stack");
const security_stack_1 = require("../lib/security-stack");
const website_api_stack_1 = require("../lib/website-api-stack");
const websocket_stack_1 = require("../lib/websocket-stack");
const app = new cdk.App();
// Environment configuration
const env = {
    account: process.env.CDK_DEFAULT_ACCOUNT,
    region: process.env.CDK_DEFAULT_REGION || 'eu-central-1'
};
// Get context values
const projectName = app.node.tryGetContext('projectName') || 'ai-investment';
const environment = app.node.tryGetContext('environment') || 'dev';
// Create stacks
const securityStack = new security_stack_1.SecurityStack(app, `${projectName}-security-${environment}`, {
    env,
    description: 'Security and KMS keys for AI Investment System'
});
const dataStack = new data_stack_1.DataStack(app, `${projectName}-data-${environment}`, {
    env,
    description: 'Data storage for AI Investment System',
    kmsKey: securityStack.kmsKey
});
const authStack = new auth_stack_1.AuthStack(app, `${projectName}-auth-${environment}`, {
    env,
    description: 'Authentication and authorization for AI Investment System'
});
const computeStack = new compute_stack_1.ComputeStack(app, `${projectName}-compute-${environment}`, {
    env,
    description: 'Compute resources for AI Investment System',
    dataStack,
    authStack,
    kmsKey: securityStack.kmsKey
});
const apiStack = new api_stack_1.ApiStack(app, `${projectName}-api-${environment}`, {
    env,
    description: 'API Gateway for AI Investment System',
    computeStack,
    authStack
});
const observabilityStack = new observability_stack_1.ObservabilityStack(app, `${projectName}-observability-${environment}`, {
    env,
    description: 'Monitoring and observability for AI Investment System',
    computeStack,
    apiStack
});
// Add dependencies
dataStack.addDependency(securityStack);
computeStack.addDependency(dataStack);
computeStack.addDependency(authStack);
computeStack.addDependency(securityStack);
apiStack.addDependency(computeStack);
apiStack.addDependency(authStack);
observabilityStack.addDependency(computeStack);
observabilityStack.addDependency(apiStack);
// Outputs
new cdk.CfnOutput(apiStack, 'ApiGatewayUrl', {
    value: apiStack.apiGateway.url,
    description: 'API Gateway URL'
});
// WebSocket Stack für Echtzeit-Multiplayer-Spiele
const webSocketStack = new websocket_stack_1.WebSocketStack(app, `${projectName}-websocket-${environment}`, {
    env,
    environment,
    description: 'WebSocket API für Multiplayer-Spiele'
});
new cdk.CfnOutput(dataStack, 'DynamoDbTableName', {
    value: dataStack.signalsTable.tableName,
    description: 'DynamoDB Signals Table Name'
});
new cdk.CfnOutput(dataStack, 'S3BucketName', {
    value: dataStack.rawDataBucket.bucketName,
    description: 'S3 Raw Data Bucket Name'
});
new cdk.CfnOutput(authStack, 'UserPoolId', {
    value: authStack.userPool.userPoolId,
    description: 'Cognito User Pool ID'
});
new cdk.CfnOutput(authStack, 'UserPoolClientId', {
    value: authStack.userPoolClient.userPoolClientId,
    description: 'Cognito User Pool Client ID'
});
new cdk.CfnOutput(observabilityStack, 'DashboardUrl', {
    value: `https://console.aws.amazon.com/cloudwatch/home?region=${env.region}#dashboards:name=${observabilityStack.dashboard.dashboardName}`,
    description: 'CloudWatch Dashboard URL'
});
// ========================================
// WEBSITE API STACK (Netlify Migration)
// ========================================
const websiteApiStack = new website_api_stack_1.WebsiteApiStack(app, 'manuel-weiss-website-api', {
    env,
    description: 'Website API für manuel-weiss.ch (ersetzt Netlify Functions)'
});
new cdk.CfnOutput(websiteApiStack, 'WebsiteApiEndpoint', {
    value: websiteApiStack.api.url,
    description: 'Website API URL - Ersetze /.netlify/functions/ mit dieser URL'
});
// Tags
cdk.Tags.of(app).add('Project', projectName);
cdk.Tags.of(app).add('Environment', environment);
cdk.Tags.of(app).add('ManagedBy', 'CDK');
cdk.Tags.of(app).add('CostCenter', 'AI-Investment');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsa0RBQThDO0FBQzlDLGdEQUE0QztBQUM1Qyx3REFBb0Q7QUFDcEQsa0RBQThDO0FBQzlDLG9FQUFnRTtBQUNoRSwwREFBc0Q7QUFDdEQsZ0VBQTJEO0FBQzNELDREQUF3RDtBQUV4RCxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUUxQiw0QkFBNEI7QUFDNUIsTUFBTSxHQUFHLEdBQUc7SUFDVixPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUI7SUFDeEMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLElBQUksY0FBYztDQUN6RCxDQUFDO0FBRUYscUJBQXFCO0FBQ3JCLE1BQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLGVBQWUsQ0FBQztBQUM3RSxNQUFNLFdBQVcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUM7QUFFbkUsZ0JBQWdCO0FBQ2hCLE1BQU0sYUFBYSxHQUFHLElBQUksOEJBQWEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxXQUFXLGFBQWEsV0FBVyxFQUFFLEVBQUU7SUFDckYsR0FBRztJQUNILFdBQVcsRUFBRSxnREFBZ0Q7Q0FDOUQsQ0FBQyxDQUFDO0FBRUgsTUFBTSxTQUFTLEdBQUcsSUFBSSxzQkFBUyxDQUFDLEdBQUcsRUFBRSxHQUFHLFdBQVcsU0FBUyxXQUFXLEVBQUUsRUFBRTtJQUN6RSxHQUFHO0lBQ0gsV0FBVyxFQUFFLHVDQUF1QztJQUNwRCxNQUFNLEVBQUUsYUFBYSxDQUFDLE1BQU07Q0FDN0IsQ0FBQyxDQUFDO0FBRUgsTUFBTSxTQUFTLEdBQUcsSUFBSSxzQkFB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LEdBQUcsQ0FBQyxNQUFNLG9CQUFvQixrQkFBa0IsQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFO0lBQzFJLFdBQVcsRUFBRSwwQkFBMEI7Q0FDeEMsQ0FBQyxDQUFDO0FBRUgsMkNBQTJDO0FBQzNDLHdDQUF3QztBQUN4QywyQ0FBMkM7QUFDM0MsTUFBTSxlQUFlLEdBQUcsSUFBSSxtQ0FBZSxDQUFDLEdBQUcsRUFBRSwwQkFBMEIsRUFBRTtJQUMzRSxHQUFHO0lBQ0gsV0FBVyxFQUFFLDZEQUE2RDtDQUMzRSxDQUFDLENBQUM7QUFFSCxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFO0lBQ3ZELEtBQUssRUFBRSxlQUFlLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDOUIsV0FBVyxFQUFFLCtEQUErRDtDQUM3RSxDQUFDLENBQUM7QUFFSCxPQUFPO0FBQ1AsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUM3QyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ2pELEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBEYXRhU3RhY2sgfSBmcm9tICcuLi9saWIvZGF0YS1zdGFjayc7XG5pbXBvcnQgeyBBcGlTdGFjayB9IGZyb20gJy4uL2xpYi9hcGktc3RhY2snO1xuaW1wb3J0IHsgQ29tcHV0ZVN0YWNrIH0gZnJvbSAnLi4vbGliL2NvbXB1dGUtc3RhY2snO1xuaW1wb3J0IHsgQXV0aFN0YWNrIH0gZnJvbSAnLi4vbGliL2F1dGgtc3RhY2snO1xuaW1wb3J0IHsgT2JzZXJ2YWJpbGl0eVN0YWNrIH0gZnJvbSAnLi4vbGliL29ic2VydmFiaWxpdHktc3RhY2snO1xuaW1wb3J0IHsgU2VjdXJpdHlTdGFjayB9IGZyb20gJy4uL2xpYi9zZWN1cml0eS1zdGFjayc7XG5pbXBvcnQgeyBXZWJzaXRlQXBpU3RhY2sgfSBmcm9tICcuLi9saWIvd2Vic2l0ZS1hcGktc3RhY2snO1xuaW1wb3J0IHsgV2ViU29ja2V0U3RhY2sgfSBmcm9tICcuLi9saWIvd2Vic29ja2V0LXN0YWNrJztcblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcblxuLy8gRW52aXJvbm1lbnQgY29uZmlndXJhdGlvblxuY29uc3QgZW52ID0ge1xuICBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxuICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTiB8fCAnZXUtY2VudHJhbC0xJ1xufTtcblxuLy8gR2V0IGNvbnRleHQgdmFsdWVzXG5jb25zdCBwcm9qZWN0TmFtZSA9IGFwcC5ub2RlLnRyeUdldENvbnRleHQoJ3Byb2plY3ROYW1lJykgfHwgJ2FpLWludmVzdG1lbnQnO1xuY29uc3QgZW52aXJvbm1lbnQgPSBhcHAubm9kZS50cnlHZXRDb250ZXh0KCdlbnZpcm9ubWVudCcpIHx8ICdkZXYnO1xuXG4vLyBDcmVhdGUgc3RhY2tzXG5jb25zdCBzZWN1cml0eVN0YWNrID0gbmV3IFNlY3VyaXR5U3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tc2VjdXJpdHktJHtlbnZpcm9ubWVudH1gLCB7XG4gIGVudixcbiAgZGVzY3JpcHRpb246ICdTZWN1cml0eSBhbmQgS01TIGtleXMgZm9yIEFJIEludmVzdG1lbnQgU3lzdGVtJ1xufSk7XG5cbmNvbnN0IGRhdGFTdGFjayA9IG5ldyBEYXRhU3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tZGF0YS0ke2Vudmlyb25tZW50fWAsIHtcbiAgZW52LFxuICBkZXNjcmlwdGlvbjogJ0RhdGEgc3RvcmFnZSBmb3IgQUkgSW52ZXN0bWVudCBTeXN0ZW0nLFxuICBrbXNLZXk6IHNlY3VyaXR5U3RhY2sua21zS2V5XG59KTtcblxuY29uc3QgYXV0aFN0YWNrID0gbmV3IEF1dGhTdGFjayhhcHAsIGAke3Byb2plY3ROYW1lfS1hdXRoLSR7ZW52aXJvbm1lbnR9YCwge1xuICBlbnYsXG4gIGRlc2NyaXB0aW9uOiAnQXV0aGVudGljYXRpb24gYW5kIGF1dGhvcml6YXRpb24gZm9yIEFJIEludmVzdG1lbnQgU3lzdGVtJ1xufSk7XG5cbmNvbnN0IGNvbXB1dGVTdGFjayA9IG5ldyBDb21wdXRlU3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tY29tcHV0ZS0ke2Vudmlyb25tZW50fWAsIHtcbiAgZW52LFxuICBkZXNjcmlwdGlvbjogJ0NvbXB1dGUgcmVzb3VyY2VzIGZvciBBSSBJbnZlc3RtZW50IFN5c3RlbScsXG4gIGRhdGFTdGFjayxcbiAgYXV0aFN0YWNrLFxuICBrbXNLZXk6IHNlY3VyaXR5U3RhY2sua21zS2V5XG59KTtcblxuY29uc3QgYXBpU3RhY2sgPSBuZXcgQXBpU3RhY2soYXBwLCBgJHtwcm9qZWN0TmFtZX0tYXBpLSR7ZW52aXJvbm1lbnR9YCwge1xuICBlbnYsXG4gIGRlc2NyaXB0aW9uOiAnQVBJIEdhdGV3YXkgZm9yIEFJIEludmVzdG1lbnQgU3lzdGVtJyxcbiAgY29tcHV0ZVN0YWNrLFxuICBhdXRoU3RhY2tcbn0pO1xuXG5jb25zdCBvYnNlcnZhYmlsaXR5U3RhY2sgPSBuZXcgT2JzZXJ2YWJpbGl0eVN0YWNrKGFwcCwgYCR7cHJvamVjdE5hbWV9LW9ic2VydmFiaWxpdHktJHtlbnZpcm9ubWVudH1gLCB7XG4gIGVudixcbiAgZGVzY3JpcHRpb246ICdNb25pdG9yaW5nIGFuZCBvYnNlcnZhYmlsaXR5IGZvciBBSSBJbnZlc3RtZW50IFN5c3RlbScsXG4gIGNvbXB1dGVTdGFjayxcbiAgYXBpU3RhY2tcbn0pO1xuXG4vLyBBZGQgZGVwZW5kZW5jaWVzXG5kYXRhU3RhY2suYWRkRGVwZW5kZW5jeShzZWN1cml0eVN0YWNrKTtcbmNvbXB1dGVTdGFjay5hZGREZXBlbmRlbmN5KGRhdGFTdGFjayk7XG5jb21wdXRlU3RhY2suYWRkRGVwZW5kZW5jeShhdXRoU3RhY2spO1xuY29tcHV0ZVN0YWNrLmFkZERlcGVuZGVuY3koc2VjdXJpdHlTdGFjayk7XG5hcGlTdGFjay5hZGREZXBlbmRlbmN5KGNvbXB1dGVTdGFjayk7XG5hcGlTdGFjay5hZGREZXBlbmRlbmN5KGF1dGhTdGFjayk7XG5vYnNlcnZhYmlsaXR5U3RhY2suYWRkRGVwZW5kZW5jeShjb21wdXRlU3RhY2spO1xub2JzZXJ2YWJpbGl0eVN0YWNrLmFkZERlcGVuZGVuY3koYXBpU3RhY2spO1xuXG4vLyBPdXRwdXRzXG5uZXcgY2RrLkNmbk91dHB1dChhcGlTdGFjaywgJ0FwaUdhdGV3YXlVcmwnLCB7XG4gIHZhbHVlOiBhcGlTdGFjay5hcGlHYXRld2F5LnVybCxcbiAgZGVzY3JpcHRpb246ICdBUEkgR2F0ZXdheSBVUkwnXG59KTtcblxuLy8gV2ViU29ja2V0IFN0YWNrIGbDvHIgRWNodHplaXQtTXVsdGlwbGF5ZXItU3BpZWxlXG5jb25zdCB3ZWJTb2NrZXRTdGFjayA9IG5ldyBXZWJTb2NrZXRTdGFjayhhcHAsIGAke3Byb2plY3ROYW1lfS13ZWJzb2NrZXQtJHtlbnZpcm9ubWVudH1gLCB7XG4gIGVudixcbiAgZW52aXJvbm1lbnQsXG4gIGRlc2NyaXB0aW9uOiAnV2ViU29ja2V0IEFQSSBmw7xyIE11bHRpcGxheWVyLVNwaWVsZSdcbn0pO1xuXG5uZXcgY2RrLkNmbk91dHB1dChkYXRhU3RhY2ssICdEeW5hbW9EYlRhYmxlTmFtZScsIHtcbiAgdmFsdWU6IGRhdGFTdGFjay5zaWduYWxzVGFibGUudGFibGVOYW1lLFxuICBkZXNjcmlwdGlvbjogJ0R5bmFtb0RCIFNpZ25hbHMgVGFibGUgTmFtZSdcbn0pO1xuXG5uZXcgY2RrLkNmbk91dHB1dChkYXRhU3RhY2ssICdTM0J1Y2tldE5hbWUnLCB7XG4gIHZhbHVlOiBkYXRhU3RhY2sucmF3RGF0YUJ1Y2tldC5idWNrZXROYW1lLFxuICBkZXNjcmlwdGlvbjogJ1MzIFJhdyBEYXRhIEJ1Y2tldCBOYW1lJ1xufSk7XG5cbm5ldyBjZGsuQ2ZuT3V0cHV0KGF1dGhTdGFjaywgJ1VzZXJQb29sSWQnLCB7XG4gIHZhbHVlOiBhdXRoU3RhY2sudXNlclBvb2wudXNlclBvb2xJZCxcbiAgZGVzY3JpcHRpb246ICdDb2duaXRvIFVzZXIgUG9vbCBJRCdcbn0pO1xuXG5uZXcgY2RrLkNmbk91dHB1dChhdXRoU3RhY2ssICdVc2VyUG9vbENsaWVudElkJywge1xuICB2YWx1ZTogYXV0aFN0YWNrLnVzZXJQb29sQ2xpZW50LnVzZXJQb29sQ2xpZW50SWQsXG4gIGRlc2NyaXB0aW9uOiAnQ29nbml0byBVc2VyIFBvb2wgQ2xpZW50IElEJ1xufSk7XG5cbm5ldyBjZGsuQ2ZuT3V0cHV0KG9ic2VydmFiaWxpdHlTdGFjaywgJ0Rhc2hib2FyZFVybCcsIHtcbiAgdmFsdWU6IGBodHRwczovL2NvbnNvbGUuYXdzLmFtYXpvbi5jb20vY2xvdWR3YXRjaC9ob21lP3JlZ2lvbj0ke2Vudi5yZWdpb259I2Rhc2hib2FyZHM6bmFtZT0ke29ic2VydmFiaWxpdHlTdGFjay5kYXNoYm9hcmQuZGFzaGJvYXJkTmFtZX1gLFxuICBkZXNjcmlwdGlvbjogJ0Nsb3VkV2F0Y2ggRGFzaGJvYXJkIFVSTCdcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBXRUJTSVRFIEFQSSBTVEFDSyAoTmV0bGlmeSBNaWdyYXRpb24pXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCB3ZWJzaXRlQXBpU3RhY2sgPSBuZXcgV2Vic2l0ZUFwaVN0YWNrKGFwcCwgJ21hbnVlbC13ZWlzcy13ZWJzaXRlLWFwaScsIHtcbiAgZW52LFxuICBkZXNjcmlwdGlvbjogJ1dlYnNpdGUgQVBJIGbDvHIgbWFudWVsLXdlaXNzLmNoIChlcnNldHp0IE5ldGxpZnkgRnVuY3Rpb25zKSdcbn0pO1xuXG5uZXcgY2RrLkNmbk91dHB1dCh3ZWJzaXRlQXBpU3RhY2ssICdXZWJzaXRlQXBpRW5kcG9pbnQnLCB7XG4gIHZhbHVlOiB3ZWJzaXRlQXBpU3RhY2suYXBpLnVybCxcbiAgZGVzY3JpcHRpb246ICdXZWJzaXRlIEFQSSBVUkwgLSBFcnNldHplIC8ubmV0bGlmeS9mdW5jdGlvbnMvIG1pdCBkaWVzZXIgVVJMJ1xufSk7XG5cbi8vIFRhZ3NcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdQcm9qZWN0JywgcHJvamVjdE5hbWUpO1xuY2RrLlRhZ3Mub2YoYXBwKS5hZGQoJ0Vudmlyb25tZW50JywgZW52aXJvbm1lbnQpO1xuY2RrLlRhZ3Mub2YoYXBwKS5hZGQoJ01hbmFnZWRCeScsICdDREsnKTtcbmNkay5UYWdzLm9mKGFwcCkuYWRkKCdDb3N0Q2VudGVyJywgJ0FJLUludmVzdG1lbnQnKTtcbiJdfQ==