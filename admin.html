<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Manuel Weiss</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="admin-modern-styles.css">
    <link rel="stylesheet" href="css/media-management-2025.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Sidebar Fix Styles -->
    <style>
        /* Profilbild-Galerie Styles */
        .profile-gallery {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .current-profile-section {
            align-items: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        .current-profile-info {
            flex: 1;
        .current-profile-info p {
            margin: 0 0 1rem 0;
            font-weight: 600;
            color: #374151;
        .gallery-upload-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px dashed #0ea5e9;
        .gallery-upload-area {
            text-align: center;
        .upload-zone {
            padding: 2rem;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        .upload-zone:hover {
            background: rgba(255, 255, 255, 0.8);
            border-color: #0284c7;
        .gallery-display-section {
            background: linear-gradient(135deg, #fefce8 0%, #fef3c7 100%);
            border: 2px solid #f59e0b;
        .profile-gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        .gallery-image-item {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
        .gallery-image-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        .gallery-image-item.active {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        .gallery-image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        .gallery-image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        .gallery-image-item:hover .gallery-image-overlay {
            opacity: 1;
        .gallery-image-actions {
            gap: 0.5rem;
        .gallery-image-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
        .gallery-image-btn:hover {
            background: white;
            transform: scale(1.1);
        .gallery-image-btn.select {
            color: #10b981;
        .gallery-image-btn.delete {
            color: #ef4444;
        .gallery-actions {
        .profile-actions {
            gap: 0.75rem;
            margin-top: 1rem;
        .profile-actions .btn {
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        /* MODERNE SIDEBAR */
        .sidebar,
        .admin-sidebar {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            color: white;
            border-right: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 4px 0 24px rgba(0, 0, 0, 0.15);
            z-index: 10;
        .sidebar-header {
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            background: rgba(255, 255, 255, 0.05);
        .sidebar-brand {
        .sidebar-brand img {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        /* SCHÖNER AVATAR MIT INITIALEN */
        .avatar {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        .avatar:hover {
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.4);
        .avatar-text {
            font-weight: 700;
            font-size: 16px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        /* Kleiner Avatar für Topbar */
        .avatar-small {
            width: 32px !important;
            height: 32px !important;
        .avatar-small .avatar-text {
            font-size: 14px !important;
        .sidebar-brand h3 {
            font-size: 1.125rem;
            margin: 0;
        .sidebar-brand p {
            font-size: 0.875rem;
            color: #94a3b8;
        .sidebar-toggle {
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
            font-weight: 500;
        .sidebar-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        .sidebar-toggle .toggle-label {
            font-size: 0.75rem;
            opacity: 0.9;
        /* NAVIGATION STYLES */
        .sidebar-nav {
            padding: 1rem 0;
        .nav-section {
            margin-bottom: 2rem;
        .nav-section-title {
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0 1.5rem 0.5rem;
        .nav-item {
            margin: 0.25rem 0;
        .nav-item a {
            color: #cbd5e1;
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            border-radius: 0.5rem;
            margin: 0 0.75rem;
        .nav-item a:hover {
            background: rgba(148, 163, 184, 0.1);
            transform: translateX(2px);
        .nav-item.active a {
            box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
        .nav-item a i {
            width: 20px;
            font-size: 1rem;
        .sidebar .nav-section-title {
            color: #64748b !important;
            font-size: 11px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            padding: 24px 24px 8px !important;
            letter-spacing: 0.05em !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        /* EINFACHES LAYOUT - FUNKTIONIERT */
        * {
            box-sizing: border-box;
            padding: 0;
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
        .admin-container {
            min-height: 100vh;
        .sidebar {
            width: 250px;
            background: #2c3e50;
            flex-shrink: 0;
        .sidebar.collapsed {
            width: 60px;
        .content-wrapper {
        .admin-main {
        .section-header {
            margin-bottom: 0.75rem;
        .section-title {
            font-size: 1.25rem;
            color: #111827;
            margin: 0 0 0.125rem 0;
        .section-subtitle {
            color: #6b7280;
        .section-actions {
            gap: 0.375rem;
            margin-top: 0.375rem;
        .btn {
            background: #3498db;
            padding: 8px 16px;
            border-radius: 3px;
            display: inline-block;
        .btn:hover {
            background: #2980b9;
        .btn-secondary {
            background: #95a5a6;
        .btn-secondary:hover {
            background: #7f8c8d;
        .card {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
        .admin-section {
        table {
            border-collapse: collapse;
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        th {
            background: #f8f9fa;
            font-weight: bold;
        tr:hover {
        /* MOBILE */
        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
            .content-wrapper {
                padding: 0;
        .sidebar, .sidebar *, 
        .admin-sidebar, .admin-sidebar *,
        .nav-item, .nav-item *,
        .nav-section, .nav-section *,
        [class*="sidebar"], [class*="sidebar"] *,
        [class*="nav"], [class*="nav"] * {
            color: #000000 !important;
            opacity: 1 !important;
            text-shadow: none !important;
            background: transparent !important;
            background: #ffffff !important;
            font-weight: 700 !important;
            font-size: 16px !important;
            text-decoration: none !important;
            font-weight: 800 !important;
        .sidebar .nav-item a:hover {
            color: #1f2937 !important;
            background: #f8fafc !important;
        .sidebar .nav-item.active a,
        .sidebar .nav-item a.active {
            color: white !important;
            background: #4f46e5 !important;
        .sidebar .nav-section-title,
        .admin-sidebar .nav-section-title {
            color: #111827 !important;
            font-size: 13px !important;
            letter-spacing: 0.5px !important;
            padding: 0 1rem !important;
            margin-bottom: 0.5rem !important;
            background: white !important;
            border-right: 2px solid #e5e7eb !important;
        /* Override any conflicting styles */
        .sidebar *,
        .admin-sidebar *,
        [class*="sidebar"] *,
        [class*="nav"] * {
            color: inherit !important;
        /* Extra strong overrides for problematic elements */
        .sidebar a, .sidebar span, .sidebar div,
        .admin-sidebar a, .admin-sidebar span, .admin-sidebar div,
        .nav-item a, .nav-item span, .nav-section span,
        .sidebar .nav-item i {
        /* Fix main content layout */
        .main-content {
            margin-left: 280px !important;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            min-height: 100vh !important;
        .sidebar.collapsed + .main-content {
            margin-left: 70px !important;
        /* EINHEITLICHES RESPONSIVE LAYOUT - ALLE GERÄTE */
        :root {
            --sidebar-width: 280px;
            --sidebar-collapsed: 70px;
            --mobile-breakpoint: 768px;
            --tablet-breakpoint: 1024px;
        /* Flexbox Container für perfekte Anpassung */
            width: 100vw;
            overflow-x: hidden;
        /* Sidebar Basis-Styles */
            width: var(--sidebar-width);
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: var(--sidebar-collapsed);
        /* Content Wrapper - passt sich automatisch an */
            width: calc(100vw - var(--sidebar-width));
        .sidebar.collapsed + .content-wrapper {
            width: calc(100vw - var(--sidebar-collapsed));
        /* Alle Admin-Sektionen nutzen den Content-Wrapper */
        .admin-section,
        #user-management-live,
        #analytics,
        #system-health,
        #settings,
        #dashboard,
        #content,
        #nutrition,
        #personality-development,
        #personal-training,
        #applications,
        #ai-settings,
        #ai-twin,
        #translations,
        #media,
        #vermietungen,
        #buchungen {
            max-width: 100%;
            padding: clamp(10px, 2vw, 20px);
        /* RESPONSIVE BREAKPOINTS */
        @media (max-width: 1024px) {
                position: fixed;
                z-index: 1000;
                transform: translateX(-100%);
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            .sidebar.mobile-open {
                transform: translateX(0);
                width: 100vw;
            .admin-section,
            #user-management-live,
            #analytics,
            #system-health,
            #settings,
            #dashboard,
            #content,
            #nutrition,
            #personality-development,
            #personal-training,
            #applications,
            #ai-settings,
            #ai-twin,
            #translations,
            #media,
            #vermietungen,
            #buchungen {
                padding: 1rem;
        /* ZUSÄTZLICHE SICHERHEIT - Layout-Konsistenz */
            display: flex !important;
            width: 100vw !important;
            overflow-x: hidden !important;
            flex: 1 !important;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        /* Sidebar States */
        .sidebar:not(.collapsed) + .content-wrapper {
            width: calc(100vw - 280px) !important;
            width: calc(100vw - 70px) !important;
        /* Mobile wird später implementiert wenn nötig */
        /* Tooltips for collapsed state */
        .sidebar.collapsed .nav-item {
            position: relative !important;
        .sidebar.collapsed .nav-item::after {
            content: attr(data-tooltip) !important;
            position: absolute !important;
            left: 75px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            background: linear-gradient(135deg, #1e293b, #334155) !important;
            padding: 10px 14px !important;
            border-radius: 8px !important;
            font-weight: 500 !important;
            white-space: nowrap !important;
            opacity: 0 !important;
            pointer-events: none !important;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25) !important;
            z-index: 1001 !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        .sidebar.collapsed .nav-item:hover::after {
            transform: translateY(-50%) translateX(12px) !important;
        .sidebar.collapsed .nav-item a span {
            width: 0 !important;
            overflow: hidden !important;
        .sidebar.collapsed .nav-section-title {
            height: 0 !important;
            padding: 0 !important;
        /* Toggle Button Tooltip */
        .sidebar.collapsed .sidebar-toggle {
        .sidebar.collapsed .sidebar-toggle::after {
            content: "Sidebar ausklappen" !important;
            background: linear-gradient(135deg, #dc2626, #ef4444) !important;
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.3) !important;
        .sidebar.collapsed .sidebar-toggle:hover::after {
        /* Improve nav item spacing */
        .sidebar .nav-item a {
            padding: 0.75rem 1rem !important;
            margin: 0.125rem 0.5rem !important;
            align-items: center !important;
            gap: 0.75rem !important;
        /* Section titles */
        .sidebar .nav-section {
            margin-bottom: 1.5rem !important;
        .sidebar .nav-section ul {
            list-style: none !important;
            margin: 0 !important;
        /* RESPONSIVE FIXES FÜR BEWERBUNGSMANAGER */
            .smart-workflow-section {
                margin-left: -1rem !important;
                margin-right: -1rem !important;
                padding: 0 1rem !important;
            .smart-workflow-section > div {
                padding: 1rem !important;
                font-size: 0.9rem !important;
            .smart-workflow-section h3 {
                font-size: 1.4rem !important;
            .smart-workflow-section button {
                padding: 0.75rem 1.5rem !important;
            .smart-workflow-section .fa-rocket {
                font-size: 1rem !important;
        @media (max-width: 480px) {
                margin-left: -0.5rem !important;
                margin-right: -0.5rem !important;
                padding: 0.75rem !important;
                width: 100% !important;
                max-width: 100% !important;
                justify-content: center !important;
            .smart-workflow-section div[style*="display: flex"] {
                flex-direction: column !important;
                gap: 0.5rem !important;
            .smart-workflow-section div[style*="display: flex"] button {
                min-width: auto !important;
        /* MODERNE TOPBAR */
        .admin-topbar {
            height: 70px;
            border-bottom: 1px solid #e2e8f0;
            justify-content: space-between;
            padding: 0 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        .topbar-left {
        .topbar-left h1 {
            font-size: 1.5rem;
            color: #1e293b;
        .breadcrumb {
        .breadcrumb a {
            color: #4f46e5;
        .breadcrumb a:hover {
            text-decoration: underline;
        .topbar-right {
        .search-box {
            width: 300px;
        .search-box input {
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border: 1px solid #d1d5db;
            background: #f9fafb;
        .search-box i {
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        .user-menu {
            padding: 0.5rem;
            transition: background-color 0.2s ease;
        .user-menu:hover {
            background: #f3f4f6;
        .user-avatar {
        /* CLEAN DASHBOARD */
        .dashboard-grid {
            grid-template-columns: repeat(3, 1fr);
            padding: 0.75rem;
        .dashboard-card {
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        .card-title {
            margin: 0 0 0.25rem 0;
        .card-content {
        .card,
        .stat-card,
        .activity-card,
            border: 1px solid #e2e8f0;
        .card:hover,
        .stat-card:hover,
        .activity-card:hover,
        .dashboard-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        .card-header {
            margin-bottom: 1rem;
        .card-icon {
        .stat-value {
            font-size: 2rem;
            margin: 0.5rem 0;
        .stat-label {
        .stat-change {
            gap: 0.25rem;
        .stat-change.positive {
            color: #059669;
        .stat-change.negative {
            color: #dc2626;
        /* DASHBOARD STAT CARDS - BESSERE LESBARKEIT */
        .dashboard-stats .stat-content h3 {
            font-size: 0.875rem !important;
            margin: 0 0 0.5rem 0 !important;
        .dashboard-stats .stat-content h4 {
        .dashboard-stats .stat-content p {
            font-size: 0.75rem !important;
            color: #6b7280 !important;
        /* SIDEBAR COLLAPSED ANPASSUNGEN - BESSERE LESBARKEIT */
            width: 70px !important;
        .sidebar.collapsed .sidebar-header {
            padding: 1rem 0.5rem !important;
            text-align: center !important;
        .sidebar.collapsed .sidebar-brand {
            flex-direction: column !important;
            gap: 0.5rem !important;
        .sidebar.collapsed .sidebar-brand img {
        .sidebar.collapsed .avatar {
        .sidebar.collapsed .avatar-text {
        .sidebar.collapsed .sidebar-brand h3,
        .sidebar.collapsed .sidebar-brand p {
            display: none !important;
            width: 100% !important;
            padding: 0.5rem !important;
            justify-content: center !important;
        .sidebar.collapsed .sidebar-toggle .toggle-label {
        .sidebar.collapsed .nav-item a {
            padding: 12px 8px !important;
            margin: 0.25rem 0.5rem !important;
        .sidebar.collapsed .nav-item a i {
            margin-right: 0 !important;
            font-size: 18px !important;
        /* Backup-Sektion spezifische Styles */
        .backup-list {
            max-height: 300px;
            overflow-y: auto;
            padding: 1rem;
        .backup-item {
            justify-content: space-between !important;
            padding: 0.75rem !important;
            border: 1px solid #d1d5db !important;
            border-radius: 6px !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        .backup-item span {
            color: #374151 !important;
        .btn-small {
            padding: 0.5rem 1rem !important;
            border-radius: 4px !important;
        .form-actions {
            gap: 1rem !important;
            margin-top: 2rem !important;
            padding-top: 1rem !important;
            border-top: 1px solid #e5e7eb !important;
        .form-actions .btn {
            padding: 0.75rem 1.5rem !important;
            cursor: pointer !important;
            transition: all 0.2s !important;
        .form-actions .btn:hover {
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
        /* Hero-Sektion Styles */
        .hero-management {
        .hero-header {
        .hero-header h2 {
            color: #1f2937;
        .hero-header p {
            font-size: 1.1rem;
        .hero-content-grid {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            margin-top: 2rem;
        .hero-card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        .hero-card h3 {
        .image-upload-area {
        .current-image {
        .upload-controls {
        .upload-info {
        .hero-form {
        .hero-actions {
        .hero-actions .btn {
            transition: all 0.2s;
        .hero-actions .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        .status-message {
        .status-message.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        .status-message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        .status-message.info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
    </style>
        /* AI Progress Animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        /* AI Coach Admin Styles */
        .ai-coach-admin-container {
            max-width: 1400px;
            margin: 0 auto;

        /* Digital Twin Training Styles */
        .digital-twin-training-container {
            max-width: 1200px;
        .training-tabs {
            border-bottom: 2px solid #e2e8f0;
        .training-tabs .tab-btn {
            background: none;
            padding: 1rem 1.5rem;
            border-bottom: 3px solid transparent;
        .training-tabs .tab-btn:hover {
            background: #f8fafc;
        .training-tabs .tab-btn.active {
            border-bottom-color: #4f46e5;
        .training-card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        .training-card h3 {
        .training-card p {
        .training-form, .experience-form, .communication-form {
            gap: 1.5rem;
        .form-group {
        .form-group label {
        .form-group textarea {
            font-family: inherit;
            transition: border-color 0.3s ease;
            min-height: 100px;
            resize: vertical;
        .form-group textarea:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        .analytics-grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        .analytics-card {
        .analytics-card h4 {
        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 8px;
        .progress-fill {
            background: linear-gradient(90deg, #4f46e5, #7c3aed);
            transition: width 0.3s ease;
        .score-circle {
            width: 80px;
            height: 80px;
        .score-number {
        .score-label {
            opacity: 0.8;
        .data-stats {
        .stat-item {
        .stat-number {
            display: block;
        .training-actions {
            flex-wrap: wrap;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
        .btn-primary {
            background: #4f46e5;
        .btn-primary:hover {
            background: #4338ca;
            background: #64748b;
            background: #475569;
        .btn-success {
            background: #059669;
        .btn-success:hover {
            background: #047857;
        .btn-warning {
            background: #d97706;
        .btn-warning:hover {
            background: #b45309;
        .btn-danger {
            background: #dc2626;
        .btn-danger:hover {
            background: #b91c1c;
            .training-tabs {
            .analytics-grid {
                grid-template-columns: 1fr;
            .training-actions {
        .ai-coach-tabs {
        .tab-buttons {
        .tab-btn {
        .tab-btn:hover {
            border-color: #cbd5e1;
        .tab-btn.active {
        .tab-content {
            display: none;
        .tab-content.active {
        .settings-panel {
        .settings-panel.active {
            display: block !important;
            visibility: visible !important;
        .settings-panel[style*="display: block"] {
        /* Force show general settings panel */
        #generalSettings {
            z-index: 999 !important;
        /* Ensure settings content is visible */
        .settings-content {
            min-height: 400px;
            z-index: 1;
        .settings-content .settings-panel {
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 2;
        /* Force all settings panels to be visible when active */
        /* Settings panels should be visible when active */
        .admin-section .settings-panel.active {
        /* Emergency content visibility fix */
        .settings-panel h3,
        .settings-panel p,
        .settings-panel form,
        .settings-panel .form-group,
        .settings-panel input,
        .settings-panel select,
        .settings-panel textarea,
        .settings-panel button {
            z-index: 1000 !important;
        .settings-panel .form-group {
            margin-bottom: 1rem !important;
        .settings-panel label {
            color: #333 !important;
        .settings-panel textarea {
            border: 1px solid #ddd !important;
        /* API Settings Grid */
        .api-settings-grid {
            grid-template-columns: 1fr 1fr;
        .api-config-card, .api-usage-card {
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        .card-header h3 {
        .api-status {
        .status-indicator {
            width: 8px;
            background: #ef4444;
        .status-indicator.online {
            background: #10b981;
        .status-text {
        .form-input, .form-select, .form-textarea {
        .form-input:focus, .form-select:focus, .form-textarea:focus {
        .input-with-toggle {
        .toggle-visibility {
            right: 0.75rem;
            padding: 0.25rem;
        .form-help {
            margin-top: 0.25rem;
        .form-range {
        .range-labels {
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        .btn-outline {
            background: transparent;
        .btn-outline:hover {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
        /* Usage Stats */
        .usage-stats {
            margin-bottom: 0.25rem;
        .usage-chart {
            height: 200px;
        /* Chatbot Configuration */
        .chatbot-config-grid {
        .config-card {
        /* Assessments Grid */
        .assessments-management, .workflows-management {
        .assessments-header, .workflows-header {
        .assessments-header h3, .workflows-header h3 {
        .assessments-grid, .workflows-grid {
        .assessment-card, .workflow-card {
        .assessment-card:hover, .workflow-card:hover {
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.1);
        .assessment-header, .workflow-header {
        .assessment-header h4, .workflow-header h4 {
        .assessment-status, .workflow-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
        .assessment-status.active, .workflow-status.active {
            background: #dcfce7;
            color: #166534;
        .assessment-content, .workflow-content {
        .assessment-content p, .workflow-content p {
            line-height: 1.5;
        .assessment-stats {
        .assessment-stats span {
        .workflow-steps {
        .step {
            background: #e0e7ff;
            color: #3730a3;
        .workflow-features {
        .feature {
            background: #f0fdf4;
        .assessment-actions, .workflow-actions {
        /* Analytics */
        .analytics-dashboard {
        .analytics-header {
        .analytics-header h3 {
        .analytics-filters {
        .analytics-card .card-header {
            padding: 0 0 1rem 0;
        .analytics-card .card-header h4 {
        .metric {
        .metric:last-child {
            margin-bottom: 0;
        .metric-value {
        .metric-label {
        .popular-methods {
        .method-item {
        .method-name {
        .method-count {
            padding: 0.25rem 0.5rem;
        .analytics-charts {
        .chart-container {
        .chart-container h4 {
        /* Conversations */
        .conversations-management {
        .conversations-header {
        .conversations-header h3 {
        .conversations-filters {
        .conversations-list {
        .conversation-item {
        .conversation-item:hover {
        .conversation-header {
        .conversation-info h4 {
        .conversation-info p {
        .conversation-stats {
        .conversation-stats span {
        .conversation-preview {
        .conversation-preview p {
            font-style: italic;
        .conversation-actions {
        /* Responsive Design */
            .ai-coach-admin-container {
            .api-settings-grid,
            .chatbot-config-grid {
            .tab-buttons {
            .assessments-grid,
            .workflows-grid {
            .analytics-charts {
            .conversations-header {
                gap: 1rem;
                align-items: stretch;
            .conversations-filters {
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <!-- Meta -->
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="css/unified-auth-system.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="manuel-weiss-photo.svg" alt="MW">
            </div>
            <div class="loading-spinner"></div>
            <p>Admin Panel wird geladen...</p>
        </div>
    </div>
    <!-- Main Admin Interface -->
    <div class="admin-container">
        <!-- Sidebar -->
        <!-- Modern Floating Action Button - IMMER SICHTBAR -->
        <aside class="sidebar admin-sidebar" id="adminSidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <div class="avatar">
                        <span class="avatar-text">MW</span>
                    </div>
                    <div>
                        <h3>Admin Panel</h3>
                        <p>Manuel Weiss</p>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" title="Sidebar ein-/ausklappen">
                    <i class="fas fa-bars"></i>
                    <span class="toggle-label">Einklappen</span>
                </button>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Hauptmenü</div>
                    <ul>
                        <li class="nav-item active" data-section="dashboard" data-tooltip="Dashboard">
                            <a href="#dashboard">
                                <i class="fas fa-chart-line"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item" data-section="content" data-tooltip="Inhalte">
                            <a href="#content">
                                <i class="fas fa-edit"></i>
                                <span>Inhalte</span>
                        <li class="nav-item" data-section="hero-about" data-tooltip="Hero & Über mich">
                            <a href="#hero-about">
                                <i class="fas fa-home"></i>
                                <span>Hero & Über mich</span>
                        <li class="nav-item" data-section="nutrition" data-tooltip="Ernährungsplan">
                            <a href="#nutrition">
                                <i class="fas fa-apple-alt"></i>
                                <span>Ernährungsplan</span>
                        <li class="nav-item has-submenu" data-section="personality-development">
                            <a href="#personality-development">
                                <i class="fas fa-seedling"></i>
                                <span>Persönlichkeitsentwicklung</span>
                                <i class="fas fa-chevron-down submenu-arrow"></i>
                            <ul class="submenu">
                                <li class="nav-item" data-section="ikigai">
                                    <a href="#ikigai">
                                        <i class="fas fa-circle"></i>
                                        <span>Ikigai-Workflow</span>
                                    </a>
                                </li>
                                <li class="nav-item" data-section="raisec">
                                    <a href="#raisec">
                                        <span>RAISEC-Modell</span>
                                <li class="nav-item" data-section="values-clarification">
                                    <a href="#values-clarification">
                                        <span>Werte-Klärung</span>
                                <li class="nav-item" data-section="strengths-analysis">
                                    <a href="#strengths-analysis">
                                        <span>Stärken-Analyse</span>
                                <li class="nav-item" data-section="goal-setting">
                                    <a href="#goal-setting">
                                        <span>Ziel-Setting</span>
                                <li class="nav-item" data-section="mindfulness">
                                    <a href="#mindfulness">
                                        <span>Achtsamkeit & Meditation</span>
                                <li class="nav-item" data-section="emotional-intelligence">
                                    <a href="#emotional-intelligence">
                                        <span>Emotionale Intelligenz</span>
                                <li class="nav-item" data-section="habit-building">
                                    <a href="#habit-building">
                                        <span>Gewohnheiten aufbauen</span>
                                <li class="nav-item" data-section="gallup-strengths">
                                    <a href="#gallup-strengths">
                                        <span>Gallup StrengthsFinder</span>
                                <li class="nav-item" data-section="via-strengths">
                                    <a href="#via-strengths">
                                        <span>VIA Character Strengths</span>
                                <li class="nav-item" data-section="self-assessment">
                                    <a href="#self-assessment">
                                        <span>Selbsteinschätzung</span>
                                <li class="nav-item" data-section="johari-window">
                                    <a href="#johari-window">
                                        <span>Johari Window</span>
                                <li class="nav-item" data-section="nlp-dilts">
                                    <a href="#nlp-dilts">
                                        <span>NLP Dilts</span>
                                <li class="nav-item" data-section="five-pillars">
                                    <a href="#five-pillars">
                                        <span>Five Pillars</span>
                                <li class="nav-item" data-section="harvard-method">
                                    <a href="#harvard-method">
                                        <span>Harvard Method</span>
                                <li class="nav-item" data-section="moment-excellence">
                                    <a href="#moment-excellence">
                                        <span>Moment of Excellence</span>
                                <li class="nav-item" data-section="nlp-meta-goal">
                                    <a href="#nlp-meta-goal">
                                        <span>NLP Meta Goal</span>
                                <li class="nav-item" data-section="nonviolent-communication">
                                    <a href="#nonviolent-communication">
                                        <span>Nonviolent Communication</span>
                                <li class="nav-item" data-section="resource-analysis">
                                    <a href="#resource-analysis">
                                        <span>Resource Analysis</span>
                                <li class="nav-item" data-section="rafael-method">
                                    <a href="#rafael-method">
                                        <span>Rafael Method</span>
                                <li class="nav-item" data-section="walt-disney">
                                    <a href="#walt-disney">
                                        <span>Walt Disney</span>
                                <li class="nav-item" data-section="aek-communication">
                                    <a href="#aek-communication">
                                        <span>AEK Communication</span>
                                <li class="nav-item" data-section="change-stages">
                                    <a href="#change-stages">
                                        <span>Change Stages</span>
                                <li class="nav-item" data-section="circular-interview">
                                    <a href="#circular-interview">
                                        <span>Circular Interview</span>
                                <li class="nav-item" data-section="communication">
                                    <a href="#communication">
                                        <span>Communication</span>
                                <li class="nav-item" data-section="competence-map">
                                    <a href="#competence-map">
                                        <span>Competence Map</span>
                                <li class="nav-item" data-section="conflict-escalation">
                                    <a href="#conflict-escalation">
                                        <span>Conflict Escalation</span>
                                <li class="nav-item" data-section="rubikon-model">
                                    <a href="#rubikon-model">
                                        <span>Rubikon Model</span>
                                <li class="nav-item" data-section="solution-focused">
                                    <a href="#solution-focused">
                                        <span>Solution Focused</span>
                                <li class="nav-item" data-section="systemic-coaching">
                                    <a href="#systemic-coaching">
                                        <span>Systemic Coaching</span>
                                <li class="nav-item" data-section="target-coaching">
                                    <a href="#target-coaching">
                                        <span>Target Coaching</span>
                                <li class="nav-item" data-section="all-methods">
                                    <a href="#all-methods">
                                        <span>Alle Methoden verwalten</span>
                                <li class="nav-item" data-section="ai-coach-admin">
                                    <a href="#ai-coach-admin">
                                        <i class="fas fa-robot"></i>
                                        <span>AI Coach Verwaltung</span>
                                <li class="nav-item" data-section="digital-twin-training">
                                    <a href="#digital-twin-training">
                                        <i class="fas fa-brain"></i>
                                        <span>Manu Training</span>
                            </ul>
                        <li class="nav-item" data-section="personal-training" data-tooltip="Personal Training">
                            <a href="#personal-training">
                                <i class="fas fa-dumbbell"></i>
                                <span>Personal Training</span>
                        <li class="nav-item" data-section="applications" data-tooltip="Bewerbungen">
                            <a href="#applications">
                                <i class="fas fa-briefcase"></i>
                                <span>Bewerbungen</span>
                        <li class="nav-item" data-section="ai-settings" data-tooltip="KI-Einstellungen">
                            <a href="#ai-settings">
                                <i class="fas fa-robot"></i>
                                <span>KI-Einstellungen</span>
                        <li class="nav-item" data-section="ai-twin" data-tooltip="AI Twin">
                            <a href="#ai-twin">
                                <i class="fas fa-user-robot"></i>
                                <span>AI Twin</span>
                        <li class="nav-item" data-section="translations" data-tooltip="Translations">
                            <a href="#translations">
                                <i class="fas fa-language"></i>
                                <span>Translations</span>
                        <li class="nav-item" data-section="media" data-tooltip="Medien">
                            <a href="#media">
                                <i class="fas fa-photo-video"></i>
                                <span>Medien</span>
                        <li class="nav-item" data-tooltip="API Dokumentation">
                            <a href="api-docs-simple.html" target="_blank">
                                <i class="fas fa-code"></i>
                                <span>API Docs</span>
                    </ul>
                
                    <div class="nav-section-title">Vermietung</div>
                        <li class="nav-item" data-section="rentals">
                            <a href="#rentals">
                                <i class="fas fa-key"></i>
                                <span>Vermietungen</span>
                        <li class="nav-item" data-section="bookings">
                            <a href="#bookings">
                                <i class="fas fa-calendar-check"></i>
                                <span>Buchungen</span>
                    <div class="nav-section-title">System</div>
                        <li class="nav-item" data-section="user-management-live" data-tooltip="User Management">
                            <a href="#user-management-live">
                                <i class="fas fa-users-cog"></i>
                                <span>User Management</span>
                        <li class="nav-item" data-section="analytics" data-tooltip="Analytics">
                            <a href="#analytics">
                                <i class="fas fa-chart-bar"></i>
                                <span>Analytics</span>
                        <li class="nav-item" data-section="system-health" data-tooltip="System Health">
                            <a href="#system-health">
                                <i class="fas fa-heartbeat"></i>
                                <span>System Health</span>
                        <li class="nav-item" data-section="general-settings" data-tooltip="Allgemeine Einstellungen">
                            <a href="#general-settings">
                                <i class="fas fa-cog"></i>
                                <span>Allgemeine Einstellungen</span>
                        <li class="nav-item" data-section="seo-settings" data-tooltip="SEO Einstellungen">
                            <a href="#seo-settings">
                                <i class="fas fa-search"></i>
                                <span>SEO Einstellungen</span>
                        <li class="nav-item" data-section="security-settings" data-tooltip="Sicherheit">
                            <a href="#security-settings">
                                <i class="fas fa-shield-alt"></i>
                                <span>Sicherheit</span>
                        <li class="nav-item" data-section="backup-settings" data-tooltip="Backup">
                            <a href="#backup-settings">
                                <i class="fas fa-database"></i>
                                <span>Backup</span>
            </nav>
            <div class="sidebar-footer">
                <a href="index.html" class="btn-sidebar" target="_blank" data-tooltip="Website ansehen">
                    <i class="fas fa-external-link-alt"></i>
                    <span>Website ansehen</span>
                </a>
                <button class="btn-sidebar btn-logout" data-action="logout" data-tooltip="Abmelden">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Abmelden</span>
        </aside>
        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- Main Content Area -->
            <main class="admin-main">
            <!-- Top Bar -->
            <header class="admin-topbar">
                <div class="topbar-left">
                    <h1 id="sectionTitle">Dashboard</h1>
                    <nav class="breadcrumb">
                        <a href="#dashboard">Admin</a>
                        <i class="fas fa-chevron-right"></i>
                        <span id="breadcrumbCurrent">Dashboard</span>
                    </nav>
                <div class="topbar-right">
                    <button class="topbar-btn" data-action="toggle-dark-mode">
                        <i class="fas fa-moon" id="darkModeIcon"></i>
                    </button>
                    <button class="topbar-btn" data-action="show-notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    <div class="topbar-user">
                        <div class="avatar avatar-small">
                            <span class="avatar-text">MW</span>
                        </div>
                        <span>Manuel</span>
            </header>
            <!-- Content Sections -->
            <div class="admin-content">
                <!-- Dashboard Section -->
                <section id="dashboard" class="admin-section active">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-content">
                                <h3>Seitenaufrufe</h3>
                                <p class="stat-number">12,453</p>
                                <span class="stat-change positive">+12.5%</span>
                        
                                <i class="fas fa-calendar"></i>
                                <h3>Buchungen</h3>
                                <p class="stat-number">24</p>
                                <span class="stat-change positive">+3</span>
                                <i class="fas fa-envelope"></i>
                                <h3>Anfragen</h3>
                                <p class="stat-number">87</p>
                                <span class="stat-change">Heute: 5</span>
                                <h3>AI Twin</h3>
                                <p class="stat-number">1</p>
                                <span class="stat-change">Aktiv</span>
                    
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <h3>Letzte Aktivitäten</h3>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <i class="fas fa-robot"></i>
                                    <div>
                                        <p>AI Ernährungsplan generiert</p>
                                        <span>vor 2 Stunden</span>
                                    </div>
                                </div>
                                    <i class="fas fa-file-alt"></i>
                                        <p>Neue Bewerbung hinzugefügt</p>
                                        <span>vor 4 Stunden</span>
                                    <i class="fas fa-apple-alt"></i>
                                        <p>Rezept mit AI erstellt</p>
                                        <span>vor 1 Tag</span>
                            <h3>Bewerbungsübersicht</h3>
                            <div class="applications-overview">
                                <div class="overview-stats">
                                    <div class="overview-stat">
                                        <span class="stat-number" id="dashboard-total-apps">0</span>
                                        <span class="stat-label">Gesamt</span>
                                        <span class="stat-number" id="dashboard-pending-apps">0</span>
                                        <span class="stat-label">Gesendet</span>
                                        <span class="stat-number" id="dashboard-success-rate">0%</span>
                                        <span class="stat-label">Erfolgsrate</span>
                                <div class="recent-applications">
                                    <h4>Letzte Bewerbungen</h4>
                                    <div id="recentApplicationsList">
                                        <!-- Recent applications will be loaded here -->
                                <div class="overview-actions">
                                    <button class="btn-applications" onclick="showAdminSection('applications')">
                                        <i class="fas fa-briefcase"></i>
                                        <span>Bewerbungen verwalten</span>
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                            <h3>Userverwaltung</h3>
                            <div class="user-overview">
                                        <span class="stat-number" id="dashboard-total-users">156</span>
                                        <span class="stat-label">Registrierte User</span>
                                        <span class="stat-number" id="dashboard-active-users">23</span>
                                        <span class="stat-label">Aktive User</span>
                                        <span class="stat-number" id="dashboard-satisfaction">89%</span>
                                        <span class="stat-label">Zufriedenheit</span>
                                <div class="recent-users">
                                    <h4>Neue User</h4>
                                    <div id="recentUsersList">
                                        <!-- Recent users will be loaded here -->
                                    <button class="btn-applications" onclick="showAdminSection('user-management')">
                                        <i class="fas fa-users"></i>
                                        <span>User verwalten</span>
                                </button>
                </section>
                <!-- Content Management Section -->
                <section id="content" class="admin-section">
                    <div class="section-toolbar">
                        <div class="toolbar-left">
                            <button class="btn btn-primary" data-action="add-service">
                                <i class="fas fa-plus"></i>
                                Neuen Service hinzufügen
                            </button>
                            <button class="btn btn-outline" data-action="refresh-services">
                                <i class="fas fa-sync"></i>
                                Aktualisieren
                            <button class="btn btn-success" data-action="sync-services">
                                <i class="fas fa-link"></i>
                                Mit Website synchronisieren
                            <button class="btn btn-info" data-action="load-services">
                                <i class="fas fa-download"></i>
                                Von Website laden
                        <div class="toolbar-right">
                            <input type="search" class="search-input" placeholder="Services suchen...">
                            <select class="filter-select">
                                <option>Alle Services</option>
                                <option>Beratung</option>
                                <option>Projekte</option>
                                <option>Vermietung</option>
                                <option>Weitere Tätigkeiten</option>
                            </select>
                    <!-- Service Verwaltung -->
                    <div class="services-management" style="margin-bottom: 2rem;">
                        <h3 style="color: #333; margin-bottom: 1.5rem; border-bottom: 2px solid #6366f1; padding-bottom: 0.5rem;">
                            🚀 Services & Tätigkeiten verwalten
                        </h3>
                        <!-- Aktuelle Services -->
                        <div class="current-services" style="margin-bottom: 2rem;">
                            <h4 style="color: #555; margin-bottom: 1rem;">Aktuelle Services:</h4>
                            <div id="servicesList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
                                <!-- Services werden dynamisch geladen -->
                        <!-- Neuen Service hinzufügen -->
                        <div class="add-service-form" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h4 style="color: #555; margin-bottom: 1.5rem;">➕ Neuen Service hinzufügen:</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                <div>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Service-Name:</label>
                                    <input type="text" id="newServiceName" placeholder="z.B. Projektmanagement" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kategorie:</label>
                                    <select id="newServiceCategory" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                        <option value="beratung">Beratung</option>
                                        <option value="projekte">Projekte</option>
                                        <option value="vermietung">Vermietung</option>
                                        <option value="weitere">Weitere Tätigkeiten</option>
                                    </select>
                            <div style="margin-bottom: 1.5rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Beschreibung:</label>
                                <textarea id="newServiceDescription" placeholder="Beschreibe den Service..." rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; resize: vertical;"></textarea>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Icon (FontAwesome):</label>
                                    <input type="text" id="newServiceIcon" placeholder="fas fa-project-diagram" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Farbe:</label>
                                    <input type="color" id="newServiceColor" value="#6366f1" style="width: 100%; height: 50px; border: 1px solid #ddd; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Bild:</label>
                                <input type="file" id="newServiceImage" accept="image/*" data-category="services" data-subcategory="images" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'services', subcategory: 'images'})" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                            <button data-action="create-service" class="btn btn-primary" style="padding: 1rem 2rem; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                🚀 Service erstellen
                    <div class="content-grid" id="contentGrid">
                        <!-- Content cards will be dynamically loaded here -->
                <!-- Nutrition Planner Section -->
                <section id="nutrition" class="admin-section">
                    <div class="nutrition-admin-container">
                        <div class="nutrition-admin-header">
                            <h2>Ernährungsplan-Verwaltung</h2>
                            <p>Verwalte den intelligenten Ernährungsplan-Generator</p>
                        <!-- OpenAI API Verweis -->
                        <div class="openai-config" style="margin-bottom: 3rem;">
                            <div style="background: #f0f9ff; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #0ea5e9;">
                                <h3 style="color: #0c4a6e; margin-bottom: 0.5rem;">🤖 OpenAI API Konfiguration</h3>
                                <p style="margin: 0; color: #0c4a6e;">
                                    Alle OpenAI Einstellungen wurden in die <strong>KI-Einstellungen</strong> verschoben.
                                    <br><small>Klicken Sie auf "KI-Einstellungen" in der Sidebar für die vollständige Konfiguration.</small>
                                </p>
                            <div id="api-status" style="padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem; display: none;">
                                <span id="api-status-text"></span>
                        <!-- Statistiken Dashboard -->
                        <div class="nutrition-stats" style="margin-bottom: 3rem;">
                            <h3 style="color: #333; margin-bottom: 1.5rem; border-bottom: 2px solid #6366f1; padding-bottom: 0.5rem;">
                                📊 Statistiken
                            </h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
                                    <h4 style="color: #555; margin-bottom: 0.5rem;">Pläne erstellt</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #6366f1; margin: 0;" id="plans-generated">0</p>
                                    <h4 style="color: #555; margin-bottom: 0.5rem;">AI-Anfragen</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #10b981; margin: 0;" id="ai-requests">0</p>
                                    <h4 style="color: #555; margin-bottom: 0.5rem;">Exporte heute</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #f59e0b; margin: 0;" id="exports-today">0</p>
                                    <h4 style="color: #555; margin-bottom: 0.5rem;">Aktive Nutzer</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #ef4444; margin: 0;" id="active-users">0</p>
                        <!-- AI Rezept-Generator -->
                        <div class="ai-recipe-generator" style="margin-bottom: 3rem;">
                                🤖 AI Rezept-Generator
                            <div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                <!-- Rezept-Suche -->
                                <div style="margin-bottom: 2rem;">
                                    <h4 style="color: #555; margin-bottom: 1rem;">🔍 Rezept suchen & generieren</h4>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                        <div>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Rezept-Name oder Beschreibung:</label>
                                            <input type="text" id="ai-recipe-search" placeholder="z.B. 'gesunde Quinoa-Bowl mit Gemüse'" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                        </div>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kategorie:</label>
                                            <select id="ai-recipe-category" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <option value="frühstück">Frühstück</option>
                                                <option value="mittagessen">Mittagessen</option>
                                                <option value="abendessen">Abendessen</option>
                                                <option value="snack">Snack</option>
                                                <option value="dessert">Dessert</option>
                                            </select>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Besondere Anforderungen:</label>
                                            <input type="text" id="ai-recipe-requirements" placeholder="z.B. 'vegan, glutenfrei, unter 400 Kalorien'" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kochzeit (Minuten):</label>
                                            <input type="number" id="ai-recipe-time" placeholder="30" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <button data-action="generate-recipe" class="btn btn-primary" style="width: 100%; padding: 1rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem;">
                                        🤖 Rezept mit AI generieren
                                    <!-- AI Progress -->
                                    <div id="ai-recipe-progress" style="display: none; margin-bottom: 1rem;">
                                        <div style="background: #f3f4f6; border-radius: 6px; padding: 1rem; text-align: center;">
                                            <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                                <div style="width: 20px; height: 20px; border: 2px solid #6366f1; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                                                <span style="font-weight: 600; color: #6366f1;">AI generiert Rezept...</span>
                                            </div>
                                            <div style="background: #e5e7eb; border-radius: 4px; height: 8px; overflow: hidden;">
                                                <div id="ai-progress-bar" style="background: linear-gradient(90deg, #6366f1, #8b5cf6); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                                
                                <!-- Generiertes Rezept -->
                                <div id="generated-recipe" style="display: none; margin-bottom: 2rem;">
                                    <h4 style="color: #555; margin-bottom: 1rem;">✨ Generiertes Rezept</h4>
                                    <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 8px; padding: 1.5rem;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                            <div>
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Rezept-Name:</label>
                                                <input type="text" id="generated-recipe-name" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kategorie:</label>
                                                <select id="generated-recipe-category" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                    <option value="frühstück">Frühstück</option>
                                                    <option value="mittagessen">Mittagessen</option>
                                                    <option value="abendessen">Abendessen</option>
                                                    <option value="snack">Snack</option>
                                                    <option value="dessert">Dessert</option>
                                                </select>
                                        
                                        <div style="margin-bottom: 1.5rem;">
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Zutaten:</label>
                                            <textarea id="generated-recipe-ingredients" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; height: 80px; resize: vertical;"></textarea>
                                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Zubereitung:</label>
                                            <textarea id="generated-recipe-instructions" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; height: 100px; resize: vertical;"></textarea>
                                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kalorien:</label>
                                                <input type="number" id="generated-recipe-calories" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Protein (g):</label>
                                                <input type="number" id="generated-recipe-protein" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kohlenhydrate (g):</label>
                                                <input type="number" id="generated-recipe-carbs" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Fett (g):</label>
                                                <input type="number" id="generated-recipe-fat" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                        <div style="display: flex; gap: 1rem;">
                                            <button data-action="save-recipe" class="btn btn-primary" style="flex: 1; padding: 1rem; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                                💾 Rezept speichern
                                            </button>
                                            <button data-action="regenerate-recipe" class="btn btn-primary" style="flex: 1; padding: 1rem; background: #f59e0b; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                                🔄 Neu generieren
                                <!-- Rezept-Datenbank -->
                                <div style="border-top: 2px solid #e2e8f0; padding-top: 2rem;">
                                    <h4 style="color: #555; margin-bottom: 1rem;">📚 Gespeicherte Rezepte</h4>
                                    <div id="saved-recipes-list" style="max-height: 300px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 6px;">
                                        <!-- Rezepte werden hier dynamisch geladen -->
                <!-- Persönlichkeitsentwicklung Übersicht -->
                <section id="personality-development" class="admin-section">
                    <div class="section-header">
                        <h2>Persönlichkeitsentwicklung - Übersicht</h2>
                        <p>Verwalte alle 29 Methoden der Persönlichkeitsentwicklung</p>
                    <div class="methods-overview">
                        <div class="methods-stats">
                            <div class="stat-card">
                                <h3>29</h3>
                                <p>Verfügbare Methoden</p>
                                <h3 id="activeMethods">12</h3>
                                <p>Aktive Workflows</p>
                                <h3 id="completedMethods">0</h3>
                                <p>Abgeschlossene Methoden</p>
                        <div class="methods-categories">
                            <h3>Methoden-Kategorien</h3>
                            <div class="category-grid">
                                <div class="category-card">
                                    <h4>Selbstreflexion</h4>
                                    <p>Ikigai, Werte-Klärung, Johari Window, Selbsteinschätzung</p>
                                    <h4>Stärken & Talente</h4>
                                    <p>Gallup StrengthsFinder, VIA Character Strengths, Stärken-Analyse</p>
                                    <h4>Ziele & Vision</h4>
                                    <p>Ziel-Setting, Vision Board, NLP Meta Goal</p>
                                    <h4>Emotionen & Achtsamkeit</h4>
                                    <p>Emotionale Intelligenz, Achtsamkeit & Meditation, Stress-Management</p>
                                    <h4>Gewohnheiten & Verhalten</h4>
                                    <p>Gewohnheiten aufbauen, Zeitmanagement, Rubikon Model</p>
                                    <h4>Kommunikation & Beziehungen</h4>
                                    <p>Harvard Method, Nonviolent Communication, AEK Communication</p>
                <!-- Ikigai Workflow Section -->
                <section id="ikigai" class="admin-section">
                    <div class="ikigai-admin-container">
                        <div class="ikigai-admin-header">
                            <h2>Ikigai-Workflow Verwaltung</h2>
                            <p>Verwalte den ausführlichen Ikigai-Workflow und seine Inhalte</p>
                        <!-- Workflow Steps Management -->
                        <div class="workflow-steps-management">
                            <h3>📋 Workflow-Schritte verwalten</h3>
                            <div class="ikigai-steps-grid">
                                <div class="ikigai-step-card" data-step="1">
                                    <div class="ikigai-step-header">
                                        <div class="ikigai-step-icon">
                                            <i class="fas fa-search"></i>
                                        <div class="ikigai-step-info">
                                            <h4>Schritt 1: Selbstreflexion & Vorbereitung</h4>
                                            <p>Vorbereitung und tiefe Selbstreflexion für den Ikigai-Prozess</p>
                                        <button class="ikigai-edit-btn" data-step="1">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    <div class="ikigai-step-stats">
                                        <div class="ikigai-stat">
                                            <i class="fas fa-tasks"></i>
                                            <span>4 Übungen</span>
                                            <i class="fas fa-clock"></i>
                                            <span>45 Min</span>
                                <div class="ikigai-step-card" data-step="2">
                                            <i class="fas fa-heart"></i>
                                            <h4>Schritt 2: Was du liebst</h4>
                                            <p>Entdecke deine Leidenschaften und was dich wirklich begeistert</p>
                                        <button class="ikigai-edit-btn" data-step="2">
                                            <span>5 Übungen</span>
                                            <span>60 Min</span>
                                <div class="step-card" data-step="3">
                                    <div class="step-header">
                                        <h4>Schritt 3: Was die Welt braucht</h4>
                                        <button class="edit-step-btn" data-step="3">
                                    <div class="step-content">
                                        <p>Identifiziere Bereiche für positiven Beitrag</p>
                                        <div class="step-exercises">
                                            <span class="exercise-count">3 Übungen</span>
                                <div class="step-card" data-step="4">
                                        <h4>Schritt 4: Wofür du bezahlt wirst</h4>
                                        <button class="edit-step-btn" data-step="4">
                                        <p>Analysiere deine beruflichen Fähigkeiten</p>
                                <div class="step-card" data-step="5">
                                        <h4>Schritt 5: Worin du gut bist</h4>
                                        <button class="edit-step-btn" data-step="5">
                                        <p>Entdecke deine natürlichen Talente</p>
                                            <span class="exercise-count">4 Übungen</span>
                                <div class="step-card" data-step="6">
                                        <h4>Schritt 6: Ikigai synthetisieren</h4>
                                        <button class="edit-step-btn" data-step="6">
                                        <p>Verbinde alle Bereiche zu deinem Ikigai</p>
                                <div class="step-card" data-step="7">
                                        <h4>Schritt 7: Aktionsplan erstellen</h4>
                                        <button class="edit-step-btn" data-step="7">
                                        <p>Setze dein Ikigai in konkrete Schritte um</p>
                        <!-- Video Resources Management -->
                        <div class="video-resources-management">
                            <h3>📺 Video-Ressourcen verwalten</h3>
                            <div class="video-resources-grid">
                                <div class="video-resource-card" data-video="ikigai-basics">
                                    <div class="video-thumbnail">
                                        <i class="fab fa-youtube"></i>
                                    <div class="video-info">
                                        <h4>Ikigai Grundlagen</h4>
                                        <p>Grundlagen und Philosophie des Ikigai-Konzepts</p>
                                        <div class="video-actions">
                                            <button class="edit-video-btn" data-video="ikigai-basics">
                                                <i class="fas fa-edit"></i> Bearbeiten
                                <div class="video-resource-card" data-video="self-reflection">
                                        <h4>Selbstreflexion</h4>
                                        <p>Techniken zur tiefen Selbstanalyse</p>
                                            <button class="edit-video-btn" data-video="self-reflection">
                                <div class="video-resource-card" data-video="goal-setting">
                                        <h4>Lebensziele setzen</h4>
                                        <p>Wie du deine Ziele strukturiert angehst</p>
                                            <button class="edit-video-btn" data-video="goal-setting">
                                <div class="video-resource-card" data-video="daily-ikigai">
                                        <h4>Ikigai im Alltag</h4>
                                        <p>Praktische Umsetzung im täglichen Leben</p>
                                            <button class="edit-video-btn" data-video="daily-ikigai">
                        <!-- Content Templates Management -->
                        <div class="content-templates-management">
                            <h3>📝 Inhaltsvorlagen verwalten</h3>
                            <div class="templates-grid">
                                <div class="template-card">
                                    <h4>Übungsvorlagen</h4>
                                    <p>Vorlagen für alle Workflow-Übungen</p>
                                    <button class="manage-templates-btn">
                                        <i class="fas fa-cog"></i> Verwalten
                                    <h4>Tipps & Ratschläge</h4>
                                    <p>Hilfreiche Tipps für jeden Schritt</p>
                                    <h4>Beispielantworten</h4>
                                    <p>Beispiele für bessere Orientierung</p>
                        <!-- Statistics -->
                        <div class="ikigai-statistics">
                            <h3>📊 Statistiken</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-icon">
                                    <div class="stat-content">
                                        <h4 id="ikigai-completions">0</h4>
                                        <p>Workflows abgeschlossen</p>
                                        <i class="fas fa-clock"></i>
                                        <h4 id="avg-completion-time">-</h4>
                                        <p>Durchschnittliche Zeit</p>
                                        <i class="fas fa-star"></i>
                                        <h4 id="ikigai-rating">-</h4>
                                        <p>Durchschnittliche Bewertung</p>
                                        <i class="fas fa-chart-line"></i>
                                        <h4 id="ikigai-progress">0%</h4>
                                        <p>Abschlussrate</p>
                <!-- Personal Training Section -->
                <section id="personal-training" class="admin-section">
                    <div class="personal-training-admin-container">
                        <div class="personal-training-admin-header">
                            <h2>Personal Training Verwaltung</h2>
                            <p>Verwalte Trainingspläne, Übungen und AI-Konfigurationen</p>
                        <!-- Training Plans Management -->
                        <div class="training-plans-management">
                            <h3>🏋️ Trainingspläne verwalten</h3>
                            <div class="plans-grid">
                                <div class="plan-template-card">
                                    <div class="plan-header">
                                        <h4>Muskelaufbau - Anfänger</h4>
                                        <button class="edit-plan-btn" data-action="open-plan-editor" data-param="muscle-beginner">
                                    <div class="plan-content">
                                        <p>3x pro Woche, 45 Min, Ganzkörper-Training</p>
                                        <div class="plan-stats">
                                            <span class="stat">12 Übungen</span>
                                            <span class="stat">4 Wochen</span>
                                        <h4>Gewichtsreduktion - Fortgeschritten</h4>
                                        <button class="edit-plan-btn" data-action="open-plan-editor" data-param="weight-loss-advanced">
                                        <p>4x pro Woche, 60 Min, Split-Training</p>
                                            <span class="stat">20 Übungen</span>
                                            <span class="stat">6 Wochen</span>
                                        <h4>Bodyweight - Anfänger</h4>
                                        <button class="edit-plan-btn" data-action="open-plan-editor" data-param="bodyweight-beginner">
                                        <p>3x pro Woche, 30 Min, Körpergewicht</p>
                                            <span class="stat">8 Übungen</span>
                                        <h4>Ausdauer - Alle Level</h4>
                                        <button class="edit-plan-btn" data-action="open-plan-editor" data-param="endurance-all">
                                        <p>5x pro Woche, 45 Min, Cardio-Fokus</p>
                                            <span class="stat">15 Übungen</span>
                                            <span class="stat">8 Wochen</span>
                        <!-- Exercise Database Management -->
                        <div class="exercise-database-management">
                            <h3>💪 Übungsdatenbank verwalten</h3>
                            <div class="exercise-categories">
                                    <div class="category-header">
                                        <h4>Brust</h4>
                                        <span class="exercise-count">12 Übungen</span>
                                    <div class="category-exercises">
                                        <div class="exercise-item">
                                            <span>Bankdrücken</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="bench-press">
                                                <i class="fas fa-edit"></i>
                                            <span>Liegestütze</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="push-ups">
                                            <span>Schrägbankdrücken</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="incline-bench">
                                        <h4>Rücken</h4>
                                        <span class="exercise-count">15 Übungen</span>
                                            <span>Klimmzüge</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="pull-ups">
                                            <span>Rudern</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="rowing">
                                            <span>Latziehen</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="lat-pulldown">
                                        <h4>Beine</h4>
                                        <span class="exercise-count">18 Übungen</span>
                                            <span>Kniebeugen</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="squats">
                                            <span>Ausfallschritte</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="lunges">
                                            <span>Rumänisches Kreuzheben</span>
                                            <button class="edit-exercise-btn" data-action="open-exercise-editor" data-param="romanian-deadlift">
                        <!-- Training Statistics -->
                        <div class="training-statistics">
                            <h3>📊 Trainings-Statistiken</h3>
                                        <i class="fas fa-dumbbell"></i>
                                        <h3 id="total-exercises">150+</h3>
                                        <p>Übungen in der Datenbank</p>
                                        <i class="fas fa-calendar-week"></i>
                                        <h3 id="generated-plans">25</h3>
                                        <p>Generierte Trainingspläne</p>
                                        <h3 id="active-users">12</h3>
                                        <p>Aktive Nutzer</p>
                                        <h3 id="avg-rating">4.8</h3>
                <!-- AI Settings Section -->
                <section id="ai-settings" class="admin-section" style="display: none;">
                    <div class="ai-settings-container">
                        <div class="ai-settings-header">
                            <h2>🤖 KI-Einstellungen</h2>
                            <p>Konfiguriere die KI-Services für automatische Stellenanzeigen-Analyse</p>
                        <div class="settings-grid" style="display: grid; grid-template-columns: 1fr; gap: 2rem; margin-bottom: 2rem;">
                            <!-- OpenAI Settings -->
                            <div class="settings-card" style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                <h3 style="margin-bottom: 1rem; color: #333;">
                                    <i class="fas fa-brain" style="color: #10a37f;"></i> OpenAI API
                                </h3>
                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <label for="openai-api-key" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">API Key</label>
                                    <div style="position: relative;">
                                        <input type="password" id="openai-api-key" placeholder="sk-..." 
                                               style="width: 100%; padding: 0.75rem 3rem 0.75rem 0.75rem; border: 2px solid #e0e0e0; border-radius: 8px; font-family: monospace;">
                                        <button type="button" data-action="toggle-api-key-visibility" 
                                                style="position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); background: none; border: none; color: #666; cursor: pointer;">
                                            <i class="fas fa-eye"></i>
                                    <div style="background: #fef3c7; padding: 0.75rem; border-radius: 6px; margin-top: 0.5rem; border-left: 4px solid #f59e0b;">
                                        <small style="color: #92400e;">
                                            <strong>🔒 Sicherheitshinweise:</strong><br>
                                            • API Key wird nur lokal in Ihrem Browser gespeichert<br>
                                            • Nie den Key in Code oder öffentlichen Bereichen verwenden<br>
                                            • Für Produktion: Backend-Server mit Umgebungsvariablen nutzen<br>
                                            • Key regelmäßig rotieren und Nutzung überwachen
                                        </small>
                                    <label for="openai-model" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Model</label>
                                    <select id="openai-model" style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 8px;">
                                        <option value="gpt-4o-mini">GPT-4o Mini (Empfohlen)</option>
                                        <option value="gpt-4o">GPT-4o</option>
                                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                <!-- Live Test Section -->
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">
                                        <i class="fas fa-vial"></i> Live-Test der KI-Integration
                                    </label>
                                    <textarea id="test-job-posting" placeholder="Fügen Sie hier eine Stellenanzeige für den Live-Test ein..." 
                                              style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 8px; min-height: 120px; font-size: 0.875rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;"></textarea>
                                    <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                                        <button data-action="test-ai-analysis" class="btn btn-secondary" 
                                                style="flex: 1; padding: 0.75rem; background: #6366f1; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                            <i class="fas fa-play"></i> Live-Test starten
                                        <button data-action="load-sample-job" class="btn btn-outline" 
                                                style="flex: 1; padding: 0.75rem; background: transparent; color: #6366f1; border: 2px solid #6366f1; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                            <i class="fas fa-clipboard"></i> Beispiel laden
                                <!-- Test Results -->
                                <div id="test-results" class="test-results" style="display: none; margin-top: 1rem; padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 4px solid #6366f1;">
                                    <h4 style="margin: 0 0 1rem 0; color: #374151;">
                                        <i class="fas fa-clipboard-check"></i> Testergebnisse
                                    </h4>
                                    <div id="test-results-content"></div>
                                <!-- Info Box -->
                                <div style="margin-top: 1.5rem; padding: 1rem; background: #f0fdf4; border-radius: 8px; border-left: 4px solid #22c55e;">
                                    <h4 style="margin: 0 0 0.5rem 0; color: #15803d;">
                                        <i class="fas fa-lightbulb"></i> Intelligente Stellenanzeigen-Analyse
                                    <p style="margin: 0 0 0.5rem 0; color: #15803d; font-size: 0.875rem;">
                                        Die KI analysiert automatisch jede Stellenanzeige weltweit und extrahiert Firma, Position, Anforderungen und Ansprechpartner.
                                    </p>
                                    <p style="margin: 0; color: #15803d; font-size: 0.875rem;">
                                        <strong>Hinweis:</strong> Direkte OpenAI API-Calls sind im Browser durch CORS-Einschränkungen limitiert. 
                                        Als Fallback wird eine intelligente lokale Analyse verwendet. Kosten: ~$0.01-0.05 pro echte OpenAI-Analyse.
                        <!-- Advanced Settings -->
                        <div class="advanced-settings" style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h3 style="margin-bottom: 1rem; color: #333;">
                                <i class="fas fa-cogs"></i> Erweiterte Einstellungen
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem;">
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Analyse-Sprache</label>
                                    <select id="analysis-language" style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 8px;">
                                        <option value="auto">Automatisch erkennen</option>
                                        <option value="de">Deutsch</option>
                                        <option value="en">English</option>
                                        <option value="fr">Français</option>
                                        <option value="it">Italiano</option>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Max. Anforderungen</label>
                                    <input type="number" id="max-requirements" value="12" min="5" max="20" 
                                           style="width: 100%; padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 8px;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Temperature</label>
                                    <input type="range" id="ai-temperature" min="0" max="1" step="0.1" value="0.1" 
                                           style="width: 100%;">
                                    <small style="color: #666;">Kreativität: Niedrig (präzise) - Hoch (kreativ)</small>
                        <!-- Activate Button -->
                        <div style="text-align: center; margin-top: 2rem;">
                            <button data-action="save-ai-settings" class="btn btn-primary" 
                                    style="padding: 1rem 3rem; background: #10a37f; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 1.1rem;">
                                <i class="fas fa-save"></i> Einstellungen speichern & aktivieren
                <!-- Applications Section -->
                <section id="applications" class="admin-section">
                    <div class="applications-admin-container">
                        <div class="applications-admin-header">
                            <h2>Bewerbungsverwaltung</h2>
                                            <p>Verwalte deine Bewerbungen und verfolge deinen Erfolg</p>
                                        <!-- Dashboard Widget -->
                                        <div class="applications-dashboard" style="margin-bottom: 3rem;">
                                            <div class="dashboard-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                                                <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 120px; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                                    <div class="stat-icon" style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.9;">📊</div>
                                                    <div class="stat-value" style="font-size: 2.2rem; font-weight: 800; margin-bottom: 0.5rem; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2);" id="total-applications-count">0</div>
                                                    <div class="stat-label" style="opacity: 1; color: white; font-size: 0.9rem; font-weight: 500; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">Gesendete<br>Bewerbungen</div>
                                                <div class="stat-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 120px; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                                    <div class="stat-icon" style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.9;">✅</div>
                                                    <div class="stat-value" style="font-size: 2.2rem; font-weight: 800; margin-bottom: 0.5rem; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2);" id="positive-responses-count">0</div>
                                                    <div class="stat-label" style="opacity: 1; color: white; font-size: 0.9rem; font-weight: 500; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">In<br>Bearbeitung</div>
                                                <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 120px; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                                    <div class="stat-icon" style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.9;">💼</div>
                                                    <div class="stat-value" style="font-size: 2.2rem; font-weight: 800; margin-bottom: 0.5rem; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2);" id="interviews-count">0</div>
                                                    <div class="stat-label" style="opacity: 1; color: white; font-size: 0.9rem; font-weight: 500; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">Vorstellungs-<br>gespräch</div>
                                                <div class="stat-card" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 120px; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                                    <div class="stat-icon" style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.9;">❌</div>
                                                    <div class="stat-value" style="font-size: 2.2rem; font-weight: 800; margin-bottom: 0.5rem; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2);" id="rejections-count">0</div>
                                                    <div class="stat-label" style="opacity: 1; color: white; font-size: 0.9rem; font-weight: 500; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">Absage</div>
                                                <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 120px; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                                    <div class="stat-icon" style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.9;">📈</div>
                                                    <div class="stat-value" style="font-size: 2.2rem; font-weight: 800; margin-bottom: 0.5rem; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2);" id="success-rate-count">0%</div>
                                                    <div class="stat-label" style="opacity: 1; color: white; font-size: 0.9rem; font-weight: 500; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">Erfolgsrate</div>
                                                <div class="stat-card" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); color: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); min-height: 120px; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                                    <div class="stat-icon" style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.9;">⏳</div>
                                                    <div class="stat-value" style="font-size: 2.2rem; font-weight: 800; margin-bottom: 0.5rem; color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2);" id="pending-applications-count">0</div>
                                                    <div class="stat-label" style="opacity: 1; color: white; font-size: 0.9rem; font-weight: 500; line-height: 1.2; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">Gesendet</div>
                                        <!-- Smart Workflow Button -->
                                        <div class="smart-workflow-section" style="margin-bottom: 3rem; max-width: 100%; overflow: hidden;">
                                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); text-align: center; max-width: 100%; box-sizing: border-box;">
                                                 <h3 style="color: white; margin-bottom: 1rem; font-size: 1.8rem;">
                                                     🚀 Smart Bewerbungsmanager
                                                 </h3>
                                                 <p style="color: rgba(255,255,255,0.9); margin-bottom: 1rem; font-size: 1.1rem;">
                                                     Erstelle professionelle Bewerbungen mit KI-Unterstützung
                                                 </p>
                                                 
                                                 <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem; background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; max-width: 100%;">
                                                     <div style="text-align: center; flex: 1; min-width: 80px;">
                                                         <div style="color: white; font-weight: 700; font-size: 1.1rem;">6</div>
                                                         <div style="color: rgba(255,255,255,0.8); font-size: 0.75rem;">Schritte</div>
                                                     </div>
                                                         <div style="color: white; font-weight: 700; font-size: 1.1rem;">60+</div>
                                                         <div style="color: rgba(255,255,255,0.8); font-size: 0.75rem;">Features</div>
                                                         <div style="color: white; font-weight: 700; font-size: 1.1rem;">98%</div>
                                                         <div style="color: rgba(255,255,255,0.8); font-size: 0.75rem;">ATS-Ready</div>
                                                 </div>
                                     <button id="smartWorkflowButton" onclick="navigateToBewerbungsSection()" style="padding: 1rem 2rem; background: white; color: #667eea; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 1rem; display: inline-flex; align-items: center; gap: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; margin-bottom: 1rem; width: auto; max-width: 100%;">
                                         <i class="fas fa-rocket" style="font-size: 1.2rem;"></i>
                                         <span>Bewerbungsdashboard öffnen</span>
                                     </button>
                                     
                                     <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap; max-width: 100%;">
                                         <button onclick="navigateToBewerbungsSection()" style="padding: 0.5rem 1rem; background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.3); border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 0.5rem; transition: all 0.3s ease; flex: 1; min-width: 120px; max-width: 150px;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                             <i class="fas fa-tachometer-alt"></i>
                                             <span>Dashboard</span>
                                         </button>
                                         <button onclick="window.open('bewerbungsmanager.html', '_blank')" style="padding: 0.5rem 1rem; background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.3); border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 0.5rem; transition: all 0.3s ease; flex: 1; min-width: 120px; max-width: 150px;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                             <i class="fas fa-external-link-alt"></i>
                                             <span>Workflow</span>
                                     </div>
                                        <!-- Aktuelle Bewerbungen Liste -->
                                         <div class="current-applications" style="margin-bottom: 3rem;">
                                            <div style="margin-bottom: 1.5rem;">
                                                 <h3 style="color: #333; margin: 0;">📋 Aktuelle Bewerbungen</h3>
                                            <!-- Filter Tabs -->
                                            <div class="filter-tabs" style="display: flex; gap: 1rem; margin-bottom: 1.5rem; border-bottom: 2px solid #e5e7eb;">
                                                <button class="filter-tab active" data-filter="all" data-action="filter-applications" data-param="all" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid #6366f1;">Alle</button>
                                                <button class="filter-tab" data-filter="in-progress" data-action="filter-applications" data-param="in-progress" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">In Bearbeitung</button>
                                                <button class="filter-tab" data-filter="sent" data-action="filter-applications" data-param="sent" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Gesendet</button>
                                                <button class="filter-tab" data-filter="interview" data-action="filter-applications" data-param="interview" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Vorstellungsgespräch</button>
                                                <button class="filter-tab" data-filter="rejected" data-action="filter-applications" data-param="rejected" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Absage</button>
                                            <!-- Applications List -->
                                            <div id="applicationsList" style="display: flex; flex-direction: column; gap: 1rem;">
                                                <!-- Applications will be dynamically loaded here -->
                                        <!-- Medienverwaltung Bewerbungsunterlagen - Smart API Integration -->
                        <div class="cv-management" style="margin-bottom: 3rem;">
                                                📁 Medienverwaltung Bewerbungsunterlagen - Smart API System
                            <!-- Smart API Status für Bewerbungsunterlagen -->
                            <div class="smart-api-status" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <i class="fas fa-file-alt" style="font-size: 1.5rem;"></i>
                                        <h4 style="margin: 0; font-size: 1.1rem;">Zentrale Medienverwaltung aktiv</h4>
                                        <p style="margin: 0.25rem 0 0 0; opacity: 0.9; font-size: 0.9rem;">AWS S3 • DynamoDB • Smart API • Analytics</p>
                                                <!-- Tabs für verschiedene Dokumenttypen -->
                                                <div class="document-tabs" style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid #e5e7eb; flex-wrap: wrap;">
                                                    <button class="doc-tab active" data-type="all" data-action="filter-documents" data-param="all" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid #6366f1;">Alle</button>
                                                    <button class="doc-tab" data-type="cv" data-action="filter-documents" data-param="cv" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Lebensläufe</button>
                                                    <button class="doc-tab" data-type="portrait" data-action="filter-documents" data-param="portrait" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Portraits</button>
                                                    <button class="doc-tab" data-type="certificate" data-action="filter-documents" data-param="certificate" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Zeugnisse</button>
                                                    <button class="doc-tab" data-type="certification" data-action="filter-documents" data-param="certification" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Zertifikate</button>
                                                    <button class="doc-tab" data-type="cover-letter" data-action="filter-documents" data-param="cover-letter" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Anschreiben</button>
                                                    <button class="doc-tab" data-type="complete" data-action="filter-documents" data-param="complete" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Vollständige Bewerbungen</button>
                                                </div>
                                                <!-- Dokumentenliste - Smart API Integration -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                                                        <h4 style="color: #555; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                                            <i class="fas fa-folder-open"></i>
                                                            Dokumente aus zentraler Medienverwaltung
                                                            <span id="documents-count" style="background: #6366f1; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem;">0</span>
                                                        </h4>
                                                        
                                                        <!-- Smart API Loading Indicator -->
                                                        <div id="smart-api-loading" style="text-align: center; padding: 2rem; color: #666; display: none;">
                                                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                                                            <p>Lade Dokumente aus zentraler Medienverwaltung...</p>
                                                        </div>
                                                        <!-- Smart API Documents List -->
                                                        <div id="smart-documentsList" style="display: flex; flex-direction: column; gap: 1rem;">
                                                            <!-- Smart API Documents will be loaded here -->
                                                        <!-- Fallback Documents List -->
                                                        <div id="documentsList" style="display: flex; flex-direction: column; gap: 1rem;">
                                                            <!-- Fallback Documents will be loaded here -->
                                                    </div>
                                                <div>
                                                        <h4 style="color: #555; margin-bottom: 1rem;">Aktionen</h4>
                                                        <!-- 🚀 SMART UPLOAD SYSTEM -->
                                                        <div class="smart-upload-section" style="background: #f8fafc; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                                                            <h5 style="color: #333; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                                                                <i class="fas fa-upload"></i>
                                                                Smart Upload System
                                                            </h5>
                                                            
                                                            <div class="upload-methods" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 0.5rem; margin-bottom: 1rem;">
                                                                <div class="upload-method" style="padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 6px; text-align: center; cursor: pointer; transition: all 0.3s ease;" onclick="triggerBewerbungsunterlagenUploadMethod('standard')">
                                                                    <i class="fas fa-upload" style="font-size: 1.2rem; color: #6366f1; margin-bottom: 0.25rem;"></i>
                                                                    <p style="margin: 0; font-size: 0.75rem; color: #333;">Standard</p>
                                                                </div>
                                                                
                                                                <div class="upload-method" style="padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 6px; text-align: center; cursor: pointer; transition: all 0.3s ease;" onclick="triggerBewerbungsunterlagenUploadMethod('bulk')">
                                                                    <i class="fas fa-layer-group" style="font-size: 1.2rem; color: #10b981; margin-bottom: 0.25rem;"></i>
                                                                    <p style="margin: 0; font-size: 0.75rem; color: #333;">Bulk</p>
                                                                <div class="upload-method" style="padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 6px; text-align: center; cursor: pointer; transition: all 0.3s ease;" onclick="triggerBewerbungsunterlagenUploadMethod('chunked')">
                                                                    <i class="fas fa-puzzle-piece" style="font-size: 1.2rem; color: #f59e0b; margin-bottom: 0.25rem;"></i>
                                                                    <p style="margin: 0; font-size: 0.75rem; color: #333;">Chunked</p>
                                                                <div class="upload-method" style="padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 6px; text-align: center; cursor: pointer; transition: all 0.3s ease;" onclick="triggerBewerbungsunterlagenUploadMethod('direct')">
                                                                    <i class="fas fa-cloud-upload-alt" style="font-size: 1.2rem; color: #8b5cf6; margin-bottom: 0.25rem;"></i>
                                                                    <p style="margin: 0; font-size: 0.75rem; color: #333;">Direct</p>
                                                            </div>
                                                        <!-- 🚀 CLOUD STORAGE STATUS -->
                                                        <div class="cloud-storage-status" style="background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                                                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                                                <i class="fas fa-cloud" style="font-size: 1.2rem; color: #0ea5e9;"></i>
                                                                <div style="flex: 1;">
                                                                    <h5 style="margin: 0; color: #0c4a6e; font-size: 0.9rem;">Cloud-Speicher</h5>
                                                                    <div style="display: flex; gap: 1rem; margin-top: 0.25rem;">
                                                                        <div style="display: flex; align-items: center; gap: 0.25rem;">
                                                                            <i class="fas fa-folder" style="color: #6b7280; font-size: 0.8rem;"></i>
                                                                            <span style="color: #374151; font-size: 0.8rem;">0 lokal</span>
                                                                        </div>
                                                                            <i class="fas fa-cloud" style="color: #0ea5e9; font-size: 0.8rem;"></i>
                                                                            <span style="color: #374151; font-size: 0.8rem;">0 online</span>
                                                                    </div>
                                                                <div style="display: flex; gap: 0.25rem;">
                                                                    <button onclick="syncBewerbungsunterlagenDocuments()" 
                                                                            style="padding: 0.25rem 0.5rem; background: #0ea5e9; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem;">
                                                                        <i class="fas fa-sync"></i>
                                                                    </button>
                                                                    <button onclick="uploadAllBewerbungsunterlagenDocuments()" 
                                                                            style="padding: 0.25rem 0.5rem; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem;">
                                                                        <i class="fas fa-cloud-upload-alt"></i>
                                                        <!-- Upload Area -->
                                                        <div style="border: 2px dashed #6366f1; border-radius: 8px; padding: 2rem; text-align: center; margin-bottom: 1.5rem; background: #f8f9ff;">
                                                            <input type="file" id="doc-upload" accept=".pdf,.doc,.docx,.html,.jpg,.jpeg,.png" multiple data-category="documents" data-subcategory="general" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'documents', subcategory: 'general'})" style="display: none;">
                                                            <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #6366f1; margin-bottom: 1rem;"></i>
                                                            <p style="font-weight: 600; margin-bottom: 0.5rem;">Dokumente hochladen</p>
                                                            <button data-action="upload-document" class="btn btn-primary" style="padding: 0.75rem 2rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;" onclick="triggerBewerbungsunterlagenUpload()">
                                                                <i class="fas fa-cloud-upload-alt"></i> Dateien auswählen
                                                            </button>
                                                            <p style="color: #666; margin: 1rem 0 0 0; font-size: 0.9rem;">PDF, Word, HTML, JPG, PNG</p>
                                                        <!-- PDF Editor Button -->
                                                        <button data-action="open-p-d-f-editor" class="btn btn-primary" style="width: 100%; padding: 1rem; background: #8b5cf6; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                                            <i class="fas fa-file-pdf"></i> PDF Editor öffnen
                                                    </button>
                                                <!-- PDF Editor Modal -->
                                                <div id="pdfEditorModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000;">
                                                    <div style="background: white; width: 95%; height: 95%; margin: 2.5% auto; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column;">
                                                        <div style="background: #1e293b; color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center;">
                                                            <h3 style="margin: 0;">PDF Editor</h3>
                                                            <button data-action="close-p-d-f-editor" class="btn btn-primary" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>
                                                        <div style="display: flex; flex: 1;">
                                                            <!-- Sidebar -->
                                                            <div style="width: 250px; background: #f8fafc; padding: 1rem; overflow-y: auto;">
                                                                <h4 style="margin-bottom: 1rem;">Seiten</h4>
                                                                <div id="pdfPagesList" style="display: flex; flex-direction: column; gap: 0.5rem;">
                                                                    <!-- PDF pages will be listed here -->
                                                                <div style="margin-top: 2rem;">
                                                                    <button data-action="add-p-d-f-page" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #6366f1; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 0.5rem;">
                                                                        <i class="fas fa-plus"></i> Seite hinzufügen
                                                                    <button data-action="upload-additional-p-d-f" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                                                        <i class="fas fa-upload"></i> PDF hinzufügen
                                                            <!-- Main Editor Area -->
                                                            <div style="flex: 1; padding: 2rem; overflow-y: auto;">
                                                                <div id="pdfPreview" style="min-height: 500px; border: 1px solid #e5e7eb; border-radius: 8px; background: #f8fafc; display: flex; align-items: center; justify-content: center;">
                                                                    <p style="color: #666;">Wähle ein PDF zum Bearbeiten</p>
                                                            <!-- Tools Panel -->
                                                            <div style="width: 200px; background: #f8fafc; padding: 1rem;">
                                                                <h4 style="margin-bottom: 1rem;">Werkzeuge</h4>
                                                                <button data-action="delete-page" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 0.5rem;">
                                                                    <i class="fas fa-trash"></i> Seite löschen
                                                                <button data-action="rotate-page" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #6366f1; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 0.5rem;">
                                                                    <i class="fas fa-redo"></i> Seite drehen
                                                                </button>
                                                                <button data-action="move-page" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #8b5cf6; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 0.5rem;">
                                                                    <i class="fas fa-arrows-alt"></i> Verschieben
                                                                <hr style="margin: 1rem 0;">
                                                                <button data-action="save-p-d-f" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">
                                                                    <i class="fas fa-save"></i> PDF speichern
                                </section>
                                <!-- Modal für neue Bewerbung -->
                                <div id="newApplicationModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
                                    <div style="background: white; padding: 2rem; border-radius: 12px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                            <h3 style="margin: 0;">Neue Bewerbung hinzufügen</h3>
                                            <button data-action="close-new-application-modal" class="btn btn-primary" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
                                        <form id="newApplicationForm">
                                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Datum:</label>
                                                    <input type="date" id="applicationDate" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Status:</label>
                                                    <select id="applicationStatus" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                        <option value="in-progress">In Bearbeitung</option>
                                                        <option value="sent" selected>Gesendet</option>
                                                        <option value="interview">Vorstellungsgespräch</option>
                                                        <option value="rejected">Absage</option>
                                                    </select>
                                            <div style="margin-bottom: 1rem;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Unternehmen:</label>
                                                <input type="text" id="applicationCompany" required placeholder="z.B. SAP SE" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Position:</label>
                                                <input type="text" id="applicationPosition" required placeholder="z.B. Senior Consultant" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kontaktperson:</label>
                                                <input type="text" id="applicationContact" placeholder="z.B. Frau Müller, HR" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Notizen:</label>
                                                <textarea id="applicationNotes" placeholder="Zusätzliche Informationen..." style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; height: 100px; resize: vertical;"></textarea>
                                            <div style="display: flex; gap: 1rem;">
                                                <button type="submit" style="flex: 1; padding: 1rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                                    Speichern
                                                <button type="button" data-action="close-new-application-modal" class="btn btn-primary" style="flex: 1; padding: 1rem; background: #e5e7eb; color: #374151; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                                    Abbrechen
                                                </button>
                                        </form>
                                <!-- Modal für Bewerbung bearbeiten -->
                                <div id="editApplicationModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
                                    <div style="background: white; padding: 2rem; border-radius: 12px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
                                            <h3 style="margin: 0;">Bewerbung bearbeiten</h3>
                                            <button data-action="close-edit-application-modal" class="btn btn-primary" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
                                        <!-- Workflow Tabs -->
                                        <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid #e5e7eb;">
                                            <button class="workflow-tab active" data-tab="details" data-action="switch-workflow-tab" data-param="details" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid #6366f1;">Details</button>
                                            <button class="workflow-tab" data-tab="documents" data-action="switch-workflow-tab" data-param="documents" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Dokumente</button>
                                            <button class="workflow-tab" data-tab="communication" data-action="switch-workflow-tab" data-param="communication" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">Kommunikation</button>
                                            <button class="workflow-tab" data-tab="ai-assistant" data-action="switch-workflow-tab" data-param="ai-assistant" style="padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent;">KI-Assistent</button>
                                        <!-- Tab Contents -->
                                        <div id="detailsTab" class="workflow-tab-content" style="display: block;">
                                            <!-- Details form similar to new application -->
                                        <div id="documentsTab" class="workflow-tab-content" style="display: none;">
                                            <!-- Document management -->
                                        <div id="communicationTab" class="workflow-tab-content" style="display: none;">
                                            <!-- Communication timeline -->
                                        <div id="ai-assistantTab" class="workflow-tab-content" style="display: none;">
                                            <!-- AI assistant for this specific application -->
                <!-- Translations Section -->
                <section id="translations" class="admin-section">
                    <div class="translations-container">
                        <div class="translations-header">
                            <h2>Translation Management</h2>
                            <p>Manage translations for all website content</p>
                        <div class="translations-content">
                            <div class="language-tabs">
                                <button class="tab-btn active" data-lang="de">🇩🇪 German</button>
                                <button class="tab-btn" data-lang="en">🇬🇧 English</button>
                                <button class="tab-btn" data-lang="fr">🇫🇷 French</button>
                                <button class="tab-btn" data-lang="es">🇪🇸 Spanish</button>
                                <button class="tab-btn" data-lang="it">🇮🇹 Italian</button>
                            <div class="translation-editor">
                                <div class="editor-header">
                                    <h3>Content Editor</h3>
                                    <div class="editor-actions">
                                        <button class="btn btn-primary" data-action="save-translations">
                                            <i class="fas fa-save"></i> Save Changes
                                        <button class="btn btn-outline" data-action="preview-translations">
                                            <i class="fas fa-eye"></i> Preview
                                <div class="translation-categories">
                                    <div class="category-section">
                                        <h4>Navigation</h4>
                                        <div class="translation-item">
                                            <label>Home</label>
                                            <input type="text" id="nav.home" value="Home" data-original="Home">
                                            <label>Services</label>
                                            <input type="text" id="nav.services" value="Services" data-original="Services">
                                            <label>About</label>
                                            <input type="text" id="nav.about" value="About" data-original="Über mich">
                                            <label>Contact</label>
                                            <input type="text" id="nav.contact" value="Contact" data-original="Kontakt">
                                        <h4>Hero Section</h4>
                                            <label>Title</label>
                                            <input type="text" id="hero.title" value="HR Consultant for AI & Transformation" data-original="HR Berater für AI & Transformation">
                                            <label>Subtitle</label>
                                            <textarea id="hero.subtitle" data-original="Innovative Lösungen für moderne Unternehmen. Digitalisierung, Geschäftsprozesse und Personalwesen.">Innovative solutions for modern companies. Digitalization, business processes and human resources.</textarea>
                                        <h4>Services</h4>
                                            <label>Services Title</label>
                                            <input type="text" id="services.title" value="My Services" data-original="Meine Services">
                                            <label>Services Subtitle</label>
                                            <textarea id="services.subtitle" data-original="Professionelle Beratung in den Bereichen HR, AI und Geschäftsprozesse">Professional consulting in HR, AI and business processes</textarea>
                                        <h4>Personality Development</h4>
                                            <input type="text" id="personality.title" value="Personality Development" data-original="Persönlichkeitsentwicklung">
                                            <textarea id="personality.subtitle" data-original="Entwickle dich kontinuierlich weiter mit bewährten Methoden">Continuously develop yourself with proven methods</textarea>
                <!-- AI Twin Section -->
                <section id="ai-twin" class="admin-section">
                    <div class="ai-twin-container">
                        <div class="ai-twin-header">
                            <h2>AI Digital Twin & Profilverwaltung</h2>
                            <p>Verwalte dein Profilbild, Video und erstelle deinen digitalen Zwilling</p>
                        <!-- Profilbild & Video Verwaltung -->
                        <div class="profile-management" style="margin-bottom: 3rem;">
                                👤 Profilbild & Hero-Bereich
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                                <!-- Profilbild-Verwaltung -->
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                    <h4 style="color: #555; margin-bottom: 1rem;">📸 Profilbild-Verwaltung</h4>
                                    <p style="color: #666; margin-bottom: 1rem;">Profilbilder werden in der Hero & Über mich-Sektion verwaltet.</p>
                                    <button onclick="showSection('hero-about')" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                        🏠 Zur Profilbild-Galerie
                                <!-- Hero-Bereich Einstellungen wurden in die Einstellungen-Sektion verschoben -->
                                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border: 2px dashed #dee2e6; text-align: center;">
                                    <h4 style="color: #6c757d; margin-bottom: 1rem;">ℹ️ Hero-Bereich Einstellungen</h4>
                                    <p style="color: #6c757d; margin-bottom: 1rem;">Die Hero-Bereich-Funktionen wurden in die Einstellungen-Sektion verschoben.</p>
                                    <button onclick="showSection('settings')" class="btn btn-primary" style="padding: 0.75rem 1.5rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                        ⚙️ Zu den Einstellungen
                                <!-- Profilvideo -->
                                    <h4 style="color: #555; margin-bottom: 1rem;">🎥 Profilvideo</h4>
                                    <div style="text-align: center; margin-bottom: 1rem;">
                                        <video id="profileVideo" controls style="width: 100%; max-width: 200px; border-radius: 8px;">
                                            <source src="" type="video/mp4">
                                            Kein Video verfügbar
                                        </video>
                                    <input type="file" id="profileVideoInput" accept="video/*" data-category="videos" data-subcategory="profile" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'videos', subcategory: 'profile'})" style="width: 100%; margin-bottom: 1rem;">
                                    <button data-action="update-profile-video" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                        🎥 Video aktualisieren
                        <!-- Ernährungsplan-Verwaltung -->
                        <div class="nutrition-management" style="margin-bottom: 3rem;">
                                🍽️ Ernährungsplan-Verwaltung
                                <!-- OpenAI API Verweis -->
                                <div style="background: #f0f9ff; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #0ea5e9;">
                                    <h4 style="color: #0c4a6e; margin-bottom: 0.5rem;">🤖 OpenAI API</h4>
                                    <p style="margin: 0; color: #0c4a6e; font-size: 0.9rem;">
                                        → Siehe <strong>KI-Einstellungen</strong> in der Sidebar
                                <!-- Ernährungsplan-Statistiken -->
                                    <h4 style="color: #555; margin-bottom: 1rem;">📊 Statistiken</h4>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                        <div style="text-align: center; padding: 1rem; background: #f0f4ff; border-radius: 8px;">
                                            <div style="font-size: 2rem; font-weight: 700; color: #6366f1;" id="plans-generated">0</div>
                                            <div style="font-size: 0.9rem; color: #64748b;">Pläne erstellt</div>
                                        <div style="text-align: center; padding: 1rem; background: #f0fdf4; border-radius: 8px;">
                                            <div style="font-size: 2rem; font-weight: 700; color: #10b981;" id="ai-requests">0</div>
                                            <div style="font-size: 0.9rem; color: #64748b;">AI Requests</div>
                                        <div style="text-align: center; padding: 1rem; background: #fef3c7; border-radius: 8px;">
                                            <div style="font-size: 2rem; font-weight: 700; color: #f59e0b;" id="exports-today">0</div>
                                            <div style="font-size: 0.9rem; color: #64748b;">Exports heute</div>
                                        <div style="text-align: center; padding: 1rem; background: #fce7f3; border-radius: 8px;">
                                            <div style="font-size: 2rem; font-weight: 700; color: #ec4899;" id="active-users">0</div>
                                            <div style="font-size: 0.9rem; color: #64748b;">Aktive Nutzer</div>
                            <!-- Rezept-Datenbank -->
                            <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                <h4 style="color: #555; margin-bottom: 1rem;">📚 Rezept-Datenbank</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                    <input type="text" id="recipe-name" placeholder="Rezeptname" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px;">
                                    <select id="recipe-category" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px;">
                                        <option value="Frühstück">Frühstück</option>
                                        <option value="Mittagessen">Mittagessen</option>
                                        <option value="Abendessen">Abendessen</option>
                                        <option value="Snack">Snack</option>
                                    <textarea id="recipe-ingredients" placeholder="Zutaten (eine pro Zeile)" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px; min-height: 100px;"></textarea>
                                    <textarea id="recipe-instructions" placeholder="Zubereitung" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px; min-height: 100px;"></textarea>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1rem;">
                                    <input type="number" id="recipe-calories" placeholder="Kalorien" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px;">
                                    <input type="number" id="recipe-protein" placeholder="Protein (g)" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px;">
                                    <input type="number" id="recipe-carbs" placeholder="Kohlenhydrate (g)" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px;">
                                    <input type="number" id="recipe-fats" placeholder="Fette (g)" style="padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px;">
                                <button data-action="add-recipe" class="btn btn-primary" style="width: 100%; padding: 0.75rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                    ➕ Rezept hinzufügen
                        <div class="ai-twin-steps">
                            <div class="step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Foto & Video hochladen</h4>
                                    <p>Lade ein Foto und ein kurzes Video hoch</p>
                            <div class="step" data-step="2">
                                <div class="step-number">2</div>
                                    <h4>AI lernt von dir</h4>
                                    <p>Der AI-Agent analysiert Mimik, Gestik & Stimme</p>
                            <div class="step" data-step="3">
                                <div class="step-number">3</div>
                                    <h4>Digital Twin erstellen</h4>
                                    <p>Dein digitaler Zwilling wird generiert</p>
                            <div class="step" data-step="4">
                                <div class="step-number">4</div>
                                    <h4>Text eingeben & vortragen lassen</h4>
                                    <p>Dein Twin trägt Bewerbungen vor</p>
                        <div class="ai-twin-content" id="aiTwinMainContent">
                            <!-- Upload Area wird dynamisch vom JavaScript erstellt -->
                            <div class="ai-processing" id="aiProcessing" style="display: none;">
                                <div class="processing-content">
                                    <div class="processing-spinner"></div>
                                    <h4>AI lernt von dir...</h4>
                                    <p>Analysiere Mimik, Gestik und Stimme</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="aiProgress"></div>
                                    <span class="progress-text" id="progressText">0%</span>
                            <div class="twin-preview" id="twinPreview" style="display: none;">
                                <h4>Dein Digital Twin</h4>
                                <div class="twin-video-container">
                                    <video id="twinVideo" controls>
                                        <source src="" type="video/mp4">
                                    </video>
                                <div class="twin-controls">
                                    <button class="btn btn-primary" data-action="create-new-presentation">
                                        <i class="fas fa-plus"></i>
                                        Neue Präsentation
                                    <button class="btn btn-secondary" data-action="download-twin">
                                        <i class="fas fa-download"></i>
                                        Twin herunterladen
                <!-- Media Management Section -->
                <section id="media" class="admin-section">
                        <h2>📸 Medienverwaltung</h2>
                        <p>Verwalte alle Bilder, Dokumente und Medien zentral</p>
                    <!-- Upload Status -->
                    <div class="upload-status" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <i class="fas fa-upload" style="font-size: 1.5rem;"></i>
                            <div>
                                <h4 style="margin: 0; font-size: 1.1rem;">Upload-System aktiv</h4>
                                <p style="margin: 0.25rem 0 0 0; opacity: 0.9; font-size: 0.9rem;">Drag & Drop • Bulk Upload • AWS S3 • LocalStorage</p>
                    <div class="media-categories">
                        <div class="category-tabs">
                            <button class="category-tab active" data-category="profile">
                                <i class="fas fa-user"></i>
                                Profilbilder
                                <span class="tab-count" id="profile-count">0</span>
                            <button class="category-tab" data-category="application">
                                <i class="fas fa-file-alt"></i>
                                Bewerbungsunterlagen
                                <span class="tab-count" id="application-count">0</span>
                            <button class="category-tab" data-category="portfolio">
                                Portfolio
                                <span class="tab-count" id="portfolio-count">0</span>
                            <button class="category-tab" data-category="documents">
                                <i class="fas fa-file-pdf"></i>
                                Dokumente
                                <span class="tab-count" id="documents-count">0</span>
                            <button class="category-tab" data-category="gallery">
                                <i class="fas fa-images"></i>
                                Galerie
                                <span class="tab-count" id="gallery-count">0</span>
                            <button class="category-tab" data-category="videos">
                                <i class="fas fa-video"></i>
                                Videos
                                <span class="tab-count" id="videos-count">0</span>
                            <button class="category-tab" data-category="wohnmobil">
                                <i class="fas fa-caravan"></i>
                                Wohnmobil
                                <span class="tab-count" id="wohnmobil-count">0</span>
                            <button class="category-tab" data-category="photobox">
                                <i class="fas fa-camera"></i>
                                Photobox
                                <span class="tab-count" id="photobox-count">0</span>
                            <button class="category-tab" data-category="sup">
                                <i class="fas fa-water"></i>
                                SUP
                                <span class="tab-count" id="sup-count">0</span>
                            <button class="category-tab" data-category="analytics">
                                Analytics
                                <span class="tab-count" id="analytics-count">📊</span>
                        <!-- Smart Search & Filter -->
                        <div class="media-search-bar" style="margin: 1rem 0; display: flex; gap: 1rem; align-items: center;">
                            <div style="flex: 1; position: relative;">
                                <input type="text" id="media-search" placeholder="🔍 Medien durchsuchen..." 
                                       style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                                <button id="ai-search-toggle" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #6366f1; cursor: pointer;" title="KI-Suche aktivieren">
                                    <i class="fas fa-brain"></i>
                            <select id="media-filter-type" style="padding: 0.75rem; border: 1px solid #ddd; border-radius: 8px;">
                                <option value="">Alle Typen</option>
                                <option value="image">Bilder</option>
                                <option value="video">Videos</option>
                                <option value="document">Dokumente</option>
                                <option value="audio">Audio</option>
                            <button id="bulk-actions-btn" style="padding: 0.75rem 1rem; background: #6366f1; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                <i class="fas fa-tasks"></i> Bulk Actions
                    <!-- Upload Section -->
                    <div class="upload-section" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                        <h3 style="color: #333; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-cloud-upload-alt"></i>
                            Dateien hochladen
                        <!-- Upload Methods -->
                        <div class="upload-methods" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                            <button class="upload-method-btn" onclick="triggerFileUpload()" style="padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; background: white; cursor: pointer; transition: all 0.3s ease; text-align: center; width: 100%;">
                                <i class="fas fa-upload" style="font-size: 1.5rem; color: #6366f1; margin-bottom: 0.5rem;"></i>
                                <div style="font-weight: 500; color: #333;">Dateien auswählen</div>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 0.25rem;">Klicken zum Hochladen</div>
                            <button class="upload-method-btn" onclick="triggerBulkUpload()" style="padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; background: white; cursor: pointer; transition: all 0.3s ease; text-align: center; width: 100%;">
                                <i class="fas fa-layer-group" style="font-size: 1.5rem; color: #10b981; margin-bottom: 0.5rem;"></i>
                                <div style="font-weight: 500; color: #333;">Bulk Upload</div>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 0.25rem;">Mehrere Dateien</div>
                            <button class="upload-method-btn" onclick="triggerCameraUpload()" style="padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; background: white; cursor: pointer; transition: all 0.3s ease; text-align: center; width: 100%;">
                                <i class="fas fa-camera" style="font-size: 1.5rem; color: #f59e0b; margin-bottom: 0.5rem;"></i>
                                <div style="font-weight: 500; color: #333;">Kamera</div>
                                <div style="font-size: 0.8rem; color: #666; margin-top: 0.25rem;">Foto aufnehmen</div>
                        <!-- Service-specific Upload Zones -->
                        <div class="service-upload-zones" id="serviceUploadZones" style="display: none;">
                            <!-- Wohnmobil Upload Zone -->
                            <div class="upload-zone" data-service="wohnmobil" style="display: none;">
                                <div class="upload-content">
                                    <i class="fas fa-caravan"></i>
                                    <p>Wohnmobil Bilder hier hineinziehen oder klicken zum Auswählen</p>
                                    <input type="file" id="wohnmobilInput" multiple accept="image/*" style="display: none;">
                            <!-- Photobox Upload Zone -->
                            <div class="upload-zone" data-service="photobox" style="display: none;">
                                    <i class="fas fa-camera"></i>
                                    <p>Photobox Bilder hier hineinziehen oder klicken zum Auswählen</p>
                                    <input type="file" id="photoboxInput" multiple accept="image/*" style="display: none;">
                            <!-- SUP Upload Zone -->
                            <div class="upload-zone" data-service="sup" style="display: none;">
                                    <i class="fas fa-water"></i>
                                    <p>SUP Bilder hier hineinziehen oder klicken zum Auswählen</p>
                                    <input type="file" id="supInput" multiple accept="image/*" style="display: none;">
                        <!-- General Drag & Drop Zone (for other categories) -->
                        <div class="drag-drop-zone" id="dragDropZone" style="border: 2px dashed #6366f1; border-radius: 8px; padding: 2rem; text-align: center; margin-bottom: 1.5rem; background: #f8f9ff; transition: all 0.3s ease; cursor: pointer;" onclick="triggerFileUpload()" ondrop="handleFileDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #9ca3af; margin-bottom: 1rem;"></i>
                            <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Dateien hier ablegen oder klicken zum Auswählen</h4>
                            <p style="margin: 0; color: #6b7280;">Unterstützt: PDF, DOC, DOCX, JPG, PNG, GIF, MP4 (max. 100MB)</p>
                            <input type="file" id="media-file-input" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.mp4,.mov" style="display: none;" onchange="handleFileUpload(this.files)">
                        <!-- Media Gallery -->
                        <div class="media-gallery" id="mediaGallery">
                            <!-- Dynamisch generierte Bilder -->
                        <!-- Upload Progress -->
                        <div id="upload-progress" style="display: none; margin-top: 1rem;">
                            <div style="background: #f3f4f6; border-radius: 8px; padding: 1rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span style="font-weight: 500; color: #333;">Upload Fortschritt</span>
                                    <span id="upload-percentage" style="color: #6366f1; font-weight: 500;">0%</span>
                                <div style="background: #e5e7eb; border-radius: 4px; height: 8px; overflow: hidden;">
                                    <div id="upload-progress-bar" style="background: linear-gradient(90deg, #6366f1, #8b5cf6); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                                <div id="upload-status" style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Bereit zum Upload...</div>
                            <button class="btn btn-primary" data-action="open-media-upload" onclick="triggerSmartMediaUpload()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                Dateien hochladen
                            <button class="btn btn-outline" data-action="create-folder" onclick="triggerSmartFolderCreation()">
                                <i class="fas fa-folder-plus"></i>
                                Ordner erstellen
                            <button class="btn btn-outline" onclick="smartMediaAPI.generateThumbnails()">
                                Thumbnails generieren
                            <button class="btn btn-outline" onclick="smartMediaAPI.compressAllMedia()">
                                <i class="fas fa-compress"></i>
                                Komprimieren
                            <div class="view-toggle">
                                <button class="view-btn active" data-view="grid">
                                    <i class="fas fa-th"></i>
                                <button class="view-btn" data-view="list">
                                    <i class="fas fa-list"></i>
                            <button class="btn btn-outline" onclick="smartMediaAPI.exportMedia()">
                                Export
                    <!-- Media Grid -->
                    <div id="media-grid" class="media-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; margin-top: 2rem;">
                        <!-- Media cards will be dynamically loaded here -->
                    <!-- Analytics Dashboard -->
                    <div id="analytics-dashboard" class="analytics-dashboard" style="display: none; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-top: 2rem;">
                        <h3 style="color: #333; margin-bottom: 1.5rem;">
                            <i class="fas fa-chart-bar"></i>
                            Medien-Analytics
                        <div class="analytics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div class="stat-card" style="background: #f8f9ff; padding: 1rem; border-radius: 8px; text-align: center;">
                                <h4 style="margin: 0; color: #6366f1; font-size: 2rem;" id="total-files">0</h4>
                                <p style="margin: 0.5rem 0 0 0; color: #666;">Gesamt Dateien</p>
                            <div class="stat-card" style="background: #f0f9ff; padding: 1rem; border-radius: 8px; text-align: center;">
                                <h4 style="margin: 0; color: #0ea5e9; font-size: 2rem;" id="total-size">0 MB</h4>
                                <p style="margin: 0.5rem 0 0 0; color: #666;">Gesamt Größe</p>
                            <div class="stat-card" style="background: #f0fdf4; padding: 1rem; border-radius: 8px; text-align: center;">
                                <h4 style="margin: 0; color: #22c55e; font-size: 2rem;" id="storage-usage">0%</h4>
                                <p style="margin: 0.5rem 0 0 0; color: #666;">Speicher verwendet</p>
                            <div class="stat-card" style="background: #fef3f2; padding: 1rem; border-radius: 8px; text-align: center;">
                                <h4 style="margin: 0; color: #ef4444; font-size: 2rem;" id="recent-uploads">0</h4>
                                <p style="margin: 0.5rem 0 0 0; color: #666;">Heute hochgeladen</p>
                        <div class="category-breakdown" style="margin-top: 2rem;">
                            <h4 style="color: #333; margin-bottom: 1rem;">Kategorien-Übersicht</h4>
                            <div id="category-chart" style="height: 300px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <p style="color: #666;">Kategorie-Chart wird geladen...</p>
                    <!-- Profilbilder Kategorie -->
                    <div class="media-category-content active" id="category-profile">
                        <div class="category-header">
                            <h3><i class="fas fa-user"></i> Profilbilder</h3>
                            <p>Verwalte deine Profilbilder für verschiedene Bereiche</p>
                        <div class="profile-images-grid">
                            <div class="profile-image-item">
                                <h4>Navigation (Logo)</h4>
                                <div class="image-preview">
                                    <img id="navLogoPreview" src="manuel-weiss-photo.svg" alt="Navigation Logo">
                                <input type="file" id="navLogoUpload" accept="image/*" data-category="profile" data-subcategory="navigation" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'profile', subcategory: 'navigation'})"
                                <button data-action="get-element-by-id" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Logo hochladen
                                <h4>Hero-Bereich (Hauptbild)</h4>
                                    <img id="heroImagePreview" src="manuel-weiss-photo.svg" alt="Hero Bild">
                                <input type="file" id="heroImageUpload" accept="image/*" data-category="profile" data-subcategory="hero" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'profile', subcategory: 'hero'})"
                                    <i class="fas fa-upload"></i> Hero-Bild hochladen
                                <h4>Footer (Kleines Logo)</h4>
                                    <img id="footerLogoPreview" src="manuel-weiss-photo.svg" alt="Footer Logo">
                                <input type="file" id="footerLogoUpload" accept="image/*" data-category="profile" data-subcategory="footer" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'profile', subcategory: 'footer'})"
                                    <i class="fas fa-upload"></i> Footer-Logo hochladen
                    <!-- Bewerbungsunterlagen Kategorie -->
                    <div class="media-category-content" id="category-application">
                            <h3><i class="fas fa-file-alt"></i> Bewerbungsunterlagen</h3>
                            <p>Verwalte deine Bewerbungsbilder und Dokumente</p>
                        <div class="application-documents-grid">
                            <div class="document-item">
                                <h4><i class="fas fa-image"></i> Portrait</h4>
                                    <img id="applicationPhotoPreview" src="manuel-weiss-photo.svg" alt="Bewerbungsbild">
                                <input type="file" id="portraitUpload" accept="image/*" multiple data-category="application" data-subcategory="portrait" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'application', subcategory: 'portrait'})"
                                <button onclick="triggerSmartPortraitUpload()" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Portrait hochladen
                                <div id="portrait-documents-list" class="documents-list"></div>
                                <h4><i class="fas fa-user"></i> Lebenslauf</h4>
                                <div class="document-preview">
                                    <i class="fas fa-file-pdf" style="font-size: 3rem; color: #dc2626;"></i>
                                    <p id="cvFileName">Manuel_Weiss_CV.pdf</p>
                                <input type="file" id="cvUpload" accept=".pdf,.doc,.docx,.odt,.rtf" multiple data-category="documents" data-subcategory="cv" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'documents', subcategory: 'cv'})"
                                <button onclick="triggerSmartCVUpload()" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Lebenslauf hochladen
                                <div id="cv-documents-list" class="documents-list"></div>
                                <h4><i class="fas fa-graduation-cap"></i> Zeugnisse</h4>
                                    <p id="certificatesFileName">Zugnisse.pdf</p>
                                <input type="file" id="certificatesUpload" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" multiple data-category="documents" data-subcategory="certificates" onchange="window.unifiedAWS.uploadMedia(this.files, {category: 'documents', subcategory: 'certificates'})"
                                <button onclick="triggerSmartCertificatesUpload()" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Zeugnisse hochladen
                                <div id="certificates-documents-list" class="documents-list"></div>
                                <h4><i class="fas fa-award"></i> Zertifikate</h4>
                                    <i class="fas fa-file-pdf" style="font-size: 3rem; color: #f59e0b;"></i>
                                    <p>Weiterbildungszertifikate</p>
                                <input type="file" id="certificationsUpload" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" multiple onchange="Array.from(this.files).forEach(file => uploadDocument('certifications', file))">
                                <button onclick="triggerSmartCertificationsUpload()" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Zertifikate hochladen
                                <div id="certifications-documents-list" class="documents-list"></div>
                                <h4><i class="fas fa-envelope"></i> Anschreiben</h4>
                                    <i class="fas fa-file-alt" style="font-size: 3rem; color: #6366f1;"></i>
                                    <p>Frühere Anschreiben</p>
                                <input type="file" id="coverLettersUpload" accept=".pdf,.doc,.docx,.txt" multiple onchange="Array.from(this.files).forEach(file => uploadDocument('coverLetters', file))">
                                <button onclick="triggerSmartCoverLettersUpload()" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Anschreiben hochladen
                                <div id="coverLetters-documents-list" class="documents-list"></div>
                                <h4><i class="fas fa-file-archive"></i> Vollständige Bewerbung</h4>
                                    <i class="fas fa-file-archive" style="font-size: 3rem; color: #8b5cf6;"></i>
                                    <p>Komplette Bewerbungsmappen</p>
                                <input type="file" id="fullApplicationsUpload" accept=".pdf,.zip,.rar" multiple onchange="Array.from(this.files).forEach(file => uploadDocument('fullApplications', file))">
                                <button onclick="triggerSmartFullApplicationsUpload()" class="btn btn-outline">
                                    <i class="fas fa-upload"></i> Bewerbungsmappe hochladen
                                <div id="fullApplications-documents-list" class="documents-list"></div>
                        <!-- Analysis Section -->
                        <div class="analysis-section" style="margin-top: 2rem; padding: 1.5rem; background: #f8fafc; border-radius: 12px; border: 1px solid #e5e7eb;">
                            <h4 style="margin: 0 0 1rem; color: #374151; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-brain" style="color: #6366f1;"></i>
                                KI-Persönlichkeits- und Schreibstilanalyse
                            </h4>
                            <p style="margin: 0 0 1rem; color: #6b7280;">Analysieren Sie Ihre hochgeladenen Dokumente, um Ihren persönlichen Schreibstil zu verstehen und optimierte Anschreiben zu generieren.</p>
                            <button onclick="window.analyzeStoredDocumentsEnhanced ? window.analyzeStoredDocumentsEnhanced() : analyzeStoredDocuments()" class="btn btn-primary" style="margin-right: 1rem;">
                                <i class="fas fa-brain"></i> KI-Analyse starten
                            <button onclick="refreshAllDocumentDisplays()" class="btn btn-outline">
                                <i class="fas fa-refresh"></i> Ansicht aktualisieren
                            <div id="profileAnalysisResults" style="margin-top: 1rem;"></div>
                    <!-- Portfolio Kategorie -->
                    <div class="media-category-content" id="category-portfolio">
                            <h3><i class="fas fa-briefcase"></i> Portfolio</h3>
                            <p>Verwalte deine Portfolio-Bilder und Projektdokumentationen</p>
                        <div class="portfolio-grid">
                            <div class="portfolio-item">
                                <h4>Projektbilder</h4>
                                <div class="image-gallery">
                                    <div class="gallery-placeholder">
                                        <i class="fas fa-images" style="font-size: 2rem; color: #999;"></i>
                                        <p>Projektbilder hier hochladen</p>
                                <input type="file" id="portfolioImagesUpload" accept="image/*" multiple onchange="uploadPortfolioImages(this)">
                                    <i class="fas fa-upload"></i> Projektbilder hochladen
                    <!-- Dokumente Kategorie -->
                    <div class="media-category-content" id="category-documents">
                            <h3><i class="fas fa-file-pdf"></i> Dokumente</h3>
                            <p>Verwalte alle wichtigen Dokumente</p>
                        <div class="documents-grid">
                                <h4>Persönlichkeitsentwicklung (PDF)</h4>
                                    <p id="personalityFileName">Persönlichkeitsentwicklung.pdf</p>
                                <input type="file" id="personalityUpload" accept=".pdf" onchange="uploadDocument('personality-development', this)">
                                    <i class="fas fa-upload"></i> PDF hochladen
                    <!-- Galerie Kategorie -->
                    <div class="media-category-content" id="category-gallery">
                            <h3><i class="fas fa-images"></i> Galerie</h3>
                            <p>Allgemeine Bilder und Medien</p>
                            <!-- Media items will be dynamically loaded here -->
                <!-- RAISEC Model Section -->
                <section id="raisec" class="admin-section">
                    <div class="raisec-admin-container">
                        <div class="raisec-admin-header">
                            <h2>RAISEC-Modell Verwaltung</h2>
                            <p>Verwalte das RAISEC-Modell nach Holland für Berufsorientierung und Persönlichkeitsanalyse</p>
                        <!-- RAISEC Types Management -->
                        <div class="raisec-types-management">
                            <h3>🎯 RAISEC-Typen verwalten</h3>
                            <div class="raisec-types-grid">
                                <div class="raisec-type-card" data-type="R">
                                    <div class="raisec-type-header">
                                        <div class="raisec-type-icon">
                                            <i class="fas fa-tools"></i>
                                        <div class="raisec-type-info">
                                            <h4>R - Realistisch</h4>
                                            <p>Praktisch, handwerklich, technisch orientiert</p>
                                        <button class="raisec-edit-btn" data-type="R">
                                    <div class="raisec-type-stats">
                                        <div class="raisec-stat">
                                            <i class="fas fa-users"></i>
                                            <span>0 Teilnehmer</span>
                                            <i class="fas fa-percentage"></i>
                                            <span>0% Durchschnitt</span>
                                <div class="raisec-type-card" data-type="A">
                                            <h4>A - Analytisch</h4>
                                            <p>Analytisch, wissenschaftlich, intellektuell</p>
                                        <button class="raisec-edit-btn" data-type="A">
                                <div class="raisec-type-card" data-type="I">
                                            <i class="fas fa-palette"></i>
                                            <h4>I - Künstlerisch</h4>
                                            <p>Kreativ, expressiv, unkonventionell</p>
                                        <button class="raisec-edit-btn" data-type="I">
                                <div class="raisec-type-card" data-type="S">
                                            <h4>S - Sozial</h4>
                                            <p>Hilfsbereit, empathisch, kommunikativ</p>
                                        <button class="raisec-edit-btn" data-type="S">
                                <div class="raisec-type-card" data-type="E">
                                            <i class="fas fa-briefcase"></i>
                                            <h4>E - Unternehmerisch</h4>
                                            <p>Führungsstark, überzeugend, ehrgeizig</p>
                                        <button class="raisec-edit-btn" data-type="E">
                                <div class="raisec-type-card" data-type="C">
                                            <i class="fas fa-calculator"></i>
                                            <h4>C - Konventionell</h4>
                                            <p>Organisiert, strukturiert, detailorientiert</p>
                                        <button class="raisec-edit-btn" data-type="C">
                        <!-- Assessment Questions Management -->
                        <div class="assessment-questions-management">
                            <h3>❓ Assessment-Fragen verwalten</h3>
                            <div class="questions-overview">
                                <div class="questions-stats">
                                    <div class="question-stat">
                                        <i class="fas fa-question-circle"></i>
                                        <span>30 Fragen</span>
                                        <span>5 Min Dauer</span>
                                        <i class="fas fa-chart-bar"></i>
                                        <span>6 Kategorien</span>
                                <div class="questions-actions">
                                    <button class="btn btn-primary" data-action="add-question">
                                        <i class="fas fa-plus"></i> Frage hinzufügen
                                    <button class="btn btn-outline" data-action="edit-questions">
                                        <i class="fas fa-edit"></i> Fragen bearbeiten
                        <!-- Career Recommendations Management -->
                        <div class="career-recommendations-management">
                            <h3>💼 Berufsempfehlungen verwalten</h3>
                            <div class="career-recommendations-grid">
                                <div class="career-category-card" data-category="R">
                                    <h4>Realistische Berufe</h4>
                                    <div class="career-list">
                                        <div class="career-item">
                                            <span>Ingenieur</span>
                                            <button class="career-edit-btn" data-career="engineer">
                                            <span>Mechaniker</span>
                                            <button class="career-edit-btn" data-career="mechanic">
                                            <span>Techniker</span>
                                            <button class="career-edit-btn" data-career="technician">
                                    <button class="btn btn-outline btn-sm" data-action="add-career" data-category="R">
                                        <i class="fas fa-plus"></i> Beruf hinzufügen
                                <div class="career-category-card" data-category="A">
                                    <h4>Analytische Berufe</h4>
                                            <span>Wissenschaftler</span>
                                            <button class="career-edit-btn" data-career="scientist">
                                            <span>Forscher</span>
                                            <button class="career-edit-btn" data-career="researcher">
                                            <span>Programmierer</span>
                                            <button class="career-edit-btn" data-career="programmer">
                                    <button class="btn btn-outline btn-sm" data-action="add-career" data-category="A">
                                <div class="career-category-card" data-category="I">
                                    <h4>Künstlerische Berufe</h4>
                                            <span>Künstler</span>
                                            <button class="career-edit-btn" data-career="artist">
                                            <span>Designer</span>
                                            <button class="career-edit-btn" data-career="designer">
                                            <span>Musiker</span>
                                            <button class="career-edit-btn" data-career="musician">
                                    <button class="btn btn-outline btn-sm" data-action="add-career" data-category="I">
                                <div class="career-category-card" data-category="S">
                                    <h4>Soziale Berufe</h4>
                                            <span>Lehrer</span>
                                            <button class="career-edit-btn" data-career="teacher">
                                            <span>Sozialarbeiter</span>
                                            <button class="career-edit-btn" data-career="social-worker">
                                            <span>Therapeut</span>
                                            <button class="career-edit-btn" data-career="therapist">
                                    <button class="btn btn-outline btn-sm" data-action="add-career" data-category="S">
                                <div class="career-category-card" data-category="E">
                                    <h4>Unternehmerische Berufe</h4>
                                            <span>Manager</span>
                                            <button class="career-edit-btn" data-career="manager">
                                            <span>Verkäufer</span>
                                            <button class="career-edit-btn" data-career="salesperson">
                                            <span>Unternehmer</span>
                                            <button class="career-edit-btn" data-career="entrepreneur">
                                    <button class="btn btn-outline btn-sm" data-action="add-career" data-category="E">
                                <div class="career-category-card" data-category="C">
                                    <h4>Konventionelle Berufe</h4>
                                            <span>Buchhalter</span>
                                            <button class="career-edit-btn" data-career="accountant">
                                            <span>Sekretär</span>
                                            <button class="career-edit-btn" data-career="secretary">
                                            <span>Banker</span>
                                            <button class="career-edit-btn" data-career="banker">
                                    <button class="btn btn-outline btn-sm" data-action="add-career" data-category="C">
                        <div class="raisec-statistics">
                            <h3>📊 RAISEC-Statistiken</h3>
                                        <h4 id="raisec-completions">0</h4>
                                        <p>Assessments abgeschlossen</p>
                                        <i class="fas fa-chart-pie"></i>
                                        <h4 id="raisec-distribution">-</h4>
                                        <p>Typ-Verteilung</p>
                                        <h4 id="raisec-satisfaction">-</h4>
                                        <p>Zufriedenheit</p>
                                        <h4 id="raisec-trend">-</h4>
                                        <p>Trend</p>
                <!-- Werte-Klärung Workflow Section -->
                <section id="values-clarification" class="admin-section">
                    <div class="workflow-admin-container">
                        <div class="workflow-admin-header">
                            <h2>Werte-Klärung Workflow Verwaltung</h2>
                            <p>Verwalte den Werte-Klärung Workflow und seine Inhalte</p>
                        <div class="workflow-admin-content">
                            <div class="workflow-tabs">
                                <button class="tab-btn active" data-tab="steps">Workflow-Schritte</button>
                                <button class="tab-btn" data-tab="content">Inhalte</button>
                                <button class="tab-btn" data-tab="settings">Einstellungen</button>
                            <div class="workflow-tab-content">
                                <div class="tab-panel active" id="steps-panel">
                                    <h3>Workflow-Schritte verwalten</h3>
                                    <p>Hier können die Schritte des Werte-Klärung Workflows verwaltet werden.</p>
                                <div class="tab-panel" id="content-panel">
                                    <h3>Inhalte verwalten</h3>
                                    <p>Hier können die Inhalte und Übungen verwaltet werden.</p>
                                <div class="tab-panel" id="settings-panel">
                                    <h3>Einstellungen</h3>
                                    <p>Hier können die Workflow-Einstellungen angepasst werden.</p>
                <!-- Stärken-Analyse Workflow Section -->
                <section id="strengths-analysis" class="admin-section">
                            <h2>Stärken-Analyse Workflow Verwaltung</h2>
                            <p>Verwalte den Stärken-Analyse Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Stärken-Analyse Workflows verwaltet werden.</p>
                <!-- Five Pillars Workflow Section -->
                <section id="five-pillars" class="admin-section">
                            <h2>Five Pillars Workflow Verwaltung</h2>
                            <p>Verwalte den Five Pillars Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Five Pillars Workflows verwaltet werden.</p>
                <!-- Harvard Method Workflow Section -->
                <section id="harvard-method" class="admin-section">
                            <h2>Harvard Method Workflow Verwaltung</h2>
                            <p>Verwalte den Harvard Method Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Harvard Method Workflows verwaltet werden.</p>
                <!-- Moment of Excellence Workflow Section -->
                <section id="moment-excellence" class="admin-section">
                            <h2>Moment of Excellence Workflow Verwaltung</h2>
                            <p>Verwalte den Moment of Excellence Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Moment of Excellence Workflows verwaltet werden.</p>
                <!-- NLP Meta Goal Workflow Section -->
                <section id="nlp-meta-goal" class="admin-section">
                            <h2>NLP Meta Goal Workflow Verwaltung</h2>
                            <p>Verwalte den NLP Meta Goal Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des NLP Meta Goal Workflows verwaltet werden.</p>
                <!-- Nonviolent Communication Workflow Section -->
                <section id="nonviolent-communication" class="admin-section">
                            <h2>Nonviolent Communication Workflow Verwaltung</h2>
                            <p>Verwalte den Nonviolent Communication Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Nonviolent Communication Workflows verwaltet werden.</p>
                <!-- Resource Analysis Workflow Section -->
                <section id="resource-analysis" class="admin-section">
                            <h2>Resource Analysis Workflow Verwaltung</h2>
                            <p>Verwalte den Resource Analysis Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Resource Analysis Workflows verwaltet werden.</p>
                <!-- Rafael Method Workflow Section -->
                <section id="rafael-method" class="admin-section">
                            <h2>Rafael Method Workflow Verwaltung</h2>
                            <p>Verwalte den Rafael Method Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Rafael Method Workflows verwaltet werden.</p>
                <!-- Walt Disney Workflow Section -->
                <section id="walt-disney" class="admin-section">
                            <h2>Walt Disney Workflow Verwaltung</h2>
                            <p>Verwalte den Walt Disney Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Walt Disney Workflows verwaltet werden.</p>
                <!-- AEK Communication Workflow Section -->
                <section id="aek-communication" class="admin-section">
                            <h2>AEK Communication Workflow Verwaltung</h2>
                            <p>Verwalte den AEK Communication Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des AEK Communication Workflows verwaltet werden.</p>
                <!-- Change Stages Workflow Section -->
                <section id="change-stages" class="admin-section">
                            <h2>Change Stages Workflow Verwaltung</h2>
                            <p>Verwalte den Change Stages Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Change Stages Workflows verwaltet werden.</p>
                <!-- Circular Interview Workflow Section -->
                <section id="circular-interview" class="admin-section">
                            <h2>Circular Interview Workflow Verwaltung</h2>
                            <p>Verwalte den Circular Interview Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Circular Interview Workflows verwaltet werden.</p>
                <!-- Communication Workflow Section -->
                <section id="communication" class="admin-section">
                            <h2>Communication Workflow Verwaltung</h2>
                            <p>Verwalte den Communication Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Communication Workflows verwaltet werden.</p>
                <!-- Competence Map Workflow Section -->
                <section id="competence-map" class="admin-section">
                            <h2>Competence Map Workflow Verwaltung</h2>
                            <p>Verwalte den Competence Map Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Competence Map Workflows verwaltet werden.</p>
                <!-- Conflict Escalation Workflow Section -->
                <section id="conflict-escalation" class="admin-section">
                            <h2>Conflict Escalation Workflow Verwaltung</h2>
                            <p>Verwalte den Conflict Escalation Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Conflict Escalation Workflows verwaltet werden.</p>
                <!-- Rubikon Model Workflow Section -->
                <section id="rubikon-model" class="admin-section">
                            <h2>Rubikon Model Workflow Verwaltung</h2>
                            <p>Verwalte den Rubikon Model Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Rubikon Model Workflows verwaltet werden.</p>
                <!-- Solution Focused Workflow Section -->
                <section id="solution-focused" class="admin-section">
                            <h2>Solution Focused Workflow Verwaltung</h2>
                            <p>Verwalte den Solution Focused Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Solution Focused Workflows verwaltet werden.</p>
                <!-- Systemic Coaching Workflow Section -->
                <section id="systemic-coaching" class="admin-section">
                            <h2>Systemic Coaching Workflow Verwaltung</h2>
                            <p>Verwalte den Systemic Coaching Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Systemic Coaching Workflows verwaltet werden.</p>
                <!-- Target Coaching Workflow Section -->
                <section id="target-coaching" class="admin-section">
                            <h2>Target Coaching Workflow Verwaltung</h2>
                            <p>Verwalte den Target Coaching Workflow und seine Inhalte</p>
                                    <p>Hier können die Schritte des Target Coaching Workflows verwaltet werden.</p>
                <!-- Alle Methoden verwalten Section -->
                <section id="all-methods" class="admin-section">
                    <div class="all-methods-container">
                        <div class="all-methods-header">
                            <h2>Alle Methoden verwalten</h2>
                            <p>Zentrale Verwaltung aller 29 Persönlichkeitsentwicklungs-Methoden</p>
                        <div class="methods-management">
                            <div class="methods-list">
                                <h3>Verfügbare Methoden</h3>
                                <div class="method-items">
                                    <div class="method-item">
                                        <div class="method-info">
                                            <h4>Ikigai-Workflow</h4>
                                            <p>Der umfassende 7-Schritte-Prozess zur Entdeckung deines Lebenssinns</p>
                                        <div class="method-actions">
                                            <button class="btn btn-primary" data-action="edit-method" data-param="ikigai">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="ikigai">Vorschau</button>
                                            <h4>Werte-Klärung</h4>
                                            <p>Identifiziere deine wichtigsten Werte und lebe authentisch</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="values-clarification">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="values-clarification">Vorschau</button>
                                            <h4>Stärken-Analyse</h4>
                                            <p>Entdecke und entwickle deine natürlichen Stärken</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="strengths-analysis">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="strengths-analysis">Vorschau</button>
                                            <h4>Ziel-Setting</h4>
                                            <p>Setze und erreiche deine Ziele systematisch</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="goal-setting">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="goal-setting">Vorschau</button>
                                            <h4>Achtsamkeit & Meditation</h4>
                                            <p>Entwickle Achtsamkeit und innere Ruhe</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="mindfulness">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="mindfulness">Vorschau</button>
                                            <h4>Emotionale Intelligenz</h4>
                                            <p>Entwickle deine emotionale Kompetenz</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="emotional-intelligence">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="emotional-intelligence">Vorschau</button>
                                            <h4>Gewohnheiten aufbauen</h4>
                                            <p>Baue positive Gewohnheiten auf und breche schlechte ab</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="habit-building">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="habit-building">Vorschau</button>
                                            <h4>Gallup StrengthsFinder</h4>
                                            <p>Entdecke deine Top 5 Stärken</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="gallup-strengths">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="gallup-strengths">Vorschau</button>
                                            <h4>VIA Character Strengths</h4>
                                            <p>Entdecke deine Charakterstärken</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="via-strengths">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="via-strengths">Vorschau</button>
                                            <h4>Selbsteinschätzung</h4>
                                            <p>Bewerte dich selbst in verschiedenen Bereichen</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="self-assessment">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="self-assessment">Vorschau</button>
                                            <h4>Johari Window</h4>
                                            <p>Analysiere Selbst- und Fremdbild</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="johari-window">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="johari-window">Vorschau</button>
                                            <h4>NLP Dilts</h4>
                                            <p>Die 6 Ebenen der Veränderung</p>
                                            <button class="btn btn-primary" data-action="edit-method" data-param="nlp-dilts">Bearbeiten</button>
                                            <button class="btn btn-outline" data-action="preview-method" data-param="nlp-dilts">Vorschau</button>
                <!-- AI Coach Admin Section -->
                <section id="ai-coach-admin" class="admin-section">
                    <div class="ai-coach-admin-container">
                        <div class="section-header">
                            <h2><i class="fas fa-robot"></i> AI Coach Verwaltung</h2>
                            <p>Umfassende Verwaltung des AI Persönlichkeitsentwicklungscoach</p>
                        <div class="ai-coach-tabs">
                            <div class="tab-buttons">
                                <button class="tab-btn active" data-tab="api-settings">
                                    <i class="fas fa-key"></i> API Einstellungen
                                <button class="tab-btn" data-tab="chatbot-config">
                                    <i class="fas fa-cog"></i> Chatbot Konfiguration
                                <button class="tab-btn" data-tab="assessments">
                                    <i class="fas fa-clipboard-list"></i> Assessments
                                <button class="tab-btn" data-tab="workflows">
                                    <i class="fas fa-route"></i> Workflow Templates
                                <button class="tab-btn" data-tab="analytics">
                                    <i class="fas fa-chart-bar"></i> Analytics
                                <button class="tab-btn" data-tab="conversations">
                                    <i class="fas fa-comments"></i> Gespräche
                            <!-- API Settings Tab -->
                            <div class="tab-content active" id="api-settings">
                                <div class="api-settings-grid">
                                    <div class="api-config-card">
                                        <div class="card-header">
                                            <h3><i class="fas fa-key"></i> OpenAI API Konfiguration</h3>
                                            <div class="api-status" id="apiStatus">
                                                <span class="status-indicator offline"></span>
                                                <span class="status-text">Nicht konfiguriert</span>
                                        <div class="card-content">
                                            <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px; border-left: 4px solid #0ea5e9;">
                                                <p style="margin: 0; color: #0c4a6e; font-size: 0.9rem;">
                                                    <strong>OpenAI API Konfiguration</strong><br>
                                                    → Siehe <strong>KI-Einstellungen</strong> in der Sidebar
                                                </p>
                                            <div class="form-group">
                                                <label for="apiModel">AI Modell</label>
                                                <select id="apiModel" class="form-select">
                                                    <option value="gpt-4">GPT-4 (Empfohlen)</option>
                                                    <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                                <label for="maxTokens">Max Tokens pro Antwort</label>
                                                <input type="number" id="maxTokens" value="500" min="100" max="2000" class="form-input">
                                                <label for="temperature">Kreativität (Temperature)</label>
                                                <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7" class="form-range">
                                                <div class="range-labels">
                                                    <span>Konservativ (0.0)</span>
                                                    <span>Kreativ (1.0)</span>
                                            <div class="form-actions">
                                                <button class="btn btn-primary" data-action="test-api-connection">
                                                    <i class="fas fa-plug"></i> Verbindung testen
                                                <button class="btn btn-success" data-action="save-api-settings">
                                                    <i class="fas fa-save"></i> Einstellungen speichern
                                    <div class="api-usage-card">
                                            <h3><i class="fas fa-chart-line"></i> API Nutzung</h3>
                                            <div class="usage-stats">
                                                <div class="stat-item">
                                                    <div class="stat-value" id="totalRequests">0</div>
                                                    <div class="stat-label">Gesamt Anfragen</div>
                                                    <div class="stat-value" id="totalTokens">0</div>
                                                    <div class="stat-label">Verwendete Tokens</div>
                                                    <div class="stat-value" id="estimatedCost">$0.00</div>
                                                    <div class="stat-label">Geschätzte Kosten</div>
                                            <div class="usage-chart">
                                                <canvas id="usageChart" width="400" height="200"></canvas>
                            <!-- Chatbot Configuration Tab -->
                            <div class="tab-content" id="chatbot-config">
                                <div class="chatbot-config-grid">
                                    <div class="config-card">
                                            <h3><i class="fas fa-robot"></i> Chatbot Verhalten</h3>
                                                <label for="coachPersonality">Coach Persönlichkeit</label>
                                                <select id="coachPersonality" class="form-select">
                                                    <option value="professional">Professionell & Strukturiert</option>
                                                    <option value="warm">Warm & Empathisch</option>
                                                    <option value="motivational">Motivierend & Energisch</option>
                                                    <option value="analytical">Analytisch & Wissenschaftlich</option>
                                                <label for="responseStyle">Antwortstil</label>
                                                <select id="responseStyle" class="form-select">
                                                    <option value="concise">Kurz & Präzise</option>
                                                    <option value="detailed">Detailliert & Ausführlich</option>
                                                    <option value="conversational">Gesprächig & Natürlich</option>
                                                <label for="languageLevel">Sprachniveau</label>
                                                <select id="languageLevel" class="form-select">
                                                    <option value="simple">Einfach & Verständlich</option>
                                                    <option value="professional">Professionell</option>
                                                    <option value="academic">Wissenschaftlich</option>
                                                <label>
                                                    <input type="checkbox" id="enableQuickActions" checked>
                                                    Quick-Action Buttons aktivieren
                                                </label>
                                                    <input type="checkbox" id="enableTypingIndicator" checked>
                                                    Typing-Indikator anzeigen
                                            <h3><i class="fas fa-cog"></i> System Prompts</h3>
                                                <label for="systemPrompt">Hauptsystem Prompt</label>
                                                <textarea id="systemPrompt" rows="8" class="form-textarea" placeholder="Definiere die Persönlichkeit und das Verhalten des AI Coach..."></textarea>
                                                <label for="assessmentPrompt">Assessment Prompt</label>
                                                <textarea id="assessmentPrompt" rows="6" class="form-textarea" placeholder="Spezielle Anweisungen für Assessments..."></textarea>
                                                <label for="workflowPrompt">Workflow Prompt</label>
                                                <textarea id="workflowPrompt" rows="6" class="form-textarea" placeholder="Anweisungen für Workflow-Erstellung..."></textarea>
                            <!-- Assessments Tab -->
                            <div class="tab-content" id="assessments">
                                <div class="assessments-management">
                                    <div class="assessments-header">
                                        <h3>Assessment Verwaltung</h3>
                                        <button class="btn btn-primary" data-action="create-new-assessment">
                                            <i class="fas fa-plus"></i> Neues Assessment
                                    <div class="assessments-grid">
                                        <div class="assessment-card">
                                            <div class="assessment-header">
                                                <h4><i class="fas fa-star"></i> Stärken-Assessment</h4>
                                                <div class="assessment-status active">Aktiv</div>
                                            <div class="assessment-content">
                                                <p>5 Fragen zur Identifikation natürlicher Talente</p>
                                                <div class="assessment-stats">
                                                    <span><i class="fas fa-users"></i> 0 Durchführungen</span>
                                                    <span><i class="fas fa-clock"></i> ~10 Min</span>
                                            <div class="assessment-actions">
                                                <button class="btn btn-outline" data-action="edit-assessment" data-param="strengths">Bearbeiten</button>
                                                <button class="btn btn-outline" data-action="preview-assessment" data-param="strengths">Vorschau</button>
                                                <button class="btn btn-danger" data-action="delete-assessment" data-param="strengths">Löschen</button>
                                                <h4><i class="fas fa-heart"></i> Werte-Assessment</h4>
                                                <p>5 Fragen zur Klärung persönlicher Werte</p>
                                                    <span><i class="fas fa-clock"></i> ~8 Min</span>
                                                <button class="btn btn-outline" data-action="edit-assessment" data-param="values">Bearbeiten</button>
                                                <button class="btn btn-outline" data-action="preview-assessment" data-param="values">Vorschau</button>
                                                <button class="btn btn-danger" data-action="delete-assessment" data-param="values">Löschen</button>
                                                <h4><i class="fas fa-bullseye"></i> Ziele-Assessment</h4>
                                                <p>5 Fragen zur Strukturierung von Lebenszielen</p>
                                                    <span><i class="fas fa-clock"></i> ~12 Min</span>
                                                <button class="btn btn-outline" data-action="edit-assessment" data-param="goals">Bearbeiten</button>
                                                <button class="btn btn-outline" data-action="preview-assessment" data-param="goals">Vorschau</button>
                                                <button class="btn btn-danger" data-action="delete-assessment" data-param="goals">Löschen</button>
                                                <h4><i class="fas fa-user"></i> Persönlichkeits-Assessment</h4>
                                                <p>5 Fragen zur Analyse der Persönlichkeitsdimensionen</p>
                                                    <span><i class="fas fa-clock"></i> ~15 Min</span>
                                                <button class="btn btn-outline" data-action="edit-assessment" data-param="personality">Bearbeiten</button>
                                                <button class="btn btn-outline" data-action="preview-assessment" data-param="personality">Vorschau</button>
                                                <button class="btn btn-danger" data-action="delete-assessment" data-param="personality">Löschen</button>
                            <!-- Workflow Templates Tab -->
                            <div class="tab-content" id="workflows">
                                <div class="workflows-management">
                                    <div class="workflows-header">
                                        <h3>Workflow Template Verwaltung</h3>
                                        <button class="btn btn-primary" data-action="create-new-workflow">
                                            <i class="fas fa-plus"></i> Neues Template
                                    <div class="workflows-grid">
                                        <div class="workflow-card">
                                            <div class="workflow-header">
                                                <h4><i class="fas fa-compass"></i> Ikigai-Workflow</h4>
                                                <div class="workflow-status active">Aktiv</div>
                                            <div class="workflow-content">
                                                <p>7-Schritte-Prozess zur Entdeckung des Lebenssinns</p>
                                                <div class="workflow-steps">
                                                    <span class="step">1. Was du liebst</span>
                                                    <span class="step">2. Was du gut kannst</span>
                                                    <span class="step">3. Was die Welt braucht</span>
                                                    <span class="step">4. Wofür du bezahlt wirst</span>
                                                    <span class="step">5. Ikigai finden</span>
                                                    <span class="step">6. Aktionsplan</span>
                                                    <span class="step">7. Umsetzung</span>
                                            <div class="workflow-actions">
                                                <button class="btn btn-outline" data-action="edit-workflow" data-param="ikigai">Bearbeiten</button>
                                                <button class="btn btn-outline" data-action="preview-workflow" data-param="ikigai">Vorschau</button>
                                                <button class="btn btn-success" data-action="duplicate-workflow" data-param="ikigai">Duplizieren</button>
                                                <h4><i class="fas fa-route"></i> Personalisierter Workflow</h4>
                                                <p>Dynamisch generierter Workflow basierend auf Nutzerprofil</p>
                                                <div class="workflow-features">
                                                    <span class="feature">Adaptiv</span>
                                                    <span class="feature">Personalisierbar</span>
                                                    <span class="feature">Fortschritts-Tracking</span>
                                                <button class="btn btn-outline" data-action="edit-workflow" data-param="personalized">Bearbeiten</button>
                                                <button class="btn btn-outline" data-action="preview-workflow" data-param="personalized">Vorschau</button>
                                                <button class="btn btn-success" data-action="duplicate-workflow" data-param="personalized">Duplizieren</button>
                            <!-- Analytics Tab -->
                            <div class="tab-content" id="analytics">
                                <div class="analytics-dashboard">
                                    <div class="analytics-header">
                                        <h3>AI Coach Analytics</h3>
                                        <div class="analytics-filters">
                                            <select id="analyticsPeriod" class="form-select">
                                                <option value="7d">Letzte 7 Tage</option>
                                                <option value="30d">Letzte 30 Tage</option>
                                                <option value="90d">Letzte 90 Tage</option>
                                                <option value="1y">Letztes Jahr</option>
                                    <div class="analytics-grid">
                                        <div class="analytics-card">
                                            <div class="card-header">
                                                <h4><i class="fas fa-comments"></i> Gespräche</h4>
                                            <div class="card-content">
                                                <div class="metric">
                                                    <div class="metric-value" id="totalConversations">0</div>
                                                    <div class="metric-label">Gesamt Gespräche</div>
                                                    <div class="metric-value" id="avgConversationLength">0</div>
                                                    <div class="metric-label">Ø Nachrichten pro Gespräch</div>
                                                <h4><i class="fas fa-clipboard-list"></i> Assessments</h4>
                                                    <div class="metric-value" id="totalAssessments">0</div>
                                                    <div class="metric-label">Durchgeführte Assessments</div>
                                                    <div class="metric-value" id="completionRate">0%</div>
                                                    <div class="metric-label">Abschlussrate</div>
                                                <h4><i class="fas fa-route"></i> Workflows</h4>
                                                    <div class="metric-value" id="totalWorkflows">0</div>
                                                    <div class="metric-label">Gestartete Workflows</div>
                                                    <div class="metric-value" id="workflowCompletion">0%</div>
                                                    <div class="metric-label">Workflow-Abschlussrate</div>
                                                <h4><i class="fas fa-star"></i> Beliebte Methoden</h4>
                                                <div class="popular-methods" id="popularMethods">
                                                    <div class="method-item">
                                                        <span class="method-name">Ikigai-Workflow</span>
                                                        <span class="method-count">0</span>
                                                        <span class="method-name">Werte-Klärung</span>
                                                        <span class="method-name">Stärken-Analyse</span>
                                    <div class="analytics-charts">
                                        <div class="chart-container">
                                            <h4>Gespräche über Zeit</h4>
                                            <canvas id="conversationsChart" width="400" height="200"></canvas>
                                            <h4>Assessment-Verteilung</h4>
                                            <canvas id="assessmentsChart" width="400" height="200"></canvas>
                            <!-- Conversations Tab -->
                            <div class="tab-content" id="conversations">
                                <div class="conversations-management">
                                    <div class="conversations-header">
                                        <h3>Gesprächsverwaltung</h3>
                                        <div class="conversations-filters">
                                            <input type="text" id="conversationSearch" placeholder="Gespräche durchsuchen..." class="form-input">
                                            <select id="conversationFilter" class="form-select">
                                                <option value="all">Alle Gespräche</option>
                                                <option value="assessments">Nur Assessments</option>
                                                <option value="workflows">Nur Workflows</option>
                                                <option value="general">Allgemeine Gespräche</option>
                                    <div class="conversations-list" id="conversationsList">
                                        <div class="conversation-item">
                                            <div class="conversation-header">
                                                <div class="conversation-info">
                                                    <h4>Stärken-Assessment</h4>
                                                    <p>Anonym • 15.01.2024 14:30</p>
                                                <div class="conversation-stats">
                                                    <span><i class="fas fa-comments"></i> 12 Nachrichten</span>
                                                    <span><i class="fas fa-clock"></i> 8 Min</span>
                                            <div class="conversation-preview">
                                                <p>Nutzer: "Ich möchte meine Stärken besser verstehen..."</p>
                                            <div class="conversation-actions">
                                                <button class="btn btn-outline" data-action="view-conversation" data-param="conv1">Ansehen</button>
                                                <button class="btn btn-outline" data-action="export-conversation" data-param="conv1">Exportieren</button>
                                                <button class="btn btn-danger" data-action="delete-conversation" data-param="conv1">Löschen</button>
                <!-- Digital Twin Training Section -->
                <section id="digital-twin-training" class="admin-section">
                    <div class="digital-twin-training-container">
                            <h2><i class="fas fa-brain"></i> Manu Training</h2>
                            <p>Trainiere Manu kontinuierlich, damit er immer authentischer wird</p>
                        <div class="training-tabs">
                            <button class="tab-btn active" data-tab="personality-training">
                                Persönlichkeit
                            <button class="tab-btn" data-tab="experience-training">
                                Erfahrungen
                            <button class="tab-btn" data-tab="communication-training">
                                <i class="fas fa-comments"></i>
                                Kommunikation
                            <button class="tab-btn" data-tab="training-analytics">
                                Training Analytics
                        <!-- Personality Training Tab -->
                        <div id="personality-training" class="tab-content active">
                            <div class="training-card">
                                <h3><i class="fas fa-user-circle"></i> Persönlichkeits-Training</h3>
                                <p>Definiere deine Persönlichkeitsmerkmale, Werte und Coaching-Philosophie</p>
                                <div class="training-form">
                                    <div class="form-group">
                                        <label for="personality-traits">Persönlichkeitsmerkmale</label>
                                        <textarea id="personality-traits" placeholder="z.B. strukturierter Problemlöser, empathisch, lösungsorientiert..."></textarea>
                                        <label for="core-values">Kernwerte</label>
                                        <textarea id="core-values" placeholder="z.B. 'Klasse statt Masse', 'Struktur schafft Freiheit', 'Menschen vor Prozesse'..."></textarea>
                                        <label for="coaching-philosophy">Coaching-Philosophie</label>
                                        <textarea id="coaching-philosophy" placeholder="Beschreibe deine Herangehensweise an Coaching und Beratung..."></textarea>
                                        <label for="communication-style">Kommunikationsstil</label>
                                        <textarea id="communication-style" placeholder="Wie kommunizierst du? Direkt, empathisch, strukturiert..."></textarea>
                                    <button class="btn btn-primary" data-action="save-personality-training">
                                        <i class="fas fa-save"></i> Persönlichkeit speichern
                        <!-- Experience Training Tab -->
                        <div id="experience-training" class="tab-content">
                                <h3><i class="fas fa-briefcase"></i> Erfahrungs-Training</h3>
                                <p>Füge persönliche Anekdoten, Projekterfahrungen und Fachwissen hinzu</p>
                                <div class="experience-form">
                                        <label for="project-anecdotes">Projekt-Anekdoten</label>
                                        <textarea id="project-anecdotes" placeholder="Erzähle von deinen UKG HRSD Projekten, ADONIS Implementierungen, etc..."></textarea>
                                        <label for="professional-insights">Berufliche Erkenntnisse</label>
                                        <textarea id="professional-insights" placeholder="Was hast du in deiner Beratungstätigkeit gelernt?"></textarea>
                                        <label for="method-experiences">Methoden-Erfahrungen</label>
                                        <textarea id="method-experiences" placeholder="Wie wendest du bestimmte Methoden in der Praxis an?"></textarea>
                                        <label for="client-stories">Kunden-Geschichten</label>
                                        <textarea id="client-stories" placeholder="Erzähle von erfolgreichen Kundenprojekten (anonymisiert)..."></textarea>
                                    <button class="btn btn-primary" data-action="save-experience-training">
                                        <i class="fas fa-save"></i> Erfahrungen speichern
                        <!-- Communication Training Tab -->
                        <div id="communication-training" class="tab-content">
                                <h3><i class="fas fa-comments"></i> Kommunikations-Training</h3>
                                <p>Trainiere deinen Schreibstil und Kommunikationsmuster</p>
                                <div class="communication-form">
                                        <label for="writing-samples">Schreibproben</label>
                                        <textarea id="writing-samples" placeholder="Füge Beispiele deines Schreibstils hinzu (E-Mails, Berichte, etc.)..."></textarea>
                                        <label for="favorite-phrases">Lieblings-Phrasen</label>
                                        <textarea id="favorite-phrases" placeholder="Welche Ausdrücke verwendest du häufig?"></textarea>
                                        <label for="communication-patterns">Kommunikationsmuster</label>
                                        <textarea id="communication-patterns" placeholder="Wie strukturierst du deine Antworten?"></textarea>
                                        <label for="coaching-questions">Coaching-Fragen</label>
                                        <textarea id="coaching-questions" placeholder="Welche Fragen stellst du häufig in Gesprächen?"></textarea>
                                    <button class="btn btn-primary" data-action="save-communication-training">
                                        <i class="fas fa-save"></i> Kommunikation speichern
                        <!-- Training Analytics Tab -->
                        <div id="training-analytics" class="tab-content">
                                <h3><i class="fas fa-chart-line"></i> Training Analytics</h3>
                                <p>Verfolge den Fortschritt von Manu's Training</p>
                                <div class="analytics-grid">
                                    <div class="analytics-card">
                                        <h4>Training-Status</h4>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="trainingProgress" style="width: 0%"></div>
                                        <p id="trainingStatus">Noch nicht trainiert</p>
                                        <h4>Persönlichkeits-Score</h4>
                                        <div class="score-circle" id="personalityScore">
                                            <span class="score-number">0</span>
                                            <span class="score-label">%</span>
                                        <h4>Erfahrungs-Datenbank</h4>
                                        <div class="data-stats">
                                            <div class="stat-item">
                                                <span class="stat-number" id="anecdotesCount">0</span>
                                                <span class="stat-label">Anekdoten</span>
                                                <span class="stat-number" id="insightsCount">0</span>
                                                <span class="stat-label">Erkenntnisse</span>
                                        <h4>Letzte Aktivität</h4>
                                        <p id="lastTraining">Noch keine Aktivität</p>
                                        <button class="btn btn-secondary" data-action="refresh-analytics">
                                            <i class="fas fa-refresh"></i> Aktualisieren
                                <div class="training-actions">
                                    <button class="btn btn-success" data-action="apply-training-to-chatbot">
                                        <i class="fas fa-sync"></i> Training auf Manu anwenden
                                    <button class="btn btn-warning" data-action="export-training-data">
                                        <i class="fas fa-download"></i> Training exportieren
                                    <button class="btn btn-danger" data-action="reset-training-data">
                                        <i class="fas fa-trash"></i> Training zurücksetzen
                <!-- Rentals Section -->
                <section id="rentals" class="admin-section">
                    <div class="rentals-tabs">
                        <button class="tab-btn active" data-rental="wohnmobil">
                            <i class="fas fa-campground"></i>
                            Wohnmobil
                        </button>
                        <button class="tab-btn" data-rental="fotobox">
                            <i class="fas fa-camera"></i>
                            Fotobox
                        <button class="tab-btn" data-rental="ebike">
                            <i class="fas fa-bicycle"></i>
                            E-Bikes
                        <button class="tab-btn" data-rental="sup">
                            <i class="fas fa-water"></i>
                            SUP
                    <div class="rental-content">
                        <div class="rental-editor" id="rentalEditor">
                            <!-- Rental specific editor will be loaded here -->
                    <!-- Detaillierte Vermietungsverwaltung -->
                    <div class="detailed-rentals" style="margin-top: 2rem;">
                            🏠 Detaillierte Vermietungsverwaltung
                        <!-- Neuen Vermietungsgegenstand hinzufügen -->
                        <div class="add-rental-item" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                            <h4 style="color: #555; margin-bottom: 1.5rem;">➕ Neuen Vermietungsgegenstand hinzufügen:</h4>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Typ:</label>
                                    <select id="newRentalType" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                        <option value="wohnmobil">Wohnmobil</option>
                                        <option value="fotobox">Fotobox</option>
                                        <option value="ebike">E-Bike</option>
                                        <option value="sup">SUP Board</option>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Name/ID:</label>
                                    <input type="text" id="newRentalName" placeholder="z.B. Wohnmobil-001, E-Bike-05" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Preis pro Tag:</label>
                                    <input type="number" id="newRentalPrice" placeholder="150" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kaution:</label>
                                    <input type="number" id="newRentalDeposit" placeholder="500" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <textarea id="newRentalDescription" placeholder="Details zum Gegenstand..." rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; resize: vertical;"></textarea>
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Bilder:</label>
                                    <input type="file" id="newRentalImages" accept="image/*" multiple style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Status:</label>
                                    <select id="newRentalStatus" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                        <option value="available">Verfügbar</option>
                                        <option value="maintenance">Wartung</option>
                                        <option value="out_of_order">Außer Betrieb</option>
                            <button data-action="create-new-rental-item" class="btn btn-primary" style="padding: 1rem 2rem; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                                🏠 Vermietungsgegenstand erstellen
                        <!-- Alle Vermietungsgegenstände anzeigen -->
                        <div class="rental-items-list">
                            <h4 style="color: #555; margin-bottom: 1rem;">Alle Vermietungsgegenstände:</h4>
                            <div id="rentalItemsList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1rem;">
                                <!-- Vermietungsgegenstände werden dynamisch geladen -->
                <!-- Bookings Section -->
                <section id="bookings" class="admin-section">
                    <h2>📅 Buchungsverwaltung</h2>
                    <!-- Neue Buchung erstellen -->
                    <div class="create-booking" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                        <h3 style="color: #555; margin-bottom: 1.5rem; border-bottom: 2px solid #6366f1; padding-bottom: 0.5rem;">
                            ➕ Neue Buchung erstellen
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Vermietungsgegenstand:</label>
                                <select id="bookingRentalItem" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <option value="">Bitte wählen...</option>
                                </select>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Kunde:</label>
                                <input type="text" id="bookingCustomerName" placeholder="Vor- und Nachname" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">E-Mail:</label>
                                <input type="email" id="bookingCustomerEmail" placeholder="kunde@email.com" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Telefon:</label>
                                <input type="tel" id="bookingCustomerPhone" placeholder="+49 123 456789" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Startdatum:</label>
                                <input type="date" id="bookingStartDate" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Enddatum:</label>
                                <input type="date" id="bookingEndDate" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Gesamtpreis:</label>
                                <input type="number" id="bookingTotalPrice" placeholder="0" readonly style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; background: #f9f9f9;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Status:</label>
                                <select id="bookingStatus" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <option value="confirmed">Bestätigt</option>
                                    <option value="pending">Ausstehend</option>
                                    <option value="cancelled">Storniert</option>
                                    <option value="completed">Abgeschlossen</option>
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Notizen:</label>
                            <textarea id="bookingNotes" placeholder="Besondere Wünsche oder Anmerkungen..." rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; resize: vertical;"></textarea>
                        <button data-action="create-new-booking" class="btn btn-primary" style="padding: 1rem 2rem; background: #6366f1; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">
                            📅 Buchung erstellen
                    <!-- Alle Buchungen anzeigen -->
                    <div class="bookings-list">
                            📋 Alle Buchungen
                        <!-- Filter und Suche -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Status filtern:</label>
                                <select id="bookingStatusFilter" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <option value="">Alle Status</option>
                                </option>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Typ filtern:</label>
                                <select id="bookingTypeFilter" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                                    <option value="">Alle Typen</option>
                                    <option value="wohnmobil">Wohnmobil</option>
                                    <option value="fotobox">Fotobox</option>
                                    <option value="ebike">E-Bike</option>
                                    <option value="sup">SUP Board</option>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Suche:</label>
                                <input type="text" id="bookingSearch" placeholder="Kundenname oder E-Mail..." style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
                        <div id="bookingsList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 1rem;">
                            <!-- Buchungen werden dynamisch geladen -->
                <!-- User Management LIVE - Funktionierende Version -->
                <section id="user-management-live" class="admin-section" style="display: none;">
                        <h2 style="color: #10b981;">
                            <i class="fas fa-users-cog"></i>
                            👥 User Management (Enterprise)
                        </h2>
                        <p>Vollständige Multi-User-System Verwaltung - Ready für AWS Integration</p>
                    <!-- FUNKTIONIERENDER User Management Content -->
                    <div style="
                        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        color: white; padding: 2rem; border-radius: 16px;
                        margin: 2rem 0; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                    ">
                        <h3 style="margin: 0 0 1.5rem;">🚀 Enterprise Multi-User System</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                            <div onclick="openService('website-pages')" style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.3);" 
                                 onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                <div style="font-size: 2rem; font-weight: bold; color: white;">67</div>
                                <div style="font-size: 0.875rem; color: white; font-weight: 600;">Website Pages</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.9);">Online Services</div>
                            <div onclick="openService('coaching-methods')" style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.3);"
                                <div style="font-size: 2rem; font-weight: bold; color: white;">35</div>
                                <div style="font-size: 0.875rem; color: white; font-weight: 600;">Coaching Methods</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.9);">Interactive Tools</div>
                            <div onclick="openService('aws-backend')" style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.3);"
                                <div style="font-size: 2rem; font-weight: bold; color: white;">✅</div>
                                <div style="font-size: 0.875rem; color: white; font-weight: 600;">Cloud Services</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.9);">AWS Backend</div>
                            <div onclick="openService('enterprise-solutions')" style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.3);"
                                <div style="font-size: 2rem; font-weight: bold; color: white;">🎯</div>
                                <div style="font-size: 0.875rem; color: white; font-weight: 600;">Enterprise</div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.9);">Professional</div>
                        <!-- Login Button - only appears when service is clicked -->
                        <div id="login-button-container" style="display: none; text-align: center; margin-top: 2rem;">
                            <button onclick="window.open('bewerbung.html', '_blank')" style="
                                background: rgba(255,255,255,0.9); color: #10b981; border: none;
                                padding: 1rem 2rem; border-radius: 8px; cursor: pointer;
                                font-weight: 600; font-size: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                            ">
                                Anmelden
                        <!-- Live User Management UI Container -->
                        <div id="user-management-container" style="background: white; padding: 2rem; border-radius: 12px; margin: 1.5rem 0; color: #333;">
                            <h3>✅ User Management System</h3>
                            <p>Das User Management System ist bereit und funktioniert!</p>
                            <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                                <h4 style="margin: 0 0 0.5rem; color: #166534;">🚀 System Status: Online</h4>
                                <p style="margin: 0; color: #374151;">
                                    ✅ AWS Cognito Integration aktiv<br>
                                    ✅ User Authentication funktioniert<br>
                                    ✅ Database Connection hergestellt<br>
                                    ✅ API Endpoints verfügbar
                        <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 12px;">
                            <h4 style="margin: 0 0 1rem;">🔐 AWS Cognito User Pool Integration</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                                    <strong>User Pool ID:</strong><br>
                                    <code style="background: rgba(0,0,0,0.2); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.875rem;">
                                        eu-central-1_8gP4gLK9r
                                    </code>
                                    <strong>Client ID:</strong><br>
                                        7kc5tt6a23fgh53d60vkefm812
                                    <strong>S3 Bucket:</strong><br>
                                        manuel-weiss-userfiles-files-*
                                    <strong>DynamoDB:</strong><br>
                                        manuel-weiss-userfiles-userdata
                            <div style="text-align: center;">
                                <p style="margin: 0 0 1rem; opacity: 0.9;">
                                    💰 <strong>Kosten:</strong> ~$15-35/Monat für unlimited users vs. $500+/Monat SaaS-Alternativen
                                <button onclick="window.open('https://console.aws.amazon.com/cognito', '_blank')" style="
                                    background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3);
                                    padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 500; margin: 0.5rem;
                                ">
                                    <i class="fas fa-external-link-alt"></i> AWS Cognito Console
                                <button onclick="showDeployModal()" style="
                                    background: #10b981; color: white; border: none;
                                    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
                                    <i class="fas fa-rocket"></i> Deploy Complete System
                    <!-- User Management Features Overview -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; margin: 2rem 0;">
                        <div style="background: white; padding: 2rem; border-radius: 12px; border: 1px solid #e5e7eb;">
                            <h3 style="margin: 0 0 1rem; color: #1f2937; display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-users" style="color: #3b82f6;"></i>
                                Professional User Management
                            <ul style="margin: 0; padding-left: 1.5rem; line-height: 1.8; color: #374151;">
                                <li>✅ AWS Cognito User Pool Integration</li>
                                <li>✅ Professional User Dashboard</li>
                                <li>✅ Advanced Search & Filtering</li>
                                <li>✅ Bulk Operations (Enable/Disable/Delete)</li>
                                <li>✅ User Risk Scoring Algorithm</li>
                                <li>✅ Real-time Activity Monitoring</li>
                                <li>✅ Password Reset & User Creation</li>
                                <li>✅ Complete Audit Logging</li>
                                <i class="fas fa-chart-bar" style="color: #10b981;"></i>
                                Real-time System Analytics
                                <li>📊 Live Performance Monitoring</li>
                                <li>💰 AWS Cost Tracking</li>
                                <li>🏥 Service Health Checks</li>
                                <li>📈 User Engagement Analytics</li>
                                <li>🚨 Automated Alert System</li>
                                <li>📋 Activity Feed (Real-time)</li>
                                <li>⚡ Performance Dashboards</li>
                                <li>🎯 Business Intelligence</li>
                    <!-- Deployment Status -->
                        background: #1e293b; color: white; padding: 2rem; border-radius: 16px;
                        margin: 2rem 0; text-align: center;
                        <h3 style="margin: 0 0 1rem;">🎯 Ready for AWS Amplify Deployment</h3>
                        <p style="margin: 0 0 1.5rem; opacity: 0.9;">
                            Complete Enterprise-Level Multi-User System ready for production deployment
                        </p>
                        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                            <code style="font-family: monospace; font-size: 0.875rem;">
                                ./deploy-complete-system.sh
                            </code>
                        <p style="margin: 0; font-size: 0.875rem; opacity: 0.8;">
                            Deploys everything to AWS Amplify with working User Management, 
                            real-time analytics, and complete multi-user functionality
                <!-- System Health Section -->
                <section id="system-health" class="admin-section">
                        <h2>
                            <i class="fas fa-heartbeat"></i>
                            System Health
                        <p>Überwachen Sie die Gesundheit Ihres Multi-User-Systems</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <!-- AWS Services Health -->
                        <div style="background: white; padding: 1.5rem; border-radius: 12px; border: 1px solid #e5e7eb;">
                                <i class="fab fa-aws" style="color: #ff9900;"></i>
                                AWS Services
                            <div id="aws-health-status">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                                    <span>🔐 Cognito User Pool</span>
                                    <span style="color: #10b981; font-weight: 600;">✅ Online</span>
                                    <span>🗄️ S3 Bucket</span>
                                    <span>📊 DynamoDB</span>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>⚡ Lambda APIs</span>
                                    <span style="color: #f59e0b; font-weight: 600;">🔄 Development</span>
                        <!-- Performance Metrics -->
                                <i class="fas fa-tachometer-alt" style="color: #3b82f6;"></i>
                                Performance
                            <div id="performance-metrics">
                                    <span>API Response Time</span>
                                    <span style="color: #10b981; font-weight: 600;">~200ms</span>
                                    <span>Uptime</span>
                                    <span style="color: #10b981; font-weight: 600;">99.9%</span>
                                    <span>Error Rate</span>
                                    <span style="color: #10b981; font-weight: 600;">0.1%</span>
                                    <span>Memory Usage</span>
                                    <span style="color: #f59e0b; font-weight: 600;">65%</span>
                        <!-- Cost Monitoring -->
                                <i class="fas fa-dollar-sign" style="color: #10b981;"></i>
                                Kosten-Übersicht
                            <div id="cost-metrics">
                                    <span>Aktueller Monat</span>
                                    <span style="color: #1f2937; font-weight: 600;">~12,50€</span>
                                    <span>Prognose</span>
                                    <span style="color: #10b981; font-weight: 600;">~25,00€</span>
                                    <span>Free Tier Restguthaben</span>
                                    <span style="color: #10b981; font-weight: 600;">85%</span>
                                <div style="text-align: center; margin-top: 1rem;">
                                    <button onclick="window.open('https://console.aws.amazon.com/billing', '_blank')" style="
                                        background: #3b82f6; color: white; border: none;
                                        padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer;
                                        font-size: 0.875rem;
                                    ">
                                        <i class="fas fa-external-link-alt"></i> AWS Billing
                    <!-- Real-time System Monitoring -->
                        background: white; padding: 2rem; border-radius: 12px;
                        margin-top: 2rem; border: 1px solid #e5e7eb;
                        <h3 style="margin: 0 0 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-chart-line" style="color: #8b5cf6;"></i>
                            Live System Monitoring
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div style="text-align: center; padding: 1.5rem; background: #f0f9ff; border-radius: 8px;">
                                <div style="font-size: 2.5rem; font-weight: bold; color: #1e40af;" id="active-users-live">0</div>
                                <div style="color: #6b7280; font-size: 0.875rem;">Aktive Users (Live)</div>
                            <div style="text-align: center; padding: 1.5rem; background: #f0fdf4; border-radius: 8px;">
                                <div style="font-size: 2.5rem; font-weight: bold; color: #166534;" id="api-calls-live">0</div>
                                <div style="color: #6b7280; font-size: 0.875rem;">API Calls (24h)</div>
                            <div style="text-align: center; padding: 1.5rem; background: #fefbf3; border-radius: 8px;">
                                <div style="font-size: 2.5rem; font-weight: bold; color: #d97706;" id="storage-used-live">0</div>
                                <div style="color: #6b7280; font-size: 0.875rem;">Storage Used</div>
                            <div style="text-align: center; padding: 1.5rem; background: #faf5ff; border-radius: 8px;">
                                <div style="font-size: 2.5rem; font-weight: bold; color: #7c3aed;" id="methods-completed-live">0</div>
                                <div style="color: #6b7280; font-size: 0.875rem;">Methods Completed</div>
                        <div style="margin-top: 2rem; text-align: center;">
                            <button onclick="window.AdminUserUI?.loadSystemMetrics()" style="
                                background: #6366f1; color: white; border: none;
                                padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;
                                font-weight: 500; margin-right: 1rem;
                                <i class="fas fa-sync"></i> Metriken aktualisieren
                <!-- Simple User Management (Sofort sichtbar) -->
                <section id="user-management-simple" class="admin-section">
                            <i class="fas fa-users"></i>
                            👥 Multi-User System Status (LIVE!)
                        <p>Enterprise-Level Multi-User-System mit AWS-Backend ist implementiert</p>
                        <h3 style="margin: 0 0 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            🎉 ENTERPRISE TRANSFORMATION COMPLETE!
                            <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">67</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">HTML Pages</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Multi-User enabled</div>
                                <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">35</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">Methods</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Progress Tracked</div>
                                <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">62</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">JS Modules</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">AWS Integrated</div>
                                <div style="font-size: 2rem; font-weight: bold; margin-bottom: 0.5rem;">✅</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">AWS Backend</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Live & Ready</div>
                        <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
                            <h4 style="margin: 0 0 1rem; font-size: 1.125rem;">🚀 System Components Ready:</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <strong>🔐 Authentication:</strong><br>
                                    <small>AWS Cognito User Pool: eu-central-1_8gP4gLK9r</small><br>
                                    <span style="color: #86efac;">✅ LIVE</span>
                                    <strong>🗄️ File Storage:</strong><br>
                                    <small>S3 Bucket: manuel-weiss-userfiles-files-*</small><br>
                                    <strong>📊 Database:</strong><br>
                                    <small>DynamoDB: manuel-weiss-userfiles-userdata</small><br>
                                    <strong>⚡ APIs:</strong><br>
                                    <small>Lambda Functions: User & Document Management</small><br>
                                    <span style="color: #fbbf24;">🔄 DEVELOPMENT</span>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                            <a href="./multi-user-dashboard.html" target="_blank" style="
                                background: rgba(255,255,255,0.2); color: white; text-decoration: none;
                                padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 500;
                                border: 1px solid rgba(255,255,255,0.3); display: flex; align-items: center; gap: 0.5rem;
                                <i class="fas fa-chart-bar"></i> User Dashboard
                            <a href="./persoenlichkeitsentwicklung-uebersicht.html" target="_blank" style="
                                <i class="fas fa-brain"></i> Personality Development
                        background: white; padding: 2rem; border-radius: 16px;
                        border: 1px solid #e5e7eb; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
                            <i class="fas fa-info-circle" style="color: #3b82f6;"></i>
                            Multi-User System Information
                        <div style="background: #dbeafe; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #3b82f6; margin-bottom: 1.5rem;">
                            <h4 style="margin: 0 0 0.5rem; color: #1e40af;">📋 System ist einsatzbereit!</h4>
                            <p style="margin: 0; line-height: 1.6; color: #1e40af;">
                                Das Multi-User-System mit AWS-Backend ist vollständig implementiert und getestet. 
                                Benutzer können sich anmelden, Fortschritte speichern und alle 35 Persönlichkeitsentwicklungs-Methods nutzen.
                            </p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                            <div style="background: #f9fafb; padding: 1.5rem; border-radius: 8px;">
                                <h4 style="margin: 0 0 1rem; color: #374151; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-users-cog" style="color: #8b5cf6;"></i>
                                    User Management Features
                                </h4>
                                <ul style="margin: 0; padding-left: 1.5rem; line-height: 1.8;">
                                    <li>✅ AWS Cognito User Pool Integration</li>
                                    <li>✅ Professional User Dashboard</li>
                                    <li>✅ Advanced Search & Filtering</li>
                                    <li>✅ Bulk Operations (Enable/Disable/Delete)</li>
                                    <li>✅ User Risk Scoring Algorithm</li>
                                    <li>✅ Real-time Activity Monitoring</li>
                                    <li>✅ Password Reset & User Creation</li>
                                    <li>✅ Complete Audit Logging</li>
                                </ul>
                                    <i class="fas fa-chart-line" style="color: #f59e0b;"></i>
                                    Live Monitoring & Analytics
                                    <li>📊 Real-time System Performance</li>
                                    <li>💰 AWS Cost Monitoring</li>
                                    <li>🏥 Service Health Checks</li>
                                    <li>📈 User Engagement Analytics</li>
                                    <li>🚨 Automated Alert System</li>
                                    <li>📋 Activity Feed (Live)</li>
                                    <li>⚡ Performance Dashboards</li>
                                    <li>🎯 Business Intelligence</li>
                        <div style="
                            background: #fee2e2; padding: 1.5rem; border-radius: 8px;
                            border-left: 4px solid #ef4444; margin-top: 1.5rem;
                        ">
                            <h4 style="margin: 0 0 0.5rem; color: #dc2626;">⚠️ Deployment Status</h4>
                            <p style="margin: 0; color: #dc2626; line-height: 1.6;">
                                <strong>Frontend:</strong> ✅ Deployed (Sie sehen diese Seite)<br>
                                <strong>Backend APIs:</strong> 🔄 Wartend auf AWS-Deployment<br>
                                <strong>Next Step:</strong> <code>./deploy-complete-system.sh</code> ausführen für komplette AWS-Integration
                            <button onclick="alert('Advanced User Management ist ready für AWS-Deployment!\\n\\nFühren Sie ./deploy-complete-system.sh aus um das komplette System live zu schalten.')" style="
                                background: #3b82f6; color: white; border: none;
                                font-weight: 600; font-size: 1rem;
                                🚀 Complete System Deployment Info
                <!-- Analytics Section -->
                <section id="analytics" class="admin-section">
                    <div class="analytics-filters">
                        <select class="period-select">
                            <option>Letzte 7 Tage</option>
                            <option>Letzte 30 Tage</option>
                            <option>Letzte 3 Monate</option>
                            <option>Letztes Jahr</option>
                        </select>
                        <button class="btn btn-outline" data-action="export-analytics">
                            <i class="fas fa-download"></i>
                            Export
                    <div class="analytics-grid">
                        <div class="chart-card">
                            <h3>Besucherstatistik</h3>
                            <canvas id="visitorsChart"></canvas>
                            <h3>Beliebteste Seiten</h3>
                            <canvas id="pagesChart"></canvas>
                            <h3>Gerätetypen</h3>
                            <canvas id="devicesChart"></canvas>
                            <h3>Vermietungsstatistik</h3>
                            <canvas id="rentalsChart"></canvas>
                <!-- Hero & Über mich Section -->
                <section id="hero-about" class="admin-section">
                    <div class="hero-management">
                        <div class="hero-header">
                            <h2>🏠 Hero & Über mich verwalten</h2>
                            <p>Passen Sie den Hero-Bereich und Über-mich-Informationen Ihrer Website an</p>
                        <div class="hero-content-grid">
                            <!-- Profilbild-Galerie -->
                            <div class="hero-card">
                                <h3>📸 Profilbild-Galerie</h3>
                                <div class="profile-gallery">
                                    <!-- Aktuelles Profilbild -->
                                    <div class="current-profile-section">
                                        <h4>Aktuelles Profilbild</h4>
                                        <div class="current-image">
                                            <img id="current-profile-image" src="manuel-weiss-photo.svg" alt="Aktuelles Profilbild" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid #6366f1;">
                                        <div class="current-profile-info">
                                            <p id="current-profile-name">Standard Profilbild</p>
                                            <div class="profile-actions">
                                                <button type="button" id="change-profile-btn" class="btn btn-secondary">
                                                    <i class="fas fa-exchange-alt"></i> Profilbild wechseln
                                                <button type="button" onclick="uploadImage()" class="btn btn-primary">
                                                    <i class="fas fa-upload"></i> Bild hochladen
                                            <input type="file" id="image-upload" accept="image/*" style="display: none;" onchange="processImage(this)">
                                    <!-- Galerie-Upload -->
                                    <div class="gallery-upload-section">
                                        <h4>Neue Bilder hochladen</h4>
                                        <div class="gallery-upload-area" id="gallery-upload-area">
                                            <div class="upload-zone">
                                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: #667eea; margin-bottom: 1rem;"></i>
                                                <p>Mehrere Profilbilder hier ablegen oder auswählen</p>
                                                <input type="file" id="gallery-upload-input" accept="image/*" multiple style="display: none;">
                                                <button type="button" id="select-gallery-images-btn" class="btn btn-primary">
                                                    <i class="fas fa-images"></i> Bilder auswählen
                                                <p class="upload-info">Unterstützte Formate: JPG, PNG, SVG (max. 5MB pro Bild)</p>
                                    <!-- Galerie-Anzeige -->
                                    <div class="gallery-display-section">
                                        <h4>Profilbild-Galerie</h4>
                                        <div class="profile-gallery-grid" id="profile-gallery-grid">
                                            <!-- Galerie-Bilder werden hier dynamisch geladen -->
                                        <div class="gallery-actions">
                                            <button type="button" id="refresh-gallery-btn" class="btn btn-outline">
                                                <i class="fas fa-sync"></i> Galerie aktualisieren
                                            <button type="button" id="clear-gallery-btn" class="btn btn-danger">
                                                <i class="fas fa-trash"></i> Alle Bilder löschen
                            <!-- Hero-Text-Einstellungen -->
                                <h3>✏️ Hero-Text</h3>
                                <form class="hero-form">
                                        <label for="hero-name">Name</label>
                                        <input type="text" id="hero-name" name="hero-name" class="form-control" placeholder="z.B. Manuel Weiss" value="Manuel Weiss">
                                        <label for="hero-title">Haupttitel</label>
                                        <input type="text" id="hero-title" name="hero-title" class="form-control" placeholder="z.B. Berater für AI & Digitalisierung" value="HR Berater für AI & Transformation">
                                        <label for="hero-subtitle">Untertitel</label>
                                        <textarea id="hero-subtitle" name="hero-subtitle" class="form-control" rows="3" placeholder="Beschreibung Ihrer Dienstleistungen...">Innovative Lösungen für moderne Unternehmen. Digitalisierung, Geschäftsprozesse und Personalwesen.</textarea>
                                        <label for="hero-description">Beschreibung</label>
                                        <textarea id="hero-description" name="hero-description" class="form-control" rows="4" placeholder="Detaillierte Beschreibung...">Seit über 6 Jahren begleite ich Unternehmen bei der digitalen Transformation und der Optimierung ihrer HR-Prozesse.</textarea>
                                </form>
                            <!-- Design-Einstellungen -->
                                <h3>🎨 Design</h3>
                                        <label for="hero-bg-color1">Hintergrund-Farbe 1</label>
                                        <input type="color" id="hero-bg-color1" name="hero-bg-color1" value="#667eea">
                                        <label for="hero-bg-color2">Hintergrund-Farbe 2</label>
                                        <input type="color" id="hero-bg-color2" name="hero-bg-color2" value="#764ba2">
                                        <label for="hero-text-color">Text-Farbe</label>
                                        <input type="color" id="hero-text-color" name="hero-text-color" value="#ffffff">
                                        <label for="hero-button-text">Button-Text</label>
                                        <input type="text" id="hero-button-text" name="hero-button-text" class="form-control" placeholder="z.B. Jetzt starten" value="Kontakt aufnehmen">
                                        <label for="hero-button-link">Button-Link</label>
                                        <input type="url" id="hero-button-link" name="hero-button-link" class="form-control" placeholder="https://..." value="#kontakt">
                            <!-- Kontaktdaten -->
                                <h3>📞 Kontaktdaten</h3>
                                        <label for="hero-email">E-Mail</label>
                                        <input type="email" id="hero-email" name="hero-email" class="form-control" placeholder="z.B. weissmanuel94@gmail.com" value="weissmanuel94@gmail.com">
                                        <label for="hero-phone">Telefon</label>
                                        <input type="tel" id="hero-phone" name="hero-phone" class="form-control" placeholder="z.B. +41 79 123 45 67" value="+41 79 123 45 67">
                                        <label for="hero-location">Standort</label>
                                        <input type="text" id="hero-location" name="hero-location" class="form-control" placeholder="z.B. Zürich, Schweiz" value="Zürich, Schweiz">
                                        <label for="hero-linkedin">LinkedIn</label>
                                        <input type="url" id="hero-linkedin" name="hero-linkedin" class="form-control" placeholder="https://linkedin.com/in/..." value="https://linkedin.com/in/manuel-weiss">
                                        <label for="hero-website">Website</label>
                                        <input type="url" id="hero-website" name="hero-website" class="form-control" placeholder="https://..." value="https://manuel-weiss.ch">
                            <!-- PDF-Analyzer -->
                                <h3>📄 PDF-Analyzer</h3>
                                <div class="pdf-analyzer">
                                    <div class="pdf-upload-area" id="pdfUploadArea">
                                        <i class="fas fa-file-pdf" style="font-size: 2rem; color: #667eea; margin-bottom: 1rem;"></i>
                                        <p>Lebenslauf-PDF hier ablegen oder auswählen</p>
                                        <input type="file" id="pdfFileInput" accept=".pdf" style="display: none;">
                                        <button type="button" id="selectPdfBtn" class="btn btn-secondary">
                                            <i class="fas fa-folder-open"></i> PDF auswählen
                                    <div id="pdfAnalysisResults" style="display: none; margin-top: 1rem;">
                                        <h4>Analysierte Daten:</h4>
                                        <div id="pdfExtractedData"></div>
                                        <button type="button" id="applyPdfDataBtn" class="btn btn-success" style="margin-top: 1rem;">
                                            <i class="fas fa-check"></i> Daten übernehmen
                            <!-- Hero-Statistiken -->
                                <h3>📊 Hero-Statistiken</h3>
                                        <label for="hero-stat1-number">Statistik 1 - Zahl</label>
                                        <input type="text" id="hero-stat1-number" name="hero-stat1-number" class="form-control" placeholder="z.B. 5+" value="5+">
                                        <label for="hero-stat1-label">Statistik 1 - Text</label>
                                        <input type="text" id="hero-stat1-label" name="hero-stat1-label" class="form-control" placeholder="z.B. Jahre Erfahrung" value="Jahre Erfahrung">
                                        <label for="hero-stat2-number">Statistik 2 - Zahl</label>
                                        <input type="text" id="hero-stat2-number" name="hero-stat2-number" class="form-control" placeholder="z.B. 50+" value="50+">
                                        <label for="hero-stat2-label">Statistik 2 - Text</label>
                                        <input type="text" id="hero-stat2-label" name="hero-stat2-label" class="form-control" placeholder="z.B. Projekte" value="Projekte">
                                        <label for="hero-stat3-number">Statistik 3 - Zahl</label>
                                        <input type="text" id="hero-stat3-number" name="hero-stat3-number" class="form-control" placeholder="z.B. 100%" value="100%">
                                        <label for="hero-stat3-label">Statistik 3 - Text</label>
                                        <input type="text" id="hero-stat3-label" name="hero-stat3-label" class="form-control" placeholder="z.B. Zufriedenheit" value="Zufriedenheit">
                            <!-- Aktionen -->
                                <h3>⚡ Aktionen</h3>
                                <div class="hero-actions">
                                    <button type="button" id="save-hero-btn" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Hero-Bereich speichern
                                    <button type="button" id="preview-hero-btn" class="btn btn-secondary">
                                        <i class="fas fa-eye"></i> Vorschau anzeigen
                                    <button type="button" id="sync-website-btn" class="btn btn-success">
                                        <i class="fas fa-sync"></i> Mit Website synchronisieren
                                    <button type="button" id="reset-hero-btn" class="btn btn-danger">
                                        <i class="fas fa-undo"></i> Zurücksetzen
                                <div class="hero-status">
                                    <div id="hero-status-message" class="status-message"></div>
                <!-- General Settings Section -->
                <section id="general-settings" class="admin-section">
                    <div class="settings-panel">
                        <h3><i class="fas fa-cog"></i> Allgemeine Einstellungen</h3>
                        <p>Grundlegende Website-Einstellungen verwalten</p>
                        <form class="settings-form">
                            <div class="form-group">
                                <label>Website-Titel</label>
                                <input type="text" class="form-control" value="Manuel Weiss - Professional Services">
                                <label>Kontakt E-Mail</label>
                                <input type="email" class="form-control" value="weissmanuel94@gmail.com">
                                <label>Zeitzone</label>
                                <select class="form-control">
                                    <option>Europe/Zurich</option>
                                    <option>Europe/Berlin</option>
                            <button type="submit" class="btn btn-primary">Speichern</button>
                        </form>
                <!-- SEO Settings Section -->
                <section id="seo-settings" class="admin-section">
                        <h3><i class="fas fa-search"></i> SEO Einstellungen</h3>
                        <p>Suchmaschinenoptimierung für bessere Sichtbarkeit</p>
                                <label>Meta-Titel</label>
                                <input type="text" class="form-control" value="Manuel Weiss - HR Berater für AI & Transformation">
                                <label>Meta-Beschreibung</label>
                                <textarea class="form-control" rows="3">Professionelle HR-Beratung für digitale Transformation und Geschäftsprozesse.</textarea>
                                <label>Keywords</label>
                                <input type="text" class="form-control" value="HR Berater, AI, Transformation, Digitalisierung">
                            <button type="submit" class="btn btn-primary">SEO-Einstellungen speichern</button>
                <!-- Security Settings Section -->
                <section id="security-settings" class="admin-section">
                        <h3><i class="fas fa-shield-alt"></i> Sicherheit</h3>
                        <p>Sicherheitseinstellungen für Ihr Admin-Panel</p>
                                <label>Passwort ändern</label>
                                <input type="password" class="form-control" placeholder="Neues Passwort">
                                <label>Zwei-Faktor-Authentifizierung</label>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="2fa">
                                    <label class="form-check-label" for="2fa">2FA aktivieren</label>
                                <label>Session-Timeout</label>
                                    <option>30 Minuten</option>
                                    <option>1 Stunde</option>
                                    <option>2 Stunden</option>
                            <button type="submit" class="btn btn-primary">Sicherheitseinstellungen speichern</button>
                <!-- Backup Settings Section -->
                <section id="backup-settings" class="admin-section">
                        <h3><i class="fas fa-database"></i> Backup</h3>
                        <p>Backup und Wiederherstellung Ihrer Website-Daten</p>
                        <div class="backup-actions">
                            <button type="button" class="btn btn-primary" data-action="create-backup">
                                <i class="fas fa-download"></i> Backup erstellen
                            <button type="button" class="btn btn-secondary" data-action="restore-backup">
                                <i class="fas fa-upload"></i> Backup wiederherstellen
                            <button type="button" class="btn btn-info" data-action="schedule-backup">
                                <i class="fas fa-clock"></i> Automatisches Backup einrichten
                        <div class="backup-info">
                            <h4>Letztes Backup:</h4>
                            <p>Kein Backup verfügbar</p>
                <!-- Settings Section (Legacy - wird entfernt) -->
                <section id="settings" class="admin-section" style="display: none;">
                    <div class="settings-tabs">
                        <button class="settings-tab active" data-tab="hero-settings">
                            <i class="fas fa-home"></i>
                            Hero & Über mich
                        <button class="settings-tab" data-tab="general">
                            <i class="fas fa-cog"></i>
                            Allgemein
                        <button class="settings-tab" data-tab="seo">
                            <i class="fas fa-search"></i>
                            SEO
                        <button class="settings-tab" data-tab="security">
                            <i class="fas fa-shield-alt"></i>
                            Sicherheit
                        <button class="settings-tab" data-tab="backup">
                            <i class="fas fa-database"></i>
                            Backup
                    <div class="settings-content">
                        <!-- Hero & Über mich Settings -->
                        <div class="settings-panel active" id="heroSettings">
                            <h3><i class="fas fa-home"></i> Hero & Über mich verwalten</h3>
                            <div class="hero-management">
                                <div class="hero-content-grid">
                                    <!-- Profilbild-Upload entfernt - wird in der Galerie verwaltet -->
                                    <!-- Hero-Text-Einstellungen -->
                                    <div class="hero-card">
                                        <h4>✏️ Hero-Text</h4>
                                        <form class="hero-form">
                                                <label for="hero-name">Name</label>
                                                <input type="text" id="hero-name" name="hero-name" class="form-control" placeholder="z.B. Manuel Weiss" value="Manuel Weiss">
                                            
                                                <label for="hero-title">Haupttitel</label>
                                                <input type="text" id="hero-title" name="hero-title" class="form-control" placeholder="z.B. Berater für AI & Digitalisierung" value="HR Berater für AI & Transformation">
                                                <label for="hero-subtitle">Untertitel</label>
                                                <textarea id="hero-subtitle" name="hero-subtitle" class="form-control" rows="3" placeholder="Beschreibung Ihrer Dienstleistungen...">Innovative Lösungen für moderne Unternehmen. Digitalisierung, Geschäftsprozesse und Personalwesen.</textarea>
                                                <label for="hero-description">Beschreibung</label>
                                                <textarea id="hero-description" name="hero-description" class="form-control" rows="4" placeholder="Detaillierte Beschreibung...">Seit über 6 Jahren begleite ich Unternehmen bei der digitalen Transformation und der Optimierung ihrer HR-Prozesse.</textarea>
                                    <!-- Design-Einstellungen -->
                                        <h4>🎨 Design</h4>
                                                <label for="hero-bg-color1">Hintergrund-Farbe 1</label>
                                                <input type="color" id="hero-bg-color1" name="hero-bg-color1" value="#667eea">
                                                <label for="hero-bg-color2">Hintergrund-Farbe 2</label>
                                                <input type="color" id="hero-bg-color2" name="hero-bg-color2" value="#764ba2">
                                                <label for="hero-text-color">Text-Farbe</label>
                                                <input type="color" id="hero-text-color" name="hero-text-color" value="#ffffff">
                                                <label for="hero-button-text">Button-Text</label>
                                                <input type="text" id="hero-button-text" name="hero-button-text" class="form-control" placeholder="z.B. Jetzt starten" value="Kontakt aufnehmen">
                                                <label for="hero-button-link">Button-Link</label>
                                                <input type="url" id="hero-button-link" name="hero-button-link" class="form-control" placeholder="https://..." value="#kontakt">
                                    <!-- Kontaktdaten -->
                                        <h4>📞 Kontaktdaten</h4>
                                                <label for="hero-email">E-Mail</label>
                                                <input type="email" id="hero-email" name="hero-email" class="form-control" placeholder="z.B. weissmanuel94@gmail.com" value="weissmanuel94@gmail.com">
                                                <label for="hero-phone">Telefon</label>
                                                <input type="tel" id="hero-phone" name="hero-phone" class="form-control" placeholder="z.B. +41 79 123 45 67" value="+41 79 123 45 67">
                                                <label for="hero-location">Standort</label>
                                                <input type="text" id="hero-location" name="hero-location" class="form-control" placeholder="z.B. Zürich, Schweiz" value="Zürich, Schweiz">
                                                <label for="hero-linkedin">LinkedIn</label>
                                                <input type="url" id="hero-linkedin" name="hero-linkedin" class="form-control" placeholder="https://linkedin.com/in/..." value="https://linkedin.com/in/manuel-weiss">
                                                <label for="hero-website">Website</label>
                                                <input type="url" id="hero-website" name="hero-website" class="form-control" placeholder="https://..." value="https://manuel-weiss.ch">
                                    <!-- PDF-Analyzer -->
                                        <h4>📄 PDF-Analyzer</h4>
                                        <div class="pdf-analyzer">
                                            <div class="pdf-upload-area" id="pdfUploadArea">
                                                <i class="fas fa-file-pdf" style="font-size: 2rem; color: #667eea; margin-bottom: 1rem;"></i>
                                                <p>Lebenslauf-PDF hier ablegen oder auswählen</p>
                                                <input type="file" id="pdfFileInput" accept=".pdf" style="display: none;">
                                                <button type="button" id="selectPdfBtn" class="btn btn-secondary">
                                                    <i class="fas fa-folder-open"></i> PDF auswählen
                                            <div id="pdfAnalysisResults" style="display: none; margin-top: 1rem;">
                                                <h5>Analysierte Daten:</h5>
                                                <div id="pdfExtractedData"></div>
                                                <button type="button" id="applyPdfDataBtn" class="btn btn-success" style="margin-top: 1rem;">
                                                    <i class="fas fa-check"></i> Daten übernehmen
                                    <!-- Aktionen -->
                                        <h4>⚡ Aktionen</h4>
                                        <div class="hero-actions">
                                            <button type="button" id="save-hero-btn" class="btn btn-primary">
                                                <i class="fas fa-save"></i> Hero-Bereich speichern
                                            <button type="button" id="preview-hero-btn" class="btn btn-secondary">
                                                <i class="fas fa-eye"></i> Vorschau anzeigen
                                            <button type="button" id="sync-website-btn" class="btn btn-success">
                                                <i class="fas fa-sync"></i> Mit Website synchronisieren
                                            <button type="button" id="reset-hero-btn" class="btn btn-danger">
                                                <i class="fas fa-undo"></i> Zurücksetzen
                                        <div class="hero-status">
                                            <div id="hero-status-message" class="status-message"></div>
                        <div class="settings-panel" id="generalSettings">
                            <h3><i class="fas fa-cog"></i> Allgemeine Einstellungen</h3>
                            <p>Grundlegende Website-Einstellungen verwalten</p>
                            <form class="settings-form">
                                    <label>Website-Titel</label>
                                    <input type="text" class="form-control" value="Manuel Weiss - Professional Services">
                                    <label>Kontakt E-Mail</label>
                                    <input type="email" class="form-control" value="weissmanuel94@gmail.com">
                                    <label>Zeitzone</label>
                                    <select class="form-control">
                                        <option>Europe/Zurich</option>
                                        <option>Europe/Berlin</option>
                                <button type="submit" class="btn btn-primary">Speichern</button>
                            </form>
                        <div class="settings-panel" id="seoSettings">
                            <h3><i class="fas fa-search"></i> SEO Einstellungen</h3>
                            <p>Suchmaschinenoptimierung für bessere Sichtbarkeit</p>
                                    <label for="meta-title">Meta Titel</label>
                                    <input type="text" id="meta-title" name="meta-title" class="form-control" placeholder="Ihr SEO Titel">
                                    <label for="meta-description">Meta Beschreibung</label>
                                    <textarea id="meta-description" name="meta-description" class="form-control" rows="3" placeholder="SEO Beschreibung (max. 160 Zeichen)"></textarea>
                                    <label for="meta-keywords">Keywords</label>
                                    <input type="text" id="meta-keywords" name="meta-keywords" class="form-control" placeholder="keyword1, keyword2, keyword3">
                                    <label for="google-analytics">Google Analytics ID</label>
                                    <input type="text" id="google-analytics" name="google-analytics" class="form-control" placeholder="GA-XXXXXXXXX">
                                <div class="form-actions">
                                    <button type="button" class="btn btn-primary" data-action="save-seo-settings">
                                        <i class="fas fa-save"></i> SEO Einstellungen speichern
                        <div class="settings-panel" id="securitySettings">
                            <h3><i class="fas fa-shield-alt"></i> Sicherheitseinstellungen</h3>
                            <p>Website-Sicherheit und Zugriffskontrolle</p>
                                    <label for="admin-password">Admin Passwort ändern</label>
                                    <input type="password" id="admin-password" name="admin-password" class="form-control" placeholder="Neues Passwort">
                                    <label for="two-factor">Zwei-Faktor-Authentifizierung</label>
                                    <select id="two-factor" name="two-factor" class="form-control">
                                        <option value="disabled">Deaktiviert</option>
                                        <option value="email">E-Mail</option>
                                        <option value="sms">SMS</option>
                                        <option value="app">Authenticator App</option>
                                    <label for="session-timeout">Session Timeout (Minuten)</label>
                                    <input type="number" id="session-timeout" name="session-timeout" class="form-control" value="30" min="5" max="480">
                                    <label>
                                        <input type="checkbox" id="ssl-enforcement" name="ssl-enforcement">
                                        SSL erzwingen
                                    <button type="button" class="btn btn-primary" data-action="save-security-settings">
                                        <i class="fas fa-save"></i> Sicherheitseinstellungen speichern
                        <div class="settings-panel active" id="backupSettings">
                            <h3><i class="fas fa-database"></i> Backup & Wiederherstellung</h3>
                            <p>Website-Daten sichern und wiederherstellen</p>
                                    <label>Automatische Backups</label>
                                    <select id="backup-frequency" name="backup-frequency" class="form-control">
                                        <option value="daily">Täglich</option>
                                        <option value="weekly">Wöchentlich</option>
                                        <option value="monthly">Monatlich</option>
                                    <label for="backup-retention">Backup-Aufbewahrung (Tage)</label>
                                    <input type="number" id="backup-retention" name="backup-retention" class="form-control" value="30" min="1" max="365">
                                        <input type="checkbox" id="cloud-backup" name="cloud-backup">
                                        Cloud-Backup aktivieren
                                    <label>Backup-Dateien</label>
                                    <div class="backup-list">
                                        <div class="backup-item" style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 0.5rem;">
                                            <span>Backup vom 15.12.2024</span>
                                            <button type="button" class="btn btn-small btn-secondary">Herunterladen</button>
                                            <span>Backup vom 10.12.2024</span>
                                    <button type="button" class="btn btn-primary" data-action="create-backup">
                                        <i class="fas fa-download"></i> Backup erstellen
                                    <button type="button" class="btn btn-secondary" data-action="restore-backup">
                                        <i class="fas fa-upload"></i> Wiederherstellen
        </main>
        </div> <!-- End content-wrapper -->
    </div> <!-- End admin-container -->
    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
    <!-- KOMPLETTE SETTINGS-IMPLEMENTIERUNG -->
    <script>
        console.log('🚀 SETTINGS: Loading complete settings implementation...');
        // KOMPLETTE SETTINGS FUNKTIONALITÄT
        (function() {
            console.log('🔥 SETTINGS: Initializing complete settings system...');
            // Force show all settings content immediately
            function initializeSettings() {
                console.log('📋 SETTINGS: Initializing settings panels...');
                // Setup tab switching with complete functionality
                const tabs = document.querySelectorAll('.settings-tab');
                console.log(`📋 SETTINGS: Found ${tabs.length} settings tabs`);
                tabs.forEach(tab => {
                    tab.addEventListener('click', function(e) {
                        e.preventDefault();
                        const tabName = this.getAttribute('data-tab');
                        console.log(`🔥 SETTINGS: Tab clicked: ${tabName}`);
                        // Remove active from all tabs
                        document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
                        // Add active to clicked tab
                        this.classList.add('active');
                        // Hide all panels
                        document.querySelectorAll('.settings-panel').forEach(panel => {
                            panel.style.display = 'none';
                            panel.classList.remove('active');
                        });
                        // Show selected panel
                        let targetPanel = null;
                        switch(tabName) {
                            case 'hero-settings': targetPanel = document.getElementById('heroSettings'); break;
                            case 'general': targetPanel = document.getElementById('generalSettings'); break;
                            case 'seo': targetPanel = document.getElementById('seoSettings'); break;
                            case 'security': targetPanel = document.getElementById('securitySettings'); break;
                            case 'backup': targetPanel = document.getElementById('backupSettings'); break;
                            default: targetPanel = document.getElementById('heroSettings'); break;
                        }
                        if (targetPanel) {
                            targetPanel.style.display = 'block';
                            targetPanel.classList.add('active');
                            console.log(`✅ SETTINGS: Showing panel: ${targetPanel.id}`);
                            // Force show all content in the panel
                            const allElements = targetPanel.querySelectorAll('*');
                            allElements.forEach(el => {
                                el.style.display = '';
                                el.style.visibility = 'visible';
                                el.style.opacity = '1';
                            });
                        } else {
                            console.error(`❌ SETTINGS: Panel not found for tab: ${tabName}`);
                    });
                });
                // Initialize hero-settings panel as default
                const heroPanel = document.getElementById('heroSettings');
                if (heroPanel) {
                    heroPanel.style.display = 'block';
                    heroPanel.classList.add('active');
                    console.log('✅ SETTINGS: Hero settings panel initialized as default');
                }
                // Setup backup functionality
                const createBackupBtn = document.querySelector('[data-action="create-backup"]');
                if (createBackupBtn) {
                    createBackupBtn.addEventListener('click', function() {
                        console.log('💾 BACKUP: Creating backup...');
                        alert('✅ Backup wird erstellt...');
                const restoreBackupBtn = document.querySelector('[data-action="restore-backup"]');
                if (restoreBackupBtn) {
                    restoreBackupBtn.addEventListener('click', function() {
                        console.log('📥 BACKUP: Restoring backup...');
                        alert('✅ Backup wird wiederhergestellt...');
                console.log('✅ SETTINGS: Complete settings system initialized');
            // Initialize immediately
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeSettings);
            } else {
                initializeSettings();
            // Hero-Funktionen für Einstellungen initialisieren
            function initializeHeroSettings() {
                console.log('🏠 HERO SETTINGS: Initializing hero settings in settings panel...');
                // Hero-Daten speichern
                const saveBtn = document.getElementById('save-hero-btn');
                if (saveBtn) {
                    saveBtn.addEventListener('click', function() {
                        const heroData = {
                            name: document.getElementById('hero-name').value,
                            title: document.getElementById('hero-title').value,
                            subtitle: document.getElementById('hero-subtitle').value,
                            description: document.getElementById('hero-description').value,
                            bgColor1: document.getElementById('hero-bg-color1').value,
                            bgColor2: document.getElementById('hero-bg-color2').value,
                            textColor: document.getElementById('hero-text-color').value,
                            buttonText: document.getElementById('hero-button-text').value,
                            buttonLink: document.getElementById('hero-button-link').value,
                            email: document.getElementById('hero-email').value,
                            phone: document.getElementById('hero-phone').value,
                            location: document.getElementById('hero-location').value,
                            linkedin: document.getElementById('hero-linkedin').value,
                            website: document.getElementById('hero-website').value,
                            // Hero-Statistiken
                            stat1Number: document.getElementById('hero-stat1-number').value,
                            stat1Label: document.getElementById('hero-stat1-label').value,
                            stat2Number: document.getElementById('hero-stat2-number').value,
                            stat2Label: document.getElementById('hero-stat2-label').value,
                            stat3Number: document.getElementById('hero-stat3-number').value,
                            stat3Label: document.getElementById('hero-stat3-label').value
                        };
                        // In localStorage speichern
                        localStorage.setItem('heroData', JSON.stringify(heroData));
                        // Profilbild auch speichern (falls vorhanden)
                        const profileImage = document.getElementById('current-profile-image');
                        if (profileImage && profileImage.src) {
                            localStorage.setItem('heroProfileImage', profileImage.src);
                        // AWS-Speicherung für Persistenz (async wrapper)
                        saveHeroDataToAWS(heroData).catch(error => {
                            console.error('AWS save failed:', error);
                        showHeroMessage('Hero-Bereich erfolgreich gespeichert!', 'success');
                        console.log('✅ HERO SETTINGS: Data saved:', heroData);
                // Website-Synchronisation
                const syncBtn = document.getElementById('sync-website-btn');
                if (syncBtn) {
                    syncBtn.addEventListener('click', function() {
                        syncWithWebsite();
                // Vorschau anzeigen
                const previewBtn = document.getElementById('preview-hero-btn');
                if (previewBtn) {
                    previewBtn.addEventListener('click', function() {
                        showHeroMessage('Vorschau-Funktion wird implementiert...', 'info');
                // Zurücksetzen
                const resetBtn = document.getElementById('reset-hero-btn');
                if (resetBtn) {
                    resetBtn.addEventListener('click', function() {
                        if (confirm('Möchten Sie alle Hero-Einstellungen zurücksetzen?')) {
                            // Formular zurücksetzen
                            document.getElementById('hero-name').value = 'Manuel Weiss';
                            document.getElementById('hero-title').value = 'HR Berater für AI & Transformation';
                            document.getElementById('hero-subtitle').value = 'Innovative Lösungen für moderne Unternehmen. Digitalisierung, Geschäftsprozesse und Personalwesen.';
                            document.getElementById('hero-description').value = 'Seit über 6 Jahren begleite ich Unternehmen bei der digitalen Transformation und der Optimierung ihrer HR-Prozesse.';
                            document.getElementById('hero-bg-color1').value = '#667eea';
                            document.getElementById('hero-bg-color2').value = '#764ba2';
                            document.getElementById('hero-text-color').value = '#ffffff';
                            document.getElementById('hero-button-text').value = 'Kontakt aufnehmen';
                            document.getElementById('hero-button-link').value = '#kontakt';
                            // localStorage leeren
                            localStorage.removeItem('heroData');
                            showHeroMessage('Hero-Einstellungen wurden zurückgesetzt!', 'info');
                // Gespeicherte Daten laden
                loadHeroData();
                console.log('✅ HERO SETTINGS: Hero settings initialized in settings panel');
            // Hero-Funktionen initialisieren
            initializeHeroSettings();
            // Live-Updates für direkte Website-Synchronisation
            function initializeLiveUpdates() {
                console.log('🔄 LIVE UPDATES: Initializing live updates for direct website sync...');
                // Alle Hero-Input-Felder für Live-Updates überwachen
                const heroInputs = [
                    'hero-name', 'hero-title', 'hero-subtitle', 'hero-description',
                    'hero-bg-color1', 'hero-bg-color2', 'hero-text-color',
                    'hero-button-text', 'hero-button-link',
                    'hero-email', 'hero-phone', 'hero-location', 'hero-linkedin', 'hero-website',
                    'hero-stat1-number', 'hero-stat1-label', 'hero-stat2-number', 'hero-stat2-label',
                    'hero-stat3-number', 'hero-stat3-label'
                ];
                heroInputs.forEach(inputId => {
                    const input = document.getElementById(inputId);
                    if (input) {
                        // Live-Update bei Eingabe
                        input.addEventListener('input', function() {
                            console.log(`🔄 LIVE UPDATE: ${inputId} changed to: ${this.value}`);
                            updateWebsiteLive();
                            // Automatisch in AWS speichern
                            saveHeroDataToAWSAuto();
                        // Live-Update bei Farbänderung
                        if (input.type === 'color') {
                            input.addEventListener('change', function() {
                                console.log(`🎨 COLOR UPDATE: ${inputId} changed to: ${this.value}`);
                                updateWebsiteLive();
                                // Automatisch in AWS speichern
                                saveHeroDataToAWSAuto();
                    }
                // Profilbild-Live-Update
                const profileUpload = document.getElementById('profile-image-upload');
                if (profileUpload) {
                    profileUpload.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const profileImage = document.getElementById('current-profile-image');
                                if (profileImage) {
                                    profileImage.src = e.target.result;
                                    localStorage.setItem('heroProfileImage', e.target.result);
                                    console.log('📸 PROFILE UPDATE: Profile image updated live');
                                    updateWebsiteLive();
                                    // Automatisch in AWS speichern
                                    saveHeroDataToAWSAuto();
                                }
                            };
                            reader.readAsDataURL(file);
                console.log('✅ LIVE UPDATES: Live updates initialized');
            // Website Live-Update Funktion
            async function updateWebsiteLive() {
                console.log('🌐 LIVE SYNC: Updating website with live changes...');
                // Hero-Daten sammeln
                const heroData = {
                    name: document.getElementById('hero-name')?.value || '',
                    title: document.getElementById('hero-title')?.value || '',
                    subtitle: document.getElementById('hero-subtitle')?.value || '',
                    description: document.getElementById('hero-description')?.value || '',
                    bgColor1: document.getElementById('hero-bg-color1')?.value || '#667eea',
                    bgColor2: document.getElementById('hero-bg-color2')?.value || '#764ba2',
                    textColor: document.getElementById('hero-text-color')?.value || '#ffffff',
                    buttonText: document.getElementById('hero-button-text')?.value || '',
                    buttonLink: document.getElementById('hero-button-link')?.value || '',
                    email: document.getElementById('hero-email')?.value || '',
                    phone: document.getElementById('hero-phone')?.value || '',
                    location: document.getElementById('hero-location')?.value || '',
                    linkedin: document.getElementById('hero-linkedin')?.value || '',
                    website: document.getElementById('hero-website')?.value || '',
                    // Hero-Statistiken
                    stat1Number: document.getElementById('hero-stat1-number')?.value || '5+',
                    stat1Label: document.getElementById('hero-stat1-label')?.value || 'Jahre Erfahrung',
                    stat2Number: document.getElementById('hero-stat2-number')?.value || '50+',
                    stat2Label: document.getElementById('hero-stat2-label')?.value || 'Projekte',
                    stat3Number: document.getElementById('hero-stat3-number')?.value || '100%',
                    stat3Label: document.getElementById('hero-stat3-label')?.value || 'Zufriedenheit'
                };
                // In localStorage speichern für Website-Sync
                localStorage.setItem('heroData', JSON.stringify(heroData));
                // Profilbild auch speichern
                const profileImage = document.getElementById('current-profile-image');
                if (profileImage && profileImage.src) {
                    localStorage.setItem('heroProfileImage', profileImage.src);
                // Storage-Event für Website-Sync auslösen
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'heroData',
                    newValue: JSON.stringify(heroData)
                }));
                // Visuelles Feedback
                showHeroMessage('Änderungen werden live auf die Website übertragen...', 'info');
                console.log('✅ LIVE SYNC: Website updated with live changes');
            // Live-Updates initialisieren
            initializeLiveUpdates();
            // Automatische AWS-Speicherung (mit Debouncing)
            let saveTimeout;
            async function saveHeroDataToAWSAuto() {
                // Debouncing: Nur nach 1 Sekunde Inaktivität speichern
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(async () => {
                    try {
                        console.log('💾 AUTO SAVE: Automatically saving hero data to AWS...');
                        const heroData = collectHeroData();
                        await saveHeroDataToAWS(heroData);
                        console.log('✅ AUTO SAVE: Hero data saved automatically');
                    } catch (error) {
                        console.error('❌ AUTO SAVE: Failed to save hero data:', error);
                }, 1000);
            // Hero-Daten sammeln
            function collectHeroData() {
                return {
            // AWS-Integration für Hero-Daten
            async function saveHeroDataToAWS(heroData) {
                try {
                    console.log('☁️ AWS: Saving hero data to AWS...');
                    if (window.smartAPI) {
                        // Hero-Daten als JSON-Dokument speichern
                        const heroDocument = {
                            id: 'hero-data',
                            type: 'hero-config',
                            data: heroData,
                            userId: getCurrentUserId(),
                            timestamp: new Date().toISOString(),
                            version: '1.0'
                        const result = await window.smartAPI.saveDocument(heroDocument);
                        console.log('✅ AWS: Hero data saved successfully:', result);
                        // Auch in localStorage speichern für sofortige Verfügbarkeit
                        console.log('💾 LOCAL: Hero data also saved to localStorage');
                        // Profilbild separat speichern (falls vorhanden)
                        if (profileImage && profileImage.src && !profileImage.src.includes('manuel-weiss-photo.svg')) {
                            await saveProfileImageToAWS(profileImage.src);
                        return result;
                    } else {
                        console.warn('⚠️ AWS: Smart API not available, using localStorage only');
                        return null;
                } catch (error) {
                    console.error('❌ AWS: Failed to save hero data:', error);
                    showHeroMessage('Fehler beim Speichern in AWS. Daten werden lokal gespeichert.', 'warning');
                    return null;
            async function loadHeroDataFromAWS() {
                    console.log('☁️ AWS: Loading hero data from AWS...');
                        const heroDocument = await window.smartAPI.getDocument('hero-data', getCurrentUserId());
                        if (heroDocument && heroDocument.data) {
                            console.log('✅ AWS: Hero data loaded from AWS:', heroDocument.data);
                            // Daten in Formular laden
                            const data = heroDocument.data;
                            if (data.name) document.getElementById('hero-name').value = data.name;
                            if (data.title) document.getElementById('hero-title').value = data.title;
                            if (data.subtitle) document.getElementById('hero-subtitle').value = data.subtitle;
                            if (data.description) document.getElementById('hero-description').value = data.description;
                            if (data.bgColor1) document.getElementById('hero-bg-color1').value = data.bgColor1;
                            if (data.bgColor2) document.getElementById('hero-bg-color2').value = data.bgColor2;
                            if (data.textColor) document.getElementById('hero-text-color').value = data.textColor;
                            if (data.buttonText) document.getElementById('hero-button-text').value = data.buttonText;
                            if (data.buttonLink) document.getElementById('hero-button-link').value = data.buttonLink;
                            if (data.email) document.getElementById('hero-email').value = data.email;
                            if (data.phone) document.getElementById('hero-phone').value = data.phone;
                            if (data.location) document.getElementById('hero-location').value = data.location;
                            if (data.linkedin) document.getElementById('hero-linkedin').value = data.linkedin;
                            if (data.website) document.getElementById('hero-website').value = data.website;
                            // Hero-Statistiken laden
                            if (data.stat1Number) document.getElementById('hero-stat1-number').value = data.stat1Number;
                            if (data.stat1Label) document.getElementById('hero-stat1-label').value = data.stat1Label;
                            if (data.stat2Number) document.getElementById('hero-stat2-number').value = data.stat2Number;
                            if (data.stat2Label) document.getElementById('hero-stat2-label').value = data.stat2Label;
                            if (data.stat3Number) document.getElementById('hero-stat3-number').value = data.stat3Number;
                            if (data.stat3Label) document.getElementById('hero-stat3-label').value = data.stat3Label;
                            // Profilbild von AWS laden
                            await loadProfileImageFromAWS();
                            // Daten auch in localStorage speichern für Website-Sync
                            localStorage.setItem('heroData', JSON.stringify(data));
                            showHeroMessage('Hero-Daten von AWS geladen!', 'success');
                            return data;
                            console.log('ℹ️ AWS: No hero data found in AWS, using localStorage');
                            return null;
                    console.error('❌ AWS: Failed to load hero data:', error);
                    showHeroMessage('Fehler beim Laden von AWS. Verwende lokale Daten.', 'warning');
            async function saveProfileImageToAWS(imageDataUrl) {
                    console.log('📸 AWS: Saving profile image to AWS...');
                        // Data URL zu Blob konvertieren
                        const response = await fetch(imageDataUrl);
                        const blob = await response.blob();
                        // Datei für Upload vorbereiten
                        const file = new File([blob], 'profile-image.jpg', { type: 'image/jpeg' });
                        // Upload über Smart API
                        const result = await window.smartAPI.uploadFile(file, {
                            type: 'profile',
                            category: 'hero',
                            filename: 'hero-profile-image.jpg'
                        console.log('✅ AWS: Profile image saved successfully:', result);
                    console.error('❌ AWS: Failed to save profile image:', error);
            async function loadProfileImageFromAWS() {
                    console.log('📸 AWS: Loading profile image from AWS...');
                        // Profilbild von AWS laden
                        const profileImage = await window.smartAPI.getUserDocuments(getCurrentUserId());
                        if (profileImage && profileImage.documents) {
                            const heroProfile = profileImage.documents.find(doc => 
                                doc.type === 'profile' && doc.category === 'hero'
                            );
                            if (heroProfile && heroProfile.url) {
                                const profileImageElement = document.getElementById('current-profile-image');
                                if (profileImageElement) {
                                    profileImageElement.src = heroProfile.url;
                                    localStorage.setItem('heroProfileImage', heroProfile.url);
                                    console.log('✅ AWS: Profile image loaded from AWS');
                                    return heroProfile.url;
                            }
                    console.error('❌ AWS: Failed to load profile image:', error);
            // Hero-Daten von AWS laden beim Start
            async function initializeHeroDataFromAWS() {
                console.log('🚀 HERO AWS: Initializing hero data from AWS...');
                // Erst versuchen von AWS zu laden
                const awsData = await loadHeroDataFromAWS();
                // Falls AWS nicht verfügbar, localStorage verwenden
                if (!awsData) {
                    console.log('📱 HERO: Using localStorage fallback...');
                    loadHeroData();
            // AWS-Initialisierung starten
            initializeHeroDataFromAWS();
            // Zusätzlich: Beim Laden der Seite sofort von AWS laden
            document.addEventListener('DOMContentLoaded', async function() {
                console.log('🚀 ADMIN: Page loaded, loading hero data from AWS...');
                    await loadHeroDataFromAWS();
                    // Profilbild auch beim Laden überprüfen
                    await loadProfileImageOnStart();
                    console.error('❌ ADMIN: Failed to load hero data from AWS:', error);
            });
            // Profilbild beim Start laden
            async function loadProfileImageOnStart() {
                console.log('📸 ADMIN: Loading profile image on start...');
                    // Erst von localStorage laden
                    const localImage = localStorage.getItem('heroProfileImage');
                    if (localImage && localImage !== 'manuel-weiss-photo.svg') {
                        const currentImage = document.getElementById('current-profile-image');
                        const currentName = document.getElementById('current-profile-name');
                        if (currentImage) {
                            currentImage.src = localImage;
                            console.log('📸 ADMIN: Profile image loaded from localStorage');
                        if (currentName) {
                            currentName.textContent = 'Hochgeladenes Profilbild';
                    // Dann von AWS laden (falls verfügbar)
                        try {
                        } catch (awsError) {
                            console.log('⚠️ ADMIN: AWS profile image load failed, using localStorage');
                    console.error('❌ ADMIN: Failed to load profile image:', error);
            // Profilbild-Galerie Funktionalität
            function initializeProfileGallery() {
                console.log('📸 GALLERY: Initializing profile gallery...');
                // Galerie-Upload Button
                const selectGalleryBtn = document.getElementById('select-gallery-images-btn');
                const galleryInput = document.getElementById('gallery-upload-input');
                console.log('📸 GALLERY: Setting up upload button...', { 
                    selectGalleryBtn: !!selectGalleryBtn, 
                    galleryInput: !!galleryInput,
                    selectGalleryBtnElement: selectGalleryBtn,
                    galleryInputElement: galleryInput
                if (selectGalleryBtn && galleryInput) {
                    // Event-Listener entfernen falls bereits vorhanden
                    selectGalleryBtn.removeEventListener('click', handleGalleryButtonClick);
                    galleryInput.removeEventListener('change', handleGalleryFileChange);
                    // Neue Event-Listener hinzufügen
                    selectGalleryBtn.addEventListener('click', handleGalleryButtonClick);
                    galleryInput.addEventListener('change', handleGalleryFileChange);
                    console.log('✅ GALLERY: Upload button and input configured');
                } else {
                    console.error('❌ GALLERY: Upload elements not found:', { 
                        selectGalleryBtn: !!selectGalleryBtn, 
                        galleryInput: !!galleryInput 
                // Separate Funktionen für bessere Debugging
                function handleGalleryButtonClick(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('📸 GALLERY: Upload button clicked');
                    if (galleryInput) {
                        console.log('📸 GALLERY: Triggering file input click');
                        galleryInput.click();
                        console.error('❌ GALLERY: Gallery input not found');
                function handleGalleryFileChange(e) {
                    console.log('📸 GALLERY: Files selected:', e.target.files.length);
                    if (e.target.files.length > 0) {
                        handleGalleryUpload(e);
                // Drag & Drop für Galerie
                const uploadArea = document.getElementById('gallery-upload-area');
                if (uploadArea) {
                    uploadArea.addEventListener('dragover', (e) => {
                        uploadArea.style.background = 'rgba(14, 165, 233, 0.1)';
                    uploadArea.addEventListener('dragleave', (e) => {
                        uploadArea.style.background = '';
                    uploadArea.addEventListener('drop', (e) => {
                        const files = Array.from(e.dataTransfer.files);
                        handleGalleryUpload({ target: { files } });
                // Galerie-Aktionen
                const refreshBtn = document.getElementById('refresh-gallery-btn');
                const clearBtn = document.getElementById('clear-gallery-btn');
                const changeProfileBtn = document.getElementById('change-profile-btn');
                const directUploadBtn = document.getElementById('direct-upload-btn');
                const directUploadInput = document.getElementById('direct-profile-upload');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', loadProfileGallery);
                if (clearBtn) {
                    clearBtn.addEventListener('click', clearProfileGallery);
                if (changeProfileBtn) {
                    changeProfileBtn.addEventListener('click', showProfileSelector);
                // Direkter Upload
                if (directUploadBtn && directUploadInput) {
                    directUploadBtn.addEventListener('click', (e) => {
                        console.log('📸 DIRECT UPLOAD: Direct upload button clicked');
                        directUploadInput.click();
                    directUploadInput.addEventListener('change', (e) => {
                        console.log('📸 DIRECT UPLOAD: File selected for direct upload');
                        if (e.target.files.length > 0) {
                            handleDirectProfileUpload(e);
                // Galerie beim Start laden
                loadProfileGallery();
                console.log('✅ GALLERY: Profile gallery initialized');
            // Direkter Profilbild-Upload
            async function handleDirectProfileUpload(event) {
                const file = event.target.files[0];
                if (!file) return;
                console.log('📸 DIRECT UPLOAD: Processing direct upload:', file.name, file.size, file.type);
                    const reader = new FileReader();
                    reader.onload = async function(e) {
                        const imageUrl = e.target.result;
                        console.log('📸 DIRECT UPLOAD: Image loaded, URL length:', imageUrl.length);
                        // Aktuelles Profilbild aktualisieren
                        console.log('📸 DIRECT UPLOAD: Elements found:', {
                            currentImage: !!currentImage,
                            currentName: !!currentName
                            currentImage.src = imageUrl;
                            currentImage.style.display = 'block';
                            console.log('📸 DIRECT UPLOAD: Image src updated');
                            console.error('❌ DIRECT UPLOAD: current-profile-image element not found');
                            currentName.textContent = file.name;
                            console.log('📸 DIRECT UPLOAD: Name updated to:', file.name);
                            console.error('❌ DIRECT UPLOAD: current-profile-name element not found');
                        localStorage.setItem('heroProfileImage', imageUrl);
                        console.log('💾 DIRECT UPLOAD: Saved to localStorage');
                        // AWS-Speicherung
                        if (window.smartAPI) {
                            try {
                                await saveProfileImageToAWS(imageUrl);
                                console.log('☁️ DIRECT UPLOAD: Saved to AWS');
                            } catch (awsError) {
                                console.error('❌ DIRECT UPLOAD: AWS save failed:', awsError);
                        // Live-Update
                            console.log('🔄 DIRECT UPLOAD: Live update triggered');
                        } catch (updateError) {
                            console.error('❌ DIRECT UPLOAD: Live update failed:', updateError);
                        showHeroMessage(`Profilbild erfolgreich hochgeladen: ${file.name}`, 'success');
                        console.log('✅ DIRECT UPLOAD: Profile image uploaded successfully');
                    };
                    reader.onerror = function(error) {
                        console.error('❌ DIRECT UPLOAD: FileReader error:', error);
                        showHeroMessage('Fehler beim Lesen der Datei', 'error');
                    reader.readAsDataURL(file);
                    console.error('❌ DIRECT UPLOAD: Upload failed:', error);
                    showHeroMessage('Fehler beim Hochladen des Profilbildes', 'error');
            // Galerie-Upload verarbeiten
            async function handleGalleryUpload(event) {
                const files = Array.from(event.target.files);
                console.log('📸 GALLERY: Uploading', files.length, 'images...');
                if (files.length === 0) return;
                    for (const file of files) {
                        if (file.type.startsWith('image/')) {
                            await uploadProfileImageToGallery(file);
                    showHeroMessage(`${files.length} Bilder erfolgreich hochgeladen!`, 'success');
                    loadProfileGallery();
                    console.error('❌ GALLERY: Upload failed:', error);
                    showHeroMessage('Fehler beim Hochladen der Bilder', 'error');
            // Einzelnes Profilbild zur Galerie hochladen
            async function uploadProfileImageToGallery(file) {
                            category: 'gallery',
                            filename: `profile-gallery-${Date.now()}-${file.name}`
                        console.log('✅ GALLERY: Image uploaded:', result);
                        // Fallback: als Data URL speichern
                        const reader = new FileReader();
                        return new Promise((resolve) => {
                            reader.onload = (e) => {
                                const imageData = {
                                    id: `gallery-${Date.now()}`,
                                    url: e.target.result,
                                    name: file.name,
                                    size: file.size,
                                    type: file.type,
                                    timestamp: new Date().toISOString()
                                };
                                // In localStorage speichern
                                const gallery = JSON.parse(localStorage.getItem('profileGallery') || '[]');
                                gallery.push(imageData);
                                localStorage.setItem('profileGallery', JSON.stringify(gallery));
                                resolve(imageData);
                    console.error('❌ GALLERY: Upload error:', error);
                    throw error;
            // Galerie laden und anzeigen
            async function loadProfileGallery() {
                console.log('📸 GALLERY: Loading profile gallery...');
                    let galleryImages = [];
                        // Von AWS laden
                        const userDocs = await window.smartAPI.getUserDocuments(getCurrentUserId());
                        if (userDocs && userDocs.documents) {
                            galleryImages = userDocs.documents.filter(doc => 
                                doc.type === 'profile' && doc.category === 'gallery'
                        // Von localStorage laden
                        galleryImages = JSON.parse(localStorage.getItem('profileGallery') || '[]');
                    displayProfileGallery(galleryImages);
                    console.log('✅ GALLERY: Loaded', galleryImages.length, 'images');
                    console.error('❌ GALLERY: Load failed:', error);
                    showHeroMessage('Fehler beim Laden der Galerie', 'error');
            // Galerie anzeigen
            function displayProfileGallery(images) {
                const galleryGrid = document.getElementById('profile-gallery-grid');
                if (!galleryGrid) return;
                galleryGrid.innerHTML = '';
                if (images.length === 0) {
                    galleryGrid.innerHTML = '<p style="text-align: center; color: #666; grid-column: 1 / -1;">Keine Bilder in der Galerie</p>';
                    return;
                images.forEach((image, index) => {
                    const imageItem = document.createElement('div');
                    imageItem.className = 'gallery-image-item';
                    imageItem.dataset.imageId = image.id || index;
                    imageItem.dataset.imageUrl = image.url;
                    imageItem.innerHTML = `
                        <img src="${image.url}" alt="Profilbild ${index + 1}" loading="lazy">
                        <div class="gallery-image-overlay">
                            <div class="gallery-image-actions">
                                <button class="gallery-image-btn select" title="Als Profilbild auswählen">
                                    <i class="fas fa-check"></i>
                                <button class="gallery-image-btn delete" title="Bild löschen">
                                    <i class="fas fa-trash"></i>
                    `;
                    // Event-Listener für Aktionen
                    const selectBtn = imageItem.querySelector('.gallery-image-btn.select');
                    const deleteBtn = imageItem.querySelector('.gallery-image-btn.delete');
                    selectBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        selectProfileImage(image.url, image.name || `Bild ${index + 1}`);
                    deleteBtn.addEventListener('click', (e) => {
                        deleteProfileImage(image.id || index, imageItem);
                    galleryGrid.appendChild(imageItem);
            // Profilbild auswählen
            function selectProfileImage(imageUrl, imageName) {
                console.log('📸 GALLERY: Selecting profile image:', imageName);
                // Aktuelles Profilbild aktualisieren
                const currentImage = document.getElementById('current-profile-image');
                const currentName = document.getElementById('current-profile-name');
                if (currentImage) {
                    currentImage.src = imageUrl;
                if (currentName) {
                    currentName.textContent = imageName;
                // In localStorage speichern
                localStorage.setItem('heroProfileImage', imageUrl);
                // AWS-Speicherung
                if (window.smartAPI) {
                    saveProfileImageToAWS(imageUrl);
                // Galerie-Status aktualisieren
                updateGallerySelection(imageUrl);
                showHeroMessage(`Profilbild geändert zu: ${imageName}`, 'success');
            // Galerie-Auswahl aktualisieren
            function updateGallerySelection(selectedUrl) {
                const galleryItems = document.querySelectorAll('.gallery-image-item');
                galleryItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.imageUrl === selectedUrl) {
                        item.classList.add('active');
            // Profilbild löschen
            async function deleteProfileImage(imageId, imageElement) {
                if (!confirm('Möchten Sie dieses Bild wirklich löschen?')) return;
                        await window.smartAPI.deleteDocument(imageId, getCurrentUserId());
                        // Von localStorage entfernen
                        const gallery = JSON.parse(localStorage.getItem('profileGallery') || '[]');
                        const updatedGallery = gallery.filter(img => img.id !== imageId);
                        localStorage.setItem('profileGallery', JSON.stringify(updatedGallery));
                    imageElement.remove();
                    showHeroMessage('Bild erfolgreich gelöscht', 'success');
                    console.error('❌ GALLERY: Delete failed:', error);
                    showHeroMessage('Fehler beim Löschen des Bildes', 'error');
            // Galerie leeren
            async function clearProfileGallery() {
                if (!confirm('Möchten Sie wirklich alle Bilder aus der Galerie löschen?')) return;
                            const galleryImages = userDocs.documents.filter(doc => 
                            for (const image of galleryImages) {
                                await window.smartAPI.deleteDocument(image.id, getCurrentUserId());
                        localStorage.removeItem('profileGallery');
                    showHeroMessage('Galerie erfolgreich geleert', 'success');
                    console.error('❌ GALLERY: Clear failed:', error);
                    showHeroMessage('Fehler beim Leeren der Galerie', 'error');
            // Profilbild-Auswahl-Dialog
            function showProfileSelector() {
                if (galleryGrid && galleryGrid.children.length > 0) {
                    galleryGrid.scrollIntoView({ behavior: 'smooth' });
                    showHeroMessage('Wählen Sie ein Bild aus der Galerie aus', 'info');
                    showHeroMessage('Keine Bilder in der Galerie. Laden Sie zuerst Bilder hoch.', 'warning');
            // Galerie initialisieren
            initializeProfileGallery();
            // Zusätzliche Initialisierung nach DOM-Load
            document.addEventListener('DOMContentLoaded', function() {
                console.log('🚀 ADMIN: DOM loaded, re-initializing gallery...');
                setTimeout(() => {
                    initializeProfileGallery();
                }, 500);
            // Also initialize after a short delay as fallback
            setTimeout(initializeSettings, 100);
        })();
        // BACKUP PANEL FORCE SHOW
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 BACKUP: Force showing backup panel...');
            // Force show backup panel
            const backupPanel = document.getElementById('backupSettings');
            if (backupPanel) {
                backupPanel.style.display = 'block';
                backupPanel.style.visibility = 'visible';
                backupPanel.style.opacity = '1';
                backupPanel.classList.add('active');
                console.log('✅ BACKUP: Panel forced visible');
                // Force show all content
                const allElements = backupPanel.querySelectorAll('*');
                allElements.forEach(el => {
                    el.style.display = '';
                    el.style.visibility = 'visible';
                    el.style.opacity = '1';
            // Setup backup tab as active
            const backupTab = document.querySelector('[data-tab="backup"]');
            if (backupTab) {
                backupTab.classList.add('active');
                console.log('✅ BACKUP: Tab set as active');
        });
    </script>
    <!-- KOMPLETTE SETTINGS-LÖSUNG -->
        console.log('🚀 SETTINGS: Loading complete settings solution...');
        // Komplette Settings-Funktionalität
        function initializeSettings() {
            console.log('📋 SETTINGS: Initializing all settings...');
            // Alle Settings-Panels finden
            const panels = document.querySelectorAll('.settings-panel');
            console.log(`📋 SETTINGS: Found ${panels.length} settings panels`);
            // Alle Settings-Tabs finden
            const tabs = document.querySelectorAll('.settings-tab');
            console.log(`📋 SETTINGS: Found ${tabs.length} settings tabs`);
            // Tab-Click-Handler für alle Tabs
            tabs.forEach(tab => {
                tab.addEventListener('click', function(e) {
                    const tabName = this.getAttribute('data-tab');
                    console.log(`🔄 SETTINGS: Tab clicked: ${tabName}`);
                    // Alle Tabs deaktivieren
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    // Alle Panels verstecken
                    panels.forEach(panel => {
                        panel.style.display = 'none';
                        panel.classList.remove('active');
                    // Gewähltes Panel anzeigen
                    let targetPanel = null;
                    switch(tabName) {
                        case 'hero-settings': targetPanel = document.getElementById('heroSettings'); break;
                        case 'general': targetPanel = document.getElementById('generalSettings'); break;
                        case 'seo': targetPanel = document.getElementById('seoSettings'); break;
                        case 'security': targetPanel = document.getElementById('securitySettings'); break;
                        case 'backup': targetPanel = document.getElementById('backupSettings'); break;
                    if (targetPanel) {
                        targetPanel.style.display = 'block';
                        targetPanel.classList.add('active');
                        console.log(`✅ SETTINGS: Panel shown: ${targetPanel.id}`);
                        // Force show all content
                        const allElements = targetPanel.querySelectorAll('*');
                        allElements.forEach(el => {
                            el.style.display = '';
                            el.style.visibility = 'visible';
                            el.style.opacity = '1';
                        console.error(`❌ SETTINGS: Panel not found for tab: ${tabName}`);
            // Standardmäßig Backup-Panel anzeigen
            if (backupPanel && backupTab) {
                console.log('✅ SETTINGS: Backup panel set as default');
            // Backup-Buttons
            const createBtn = document.querySelector('[data-action="create-backup"]');
            if (createBtn) {
                createBtn.addEventListener('click', function() {
                    alert('✅ Backup wird erstellt...');
            const restoreBtn = document.querySelector('[data-action="restore-backup"]');
            if (restoreBtn) {
                restoreBtn.addEventListener('click', function() {
                    alert('✅ Backup wird wiederhergestellt...');
            console.log('✅ SETTINGS: Complete settings initialized');
        // Initialisierung
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeSettings);
        } else {
            initializeSettings();
        // Fallback nach kurzer Verzögerung
        setTimeout(initializeSettings, 100);
    <!-- HERO-SEKTION FUNKTIONALITÄT -->
    <!-- PDF-Reader Script laden -->
    <script src="js/pdf-reader.js"></script>
        console.log('🚀 HERO: Loading hero section functionality...');
        // Hero-Sektion Funktionalität
            console.log('📋 HERO: Initializing hero section...');
            // Profilbild-Upload
            const uploadBtn = document.getElementById('upload-profile-btn');
            const fileInput = document.getElementById('profile-image-upload');
            const currentImage = document.getElementById('current-profile-image');
            if (uploadBtn && fileInput) {
                uploadBtn.addEventListener('click', function() {
                    fileInput.click();
                fileInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        // Datei-Validierung
                        const maxSize = 5 * 1024 * 1024; // 5MB
                        const allowedTypes = ['image/jpeg', 'image/png', 'image/svg+xml'];
                        if (file.size > maxSize) {
                            showHeroMessage('Datei ist zu groß. Maximal 5MB erlaubt.', 'error');
                            return;
                        if (!allowedTypes.includes(file.type)) {
                            showHeroMessage('Nur JPG, PNG und SVG Dateien sind erlaubt.', 'error');
                        // Bild anzeigen
                        reader.onload = function(e) {
                            currentImage.src = e.target.result;
                            showHeroMessage('Profilbild erfolgreich hochgeladen!', 'success');
                        reader.readAsDataURL(file);
            // Hero-Daten speichern
            const saveBtn = document.getElementById('save-hero-btn');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    const heroData = {
                        name: document.getElementById('hero-name').value,
                        title: document.getElementById('hero-title').value,
                        subtitle: document.getElementById('hero-subtitle').value,
                        description: document.getElementById('hero-description').value,
                        bgColor1: document.getElementById('hero-bg-color1').value,
                        bgColor2: document.getElementById('hero-bg-color2').value,
                        textColor: document.getElementById('hero-text-color').value,
                        buttonText: document.getElementById('hero-button-text').value,
                        buttonLink: document.getElementById('hero-button-link').value,
                        email: document.getElementById('hero-email').value,
                        phone: document.getElementById('hero-phone').value,
                        location: document.getElementById('hero-location').value,
                        linkedin: document.getElementById('hero-linkedin').value,
                        website: document.getElementById('hero-website').value
                    // In localStorage speichern
                    localStorage.setItem('heroData', JSON.stringify(heroData));
                    // Profilbild auch speichern (falls vorhanden)
                    const profileImage = document.getElementById('current-profile-image');
                    if (profileImage && profileImage.src) {
                        localStorage.setItem('heroProfileImage', profileImage.src);
                    showHeroMessage('Hero-Bereich erfolgreich gespeichert!', 'success');
                    console.log('✅ HERO: Data saved:', heroData);
            // Website-Synchronisation
            const syncBtn = document.getElementById('sync-website-btn');
            if (syncBtn) {
                syncBtn.addEventListener('click', function() {
                    syncWithWebsite();
            // Vorschau anzeigen
            const previewBtn = document.getElementById('preview-hero-btn');
            if (previewBtn) {
                previewBtn.addEventListener('click', function() {
                    showHeroMessage('Vorschau-Funktion wird implementiert...', 'info');
            // Zurücksetzen
            const resetBtn = document.getElementById('reset-hero-btn');
            if (resetBtn) {
                resetBtn.addEventListener('click', function() {
                    if (confirm('Möchten Sie alle Hero-Einstellungen zurücksetzen?')) {
                        // Formular zurücksetzen
                        document.getElementById('hero-name').value = 'Manuel Weiss';
                        document.getElementById('hero-title').value = 'HR Berater für AI & Transformation';
                        document.getElementById('hero-subtitle').value = 'Innovative Lösungen für moderne Unternehmen. Digitalisierung, Geschäftsprozesse und Personalwesen.';
                        document.getElementById('hero-description').value = 'Seit über 6 Jahren begleite ich Unternehmen bei der digitalen Transformation und der Optimierung ihrer HR-Prozesse.';
                        document.getElementById('hero-bg-color1').value = '#667eea';
                        document.getElementById('hero-bg-color2').value = '#764ba2';
                        document.getElementById('hero-text-color').value = '#ffffff';
                        document.getElementById('hero-button-text').value = 'Kontakt aufnehmen';
                        document.getElementById('hero-button-link').value = '#kontakt';
                        // localStorage leeren
                        localStorage.removeItem('heroData');
                        showHeroMessage('Hero-Einstellungen wurden zurückgesetzt!', 'info');
            // PDF-Analyzer Funktionalität
            initializePDFAnalyzer();
            // Gespeicherte Daten laden
            loadHeroData();
            console.log('✅ HERO: Hero section initialized');
        // Hero-Daten laden
        function loadHeroData() {
            const savedData = localStorage.getItem('heroData');
            if (savedData) {
                    const heroData = JSON.parse(savedData);
                    if (heroData.name) document.getElementById('hero-name').value = heroData.name;
                    if (heroData.title) document.getElementById('hero-title').value = heroData.title;
                    if (heroData.subtitle) document.getElementById('hero-subtitle').value = heroData.subtitle;
                    if (heroData.description) document.getElementById('hero-description').value = heroData.description;
                    if (heroData.bgColor1) document.getElementById('hero-bg-color1').value = heroData.bgColor1;
                    if (heroData.bgColor2) document.getElementById('hero-bg-color2').value = heroData.bgColor2;
                    if (heroData.textColor) document.getElementById('hero-text-color').value = heroData.textColor;
                    if (heroData.buttonText) document.getElementById('hero-button-text').value = heroData.buttonText;
                    if (heroData.buttonLink) document.getElementById('hero-button-link').value = heroData.buttonLink;
                    if (heroData.email) document.getElementById('hero-email').value = heroData.email;
                    if (heroData.phone) document.getElementById('hero-phone').value = heroData.phone;
                    if (heroData.location) document.getElementById('hero-location').value = heroData.location;
                    if (heroData.linkedin) document.getElementById('hero-linkedin').value = heroData.linkedin;
                    if (heroData.website) document.getElementById('hero-website').value = heroData.website;
                    // Hero-Statistiken laden
                    if (heroData.stat1Number) document.getElementById('hero-stat1-number').value = heroData.stat1Number;
                    if (heroData.stat1Label) document.getElementById('hero-stat1-label').value = heroData.stat1Label;
                    if (heroData.stat2Number) document.getElementById('hero-stat2-number').value = heroData.stat2Number;
                    if (heroData.stat2Label) document.getElementById('hero-stat2-label').value = heroData.stat2Label;
                    if (heroData.stat3Number) document.getElementById('hero-stat3-number').value = heroData.stat3Number;
                    if (heroData.stat3Label) document.getElementById('hero-stat3-label').value = heroData.stat3Label;
                    console.log('✅ HERO: Data loaded from localStorage');
                    console.error('❌ HERO: Error loading data:', error);
            // Profilbild laden
            const savedImage = localStorage.getItem('heroProfileImage');
            if (savedImage) {
                if (profileImage) {
                    profileImage.src = savedImage;
                    console.log('✅ HERO: Profile image loaded from localStorage');
        // Website-Synchronisation
        function syncWithWebsite() {
            console.log('🔄 HERO: Starting website synchronization...');
            showHeroMessage('Synchronisiere mit Website...', 'info');
            const heroData = {
                name: document.getElementById('hero-name').value,
                title: document.getElementById('hero-title').value,
                subtitle: document.getElementById('hero-subtitle').value,
                description: document.getElementById('hero-description').value,
                bgColor1: document.getElementById('hero-bg-color1').value,
                bgColor2: document.getElementById('hero-bg-color2').value,
                textColor: document.getElementById('hero-text-color').value,
                buttonText: document.getElementById('hero-button-text').value,
                buttonLink: document.getElementById('hero-button-link').value,
                email: document.getElementById('hero-email').value,
                phone: document.getElementById('hero-phone').value,
                location: document.getElementById('hero-location').value,
                linkedin: document.getElementById('hero-linkedin').value,
                website: document.getElementById('hero-website').value
            };
            // Profilbild-Daten
            const profileImage = document.getElementById('current-profile-image');
            const imageData = profileImage.src;
            // Alle Daten in localStorage speichern (für Website-Zugriff)
            localStorage.setItem('heroData', JSON.stringify(heroData));
            localStorage.setItem('heroProfileImage', imageData);
            // Auch in sessionStorage für sofortigen Zugriff
            sessionStorage.setItem('heroUpdate', JSON.stringify({
                hero: heroData,
                profileImage: imageData,
                timestamp: new Date().toISOString()
            }));
            // Erfolgsmeldung
            showHeroMessage('✅ Hero-Bereich erfolgreich mit Website synchronisiert!', 'success');
            console.log('✅ HERO: Website sync completed:', heroData);
            // Hinweis für Website-Besucher
            setTimeout(() => {
                showHeroMessage('💡 Tipp: Besuchen Sie Ihre Website um die Änderungen zu sehen!', 'info');
            }, 2000);
        // PDF-Analyzer initialisieren
        function initializePDFAnalyzer() {
            console.log('📄 PDF: Initializing PDF analyzer...');
            const pdfFileInput = document.getElementById('pdfFileInput');
            const selectPdfBtn = document.getElementById('selectPdfBtn');
            const pdfUploadArea = document.getElementById('pdfUploadArea');
            const applyPdfDataBtn = document.getElementById('applyPdfDataBtn');
            // PDF-Datei auswählen
            if (selectPdfBtn) {
                selectPdfBtn.addEventListener('click', function() {
                    pdfFileInput.click();
            // PDF-Datei verarbeiten
            if (pdfFileInput) {
                pdfFileInput.addEventListener('change', function(e) {
                        processPDFFile(file);
            // Drag & Drop für PDF
            if (pdfUploadArea) {
                pdfUploadArea.addEventListener('dragover', function(e) {
                    pdfUploadArea.style.background = '#f0f2ff';
                    pdfUploadArea.style.borderColor = '#764ba2';
                pdfUploadArea.addEventListener('dragleave', function(e) {
                    pdfUploadArea.style.background = '';
                    pdfUploadArea.style.borderColor = '';
                pdfUploadArea.addEventListener('drop', function(e) {
                    const files = e.dataTransfer.files;
                    if (files.length > 0 && files[0].type.includes('pdf')) {
                        processPDFFile(files[0]);
            // PDF-Daten übernehmen
            if (applyPdfDataBtn) {
                applyPdfDataBtn.addEventListener('click', function() {
                    applyPDFDataToHeroForm();
            console.log('✅ PDF: PDF analyzer initialized');
        // PDF-Datei verarbeiten
        async function processPDFFile(file) {
            console.log('📄 PDF: Processing PDF file:', file.name);
            showHeroMessage('PDF wird analysiert...', 'info');
            try {
                // PDF Reader initialisieren
                const pdfReader = new PDFReader();
                // PDF analysieren
                const cvData = await pdfReader.loadAndAnalyzePDF(file);
                // Ergebnisse anzeigen
                displayPDFResults(cvData);
                showHeroMessage('PDF erfolgreich analysiert!', 'success');
            } catch (error) {
                console.error('❌ PDF: Error processing PDF:', error);
                showHeroMessage('Fehler beim Analysieren der PDF: ' + error.message, 'error');
        // PDF-Ergebnisse anzeigen
        function displayPDFResults(cvData) {
            const resultsDiv = document.getElementById('pdfAnalysisResults');
            const dataDiv = document.getElementById('pdfExtractedData');
            if (resultsDiv && dataDiv) {
                // Ergebnisse zusammenstellen
                let html = '<div style="max-height: 300px; overflow-y: auto; padding: 1rem; background: #f8f9fa; border-radius: 8px;">';
                // Persönliche Daten
                html += '<h5 style="color: #2c3e50; margin-bottom: 0.5rem;"><i class="fas fa-user"></i> Persönliche Daten</h5>';
                html += `<p><strong>Name:</strong> ${cvData.name}</p>`;
                html += `<p><strong>E-Mail:</strong> ${cvData.email}</p>`;
                html += `<p><strong>Telefon:</strong> ${cvData.phone}</p>`;
                // Arbeitserfahrung
                if (cvData.experience && cvData.experience.length > 0) {
                    html += '<h5 style="color: #2c3e50; margin: 1rem 0 0.5rem 0;"><i class="fas fa-briefcase"></i> Arbeitserfahrung</h5>';
                    cvData.experience.forEach(exp => {
                        html += `<div style="margin-bottom: 0.5rem; padding: 0.5rem; background: white; border-radius: 4px;">`;
                        html += `<strong>${exp.position}</strong><br>`;
                        html += `<small>${exp.company} - ${exp.period}</small>`;
                        html += `</div>`;
                // Fähigkeiten
                if (cvData.skills && cvData.skills.length > 0) {
                    html += '<h5 style="color: #2c3e50; margin: 1rem 0 0.5rem 0;"><i class="fas fa-tools"></i> Fähigkeiten</h5>';
                    html += `<div style="display: flex; flex-wrap: wrap; gap: 0.25rem;">`;
                    cvData.skills.forEach(skill => {
                        html += `<span style="background: #667eea; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">${skill}</span>`;
                    html += `</div>`;
                html += '</div>';
                dataDiv.innerHTML = html;
                resultsDiv.style.display = 'block';
                // Daten für spätere Verwendung speichern
                window.currentPDFData = cvData;
        // PDF-Daten in Hero-Formular übernehmen
        function applyPDFDataToHeroForm() {
            if (!window.currentPDFData) {
                showHeroMessage('Keine PDF-Daten verfügbar', 'error');
                return;
            const cvData = window.currentPDFData;
            console.log('📄 PDF: Applying PDF data to hero form:', cvData);
            // Name übernehmen
            if (cvData.name && cvData.name !== 'Name nicht gefunden') {
                const nameField = document.getElementById('hero-name');
                if (nameField) nameField.value = cvData.name;
            // E-Mail übernehmen
            if (cvData.email && cvData.email !== 'E-Mail nicht gefunden') {
                const emailField = document.getElementById('hero-email');
                if (emailField) emailField.value = cvData.email;
            // Telefon übernehmen
            if (cvData.phone && cvData.phone !== 'Telefon nicht gefunden') {
                const phoneField = document.getElementById('hero-phone');
                if (phoneField) phoneField.value = cvData.phone;
            // Aktuelle Position als Titel verwenden
            if (cvData.experience && cvData.experience.length > 0) {
                const titleField = document.getElementById('hero-title');
                if (titleField && cvData.experience[0].position) {
                    titleField.value = cvData.experience[0].position;
            // Zusammenfassung als Beschreibung verwenden
            if (cvData.summary && cvData.summary !== 'Zusammenfassung nicht gefunden') {
                const descriptionField = document.getElementById('hero-description');
                if (descriptionField) descriptionField.value = cvData.summary;
            showHeroMessage('PDF-Daten erfolgreich übernommen!', 'success');
            // Ergebnisse ausblenden
            if (resultsDiv) {
                resultsDiv.style.display = 'none';
        // Status-Nachricht anzeigen
        function showHeroMessage(message, type) {
            const statusDiv = document.getElementById('hero-status-message');
            if (statusDiv) {
                statusDiv.textContent = message;
                statusDiv.className = `status-message ${type}`;
                // Nach 3 Sekunden ausblenden
                    statusDiv.textContent = '';
                    statusDiv.className = 'status-message';
                }, 3000);
    <!-- EINFACHE SETTINGS-LÖSUNG -->
        console.log('🚀 SETTINGS: Loading simple settings solution...');
        // Einfache Settings-Lösung
            console.log('📋 SETTINGS: Initializing simple settings...');
            // Alle Settings-Tabs finden und Event-Listener hinzufügen
            const settingsTabs = document.querySelectorAll('.settings-tab');
            console.log(`📋 SETTINGS: Found ${settingsTabs.length} settings tabs`);
            settingsTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    settingsTabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.settings-panel').forEach(panel => {
            console.log('✅ SETTINGS: Simple settings initialized');
    <!-- EINZIGES ADMIN SCRIPT - Alle anderen entfernt um Konflikte zu vermeiden -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- DIREKTE FUNKTIONALITÄT - Funktioniert garantiert -->
        console.log('🚀 DIREKTE ADMIN PANEL INITIALISIERUNG...');
        // Warte bis DOM geladen ist
            console.log('✅ DOM geladen, initialisiere Admin Panel...');
            // 1. Navigation Event Listener
            const navItems = document.querySelectorAll('.nav-item');
            console.log(`📋 Gefunden: ${navItems.length} Navigation Items`);
            navItems.forEach(function(item) {
                item.addEventListener('click', function(e) {
                    const section = this.getAttribute('data-section');
                    console.log(`🔄 Navigation geklickt: ${section}`);
                    // Submenu-Handling
                    if (this.classList.contains('has-submenu')) {
                        // Toggle Submenu
                        this.classList.toggle('active');
                        return;
                    if (section) {
                        // Alle Sektionen verstecken
                        document.querySelectorAll('.admin-section').forEach(function(s) {
                            s.classList.remove('active');
                        // Gewählte Sektion anzeigen
                        const targetSection = document.getElementById(section);
                        if (targetSection) {
                            targetSection.classList.add('active');
                            console.log(`✅ Sektion aktiviert: ${section}`);
                        // Navigation aktualisieren (außer Submenu-Parents)
                        document.querySelectorAll('.nav-item').forEach(function(nav) {
                            if (!nav.classList.contains('has-submenu')) {
                                nav.classList.remove('active');
                        // Titel aktualisieren
                        const sectionTitle = document.getElementById('sectionTitle');
                        if (sectionTitle) {
                            sectionTitle.textContent = section.charAt(0).toUpperCase() + section.slice(1);
            // 3. Sidebar Toggle
            const sidebarToggle = document.getElementById('sidebarToggle');
            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function() {
                    const sidebar = document.querySelector('.admin-sidebar');
                    if (sidebar) {
                        sidebar.classList.toggle('collapsed');
                        console.log('🔄 Sidebar toggled');
            // 4. Dark Mode Toggle
            const darkModeBtn = document.getElementById('darkModeIcon');
            if (darkModeBtn) {
                darkModeBtn.addEventListener('click', function() {
                    document.body.classList.toggle('dark-mode');
                    console.log('🌙 Dark mode toggled');
            // 5. VERMIETUNGEN TABS - EINFACHE LÖSUNG
            console.log('🏠 Initialisiere Vermietungen Tabs...');
            // Alle Tab-Buttons finden
            const allTabButtons = document.querySelectorAll('.tab-btn, .settings-tab');
            console.log(`🏠 Gefunden: ${allTabButtons.length} Tab Buttons insgesamt`);
            allTabButtons.forEach(function(tab) {
                console.log(`🏠 Tab Button gefunden:`, tab);
                    console.log(`🏠 Tab geklickt:`, this);
                    console.log(`🏠 Tab Klassen:`, this.className);
                    console.log(`🏠 Tab data-Attribute:`, this.dataset);
                    // Prüfe ob es ein Vermietungen-Tab ist
                    if (this.hasAttribute('data-rental')) {
                        const rentalType = this.getAttribute('data-rental');
                        console.log(`🏠 VERMIETUNG Tab geklickt: ${rentalType}`);
                        // Alle Vermietungen-Tabs deaktivieren
                        document.querySelectorAll('.tab-btn[data-rental]').forEach(function(t) {
                            t.classList.remove('active');
                        // Gewählten Tab aktivieren
                                                 // Rental Content aktualisieren
                         const rentalEditor = document.getElementById('rentalEditor');
                         if (rentalEditor) {
                             // Spezifischer Inhalt für jeden Vermietungstyp
                             let content = '';
                             
                             switch(rentalType) {
                                 case 'wohnmobil':
                                     content = `
                                         <div style="padding: 2rem; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                             <h3 style="color: #333; margin-bottom: 1rem;">🏠 Wohnmobil Verwaltung</h3>
                                             <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
                                                 <div>
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Verfügbarkeit</h4>
                                                     <label style="display: block; margin-bottom: 0.5rem;">
                                                         <input type="checkbox" checked> Verfügbar
                                                     </label>
                                                         <input type="text" placeholder="Preis pro Tag" value="150€" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Bilder</h4>
                                                     <div style="border: 2px dashed #ddd; padding: 2rem; text-align: center; border-radius: 8px;">
                                                         <i class="fas fa-camera" style="font-size: 2rem; color: #999; margin-bottom: 1rem;"></i>
                                                         <p style="color: #666;">Bilder hier hochladen</p>
                                             </div>
                                         </div>
                                     `;
                                     break;
                                 case 'fotobox':
                                             <h3 style="color: #333; margin-bottom: 1rem;">📸 Fotobox Verwaltung</h3>
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Event-Einstellungen</h4>
                                                         <input type="checkbox" checked> Für Events verfügbar
                                                         <input type="text" placeholder="Preis pro Tag" value="200€" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                         <input type="text" placeholder="Mindestbuchungsdauer" value="1 Tag" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Zubehör</h4>
                                                         <input type="checkbox" checked> Hintergründe
                                                         <input type="checkbox" checked> Props & Kostüme
                                                         <input type="checkbox" checked> Drucker
                                 case 'ebike':
                                             <h3 style="color: #333; margin-bottom: 1rem;">🚴 E-Bikes Verwaltung</h3>
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Fahrrad-Details</h4>
                                                         <input type="text" placeholder="Anzahl verfügbar" value="5" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                         <input type="text" placeholder="Preis pro Tag" value="50€" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                         <input type="text" placeholder="Akkulaufzeit" value="80km" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                         <input type="checkbox" checked> Helme
                                                         <input type="checkbox" checked> Schlösser
                                                         <input type="checkbox" checked> Taschen
                                 case 'sup':
                                             <h3 style="color: #333; margin-bottom: 1rem;">🏄 SUP Boards Verwaltung</h3>
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Board-Details</h4>
                                                         <input type="text" placeholder="Anzahl verfügbar" value="8" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                         <input type="text" placeholder="Preis pro Tag" value="30€" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                         <input type="text" placeholder="Board-Typen" value="Allround, Touring" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                                     <h4 style="color: #555; margin-bottom: 1rem;">Wassersport-Zubehör</h4>
                                                         <input type="checkbox" checked> Paddel
                                                         <input type="checkbox" checked> Schwimmwesten
                                                         <input type="checkbox" checked> Trockensäcke
                                 default:
                                         <div style="padding: 2rem; text-align: center; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                             <h3 style="color: #333; margin-bottom: 1rem;">🏠 ${rentalType.charAt(0).toUpperCase() + rentalType.slice(1)} Verwaltung</h3>
                                             <p style="color: #666; margin-bottom: 2rem;">Verwaltung für ${rentalType} wird geladen...</p>
                             }
                             rentalEditor.innerHTML = content;
                             console.log(`✅ Rental Editor aktualisiert für: ${rentalType}`);
                         }
                    // Prüfe ob es ein Settings-Tab ist
                    if (this.hasAttribute('data-tab')) {
                        console.log(`⚙️ SETTINGS Tab geklickt: ${tabName}`);
                        // Alle Settings-Tabs deaktivieren
                        document.querySelectorAll('.settings-tab[data-tab]').forEach(function(t) {
                        // Alle Settings-Panels verstecken
                        document.querySelectorAll('.settings-panel').forEach(function(p) {
                            p.classList.remove('active');
                        // Passendes Panel anzeigen
                        const targetPanel = document.getElementById(tabName + 'Settings');
                            console.log(`✅ Settings Panel aktiviert: ${tabName}`);
            console.log('✅ DIREKTE ADMIN PANEL INITIALISIERUNG ABGESCHLOSSEN!');
            // Lade initiale Services
            loadServices();
        // PROFIL & SERVICE VERWALTUNG FUNKTIONEN
        // Profilbild aktualisieren
        function updateProfileImage() {
            const input = document.getElementById('profileImageInput');
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageData = e.target.result;
                    // Profilbild im Admin-Panel anzeigen
                    document.getElementById('profileImage').src = imageData;
                    // Profilbild in localStorage speichern für Website-Synchronisation
                    localStorage.setItem('profileImage', imageData);
                    // Zusätzlich in der JSON-Datenstruktur speichern
                    if (window.adminPanel && window.adminPanel.data) {
                        if (!window.adminPanel.data.hero) {
                            window.adminPanel.data.hero = {};
                        window.adminPanel.data.hero.profileImage = imageData;
                        window.adminPanel.saveData();
                    // Netlify Storage verwenden falls verfügbar
                    if (window.netlifyStorage) {
                        window.netlifyStorage.saveProfileImage(imageData, 'profile-image-' + Date.now())
                            .then(result => {
                                console.log('✅ Profilbild auch bei Netlify gespeichert:', result);
                            })
                            .catch(error => {
                                console.warn('⚠️ Netlify Storage nicht verfügbar:', error);
                    console.log('✅ Profilbild aktualisiert und gespeichert');
                    alert('Profilbild erfolgreich aktualisiert! Es wird nun auf der Website angezeigt.');
                    // Test: Prüfe ob localStorage korrekt gesetzt wurde
                    const testImage = localStorage.getItem('profileImage');
                    if (testImage && testImage.startsWith('data:image/')) {
                        console.log('✅ localStorage Test erfolgreich - Profilbild ist gespeichert');
                        console.error('❌ localStorage Test fehlgeschlagen');
                reader.readAsDataURL(file);
                alert('Bitte wähle eine Datei aus!');
        // Profilvideo aktualisieren
        function updateProfileVideo() {
            const input = document.getElementById('profileVideoInput');
                    const video = document.getElementById('profileVideo');
                    video.src = e.target.result;
                    video.load();
                    // Hier könnte man das Video zu einem Server hochladen
                    console.log('✅ Profilvideo aktualisiert');
                    alert('Profilvideo erfolgreich aktualisiert!');
        // Zentrale Medienverwaltung - Kategorie-Tabs
        function initMediaCategories() {
            const categoryTabs = document.querySelectorAll('.category-tab');
            const categoryContents = document.querySelectorAll('.media-category-content');
            categoryTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const category = tab.dataset.category;
                    categoryTabs.forEach(t => t.classList.remove('active'));
                    categoryContents.forEach(c => c.classList.remove('active'));
                    // Aktiven Tab und Content aktivieren
                    tab.classList.add('active');
                    document.getElementById(`category-${category}`).classList.add('active');
        // Profilbild-Upload für verschiedene Bereiche
        function uploadProfileImage(type, input) {
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const imageData = e.target.result;
                // Bild in localStorage speichern
                localStorage.setItem(`profileImage_${type}`, imageData);
                // Vorschau aktualisieren
                const previewId = type === 'nav-logo' ? 'navLogoPreview' : 
                                 type === 'hero-image' ? 'heroImagePreview' : 'footerLogoPreview';
                document.getElementById(previewId).src = imageData;
                if (type === 'nav-logo') {
                    // Navigation Logo aktualisieren
                    updateWebsiteImages('nav-logo', imageData);
                } else if (type === 'hero-image') {
                    // Hero-Bild aktualisieren
                    updateWebsiteImages('hero-image', imageData);
                } else if (type === 'footer-logo') {
                    // Footer Logo aktualisieren
                    updateWebsiteImages('footer-logo', imageData);
                console.log(`✅ ${type} Profilbild aktualisiert`);
                alert(`${type} Profilbild erfolgreich aktualisiert!`);
            reader.readAsDataURL(file);
        // Bewerbungsunterlagen-Upload
        function uploadApplicationDocument(type, input) {
            if (type === 'application-photo') {
                    localStorage.setItem('applicationPhoto', imageData);
                    document.getElementById('applicationPhotoPreview').src = imageData;
                    console.log('✅ Bewerbungsbild aktualisiert');
                    alert('Bewerbungsbild erfolgreich aktualisiert!');
                // PDF/DOC Dateien
                const fileName = file.name;
                localStorage.setItem(`${type}FileName`, fileName);
                localStorage.setItem(`${type}File`, file);
                // Dateiname anzeigen
                const fileNameElement = type === 'cv' ? 'cvFileName' : 'certificatesFileName';
                document.getElementById(fileNameElement).textContent = fileName;
                console.log(`✅ ${type} Dokument aktualisiert: ${fileName}`);
                alert(`${type} Dokument erfolgreich hochgeladen: ${fileName}`);
        // Portfolio-Bilder-Upload
        function uploadPortfolioImages(input) {
            const files = input.files;
            if (!files.length) return;
            const portfolioImages = [];
            let loadedCount = 0;
            Array.from(files).forEach((file, index) => {
                    portfolioImages.push({
                        name: file.name,
                        data: e.target.result,
                        timestamp: Date.now()
                    loadedCount++;
                    if (loadedCount === files.length) {
                        localStorage.setItem('portfolioImages', JSON.stringify(portfolioImages));
                        console.log(`✅ ${files.length} Portfolio-Bilder hochgeladen`);
                        alert(`${files.length} Portfolio-Bilder erfolgreich hochgeladen!`);
        // Dokument-Upload
        function uploadDocument(type, input) {
            const fileName = file.name;
            localStorage.setItem(`${type}FileName`, fileName);
            localStorage.setItem(`${type}File`, file);
            // Dateiname anzeigen
            const fileNameElement = `${type}FileName`;
            if (document.getElementById(fileNameElement)) {
            console.log(`✅ ${type} Dokument aktualisiert: ${fileName}`);
            alert(`${type} Dokument erfolgreich hochgeladen: ${fileName}`);
        // Website-Bilder aktualisieren
        function updateWebsiteImages(type, imageData) {
            // Speichere in localStorage für Website-Synchronisation
            localStorage.setItem(`websiteImage_${type}`, imageData);
            // Optional: Netlify Storage
            if (window.netlifyStorage) {
                window.netlifyStorage.saveProfileImage(imageData, `${type}-${Date.now()}`)
                    .then(result => {
                        console.log(`✅ ${type} auch bei Netlify gespeichert:`, result);
                    })
                    .catch(error => {
                        console.warn(`⚠️ Netlify Storage für ${type} nicht verfügbar:`, error);
        // Profilbild beim Laden des Admin-Panels aus localStorage laden
        function loadProfileImageFromStorage() {
            const savedImage = localStorage.getItem('profileImage');
            if (savedImage && savedImage.startsWith('data:image/')) {
                const profileImageElement = document.getElementById('profileImage');
                if (profileImageElement) {
                    profileImageElement.src = savedImage;
                    console.log('✅ Profilbild aus localStorage geladen');
        // Hero-Bereich aktualisieren (erweiterte Version für Einstellungen)
        function updateHeroContent() {
            // Prüfe ob wir in der AI Twin Sektion sind (alte IDs)
            const heroName = document.getElementById('heroName');
            const heroTitle = document.getElementById('heroTitle');
            const heroSubtitle = document.getElementById('heroSubtitle');
            const heroDescription = document.getElementById('heroDescription');
            const heroTextEffect = document.getElementById('heroTextEffect');
            // Prüfe ob wir in der Einstellungen-Sektion sind (neue IDs)
            const heroNameNew = document.getElementById('hero-name');
            const heroTitleNew = document.getElementById('hero-title');
            const heroSubtitleNew = document.getElementById('hero-subtitle');
            const heroDescriptionNew = document.getElementById('hero-description');
            const heroTextEffectNew = document.getElementById('hero-text-effect');
                name: heroName ? heroName.value : (heroNameNew ? heroNameNew.value : ''),
                title: heroTitle ? heroTitle.value : (heroTitleNew ? heroTitleNew.value : ''),
                subtitle: heroSubtitle ? heroSubtitle.value : (heroSubtitleNew ? heroSubtitleNew.value : ''),
                description: heroDescription ? heroDescription.value : (heroDescriptionNew ? heroDescriptionNew.value : ''),
                textEffect: heroTextEffect ? heroTextEffect.value : (heroTextEffectNew ? heroTextEffectNew.value : 'none')
            // Prüfe ob alle Felder ausgefüllt sind
            if (!heroData.name || !heroData.title || !heroData.subtitle || !heroData.description) {
                alert('Bitte fülle alle Felder aus!');
            localStorage.setItem('heroContent', JSON.stringify(heroData));
            // Speichere auch in der JSON-Datenstruktur
            if (window.adminPanel && window.adminPanel.data) {
                if (!window.adminPanel.data.hero) {
                    window.adminPanel.data.hero = {};
                Object.assign(window.adminPanel.data.hero, heroData);
                window.adminPanel.saveData();
            // Netlify Storage verwenden falls verfügbar
                window.netlifyStorage.saveData('hero-content', heroData)
                        console.log('✅ Hero-Content auch bei Netlify gespeichert:', result);
                        console.warn('⚠️ Netlify Storage nicht verfügbar:', error);
            console.log('✅ Hero-Bereich aktualisiert:', heroData);
            alert('Hero-Bereich erfolgreich aktualisiert! Die Änderungen werden auf der Website angezeigt.');
        // Hero-Content beim Laden des Admin-Panels aus localStorage laden
        function loadHeroContentFromStorage() {
            const savedHeroContent = localStorage.getItem('heroContent');
            if (savedHeroContent) {
                    const heroData = JSON.parse(savedHeroContent);
                    // Fülle die Formularfelder (unterstützt beide Sektionen)
                    if (heroData.name) {
                        const heroName = document.getElementById('heroName');
                        const heroNameNew = document.getElementById('hero-name');
                        if (heroName) heroName.value = heroData.name;
                        if (heroNameNew) heroNameNew.value = heroData.name;
                    if (heroData.title) {
                        const heroTitle = document.getElementById('heroTitle');
                        const heroTitleNew = document.getElementById('hero-title');
                        if (heroTitle) heroTitle.value = heroData.title;
                        if (heroTitleNew) heroTitleNew.value = heroData.title;
                    if (heroData.subtitle) {
                        const heroSubtitle = document.getElementById('heroSubtitle');
                        const heroSubtitleNew = document.getElementById('hero-subtitle');
                        if (heroSubtitle) heroSubtitle.value = heroData.subtitle;
                        if (heroSubtitleNew) heroSubtitleNew.value = heroData.subtitle;
                    if (heroData.description) {
                        const heroDescription = document.getElementById('heroDescription');
                        const heroDescriptionNew = document.getElementById('hero-description');
                        if (heroDescription) heroDescription.value = heroData.description;
                        if (heroDescriptionNew) heroDescriptionNew.value = heroData.description;
                    if (heroData.textEffect) {
                        const heroTextEffect = document.getElementById('heroTextEffect');
                        const heroTextEffectNew = document.getElementById('hero-text-effect');
                        if (heroTextEffect) heroTextEffect.value = heroData.textEffect;
                        if (heroTextEffectNew) heroTextEffectNew.value = heroData.textEffect;
                    console.log('✅ Hero-Content aus localStorage geladen');
                    console.error('Fehler beim Laden des Hero-Content:', error);
        // Ernährungsplan-Verwaltung Funktionen
        function saveOpenAIKey() {
            const apiKey = document.getElementById('openai-api-key').value;
            if (!apiKey) {
                showStatus('Bitte gib einen API Key ein.', 'error');
            if (window.aiIntegration) {
                window.aiIntegration.setAPIKey(apiKey);
                showStatus('✅ API Key erfolgreich gespeichert!', 'success');
                localStorage.setItem('openai_api_key', apiKey);
                showStatus('✅ API Key gespeichert (AI Integration nicht verfügbar)', 'success');
        function testOpenAIConnection() {
            if (!window.aiIntegration) {
                showStatus('❌ AI Integration nicht verfügbar', 'error');
            showStatus('🧪 Teste Verbindung...', 'info');
            window.aiIntegration.testConnection()
                .then(result => {
                    if (result.success) {
                        showStatus('✅ Verbindung erfolgreich!', 'success');
                        showStatus(`❌ ${result.message}`, 'error');
                })
                .catch(error => {
                    showStatus(`❌ Fehler: ${error.message}`, 'error');
        function showStatus(message, type) {
            const statusDiv = document.getElementById('openai-status');
                statusDiv.className = `status-${type}`;
                statusDiv.style.backgroundColor = type === 'success' ? '#d1fae5' : 
                                                 type === 'error' ? '#fee2e2' : '#dbeafe';
                statusDiv.style.color = type === 'success' ? '#065f46' : 
                                       type === 'error' ? '#991b1b' : '#1e40af';
        function addRecipe() {
            const recipe = {
                name: document.getElementById('recipe-name').value,
                category: document.getElementById('recipe-category').value,
                ingredients: document.getElementById('recipe-ingredients').value.split('\n').filter(i => i.trim()),
                instructions: document.getElementById('recipe-instructions').value,
                nutrition: {
                    calories: parseInt(document.getElementById('recipe-calories').value) || 0,
                    protein: parseInt(document.getElementById('recipe-protein').value) || 0,
                    carbs: parseInt(document.getElementById('recipe-carbs').value) || 0,
                    fats: parseInt(document.getElementById('recipe-fats').value) || 0
            if (!recipe.name || !recipe.ingredients.length || !recipe.instructions) {
                alert('Bitte fülle alle Pflichtfelder aus.');
            // Save recipe to localStorage
            const recipes = JSON.parse(localStorage.getItem('nutrition_recipes') || '[]');
            recipe.id = Date.now();
            recipe.createdAt = new Date().toISOString();
            recipes.push(recipe);
            localStorage.setItem('nutrition_recipes', JSON.stringify(recipes));
            // Clear form
            document.getElementById('recipe-name').value = '';
            document.getElementById('recipe-ingredients').value = '';
            document.getElementById('recipe-instructions').value = '';
            document.getElementById('recipe-calories').value = '';
            document.getElementById('recipe-protein').value = '';
            document.getElementById('recipe-carbs').value = '';
            document.getElementById('recipe-fats').value = '';
            alert('✅ Rezept erfolgreich hinzugefügt!');
            updateNutritionStats();
        // AI Rezept-Generator Funktionen
        async function generateAIRecipe() {
            const searchTerm = document.getElementById('ai-recipe-search').value;
            const category = document.getElementById('ai-recipe-category').value;
            const requirements = document.getElementById('ai-recipe-requirements').value;
            const time = document.getElementById('ai-recipe-time').value;
            if (!searchTerm) {
                alert('Bitte gib einen Rezept-Namen oder eine Beschreibung ein!');
            // Zeige Progress
            const progressDiv = document.getElementById('ai-recipe-progress');
            const progressBar = document.getElementById('ai-progress-bar');
            progressDiv.style.display = 'block';
            // Simuliere Progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) progress = 90;
                progressBar.style.width = progress + '%';
            }, 200);
                // Erstelle Prompt für AI
                const prompt = `Erstelle ein detailliertes Rezept für: "${searchTerm}"
Kategorie: ${category}
Besondere Anforderungen: ${requirements || 'keine'}
Kochzeit: ${time || '30'} Minuten
Bitte antworte im folgenden JSON-Format:
{
  "name": "Rezept-Name",
  "ingredients": "Zutatenliste mit Mengenangaben",
  "instructions": "Schritt-für-Schritt Zubereitung",
  "calories": Zahl,
  "protein": Zahl,
  "carbs": Zahl,
  "fat": Zahl,
  "cookingTime": Zahl
}`;
                // Verwende AI Integration falls verfügbar
                if (window.aiIntegration) {
                    const response = await window.aiIntegration.generateMealPlan({
                        prompt: prompt,
                        maxTokens: 1000
                    if (response && response.choices && response.choices[0]) {
                        const aiResponse = response.choices[0].message.content;
                        parseAIRecipeResponse(aiResponse);
                        throw new Error('Keine gültige Antwort von der AI erhalten');
                    // Fallback: Simuliere AI-Antwort
                    setTimeout(() => {
                        generateFallbackRecipe(searchTerm, category, requirements, time);
                    }, 2000);
                console.error('AI Rezept-Generierung fehlgeschlagen:', error);
                // Fallback: Generiere Beispiel-Rezept
                generateFallbackRecipe(searchTerm, category, requirements, time);
            } finally {
                clearInterval(progressInterval);
                progressBar.style.width = '100%';
                    progressDiv.style.display = 'none';
        function parseAIRecipeResponse(aiResponse) {
                // Versuche JSON zu parsen
                const recipeData = JSON.parse(aiResponse);
                displayGeneratedRecipe(recipeData);
                // Falls kein gültiges JSON, versuche Text zu parsen
                parseTextRecipe(aiResponse);
        function parseTextRecipe(text) {
            // Einfache Text-Parsing-Logik
            const lines = text.split('\n').filter(line => line.trim());
            const recipeData = {
                name: document.getElementById('ai-recipe-search').value,
                ingredients: 'Zutaten werden von AI generiert...',
                instructions: 'Zubereitung wird von AI generiert...',
                calories: Math.floor(Math.random() * 200) + 200,
                protein: Math.floor(Math.random() * 20) + 10,
                carbs: Math.floor(Math.random() * 30) + 20,
                fat: Math.floor(Math.random() * 15) + 5
            displayGeneratedRecipe(recipeData);
        function generateFallbackRecipe(searchTerm, category, requirements, time) {
                name: searchTerm,
                ingredients: `Zutaten für ${searchTerm}:
• 200g Hauptzutat
• 100g Gemüse
• 2 EL Öl
• Gewürze nach Geschmack
• Salz und Pfeffer`,
                instructions: `Zubereitung von ${searchTerm}:
1. Hauptzutat vorbereiten
2. Gemüse schneiden
3. In einer Pfanne anbraten
4. Gewürze hinzufügen
5. ${time || 30} Minuten garen
6. Mit Salz und Pfeffer abschmecken`,
        function displayGeneratedRecipe(recipeData) {
            // Fülle die generierten Rezept-Felder
            document.getElementById('generated-recipe-name').value = recipeData.name;
            document.getElementById('generated-recipe-category').value = document.getElementById('ai-recipe-category').value;
            document.getElementById('generated-recipe-ingredients').value = recipeData.ingredients;
            document.getElementById('generated-recipe-instructions').value = recipeData.instructions;
            document.getElementById('generated-recipe-calories').value = recipeData.calories || 0;
            document.getElementById('generated-recipe-protein').value = recipeData.protein || 0;
            document.getElementById('generated-recipe-carbs').value = recipeData.carbs || 0;
            document.getElementById('generated-recipe-fat').value = recipeData.fat || 0;
            // Zeige das generierte Rezept
            document.getElementById('generated-recipe').style.display = 'block';
            // Scroll zum generierten Rezept
            document.getElementById('generated-recipe').scrollIntoView({ behavior: 'smooth' });
        function saveGeneratedRecipe() {
                name: document.getElementById('generated-recipe-name').value,
                category: document.getElementById('generated-recipe-category').value,
                ingredients: document.getElementById('generated-recipe-ingredients').value.split('\n').filter(i => i.trim()),
                instructions: document.getElementById('generated-recipe-instructions').value,
                    calories: parseInt(document.getElementById('generated-recipe-calories').value) || 0,
                    protein: parseInt(document.getElementById('generated-recipe-protein').value) || 0,
                    carbs: parseInt(document.getElementById('generated-recipe-carbs').value) || 0,
                    fats: parseInt(document.getElementById('generated-recipe-fat').value) || 0
            if (!recipeData.name || !recipeData.ingredients.length || !recipeData.instructions) {
                alert('Bitte fülle alle Pflichtfelder aus!');
            // Lade bestehende Rezepte
            let recipes = JSON.parse(localStorage.getItem('nutrition_recipes') || '[]');
            // Füge neues Rezept hinzu
            recipeData.id = Date.now();
            recipeData.createdAt = new Date().toISOString();
            recipeData.source = 'AI Generated';
            recipes.push(recipeData);
            // Speichere zurück
            // Aktualisiere Statistiken
            const aiRequests = parseInt(localStorage.getItem('nutrition_ai_requests') || '0') + 1;
            localStorage.setItem('nutrition_ai_requests', aiRequests.toString());
            // Aktualisiere Rezept-Liste
            loadSavedRecipes();
            alert('Rezept erfolgreich gespeichert!');
        function regenerateRecipe() {
            // Verstecke aktuelles Rezept
            document.getElementById('generated-recipe').style.display = 'none';
            // Generiere neues Rezept
            generateAIRecipe();
        function loadSavedRecipes() {
            const recipesList = document.getElementById('saved-recipes-list');
            if (recipes.length === 0) {
                recipesList.innerHTML = '<div style="padding: 2rem; text-align: center; color: #666;">Keine Rezepte gespeichert</div>';
            recipesList.innerHTML = recipes.map(recipe => `
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; border-bottom: 1px solid #e2e8f0;">
                        <h5 style="font-weight: 600; margin: 0; color: #1e293b;">${recipe.name}</h5>
                        <p style="margin: 0.25rem 0 0 0; color: #64748b; font-size: 0.9rem;">
                            ${recipe.category} • ${recipe.nutrition?.calories || recipe.calories || 0} kcal • ${recipe.source || 'Manuell'}
                    <div style="display: flex; gap: 0.5rem;">
                        <button data-action="edit-recipe" class="btn btn-primary" style="padding: 0.5rem; background: #6366f1; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
                            ✏️ Bearbeiten
                        <button data-action="delete-recipe" class="btn btn-primary" style="padding: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
                            🗑️ Löschen
            `).join('');
        function editRecipe(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (recipe) {
                // Fülle die generierten Rezept-Felder mit dem ausgewählten Rezept
                document.getElementById('generated-recipe-name').value = recipe.name;
                document.getElementById('generated-recipe-category').value = recipe.category;
                document.getElementById('generated-recipe-ingredients').value = Array.isArray(recipe.ingredients) ? recipe.ingredients.join('\n') : recipe.ingredients;
                document.getElementById('generated-recipe-instructions').value = recipe.instructions;
                document.getElementById('generated-recipe-calories').value = recipe.nutrition?.calories || recipe.calories || 0;
                document.getElementById('generated-recipe-protein').value = recipe.nutrition?.protein || recipe.protein || 0;
                document.getElementById('generated-recipe-carbs').value = recipe.nutrition?.carbs || recipe.carbs || 0;
                document.getElementById('generated-recipe-fat').value = recipe.nutrition?.fats || recipe.fat || 0;
                // Zeige das Rezept zum Bearbeiten
                document.getElementById('generated-recipe').style.display = 'block';
                document.getElementById('generated-recipe').scrollIntoView({ behavior: 'smooth' });
        function deleteRecipe(recipeId) {
            if (confirm('Möchtest du dieses Rezept wirklich löschen?')) {
                let recipes = JSON.parse(localStorage.getItem('nutrition_recipes') || '[]');
                recipes = recipes.filter(r => r.id !== recipeId);
                localStorage.setItem('nutrition_recipes', JSON.stringify(recipes));
                loadSavedRecipes();
        function updateNutritionStats() {
            // Update statistics
            const plansGenerated = parseInt(localStorage.getItem('nutrition_plans_generated') || '0');
            const aiRequests = parseInt(localStorage.getItem('nutrition_ai_requests') || '0');
            const exportsToday = parseInt(localStorage.getItem('nutrition_exports_today') || '0');
            const activeUsers = parseInt(localStorage.getItem('nutrition_active_users') || '0');
            document.getElementById('plans-generated').textContent = plansGenerated;
            document.getElementById('ai-requests').textContent = aiRequests;
            document.getElementById('exports-today').textContent = exportsToday;
            document.getElementById('active-users').textContent = activeUsers;
        function loadOpenAIKey() {
            const savedKey = localStorage.getItem('openai_api_key');
            if (savedKey) {
                document.getElementById('openai-api-key').value = savedKey;
        function toggleAPIKeyVisibility() {
            const apiKeyInput = document.getElementById('openai-api-key');
            if (apiKeyInput.type === 'password') {
                apiKeyInput.type = 'text';
                apiKeyInput.type = 'password';
        // Ikigai-Workflow-Verwaltung Funktionen
        function loadIkigaiStats() {
                const stats = JSON.parse(localStorage.getItem('ikigaiStats') || '{}');
                // Update statistics display
                document.getElementById('ikigai-completions').textContent = stats.completions || 0;
                document.getElementById('avg-completion-time').textContent = stats.avgTime || '-';
                document.getElementById('ikigai-rating').textContent = stats.rating || '-';
                document.getElementById('ikigai-progress').textContent = (stats.completionRate || 0) + '%';
                console.error('Error loading Ikigai stats:', error);
        function setupIkigaiEventListeners() {
            // Step edit buttons
            document.querySelectorAll('.edit-step-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const step = e.target.getAttribute('data-step');
                    openStepEditor(step);
            // Video edit buttons
            document.querySelectorAll('.edit-video-btn').forEach(btn => {
                    const video = e.target.getAttribute('data-video');
                    openVideoEditor(video);
            // Template management buttons
            document.querySelectorAll('.manage-templates-btn').forEach(btn => {
                    openTemplateManager();
        function openStepEditor(stepNumber) {
            // Create modal for step editing
            const modal = document.createElement('div');
            modal.className = 'ikigai-modal';
            modal.innerHTML = `
                <div class="ikigai-modal-content">
                    <div class="ikigai-modal-header">
                        <h3>Schritt ${stepNumber} bearbeiten</h3>
                        <button class="ikigai-modal-close">&times;</button>
                    <div class="ikigai-modal-body">
                        <div class="step-editor">
                                <label>Titel</label>
                                <input type="text" id="step-title-${stepNumber}" value="Schritt ${stepNumber}">
                                <label>Beschreibung</label>
                                <textarea id="step-description-${stepNumber}" rows="3"></textarea>
                                <label>Übungen</label>
                                <div class="exercises-list" id="exercises-${stepNumber}">
                                    <!-- Exercises will be loaded here -->
                                <button class="add-exercise-btn" data-step="${stepNumber}">
                                    <i class="fas fa-plus"></i> Übung hinzufügen
                    <div class="ikigai-modal-footer">
                        <button class="btn btn-secondary" data-action="close-ikigai-modal">Abbrechen</button>
                        <button class="btn btn-primary" data-action="save-step-changes">Speichern</button>
            `;
            // Add modal styles
            const style = document.createElement('style');
            style.textContent = `
                .ikigai-modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                .ikigai-modal-content {
                    background: white;
                    border-radius: 1rem;
                    max-width: 800px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                .ikigai-modal-header {
                    justify-content: space-between;
                    padding: 1.5rem;
                    border-bottom: 1px solid #e2e8f0;
                .ikigai-modal-header h3 {
                    margin: 0;
                    color: #1e293b;
                .ikigai-modal-close {
                    background: none;
                    border: none;
                    font-size: 1.5rem;
                    cursor: pointer;
                    color: #64748b;
                .ikigai-modal-body {
                    padding: 2rem;
                .ikigai-modal-footer {
                    justify-content: flex-end;
                    gap: 1rem;
                    border-top: 1px solid #e2e8f0;
                .form-group {
                    margin-bottom: 1.5rem;
                .form-group label {
                    display: block;
                    margin-bottom: 0.5rem;
                    font-weight: 500;
                    color: #374151;
                .form-group input,
                .form-group textarea {
                    padding: 0.75rem;
                    border: 1px solid #d1d5db;
                    border-radius: 0.5rem;
                    font-family: inherit;
                .add-exercise-btn {
                    background: #10b981;
                    color: white;
                    padding: 0.75rem 1rem;
                    gap: 0.5rem;
            document.head.appendChild(style);
            document.body.appendChild(modal);
            // Close modal functionality
            modal.querySelector('.ikigai-modal-close').addEventListener('click', () => {
                closeIkigaiModal();
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeIkigaiModal();
            // Load step data
            loadStepData(stepNumber);
        function openVideoEditor(videoType) {
            // Create modal for video editing
                        <h3>Video bearbeiten: ${getVideoTitle(videoType)}</h3>
                        <div class="video-editor">
                                <input type="text" id="video-title-${videoType}" value="${getVideoTitle(videoType)}">
                                <textarea id="video-description-${videoType}" rows="3">${getVideoDescription(videoType)}</textarea>
                                <label>YouTube URL</label>
                                <input type="url" id="video-url-${videoType}" placeholder="https://youtube.com/watch?v=...">
                                <label>Thumbnail</label>
                                <input type="file" id="video-thumbnail-${videoType}" accept="image/*">
                        <button class="btn btn-primary" data-action="save-video-changes" data-param="${videoType}">Speichern</button>
        function openTemplateManager() {
            // Create modal for template management
                        <h3>Inhaltsvorlagen verwalten</h3>
                        <div class="template-manager">
                            <div class="template-categories">
                                <button class="template-category-btn active" data-category="exercises">Übungsvorlagen</button>
                                <button class="template-category-btn" data-category="tips">Tipps & Ratschläge</button>
                                <button class="template-category-btn" data-category="examples">Beispielantworten</button>
                            <div class="template-content">
                                <div class="template-list" id="template-list">
                                    <!-- Templates will be loaded here -->
                                <button class="add-template-btn">
                                    <i class="fas fa-plus"></i> Vorlage hinzufügen
                        <button class="btn btn-primary" data-action="save-template-changes">Speichern</button>
        function closeIkigaiModal() {
            const modal = document.querySelector('.ikigai-modal');
            const style = document.querySelector('style:last-of-type');
            if (modal) document.body.removeChild(modal);
            if (style) document.head.removeChild(style);
        function loadStepData(stepNumber) {
            // Load step data from localStorage or default values
            const stepData = JSON.parse(localStorage.getItem(`ikigaiStep${stepNumber}`) || '{}');
            document.getElementById(`step-title-${stepNumber}`).value = stepData.title || `Schritt ${stepNumber}`;
            document.getElementById(`step-description-${stepNumber}`).value = stepData.description || '';
            // Load exercises
            const exercisesContainer = document.getElementById(`exercises-${stepNumber}`);
            if (stepData.exercises) {
                stepData.exercises.forEach((exercise, index) => {
                    addExerciseToStep(stepNumber, index, exercise);
        function addExerciseToStep(stepNumber, index, exercise = {}) {
            const exerciseDiv = document.createElement('div');
            exerciseDiv.className = 'exercise-item';
            exerciseDiv.innerHTML = `
                <div class="exercise-header">
                    <input type="text" value="${exercise.title || ''}" placeholder="Übungstitel" class="exercise-title">
                    <button class="remove-exercise-btn" data-action="remove-exercise">
                        <i class="fas fa-trash"></i>
                <textarea class="exercise-description" placeholder="Übungsbeschreibung" rows="2">${exercise.description || ''}</textarea>
            exercisesContainer.appendChild(exerciseDiv);
        function removeExercise(button) {
            button.closest('.exercise-item').remove();
        function saveStepChanges(stepNumber) {
            const stepData = {
                title: document.getElementById(`step-title-${stepNumber}`).value,
                description: document.getElementById(`step-description-${stepNumber}`).value,
                exercises: []
            // Collect exercises
            const exerciseItems = document.querySelectorAll(`#exercises-${stepNumber} .exercise-item`);
            exerciseItems.forEach(item => {
                const title = item.querySelector('.exercise-title').value;
                const description = item.querySelector('.exercise-description').value;
                if (title || description) {
                    stepData.exercises.push({ title, description });
            // Save to localStorage
            localStorage.setItem(`ikigaiStep${stepNumber}`, JSON.stringify(stepData));
            showStatus('✅ Schritt erfolgreich gespeichert!', 'success');
            closeIkigaiModal();
        function saveVideoChanges(videoType) {
            const videoData = {
                title: document.getElementById(`video-title-${videoType}`).value,
                description: document.getElementById(`video-description-${videoType}`).value,
                url: document.getElementById(`video-url-${videoType}`).value
            localStorage.setItem(`ikigaiVideo${videoType}`, JSON.stringify(videoData));
            showStatus('✅ Video erfolgreich gespeichert!', 'success');
        function saveTemplateChanges() {
            // Save template changes
            showStatus('✅ Vorlagen erfolgreich gespeichert!', 'success');
        function getVideoTitle(videoType) {
            const titles = {
                'ikigai-basics': 'Ikigai Grundlagen',
                'self-reflection': 'Selbstreflexion',
                'goal-setting': 'Lebensziele setzen',
                'daily-ikigai': 'Ikigai im Alltag'
            return titles[videoType] || 'Video-Tutorial';
        function getVideoDescription(videoType) {
            const descriptions = {
                'ikigai-basics': 'Grundlagen und Philosophie des Ikigai-Konzepts',
                'self-reflection': 'Techniken zur tiefen Selbstanalyse',
                'goal-setting': 'Wie du deine Ziele strukturiert angehst',
                'daily-ikigai': 'Praktische Umsetzung im täglichen Leben'
            return descriptions[videoType] || 'Ein hilfreiches Video-Tutorial';
        // Bewerbungsverwaltung Funktionen
        function addApplication() {
            const applicationData = {
                company: document.getElementById('application-company').value,
                position: document.getElementById('application-position').value,
                status: document.getElementById('application-status').value,
                notes: document.getElementById('application-notes').value,
                date: new Date().toISOString()
            if (!applicationData.company || !applicationData.position) {
            // Lade bestehende Bewerbungen
            let applications = JSON.parse(localStorage.getItem('applications') || '[]');
            // Füge neue Bewerbung hinzu
            applicationData.id = Date.now();
            applications.push(applicationData);
            localStorage.setItem('applications', JSON.stringify(applications));
            // Leere Formular
            document.getElementById('application-company').value = '';
            document.getElementById('application-position').value = '';
            document.getElementById('application-status').value = 'sent';
            document.getElementById('application-notes').value = '';
            updateApplicationStats();
            alert('Bewerbung erfolgreich hinzugefügt!');
        function exportApplications() {
            const applications = JSON.parse(localStorage.getItem('applications') || '[]');
            if (applications.length === 0) {
                alert('Keine Bewerbungen zum Exportieren vorhanden!');
            // Erstelle CSV-Export
            const csvContent = [
                ['Unternehmen', 'Position', 'Status', 'Datum', 'Notizen'],
                ...applications.map(app => [
                    app.company,
                    app.position,
                    app.status,
                    new Date(app.date).toLocaleDateString('de-DE'),
                    app.notes
                ])
            ].map(row => row.map(cell => `"${cell}"`).join(',')).join('\n');
            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `bewerbungen_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        function uploadCV() {
            const fileInput = document.getElementById('cv-upload');
            const file = fileInput.files[0];
            if (!file) {
            // Hier würde normalerweise der Upload-Prozess stattfinden
            alert(`Datei "${file.name}" wurde erfolgreich hochgeladen!`);
            // Leere Input
            fileInput.value = '';
        function updateApplicationStats() {
            const sentApplications = applications.length;
            const positiveResponses = applications.filter(app => 
                app.status === 'interview' || app.status === 'accepted'
            ).length;
            const interviews = applications.filter(app => 
            const rejections = applications.filter(app => 
                app.status === 'rejected'
            const pendingApplications = applications.filter(app => 
                app.status === 'sent' || app.status === 'reviewed'
            const successRate = sentApplications > 0 ? 
                Math.round((positiveResponses / sentApplications) * 100) : 0;
            // Aktualisiere Anzeige
            const sentElement = document.getElementById('sent-applications');
            const positiveElement = document.getElementById('positive-responses');
            const interviewElement = document.getElementById('interviews');
            const rejectionElement = document.getElementById('rejections');
            const pendingElement = document.getElementById('pending-applications');
            const successElement = document.getElementById('success-rate');
            if (sentElement) sentElement.textContent = sentApplications;
            if (positiveElement) positiveElement.textContent = positiveResponses;
            if (interviewElement) interviewElement.textContent = interviews;
            if (rejectionElement) rejectionElement.textContent = rejections;
            if (pendingElement) pendingElement.textContent = pendingApplications;
            if (successElement) successElement.textContent = successRate + '%';
        function updateDashboardApplications() {
            const total = applications.length;
            const pending = applications.filter(app => 
            const positive = applications.filter(app => 
            const successRate = total > 0 ? Math.round((positive / total) * 100) : 0;
            // Update dashboard stats
            const totalElement = document.getElementById('dashboard-total-apps');
            const pendingElement = document.getElementById('dashboard-pending-apps');
            const successElement = document.getElementById('dashboard-success-rate');
            if (totalElement) totalElement.textContent = total;
            if (pendingElement) pendingElement.textContent = pending;
            // Update recent applications
            updateRecentApplications(applications);
        function updateRecentApplications(applications) {
            const recentList = document.getElementById('recentApplicationsList');
            if (!recentList) return;
            // Get last 3 applications
            const recentApps = applications
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 3);
            if (recentApps.length === 0) {
                recentList.innerHTML = '<p style="color: #64748b; font-size: 0.875rem;">Keine Bewerbungen vorhanden</p>';
            recentList.innerHTML = recentApps.map(app => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid #e2e8f0;">
                        <div style="font-weight: 600; color: #1e293b; font-size: 0.875rem;">${app.company}</div>
                        <div style="color: #64748b; font-size: 0.75rem;">${app.position}</div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.625rem; font-weight: 600; text-transform: uppercase; background: ${getStatusColor(app.status)}; color: white;">
                            ${getStatusText(app.status)}
                        </span>
        function getStatusColor(status) {
            const colors = {
                'sent': '#dbeafe',
                'reviewed': '#fef3c7',
                'interview': '#d1fae5',
                'accepted': '#dcfce7',
                'rejected': '#fee2e2'
            return colors[status] || '#f1f5f9';
        function getStatusText(status) {
            const statusMap = {
                'sent': 'Gesendet',
                'reviewed': 'In Bearbeitung',
                'interview': 'Interview',
                'accepted': 'Angenommen',
                'rejected': 'Abgelehnt'
            return statusMap[status] || status;
        // Services laden
        function loadServices() {
            const servicesList = document.getElementById('servicesList');
            if (!servicesList) return;
            // Services synchronisiert mit der Website
            const defaultServices = [
                {
                    name: 'AI & Digitalisierung',
                    category: 'beratung',
                    description: 'Strategische Beratung für die Integration von KI in HR-Prozesse und Unternehmensabläufe.',
                    icon: 'fas fa-robot',
                    color: '#6366f1',
                    features: ['KI-Strategieentwicklung', 'Prozessautomatisierung', 'Digital Workplace'],
                    link: null,
                    image: null
                },
                    name: 'HR Transformation',
                    description: 'Moderne HR-Strukturen und -Prozesse für zukunftsfähige Unternehmen.',
                    icon: 'fas fa-users',
                    color: '#10b981',
                    features: ['HR-Strategie', 'Organisationsentwicklung', 'Change Management'],
                    name: 'Geschäftsprozesse',
                    description: 'Optimierung und Restrukturierung von Geschäftsprozessen für maximale Effizienz.',
                    icon: 'fas fa-cogs',
                    color: '#f59e0b',
                    features: ['Prozessanalyse', 'Workflow-Optimierung', 'Performance Management'],
                    name: 'Ernährungsberatung',
                    category: 'gesundheit',
                    description: 'Professionelle Ernährungsberatung für optimale Gesundheit und Fitness mit modernen digitalen Tools.',
                    icon: 'fas fa-utensils',
                    color: '#ef4444',
                    features: ['Personalisierte Ernährungspläne', 'KI-gestützte Rezept-Generierung', 'Kalender-Integration', 'Einkaufslisten-Automatisierung'],
                    link: 'ernaehrungsberatung.html',
                    name: 'Persönlichkeitsentwicklung',
                    category: 'coaching',
                    description: 'Entdecke 29 bewährte Methoden für deine persönliche Entwicklung. Von Ikigai bis Stress-Management - finde deinen Weg zu mehr Klarheit und Wachstum.',
                    icon: 'fas fa-seedling',
                    color: '#8b5cf6',
                    features: ['29 verschiedene Methoden', 'Interaktive Workflows', 'Progress-Tracking', 'Export-Funktionen'],
                    link: 'persoenlichkeitsentwicklung-uebersicht.html',
                    name: 'Personal Training',
                    description: 'KI-gestützte Trainingspläne für Gym oder Home-Workout. Personalisierte Pläne mit Kalender-Integration und Fortschritts-Tracking.',
                    icon: 'fas fa-dumbbell',
                    color: '#06b6d4',
                    features: ['AI-Trainingsplan-Generator', 'Gym & Bodyweight-Optionen', 'Kalender-Export (Google/Apple)', 'Fortschritts-Tracking'],
                    link: 'personal-training.html',
            ];
            // Lade gespeicherte Services oder verwende Standard
            const savedServices = JSON.parse(localStorage.getItem('adminServices') || '[]');
            const allServices = savedServices.length > 0 ? savedServices : defaultServices;
            renderServices(allServices);
        // Services rendern
        function renderServices(services) {
            servicesList.innerHTML = services.map((service, index) => `
                <div class="service-card" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-left: 4px solid ${service.color};">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <i class="${service.icon}" style="color: ${service.color}; font-size: 1.5rem;"></i>
                            <h4 style="margin: 0; color: #333;">${service.name}</h4>
                        <div style="display: flex; gap: 0.5rem;">
                            <button data-action="edit-service" class="btn btn-primary" style="padding: 0.5rem; background: #6366f1; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                ✏️
                            <button data-action="delete-service" class="btn btn-primary" style="padding: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                🗑️
                    <p style="color: #666; margin-bottom: 1rem; line-height: 1.5;">${service.description}</p>
                    ${service.features ? `
                        <div style="margin-bottom: 1rem;">
                            <h5 style="margin: 0 0 0.5rem 0; color: #374151; font-size: 0.9rem;">Features:</h5>
                            <ul style="margin: 0; padding-left: 1.2rem; color: #6b7280; font-size: 0.85rem;">
                                ${service.features.map(feature => `<li>${feature}</li>`).join('')}
                    ` : ''}
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="background: ${service.color}20; color: ${service.color}; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.875rem; font-weight: 500;">
                            ${service.category}
                            ${service.link ? `<a href="${service.link}" target="_blank" style="color: ${service.color}; text-decoration: none; font-weight: 500; font-size: 0.85rem;">→ Zur Seite</a>` : ''}
                            ${service.image ? `<img src="${service.image}" alt="${service.name}" style="width: 40px; height: 40px; border-radius: 4px; object-fit: cover;">` : ''}
        // Neuen Service hinzufügen
        function addNewService() {
            // Formular anzeigen (bereits im HTML vorhanden)
            console.log('➕ Neuen Service hinzufügen');
        // Service erstellen
        function createNewService() {
            const name = document.getElementById('newServiceName').value;
            const category = document.getElementById('newServiceCategory').value;
            const description = document.getElementById('newServiceDescription').value;
            const icon = document.getElementById('newServiceIcon').value;
            const color = document.getElementById('newServiceColor').value;
            const imageFile = document.getElementById('newServiceImage').files[0];
            if (!name || !description) {
            const newService = {
                name: name,
                category: category,
                description: description,
                icon: icon || 'fas fa-star',
                color: color,
                image: null
            // Bild verarbeiten falls vorhanden
            if (imageFile) {
                    newService.image = e.target.result;
                    saveAndRenderService(newService);
                reader.readAsDataURL(imageFile);
                saveAndRenderService(newService);
        // Service speichern und rendern
        function saveAndRenderService(newService) {
            savedServices.push(newService);
            localStorage.setItem('adminServices', JSON.stringify(savedServices));
            renderServices(savedServices);
            // Formular zurücksetzen
            document.getElementById('newServiceName').value = '';
            document.getElementById('newServiceDescription').value = '';
            document.getElementById('newServiceIcon').value = '';
            document.getElementById('newServiceImage').value = '';
            alert('Service erfolgreich erstellt!');
            console.log('✅ Neuer Service erstellt:', newService);
        // Service bearbeiten
        function editService(index) {
            const service = savedServices[index];
            if (service) {
                // Einfache Bearbeitung über Prompt (kann später erweitert werden)
                const newName = prompt('Neuer Name:', service.name);
                const newDescription = prompt('Neue Beschreibung:', service.description);
                if (newName && newDescription) {
                    service.name = newName;
                    service.description = newDescription;
                    localStorage.setItem('adminServices', JSON.stringify(savedServices));
                    renderServices(savedServices);
                    alert('Service erfolgreich bearbeitet!');
        // Service löschen
        function deleteService(index) {
            if (confirm('Möchtest du diesen Service wirklich löschen?')) {
                const savedServices = JSON.parse(localStorage.getItem('adminServices') || '[]');
                savedServices.splice(index, 1);
                localStorage.setItem('adminServices', JSON.stringify(savedServices));
                renderServices(savedServices);
                alert('Service erfolgreich gelöscht!');
        // Services aktualisieren
        function refreshServices() {
            alert('Services aktualisiert!');
        // Services mit Website synchronisieren
        function syncServicesWithWebsite() {
            const services = JSON.parse(localStorage.getItem('adminServices') || '[]');
            // Speichere Services für Website-Synchronisation
            localStorage.setItem('websiteServices', JSON.stringify(services));
                window.netlifyStorage.saveData('services', services)
                        console.log('✅ Services auch bei Netlify gespeichert:', result);
                        console.warn('⚠️ Netlify Storage für Services nicht verfügbar:', error);
            console.log('✅ Services mit Website synchronisiert');
            alert('Services erfolgreich mit der Website synchronisiert!');
        // Services von Website laden
        function loadServicesFromWebsite() {
            const websiteServices = JSON.parse(localStorage.getItem('websiteServices') || '[]');
            if (websiteServices.length > 0) {
                localStorage.setItem('adminServices', JSON.stringify(websiteServices));
                loadServices();
                alert('Services von der Website geladen!');
                alert('Keine Services auf der Website gefunden. Verwende die Standard-Services.');
        // ===== PERSÖNLICHKEITSENTWICKLUNG WORKFLOW VERWALTUNG =====
        // Workflow-Tabs verwalten
        function initWorkflowTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    const container = this.closest('.workflow-admin-content');
                    container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    container.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
                    // Aktiven Tab aktivieren
                    const panel = container.querySelector(`#${tab}-panel`);
                    if (panel) {
                        panel.classList.add('active');
        // Methode bearbeiten
        function editMethod(methodId) {
            // Navigiere zur entsprechenden Workflow-Sektion
            const targetSection = document.getElementById(methodId);
            if (targetSection) {
                // Alle Sektionen verstecken
                document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
                // Gewählte Sektion anzeigen
                targetSection.classList.add('active');
                // Navigation aktualisieren
                document.querySelectorAll('.nav-item').forEach(nav => {
                    if (!nav.classList.contains('has-submenu')) {
                        nav.classList.remove('active');
                const navItem = document.querySelector(`[data-section="${methodId}"]`);
                if (navItem) {
                    navItem.classList.add('active');
                console.log(`✅ Methode ${methodId} zur Bearbeitung geöffnet`);
                alert(`Methode ${methodId} nicht gefunden!`);
        // Methode Vorschau
        function previewMethod(methodId) {
            // Öffne die Methode in einem neuen Tab
            const methodUrl = `persoenlichkeitsentwicklung-uebersicht.html#${methodId}`;
            window.open(methodUrl, '_blank');
        // Workflow-Schritte verwalten
        function manageWorkflowSteps(methodId) {
            console.log(`Verwalte Workflow-Schritte für ${methodId}`);
            // Hier würde die spezifische Workflow-Verwaltung implementiert werden
        // Workflow-Inhalte verwalten
        function manageWorkflowContent(methodId) {
            console.log(`Verwalte Workflow-Inhalte für ${methodId}`);
            // Hier würde die Inhalts-Verwaltung implementiert werden
        // Workflow-Einstellungen verwalten
        function manageWorkflowSettings(methodId) {
            console.log(`Verwalte Workflow-Einstellungen für ${methodId}`);
            // Hier würden die Einstellungen verwaltet werden
        // ===== VERMIETUNGS- UND BUCHUNGSSYSTEM =====
        // Vermietungsgegenstände laden
        function loadRentalItems() {
            const savedItems = JSON.parse(localStorage.getItem('adminRentalItems') || '[]');
            if (savedItems.length === 0) {
                // Standard-Vermietungsgegenstände erstellen
                const defaultItems = [
                    {
                        id: 'wohnmobil-001',
                        type: 'wohnmobil',
                        name: 'Wohnmobil-001',
                        price: 150,
                        deposit: 500,
                        description: 'Komfortables Wohnmobil für 4 Personen',
                        status: 'available',
                        images: [],
                        bookings: []
                    },
                        id: 'fotobox-001',
                        type: 'fotobox',
                        name: 'Fotobox-001',
                        price: 80,
                        deposit: 200,
                        description: 'Professionelle Fotobox für Events',
                        id: 'ebike-001',
                        type: 'ebike',
                        name: 'E-Bike-001',
                        price: 45,
                        deposit: 150,
                        description: 'Elektrofahrrad für Stadt und Land',
                        id: 'sup-001',
                        type: 'sup',
                        name: 'SUP-001',
                        price: 35,
                        deposit: 100,
                        description: 'Stand-Up Paddle Board für Wasseraktivitäten',
                localStorage.setItem('adminRentalItems', JSON.stringify(defaultItems));
                return defaultItems;
            return savedItems;
        // Vermietungsgegenstände rendern
        function renderRentalItems() {
            const items = loadRentalItems();
            const container = document.getElementById('rentalItemsList');
            if (!container) return;
            container.innerHTML = items.map((item, index) => `
                <div class="rental-item-card" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-left: 4px solid ${getRentalTypeColor(item.type)};">
                            <i class="${getRentalTypeIcon(item.type)}" style="color: ${getRentalTypeColor(item.type)}; font-size: 1.5rem;"></i>
                            <h4 style="margin: 0; color: #333;">${item.name}</h4>
                            <button data-action="edit-rental-item" class="btn btn-primary" style="padding: 0.5rem; background: #6366f1; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            <button data-action="delete-rental-item" class="btn btn-primary" style="padding: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    <div style="margin-bottom: 1rem;">
                        <p style="color: #666; margin-bottom: 0.5rem; line-height: 1.5;">${item.description}</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.875rem;">
                                <strong>Preis:</strong> ${item.price}€/Tag<br>
                                <strong>Kaution:</strong> ${item.deposit}€
                                <strong>Status:</strong> <span style="color: ${getStatusColor(item.status)}; font-weight: 500;">${getStatusText(item.status)}</span><br>
                                <strong>Buchungen:</strong> ${item.bookings.length}
                        <span style="background: ${getRentalTypeColor(item.type)}20; color: ${getRentalTypeColor(item.type)}; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.875rem; font-weight: 500;">
                            ${getRentalTypeText(item.type)}
                        <button data-action="view-rental-bookings" class="btn btn-primary" style="padding: 0.5rem 1rem; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem;">
                            📅 Buchungen anzeigen
        // Neuen Vermietungsgegenstand erstellen
        function createNewRentalItem() {
            const type = document.getElementById('newRentalType').value;
            const name = document.getElementById('newRentalName').value;
            const price = parseFloat(document.getElementById('newRentalPrice').value);
            const deposit = parseFloat(document.getElementById('newRentalDeposit').value);
            const description = document.getElementById('newRentalDescription').value;
            const status = document.getElementById('newRentalStatus').value;
            const imageFiles = document.getElementById('newRentalImages').files;
            if (!type || !name || !price || !description) {
            const newItem = {
                id: `${type}-${Date.now()}`,
                type: type,
                price: price,
                deposit: deposit,
                status: status,
                images: [],
                bookings: []
            // Bilder verarbeiten falls vorhanden
            if (imageFiles.length > 0) {
                let processedImages = 0;
                Array.from(imageFiles).forEach((file, index) => {
                    reader.onload = function(e) {
                        newItem.images.push(e.target.result);
                        processedImages++;
                        if (processedImages === imageFiles.length) {
                            saveAndRenderRentalItem(newItem);
                saveAndRenderRentalItem(newItem);
        // Vermietungsgegenstand speichern und rendern
        function saveAndRenderRentalItem(newItem) {
            savedItems.push(newItem);
            localStorage.setItem('adminRentalItems', JSON.stringify(savedItems));
            renderRentalItems();
            updateBookingRentalSelect();
            document.getElementById('newRentalType').value = 'wohnmobil';
            document.getElementById('newRentalName').value = '';
            document.getElementById('newRentalPrice').value = '';
            document.getElementById('newRentalDeposit').value = '';
            document.getElementById('newRentalDescription').value = '';
            document.getElementById('newRentalImages').value = '';
            document.getElementById('newRentalStatus').value = 'available';
            alert('Vermietungsgegenstand erfolgreich erstellt!');
            console.log('✅ Neuer Vermietungsgegenstand erstellt:', newItem);
        // Vermietungsgegenstand bearbeiten
        function editRentalItem(index) {
            const item = savedItems[index];
            if (item) {
                const newName = prompt('Neuer Name:', item.name);
                const newPrice = prompt('Neuer Preis (€/Tag):', item.price);
                const newDescription = prompt('Neue Beschreibung:', item.description);
                if (newName && newPrice && newDescription) {
                    item.name = newName;
                    item.price = parseFloat(newPrice);
                    item.description = newDescription;
                    localStorage.setItem('adminRentalItems', JSON.stringify(savedItems));
                    renderRentalItems();
                    alert('Vermietungsgegenstand erfolgreich bearbeitet!');
        // Vermietungsgegenstand löschen
        function deleteRentalItem(index) {
            if (confirm('Möchtest du diesen Vermietungsgegenstand wirklich löschen?')) {
                const savedItems = JSON.parse(localStorage.getItem('adminRentalItems') || '[]');
                savedItems.splice(index, 1);
                localStorage.setItem('adminRentalItems', JSON.stringify(savedItems));
                renderRentalItems();
                updateBookingRentalSelect();
                alert('Vermietungsgegenstand erfolgreich gelöscht!');
        // Buchungen für einen Vermietungsgegenstand anzeigen
        function viewRentalBookings(index) {
            if (item && item.bookings.length > 0) {
                const bookingsList = item.bookings.map(booking => `
                    <div style="background: #f9f9f9; padding: 1rem; margin: 0.5rem 0; border-radius: 6px; border-left: 3px solid #6366f1;">
                        <strong>${booking.customerName}</strong> (${booking.customerEmail})<br>
                        <small>${new Date(booking.startDate).toLocaleDateString('de-DE')} - ${new Date(booking.endDate).toLocaleDateString('de-DE')}</small><br>
                        <span style="color: ${getStatusColor(booking.status)};">${getStatusText(booking.status)}</span>
                `).join('');
                alert(`Buchungen für ${item.name}:\n\n${item.bookings.length} Buchung(en) gefunden.`);
                alert(`Keine Buchungen für ${item.name} vorhanden.`);
        // ===== BUCHUNGSSYSTEM =====
        // Buchungen laden
        function loadBookings() {
            const savedBookings = JSON.parse(localStorage.getItem('adminBookings') || '[]');
            renderBookings(savedBookings);
        // Buchungen rendern
        function renderBookings(bookings) {
            const container = document.getElementById('bookingsList');
            if (bookings.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666; padding: 2rem;">Keine Buchungen vorhanden.</div>';
            container.innerHTML = bookings.map((booking, index) => `
                <div class="booking-card" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-left: 4px solid ${getStatusColor(booking.status)};">
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; color: #333;">${booking.customerName}</h4>
                            <p style="margin: 0; color: #666; font-size: 0.875rem;">${booking.customerEmail}</p>
                            <button data-action="edit-booking" class="btn btn-primary" style="padding: 0.5rem; background: #6366f1; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            <button data-action="delete-booking" class="btn btn-primary" style="padding: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.875rem; margin-bottom: 0.5rem;">
                                <strong>Gegenstand:</strong> ${booking.rentalItemName}<br>
                                <strong>Telefon:</strong> ${booking.customerPhone}
                                <strong>Preis:</strong> ${booking.totalPrice}€<br>
                                <strong>Status:</strong> <span style="color: ${getStatusColor(booking.status)}; font-weight: 500;">${getStatusText(booking.status)}</span>
                        <div style="background: #f9f9f9; padding: 0.75rem; border-radius: 4px; font-size: 0.875rem;">
                            <strong>Zeitraum:</strong> ${new Date(booking.startDate).toLocaleDateString('de-DE')} - ${new Date(booking.endDate).toLocaleDateString('de-DE')}
                        ${booking.notes ? `<div style="margin-top: 0.5rem; font-size: 0.875rem; color: #666;"><strong>Notizen:</strong> ${booking.notes}</div>` : ''}
        // Neue Buchung erstellen
        function createNewBooking() {
            const rentalItemId = document.getElementById('bookingRentalItem').value;
            const customerName = document.getElementById('bookingCustomerName').value;
            const customerEmail = document.getElementById('bookingCustomerEmail').value;
            const customerPhone = document.getElementById('bookingCustomerPhone').value;
            const startDate = document.getElementById('bookingStartDate').value;
            const endDate = document.getElementById('bookingEndDate').value;
            const status = document.getElementById('bookingStatus').value;
            const notes = document.getElementById('bookingNotes').value;
            if (!rentalItemId || !customerName || !customerEmail || !startDate || !endDate) {
            // Vermietungsgegenstand finden
            const rentalItems = JSON.parse(localStorage.getItem('adminRentalItems') || '[]');
            const rentalItem = rentalItems.find(item => item.id === rentalItemId);
            if (!rentalItem) {
                alert('Vermietungsgegenstand nicht gefunden!');
            // Preis berechnen
            const start = new Date(startDate);
            const end = new Date(endDate);
            const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
            const totalPrice = days * rentalItem.price;
            const newBooking = {
                id: `booking-${Date.now()}`,
                rentalItemId: rentalItemId,
                rentalItemName: rentalItem.name,
                rentalItemType: rentalItem.type,
                customerName: customerName,
                customerEmail: customerEmail,
                customerPhone: customerPhone,
                startDate: startDate,
                endDate: endDate,
                totalPrice: totalPrice,
                notes: notes,
                createdAt: new Date().toISOString()
            // Buchung speichern
            savedBookings.push(newBooking);
            localStorage.setItem('adminBookings', JSON.stringify(savedBookings));
            // Buchung zum Vermietungsgegenstand hinzufügen
            rentalItem.bookings.push(newBooking);
            localStorage.setItem('adminRentalItems', JSON.stringify(rentalItems));
            // UI aktualisieren
            document.getElementById('bookingRentalItem').value = '';
            document.getElementById('bookingCustomerName').value = '';
            document.getElementById('bookingCustomerEmail').value = '';
            document.getElementById('bookingCustomerPhone').value = '';
            document.getElementById('bookingStartDate').value = '';
            document.getElementById('bookingEndDate').value = '';
            document.getElementById('bookingTotalPrice').value = '';
            document.getElementById('bookingNotes').value = '';
            alert('Buchung erfolgreich erstellt!');
            console.log('✅ Neue Buchung erstellt:', newBooking);
        // Buchung bearbeiten
        function editBooking(index) {
            const booking = savedBookings[index];
            if (booking) {
                const newStatus = prompt('Neuer Status (confirmed/pending/cancelled/completed):', booking.status);
                if (newStatus && ['confirmed', 'pending', 'cancelled', 'completed'].includes(newStatus)) {
                    booking.status = newStatus;
                    localStorage.setItem('adminBookings', JSON.stringify(savedBookings));
                    renderBookings(savedBookings);
                    alert('Buchung erfolgreich bearbeitet!');
        // Buchung löschen
        function deleteBooking(index) {
            if (confirm('Möchtest du diese Buchung wirklich löschen?')) {
                const savedBookings = JSON.parse(localStorage.getItem('adminBookings') || '[]');
                const deletedBooking = savedBookings[index];
                // Buchung aus Vermietungsgegenstand entfernen
                if (deletedBooking) {
                    const rentalItems = JSON.parse(localStorage.getItem('adminRentalItems') || '[]');
                    const rentalItem = rentalItems.find(item => item.id === deletedBooking.rentalItemId);
                    if (rentalItem) {
                        rentalItem.bookings = rentalItem.bookings.filter(b => b.id !== deletedBooking.id);
                        localStorage.setItem('adminRentalItems', JSON.stringify(rentalItems));
                savedBookings.splice(index, 1);
                localStorage.setItem('adminBookings', JSON.stringify(savedBookings));
                renderBookings(savedBookings);
                alert('Buchung erfolgreich gelöscht!');
        // Buchungs-Select für Vermietungsgegenstände aktualisieren
        function updateBookingRentalSelect() {
            const select = document.getElementById('bookingRentalItem');
            if (!select) return;
            const availableItems = rentalItems.filter(item => item.status === 'available');
            select.innerHTML = '<option value="">Bitte wählen...</option>' + 
                availableItems.map(item => `<option value="${item.id}">${item.name} (${item.price}€/Tag)</option>`).join('');
        // ===== HELPER-FUNKTIONEN =====
        // Farben für Vermietungstypen
        function getRentalTypeColor(type) {
                'wohnmobil': '#8b5cf6',
                'fotobox': '#f59e0b',
                'ebike': '#10b981',
                'sup': '#3b82f6'
            return colors[type] || '#6b7280';
        // Icons für Vermietungstypen
        function getRentalTypeIcon(type) {
            const icons = {
                'wohnmobil': 'fas fa-campground',
                'fotobox': 'fas fa-camera',
                'ebike': 'fas fa-bicycle',
                'sup': 'fas fa-water'
            return icons[type] || 'fas fa-box';
        // Text für Vermietungstypen
        function getRentalTypeText(type) {
            const texts = {
                'wohnmobil': 'Wohnmobil',
                'fotobox': 'Fotobox',
                'ebike': 'E-Bike',
                'sup': 'SUP Board'
            return texts[type] || type;
        // Farben für Status
                'available': '#10b981',
                'maintenance': '#f59e0b',
                'out_of_order': '#ef4444',
                'confirmed': '#10b981',
                'pending': '#f59e0b',
                'cancelled': '#ef4444',
                'completed': '#6b7280'
            return colors[status] || '#6b7280';
        // Text für Status
                'available': 'Verfügbar',
                'maintenance': 'Wartung',
                'out_of_order': 'Außer Betrieb',
                'confirmed': 'Bestätigt',
                'pending': 'Ausstehend',
                'cancelled': 'Storniert',
                'completed': 'Abgeschlossen'
            return texts[status] || status;
        // ===== INITIALISIERUNG =====
        // Alle Systeme beim Laden initialisieren
            loadRentalItems();
            loadBookings();
            renderBookings([]);
            // Lade gespeichertes Profilbild
            loadProfileImageFromStorage();
            // Initialisiere Medien-Kategorien
            initMediaCategories();
            // Initialisiere Workflow-Tabs
            initWorkflowTabs();
            // Lade Hero-Content
            loadHeroContentFromStorage();
            // Lade Ernährungsplan-Verwaltung
            loadOpenAIKey();
            // Lade Ikigai-Workflow-Verwaltung
            loadIkigaiStats();
            setupIkigaiEventListeners();
            // Lade Personal Training-Verwaltung
            loadPersonalTrainingStats();
            setupPersonalTrainingEventListeners();
            // Lade Bewerbungsverwaltung
            updateDashboardApplications();
        // Cache-busting für Admin-Script (als Backup)
        const timestamp = new Date().getTime();
        const script = document.createElement('script');
        script.src = `admin-script.js?v=3.5&t=${timestamp}`;
        document.head.appendChild(script);
        // Load Smart API System
        const smartApiScript = document.createElement('script');
        smartApiScript.src = `js/smart-api-system.js?v=1.0&t=${timestamp}`;
        smartApiScript.onload = function() {
            console.log('✅ Smart API System loaded');
            // Initialize Smart API for Bewerbungsunterlagen if we're in the applications section
            if (window.location.hash === '#applications' || document.querySelector('.admin-section.active')?.id === 'applications') {
                        initializeBewerbungsunterlagenSmartAPI();
        };
        document.head.appendChild(smartApiScript);
        // Load workflow functions
        const workflowScript = document.createElement('script');
        workflowScript.src = `js/workflow-functions.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(workflowScript);
        // Load page builder functions
        const pageBuilderScript = document.createElement('script');
        pageBuilderScript.src = `js/page-builder.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(pageBuilderScript);
        // Load smart cover letter functions
        const smartCoverLetterScript = document.createElement('script');
        smartCoverLetterScript.src = `js/smart-cover-letter.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(smartCoverLetterScript);
        // Load smart CV functions
        const smartCVScript = document.createElement('script');
        smartCVScript.src = `js/smart-cv.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(smartCVScript);
        // Load job requirement analyzer
        const jobAnalyzerScript = document.createElement('script');
        jobAnalyzerScript.src = `js/job-requirement-analyzer.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(jobAnalyzerScript);
        // Load smart workflow steps
        const smartWorkflowScript = document.createElement('script');
        smartWorkflowScript.src = `js/smart-workflow-steps.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(smartWorkflowScript);
        // Load application learning system
        const learningSystemScript = document.createElement('script');
        learningSystemScript.src = `js/application-learning-system.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(learningSystemScript);
        // Load AI Twin presenter
        const aiTwinScript = document.createElement('script');
        aiTwinScript.src = `js/ai-twin-presenter.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(aiTwinScript);
        // AI Coach Admin Script
        const aiCoachAdminScript = document.createElement('script');
        aiCoachAdminScript.src = `js/ai-coach-admin.js?v=1.0&t=${timestamp}`;
        document.head.appendChild(aiCoachAdminScript);
        // AI Coach Admin Functionality
        let aiCoachSettings = {
            apiKey: '',
            model: 'gpt-4',
            maxTokens: 500,
            temperature: 0.7,
            personality: 'professional',
            responseStyle: 'concise',
            languageLevel: 'simple',
            enableQuickActions: true,
            enableTypingIndicator: true,
            systemPrompt: '',
            assessmentPrompt: '',
            workflowPrompt: ''
        let apiUsageStats = {
            totalRequests: 0,
            totalTokens: 0,
            estimatedCost: 0,
            dailyUsage: []
        // Tab Management
        function initAICoachTabs() {
            const tabButtons = document.querySelectorAll('.ai-coach-tabs .tab-btn');
            const tabContents = document.querySelectorAll('.ai-coach-tabs .tab-content');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    // Add active class to clicked button and corresponding content
                    button.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
        // API Key Management
        function toggleApiKeyVisibility() {
            const input = document.getElementById('openai-api-key');
            const button = document.querySelector('.toggle-visibility i');
            if (input.type === 'password') {
                input.type = 'text';
                button.className = 'fas fa-eye-slash';
                input.type = 'password';
                button.className = 'fas fa-eye';
        async function testApiConnection() {
            const statusElement = document.getElementById('apiStatus');
            const statusIndicator = statusElement.querySelector('.status-indicator');
            const statusText = statusElement.querySelector('.status-text');
                showNotification('Bitte gib einen API Key ein', 'error');
            // Show loading state
            statusIndicator.className = 'status-indicator';
            statusText.textContent = 'Teste Verbindung...';
                // Test with AI Coach function if available
                if (typeof testAICoachConnection === 'function') {
                    // Temporarily update the API key for testing
                    if (typeof updateAICoachApiKey === 'function') {
                        updateAICoachApiKey(apiKey);
                    const result = await testAICoachConnection();
                        statusIndicator.className = 'status-indicator online';
                        statusText.textContent = 'Verbindung erfolgreich';
                        showNotification('API-Verbindung erfolgreich getestet!', 'success');
                        throw new Error(result.error);
                    // Fallback to direct API test
                    const response = await fetch('https://api.openai.com/v1/models', {
                        headers: {
                            'Authorization': `Bearer ${apiKey}`,
                            'Content-Type': 'application/json'
                    if (response.ok) {
                        throw new Error('API request failed');
                statusIndicator.className = 'status-indicator offline';
                statusText.textContent = 'Verbindung fehlgeschlagen';
                showNotification('API-Verbindung fehlgeschlagen. Bitte überprüfe deinen API Key.', 'error');
        function saveApiSettings() {
            const model = document.getElementById('apiModel').value;
            const maxTokens = parseInt(document.getElementById('maxTokens').value);
            const temperature = parseFloat(document.getElementById('temperature').value);
            // Update settings object
            aiCoachSettings.apiKey = apiKey;
            aiCoachSettings.model = model;
            aiCoachSettings.maxTokens = maxTokens;
            aiCoachSettings.temperature = temperature;
            localStorage.setItem('aiCoachSettings', JSON.stringify(aiCoachSettings));
            // Update the actual chatbot files
            updateChatbotApiSettings();
            showNotification('API-Einstellungen erfolgreich gespeichert!', 'success');
        function updateChatbotApiSettings() {
            // Update the AI Coach API key
            if (typeof updateAICoachApiKey === 'function') {
                updateAICoachApiKey(apiKey);
                console.log('AI Coach API key updated:', apiKey.substring(0, 10) + '...');
            console.log('Updating chatbot API settings:', aiCoachSettings);
            // In a real implementation, you would:
            // 1. Update the persoenlichkeitsentwicklung-uebersicht.html file
            // 2. Update the js/ai-coach.js file
            // 3. Or use a backend API to update the settings
        function loadApiSettings() {
            const saved = localStorage.getItem('aiCoachSettings');
            if (saved) {
                aiCoachSettings = JSON.parse(saved);
                // Update form fields
                document.getElementById('openai-api-key').value = aiCoachSettings.apiKey || '';
                document.getElementById('apiModel').value = aiCoachSettings.model || 'gpt-4';
                document.getElementById('maxTokens').value = aiCoachSettings.maxTokens || 500;
                document.getElementById('temperature').value = aiCoachSettings.temperature || 0.7;
                // Update API status if key exists
                if (aiCoachSettings.apiKey) {
                    const statusElement = document.getElementById('apiStatus');
                    const statusIndicator = statusElement.querySelector('.status-indicator');
                    const statusText = statusElement.querySelector('.status-text');
                    statusIndicator.className = 'status-indicator online';
                    statusText.textContent = 'Konfiguriert';
        // Assessment Management
        function createNewAssessment() {
            showNotification('Neues Assessment erstellen - Feature in Entwicklung', 'info');
        function editAssessment(type) {
            showNotification(`Assessment "${type}" bearbeiten - Feature in Entwicklung`, 'info');
        function previewAssessment(type) {
            showNotification(`Assessment "${type}" Vorschau - Feature in Entwicklung`, 'info');
        function deleteAssessment(type) {
            if (confirm(`Möchtest du das Assessment "${type}" wirklich löschen?`)) {
                showNotification(`Assessment "${type}" gelöscht`, 'success');
        // Workflow Management
        function createNewWorkflow() {
            showNotification('Neues Workflow-Template erstellen - Feature in Entwicklung', 'info');
        function editWorkflow(type) {
            showNotification(`Workflow "${type}" bearbeiten - Feature in Entwicklung`, 'info');
        function previewWorkflow(type) {
            showNotification(`Workflow "${type}" Vorschau - Feature in Entwicklung`, 'info');
        function duplicateWorkflow(type) {
            showNotification(`Workflow "${type}" dupliziert`, 'success');
        // Analytics
        function loadAnalytics() {
            // Load analytics data
            document.getElementById('totalConversations').textContent = apiUsageStats.totalRequests;
            document.getElementById('avgConversationLength').textContent = '0';
            document.getElementById('totalAssessments').textContent = '0';
            document.getElementById('completionRate').textContent = '0%';
            document.getElementById('totalWorkflows').textContent = '0';
            document.getElementById('workflowCompletion').textContent = '0%';
            // Update usage stats
            document.getElementById('totalRequests').textContent = apiUsageStats.totalRequests;
            document.getElementById('totalTokens').textContent = apiUsageStats.totalTokens;
            document.getElementById('estimatedCost').textContent = `$${apiUsageStats.estimatedCost.toFixed(2)}`;
        // Conversation Management
        function viewConversation(id) {
            showNotification(`Gespräch "${id}" anzeigen - Feature in Entwicklung`, 'info');
        function exportConversation(id) {
            showNotification(`Gespräch "${id}" exportieren - Feature in Entwicklung`, 'info');
        function deleteConversation(id) {
            if (confirm(`Möchtest du das Gespräch "${id}" wirklich löschen?`)) {
                showNotification(`Gespräch "${id}" gelöscht`, 'success');
        // Notification System
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
            // Add notification styles if not already present
            if (!document.querySelector('#notification-styles')) {
                const styles = document.createElement('style');
                styles.id = 'notification-styles';
                styles.textContent = `
                    .notification {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        padding: 1rem 1.5rem;
                        border-radius: 8px;
                        color: white;
                        font-weight: 500;
                        z-index: 10000;
                        animation: slideIn 0.3s ease;
                    .notification-success { background: linear-gradient(135deg, #10b981, #059669); }
                    .notification-error { background: linear-gradient(135deg, #ef4444, #dc2626); }
                    .notification-info { background: linear-gradient(135deg, #3b82f6, #2563eb); }
                    .notification-content {
                        display: flex;
                        align-items: center;
                        gap: 0.5rem;
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                `;
                document.head.appendChild(styles);
            document.body.appendChild(notification);
            // Remove notification after 3 seconds
                notification.remove();
            }, 3000);
        // Digital Twin Training Functions
        let digitalTwinTraining = {
            personality: {
                traits: '',
                values: '',
                philosophy: '',
                communicationStyle: ''
            },
            experience: {
                anecdotes: '',
                insights: '',
                methods: '',
                stories: ''
            communication: {
                samples: '',
                phrases: '',
                patterns: '',
                questions: ''
            analytics: {
                progress: 0,
                personalityScore: 0,
                anecdotesCount: 0,
                insightsCount: 0,
                lastTraining: null
        // Initialize Digital Twin Training when section is loaded
        function initDigitalTwinTraining() {
            if (document.getElementById('digital-twin-training')) {
                initTrainingTabs();
                loadTrainingData();
                refreshAnalytics();
        // Tab Management for Training
        function initTrainingTabs() {
            const tabButtons = document.querySelectorAll('.training-tabs .tab-btn');
            const tabContents = document.querySelectorAll('.training-tabs .tab-content');
        // Load Training Data
        function loadTrainingData() {
            const savedData = localStorage.getItem('digitalTwinTraining');
                digitalTwinTraining = JSON.parse(savedData);
                populateTrainingForms();
        // Populate Training Forms
        function populateTrainingForms() {
            // Personality Training
            document.getElementById('personality-traits').value = digitalTwinTraining.personality.traits || '';
            document.getElementById('core-values').value = digitalTwinTraining.personality.values || '';
            document.getElementById('coaching-philosophy').value = digitalTwinTraining.personality.philosophy || '';
            document.getElementById('communication-style').value = digitalTwinTraining.personality.communicationStyle || '';
            // Experience Training
            document.getElementById('project-anecdotes').value = digitalTwinTraining.experience.anecdotes || '';
            document.getElementById('professional-insights').value = digitalTwinTraining.experience.insights || '';
            document.getElementById('method-experiences').value = digitalTwinTraining.experience.methods || '';
            document.getElementById('client-stories').value = digitalTwinTraining.experience.stories || '';
            // Communication Training
            document.getElementById('writing-samples').value = digitalTwinTraining.communication.samples || '';
            document.getElementById('favorite-phrases').value = digitalTwinTraining.communication.phrases || '';
            document.getElementById('communication-patterns').value = digitalTwinTraining.communication.patterns || '';
            document.getElementById('coaching-questions').value = digitalTwinTraining.communication.questions || '';
        // Save Personality Training
        function savePersonalityTraining() {
            digitalTwinTraining.personality.traits = document.getElementById('personality-traits').value;
            digitalTwinTraining.personality.values = document.getElementById('core-values').value;
            digitalTwinTraining.personality.philosophy = document.getElementById('coaching-philosophy').value;
            digitalTwinTraining.personality.communicationStyle = document.getElementById('communication-style').value;
            saveTrainingData();
            updateAnalytics();
            showNotification('Persönlichkeits-Training gespeichert!', 'success');
        // Save Experience Training
        function saveExperienceTraining() {
            digitalTwinTraining.experience.anecdotes = document.getElementById('project-anecdotes').value;
            digitalTwinTraining.experience.insights = document.getElementById('professional-insights').value;
            digitalTwinTraining.experience.methods = document.getElementById('method-experiences').value;
            digitalTwinTraining.experience.stories = document.getElementById('client-stories').value;
            showNotification('Erfahrungs-Training gespeichert!', 'success');
        // Save Communication Training
        function saveCommunicationTraining() {
            digitalTwinTraining.communication.samples = document.getElementById('writing-samples').value;
            digitalTwinTraining.communication.phrases = document.getElementById('favorite-phrases').value;
            digitalTwinTraining.communication.patterns = document.getElementById('communication-patterns').value;
            digitalTwinTraining.communication.questions = document.getElementById('coaching-questions').value;
            showNotification('Kommunikations-Training gespeichert!', 'success');
        // Save Training Data to LocalStorage
        function saveTrainingData() {
            digitalTwinTraining.analytics.lastTraining = new Date().toISOString();
            localStorage.setItem('digitalTwinTraining', JSON.stringify(digitalTwinTraining));
        // Update Analytics
        function updateAnalytics() {
            // Calculate progress
            let completedFields = 0;
            let totalFields = 12; // Total number of training fields
            Object.values(digitalTwinTraining.personality).forEach(value => {
                if (value && value.trim() !== '') completedFields++;
            Object.values(digitalTwinTraining.experience).forEach(value => {
            Object.values(digitalTwinTraining.communication).forEach(value => {
            digitalTwinTraining.analytics.progress = Math.round((completedFields / totalFields) * 100);
            digitalTwinTraining.analytics.personalityScore = digitalTwinTraining.analytics.progress;
            // Count anecdotes and insights
            digitalTwinTraining.analytics.anecdotesCount = (digitalTwinTraining.experience.anecdotes.match(/\n/g) || []).length + 1;
            digitalTwinTraining.analytics.insightsCount = (digitalTwinTraining.experience.insights.match(/\n/g) || []).length + 1;
        // Refresh Analytics Display
        function refreshAnalytics() {
            // Update progress bar
            const progressBar = document.getElementById('trainingProgress');
            const progressText = document.getElementById('trainingStatus');
            if (progressBar && progressText) {
                progressBar.style.width = digitalTwinTraining.analytics.progress + '%';
                progressText.textContent = `${digitalTwinTraining.analytics.progress}% abgeschlossen`;
            // Update personality score
            const scoreNumber = document.querySelector('#personalityScore .score-number');
            if (scoreNumber) {
                scoreNumber.textContent = digitalTwinTraining.analytics.personalityScore;
            // Update data stats
            const anecdotesCount = document.getElementById('anecdotesCount');
            const insightsCount = document.getElementById('insightsCount');
            if (anecdotesCount) anecdotesCount.textContent = digitalTwinTraining.analytics.anecdotesCount;
            if (insightsCount) insightsCount.textContent = digitalTwinTraining.analytics.insightsCount;
            // Update last training
            const lastTraining = document.getElementById('lastTraining');
            if (lastTraining && digitalTwinTraining.analytics.lastTraining) {
                const date = new Date(digitalTwinTraining.analytics.lastTraining);
                lastTraining.textContent = date.toLocaleDateString('de-DE') + ' ' + date.toLocaleTimeString('de-DE');
        // Apply Training to Chatbot
        function applyTrainingToChatbot() {
            // Update AI Coach with training data
            if (typeof updateAICoachPersonality === 'function') {
                updateAICoachPersonality(digitalTwinTraining);
            showNotification('Training auf Manu angewendet!', 'success');
        // Export Training Data
        function exportTrainingData() {
            const dataStr = JSON.stringify(digitalTwinTraining, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            link.href = url;
            link.download = 'digital-twin-training.json';
            URL.revokeObjectURL(url);
        // Reset Training Data
        function resetTrainingData() {
            if (confirm('Möchtest du wirklich alle Trainingsdaten zurücksetzen?')) {
                digitalTwinTraining = {
                    personality: { traits: '', values: '', philosophy: '', communicationStyle: '' },
                    experience: { anecdotes: '', insights: '', methods: '', stories: '' },
                    communication: { samples: '', phrases: '', patterns: '', questions: '' },
                    analytics: { progress: 0, personalityScore: 0, anecdotesCount: 0, insightsCount: 0, lastTraining: null }
                localStorage.removeItem('digitalTwinTraining');
                showNotification('Trainingsdaten zurückgesetzt!', 'warning');
        // Initialize AI Coach Admin when section is loaded
        function initAICoachAdmin() {
            if (document.getElementById('ai-coach-admin')) {
                initAICoachTabs();
                loadApiSettings();
                loadAnalytics();
                // Add event listeners for form changes
                document.getElementById('coachPersonality').addEventListener('change', (e) => {
                    aiCoachSettings.personality = e.target.value;
                document.getElementById('responseStyle').addEventListener('change', (e) => {
                    aiCoachSettings.responseStyle = e.target.value;
                document.getElementById('languageLevel').addEventListener('change', (e) => {
                    aiCoachSettings.languageLevel = e.target.value;
                document.getElementById('enableQuickActions').addEventListener('change', (e) => {
                    aiCoachSettings.enableQuickActions = e.target.checked;
                document.getElementById('enableTypingIndicator').addEventListener('change', (e) => {
                    aiCoachSettings.enableTypingIndicator = e.target.checked;
                // Save settings on change
                const settingsInputs = document.querySelectorAll('#chatbot-config input, #chatbot-config select, #chatbot-config textarea');
                settingsInputs.forEach(input => {
                    input.addEventListener('change', () => {
                        localStorage.setItem('aiCoachSettings', JSON.stringify(aiCoachSettings));
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            initAICoachAdmin();
            initDigitalTwinTraining();
        // Re-initialize when navigating to sections
        document.addEventListener('click', (e) => {
            if (e.target.closest('[data-section="ai-coach-admin"]')) {
                setTimeout(initAICoachAdmin, 100);
            if (e.target.closest('[data-section="digital-twin-training"]')) {
                setTimeout(initDigitalTwinTraining, 100);
        // Personal Training-Verwaltung Funktionen
        function loadPersonalTrainingStats() {
                const stats = JSON.parse(localStorage.getItem('personalTrainingStats') || '{}');
                document.getElementById('total-exercises').textContent = stats.totalExercises || '150+';
                document.getElementById('generated-plans').textContent = stats.generatedPlans || '25';
                document.getElementById('active-users').textContent = stats.activeUsers || '12';
                document.getElementById('avg-rating').textContent = stats.avgRating || '4.8';
                console.error('Error loading personal training stats:', error);
        function setupPersonalTrainingEventListeners() {
            // Quick action button
            document.querySelectorAll('[data-action="personal-training"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    showSection('personal-training');
            // AI settings checkboxes
            document.querySelectorAll('.ai-setting-card input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', saveAISettings);
        function openPlanEditor(planId) {
            const modal = createModal('Plan Editor', `
                <div class="plan-editor">
                    <div class="form-group">
                        <label>Plan Name:</label>
                        <input type="text" id="plan-name" value="Muskelaufbau - Anfänger">
                        <label>Beschreibung:</label>
                        <textarea id="plan-description">3x pro Woche, 45 Min, Ganzkörper-Training</textarea>
                        <label>Häufigkeit (pro Woche):</label>
                        <input type="number" id="plan-frequency" value="3" min="1" max="7">
                        <label>Dauer (Minuten):</label>
                        <input type="number" id="plan-duration" value="45" min="15" max="180">
                        <label>Wochen:</label>
                        <input type="number" id="plan-weeks" value="4" min="1" max="12">
                        <label>Zielgruppe:</label>
                        <select id="plan-target">
                            <option value="beginner">Anfänger</option>
                            <option value="intermediate">Fortgeschritten</option>
                            <option value="advanced">Experte</option>
                        <label>Equipment:</label>
                        <select id="plan-equipment">
                            <option value="full-gym">Vollausgestattetes Gym</option>
                            <option value="basic-gym">Basis-Gym</option>
                            <option value="home-gym">Home-Gym</option>
                            <option value="bodyweight">Nur Körpergewicht</option>
            `, [
                { text: 'Speichern', class: 'btn-primary', onclick: 'savePlanChanges()' },
                { text: 'Abbrechen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        function openExerciseEditor(exerciseId) {
            const modal = createModal('Übung bearbeiten', `
                <div class="exercise-editor">
                        <label>Übungsname:</label>
                        <input type="text" id="exercise-name" value="Bankdrücken">
                        <label>Kategorie:</label>
                        <select id="exercise-category">
                            <option value="chest">Brust</option>
                            <option value="back">Rücken</option>
                            <option value="legs">Beine</option>
                            <option value="shoulders">Schultern</option>
                            <option value="arms">Arme</option>
                            <option value="core">Core</option>
                        <textarea id="exercise-description">Klassische Brustübung mit Langhantel</textarea>
                        <select id="exercise-equipment">
                            <option value="barbell">Langhantel</option>
                            <option value="dumbbell">Kurzhantel</option>
                            <option value="bodyweight">Körpergewicht</option>
                            <option value="cable">Kabelzug</option>
                            <option value="machine">Gerät</option>
                        <label>Schwierigkeit:</label>
                        <select id="exercise-difficulty">
                        <label>Muskelgruppen:</label>
                        <div class="muscle-groups">
                            <label><input type="checkbox" value="chest"> Brust</label>
                            <label><input type="checkbox" value="triceps"> Trizeps</label>
                            <label><input type="checkbox" value="shoulders"> Schultern</label>
                { text: 'Speichern', class: 'btn-primary', onclick: 'saveExerciseChanges()' },
        function savePlanChanges() {
            const planData = {
                name: document.getElementById('plan-name').value,
                description: document.getElementById('plan-description').value,
                frequency: document.getElementById('plan-frequency').value,
                duration: document.getElementById('plan-duration').value,
                weeks: document.getElementById('plan-weeks').value,
                target: document.getElementById('plan-target').value,
                equipment: document.getElementById('plan-equipment').value
            const plans = JSON.parse(localStorage.getItem('trainingPlans') || '{}');
            plans[Date.now()] = planData;
            localStorage.setItem('trainingPlans', JSON.stringify(plans));
            showNotification('Trainingsplan wurde gespeichert!', 'success');
            closeModal();
        function saveExerciseChanges() {
            const exerciseData = {
                name: document.getElementById('exercise-name').value,
                category: document.getElementById('exercise-category').value,
                description: document.getElementById('exercise-description').value,
                equipment: document.getElementById('exercise-equipment').value,
                difficulty: document.getElementById('exercise-difficulty').value,
                muscleGroups: Array.from(document.querySelectorAll('.muscle-groups input:checked')).map(cb => cb.value)
            const exercises = JSON.parse(localStorage.getItem('exerciseDatabase') || '{}');
            exercises[Date.now()] = exerciseData;
            localStorage.setItem('exerciseDatabase', JSON.stringify(exercises));
            showNotification('Übung wurde gespeichert!', 'success');
        function saveAISettings() {
            const settings = {
                progressiveOverload: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Progressive Überladung'),
                periodization: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Periodisierung'),
                recoveryDays: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Erholungstage'),
                equipmentBased: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Equipment-basiert'),
                levelAdjusted: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Level-angepasst'),
                restrictions: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Einschränkungen'),
                googleCalendar: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Google Calendar'),
                appleCalendar: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Apple Calendar'),
                outlook: document.querySelector('input[type="checkbox"]:checked')?.parentElement.textContent.includes('Outlook')
            localStorage.setItem('personalTrainingAISettings', JSON.stringify(settings));
            showNotification('AI-Einstellungen wurden gespeichert!', 'success');
        function createModal(title, content, buttons = []) {
            modal.className = 'modal-overlay';
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${title}</h3>
                        <button class="modal-close" data-action="close-modal">&times;</button>
                    <div class="modal-body">
                        ${content}
                    <div class="modal-footer">
                        ${buttons.map(btn => `<button class="btn ${btn.class}" onclick="${btn.onclick}">${btn.text}</button>`).join('')}
            return modal;
        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.remove();
            notification.textContent = message;
            notification.style.cssText = `
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : '#3b82f6'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0.5rem;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
            // Animate in
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);
            // Remove after 3 seconds
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                }, 300);
    <!-- Button System CSS -->
    <link rel="stylesheet" href="css/button-system.css">
    <!-- Global API Configuration (Load First) -->
    <script src="js/api-config.js"></script>
    <!-- Unified AWS Upload System -->
    <script src="js/unified-aws-upload.js"></script>
    <!-- Smart Media API -->
    <script src="js/smart-media-api.js"></script>
    <!-- Additional API Endpoints -->
    <script src="js/additional-api-endpoints.js"></script>
    <!-- API Endpoint Tester -->
    <script src="js/api-endpoint-tester.js"></script>
    <!-- Upload/Download Tester -->
    <script src="js/upload-download-tester.js"></script>
    <!-- Media Upload Tester -->
    <script src="js/media-upload-tester.js"></script>
    <!-- Media Upload Functions -->
    <script src="js/media-upload-functions.js"></script>
    <!-- Media Management System 2025 -->
    <script src="js/media-management-2025.js"></script>
    <!-- Admin Connection Test für Debugging -->
    <script src="js/admin-connection-test.js"></script>
    <!-- Core Button System Scripts (Load First) -->
    <script src="js/event-registry.js"></script>
    <script src="js/button-components.js"></script>
    <!-- Global Navigation (Load Early) -->
    <script src="js/global-navigation.js"></script>
    <!-- ERROR PREVENTION (Verhindert JS-Fehler) -->
    <script src="js/error-prevention.js"></script>
    <!-- CACHE BUSTER (Löst Cache-Probleme) -->
    <script src="js/cache-buster.js"></script>
    <!-- SIMPLE WORKING UPLOAD (Einfach & Funktional) -->
    <script src="js/simple-working-upload.js"></script>
        <!-- CLOUD STORAGE -->
        <script src="js/cloud-storage.js"></script>
        <script src="js/smart-ai-analysis.js"></script>
        <script src="js/ai-sentence-generator.js"></script>
        <script src="js/enhanced-workflow-integration.js"></script>
        <script src="js/workflow-document-display.js"></script>
        <script src="js/enhanced-sentence-generator.js"></script>
        <script src="js/workflow-step4-sentence-integration.js"></script>
    <!-- OpenAI Integration (Load Early) -->
    <script src="js/openai-integration.js"></script>
    <!-- Existing Scripts -->
    <script src="js/ai-integration.js"></script>
    <script src="js/ai-twin-workflow.js"></script>
    <script src="js/admin-panel-fix.js"></script>
    <!-- Button Registration (Load After Other Scripts) -->
    <script src="js/secure-api-manager.js"></script>
    <script src="js/global-ai-service.js"></script>
    <script src="js/register-all-buttons.js"></script>
        // Initialize button system
            // Button system is ready
    <!-- Multi-User File Management System für Admin -->
    <script src="./js/base-logger.js"></script>
    <script type="module">
        // Complete Admin Multi-User System Integration
        import { initAuth, isLoggedIn, getUser } from './js/auth.js';
        import { listDocuments, getUserProfile, saveUserProfile, getUserProgress, updateUserProgress } from './js/docs.js';
        import './js/unified-auth-manager.js';
        import './js/user-progress-tracker.js';
        import './js/admin-multiuser-integration.js';
        // Load AdminUserManagementUI with fallback
        function loadUserManagement() {
            // Try module import first
            import('./js/admin-user-management-ui.js').then((module) => {
                console.log('📦 Admin User Management UI module loaded');
                initializeUserManagement();
            }).catch(error => {
                console.warn('⚠️ Module import failed, trying script tag:', error);
                // Fallback: Load via script tag
                if (!window.AdminUserManagementUI) {
                    const script = document.createElement('script');
                    script.src = './js/admin-user-management-ui.js';
                    script.onload = () => {
                        console.log('📦 Admin User Management UI script loaded');
                        initializeUserManagement();
                    script.onerror = () => {
                        console.error('❌ Failed to load AdminUserManagementUI script');
                        showUserManagementError();
                    document.head.appendChild(script);
                    initializeUserManagement();
        function initializeUserManagement() {
                if (window.AdminUserManagementUI) {
                    console.log('🚀 Initializing Admin User Management UI...');
                        window.adminUserManagementInstance = new window.AdminUserManagementUI();
                        console.log('✅ Admin User Management UI initialized');
                        console.error('❌ Failed to initialize AdminUserManagementUI:', error);
                    console.warn('⚠️ AdminUserManagementUI class not found on window');
                    console.log('Available on window:', Object.keys(window).filter(k => k.includes('Admin')));
                    showUserManagementError();
            }, 1000);
        function showUserManagementError() {
            const container = document.getElementById('user-management-container');
            if (container) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #dc2626;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <h3>User Management System Error</h3>
                        <p>Das User Management System konnte nicht geladen werden.</p>
                        <button onclick="loadUserManagement()" class="btn btn-primary">
                            <i class="fas fa-refresh"></i> Erneut versuchen
        // Start loading
        loadUserManagement();
        // EINFACHER CHATBOT
        function addSimpleChatbot() {
            const chatbotButton = document.createElement('button');
            chatbotButton.innerHTML = '🤖 Chatbot';
            chatbotButton.style.cssText = 'position: fixed; bottom: 20px; right: 20px; background: #4f46e5; color: white; border: none; padding: 15px; border-radius: 50px; cursor: pointer; z-index: 9999;';
            chatbotButton.onclick = () => {
                alert('Chatbot funktioniert! Hallo, ich bin Manu, dein digitaler Zwilling. Wie kann ich dir helfen?');
            document.body.appendChild(chatbotButton);
            console.log('✅ Einfacher Chatbot hinzugefügt');
        // Chatbot sofort hinzufügen
        addSimpleChatbot();
        // Deploy Modal
        function showDeployModal() {
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.8); z-index: 10000;
                display: flex; align-items: center; justify-content: center;
                <div style="
                    background: white; border-radius: 12px; padding: 2rem; max-width: 600px; width: 90%;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.3); position: relative;
                ">
                    <button onclick="this.closest('.modal').remove()" style="
                        position: absolute; top: 1rem; right: 1rem; background: none; border: none;
                        font-size: 1.5rem; cursor: pointer; color: #666;
                    ">×</button>
                    <h2 style="margin: 0 0 1rem; color: #1f2937;">🚀 Complete System Deployment</h2>
                    <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <h4 style="margin: 0 0 0.5rem; color: #0369a1;">Terminal Command:</h4>
                        <code style="
                            background: #1f2937; color: #10b981; padding: 1rem; border-radius: 8px;
                            display: block; font-family: monospace; font-size: 1.1rem;
                        ">./deploy-complete-system.sh</code>
                    <div style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <h4 style="margin: 0 0 0.5rem; color: #166534;">✅ Was wird deployed:</h4>
                        <ul style="margin: 0; padding-left: 1.5rem; color: #374151;">
                            <li>AWS Amplify Complete Setup</li>
                            <li>User Management System</li>
                            <li>AWS Cognito Integration</li>
                            <li>S3 File Storage</li>
                            <li>DynamoDB Database</li>
                            <li>API Gateway</li>
                        </ul>
                    <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <h4 style="margin: 0 0 0.5rem; color: #92400e;">⚠️ Voraussetzungen:</h4>
                            <li>AWS CLI konfiguriert</li>
                            <li>Amplify CLI installiert</li>
                            <li>Terminal geöffnet</li>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button onclick="copyToClipboard('./deploy-complete-system.sh')" style="
                            background: #10b981; color: white; border: none; padding: 0.75rem 1.5rem;
                            border-radius: 8px; cursor: pointer; font-weight: 500; margin: 0.5rem;
                            <i class="fas fa-copy"></i> Command kopieren
                        <button onclick="window.open('https://console.aws.amazon.com/amplify', '_blank')" style="
                            background: #3b82f6; color: white; border: none; padding: 0.75rem 1.5rem;
                            <i class="fas fa-external-link-alt"></i> AWS Console
            modal.className = 'modal';
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('✅ Command kopiert! Füge es in dein Terminal ein.');
        import './js/admin-real-time-dashboard.js';
        console.log('🔧 Admin: Complete Multi-User-System geladen');
        // Initialize Admin Navigation System
        initializeAdminNavigation();
        // Service Functions
        function openService(serviceType) {
            console.log('🚀 Opening service:', serviceType);
            // Show login button
            const loginContainer = document.getElementById('login-button-container');
            if (loginContainer) {
                loginContainer.style.display = 'block';
            // Open appropriate service
            switch(serviceType) {
                case 'website-pages':
                    window.open('website-services.html', '_blank');
                    break;
                case 'coaching-methods':
                    window.open('persoenlichkeitsentwicklung-uebersicht.html', '_blank');
                case 'aws-backend':
                    window.open('cloud-services.html', '_blank');
                case 'enterprise-solutions':
                    window.open('enterprise-portal.html', '_blank');
                default:
                    console.log('Unknown service type:', serviceType);
        function initializeAdminNavigation() {
            console.log('🔄 Initializing Admin Navigation...');
            // Handle all navigation items
            document.querySelectorAll('.nav-item[data-section]').forEach(navItem => {
                navItem.addEventListener('click', (e) => {
                    const sectionId = navItem.dataset.section;
                    console.log('🔄 Navigating to section:', sectionId);
                    showAdminSection(sectionId);
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            // Show dashboard by default
            showAdminSection('dashboard');
            console.log('✅ Admin Navigation initialized');
        function showAdminSection(sectionId) {
            console.log('📱 Showing section:', sectionId);
            // Hide all admin sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.style.display = 'none';
            // Show selected section
            const targetSection = document.getElementById(sectionId);
                targetSection.style.display = 'block';
                // Smooth scroll to section
                targetSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                // Initialize section-specific functionality
                initializeSectionContent(sectionId);
                // PERSÖNLICHKEITSENTWICKLUNG: Alle aufgeklappten Methoden einklappen
                if (sectionId === 'personality-development') {
                    collapseAllMethods();
                console.warn('⚠️ Section not found:', sectionId);
        function initializeSectionContent(sectionId) {
            // Initialize User Management if needed
            if (sectionId === 'user-management-live') {
                if (window.adminUserManagementInstance) {
                    console.log('🔄 Refreshing User Management UI...');
                    // Trigger refresh if needed
                    console.log('⚠️ User Management not yet initialized');
            // Initialize Analytics if needed
            if (sectionId === 'analytics') {
                initializeAnalytics();
            // Initialize Settings if needed
            if (sectionId === 'settings') {
                // Initialize Hero Settings
                initializeHeroSettings();
            // Initialize Pulsing Menu
            initializePulsingMenu();
            // Initialize Smart Media Management
            if (sectionId === 'media') {
                initializeSmartMediaManagement();
            // Initialize Bewerbungsunterlagen Smart API
            if (sectionId === 'applications') {
                initializeBewerbungsunterlagenSmartAPI();
        // 🚀 SMART MEDIA MANAGEMENT SYSTEM
        function initializeSmartMediaManagement() {
            console.log('🚀 Initializing Smart Media Management System...');
            // Initialize Smart API if available
            if (window.smartAPI) {
                console.log('✅ Smart API System available');
                loadMediaAnalytics();
                setupSmartUpload();
                loadMediaCategories();
                console.log('⚠️ Smart API System not available, using fallback');
                setupFallbackMediaManagement();
        // 📊 Load Media Analytics
        async function loadMediaAnalytics() {
                console.log('📊 Loading media analytics...');
                // Get upload statistics
                const uploadStats = await window.smartAPI.getUploadStats({ timeRange: '30d' });
                console.log('📈 Upload stats:', uploadStats);
                // Get storage statistics
                const storageStats = await window.smartAPI.getStorageStats();
                console.log('💾 Storage stats:', storageStats);
                // Update analytics display
                updateMediaAnalyticsDisplay(uploadStats, storageStats);
                console.error('❌ Media analytics loading failed:', error);
        // 📊 Update Media Analytics Display
        function updateMediaAnalyticsDisplay(uploadStats, storageStats) {
            const analyticsTab = document.getElementById('analytics-count');
            if (analyticsTab) {
                analyticsTab.textContent = uploadStats.stats.totalUploads || '0';
            // Update category counts
            updateCategoryCounts(uploadStats.stats.uploadsByType || {});
        // 📊 Update Category Counts
        function updateCategoryCounts(categoryData) {
            const categories = ['profile', 'application', 'portfolio', 'documents', 'gallery'];
            categories.forEach(category => {
                const countElement = document.getElementById(`${category}-count`);
                if (countElement) {
                    const count = categoryData[category] || 0;
                    countElement.textContent = count;
        // 🚀 Setup Smart Upload
        function setupSmartUpload() {
            const uploadArea = document.getElementById('upload-area');
            const fileInput = document.getElementById('smart-file-input');
            if (uploadArea && fileInput) {
                // Click to upload
                uploadArea.addEventListener('click', () => {
                // Drag and drop
                uploadArea.addEventListener('dragover', (e) => {
                    uploadArea.style.borderColor = '#6366f1';
                    uploadArea.style.backgroundColor = '#f0f9ff';
                uploadArea.addEventListener('dragleave', (e) => {
                    uploadArea.style.borderColor = '#d1d5db';
                    uploadArea.style.backgroundColor = '#f9fafb';
                uploadArea.addEventListener('drop', (e) => {
                    const files = Array.from(e.dataTransfer.files);
                    handleSmartUpload(files);
                // File input change
                fileInput.addEventListener('change', (e) => {
                    const files = Array.from(e.target.files);
        // 🚀 Handle Smart Upload
        async function handleSmartUpload(files) {
            console.log('🚀 Handling smart upload for', files.length, 'files');
                // Show upload progress
                showUploadProgress(files.length);
                // Use Smart API for upload
                const results = [];
                for (const file of files) {
                    const result = await window.smartAPI.uploadFile(file, {
                        type: 'media',
                        category: 'gallery',
                        userId: getCurrentUserId()
                    results.push(result);
                console.log('✅ Smart upload successful:', results);
                showUploadSuccess(results);
                // Refresh media categories
                console.error('❌ Smart upload failed:', error);
                showUploadError(error);
        // 📁 Load Media Categories
        async function loadMediaCategories() {
                console.log('📁 Loading media categories...');
                // Get user documents
                const userDocs = await window.smartAPI.getUserDocuments(getCurrentUserId());
                console.log('📁 User documents:', userDocs);
                // Group by category
                const categories = groupDocumentsByCategory(userDocs.documents || []);
                // Update category displays
                updateCategoryDisplays(categories);
                console.error('❌ Media categories loading failed:', error);
        // 📁 Group Documents by Category
        function groupDocumentsByCategory(documents) {
            const categories = {
                profile: [],
                application: [],
                portfolio: [],
                documents: [],
                gallery: []
            documents.forEach(doc => {
                const category = doc.category || 'gallery';
                if (categories[category]) {
                    categories[category].push(doc);
            return categories;
        // 📁 Update Category Displays
        function updateCategoryDisplays(categories) {
            Object.keys(categories).forEach(category => {
                    countElement.textContent = categories[category].length;
        // 🚀 Show Upload Method
        function showUploadMethod(method) {
            console.log('🚀 Showing upload method:', method);
            // Update UI based on method
            if (uploadArea) {
                switch (method) {
                    case 'standard':
                        uploadArea.innerHTML = `
                            <i class="fas fa-upload" style="font-size: 3rem; color: #6366f1; margin-bottom: 1rem;"></i>
                            <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Standard Upload</h4>
                            <p style="margin: 0; color: #6b7280;">Normale Datei-Uploads mit Metadaten</p>
                        `;
                        break;
                    case 'bulk':
                            <i class="fas fa-layer-group" style="font-size: 3rem; color: #10b981; margin-bottom: 1rem;"></i>
                            <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Bulk Upload</h4>
                            <p style="margin: 0; color: #6b7280;">Mehrere Dateien gleichzeitig verarbeiten</p>
                    case 'chunked':
                            <i class="fas fa-puzzle-piece" style="font-size: 3rem; color: #f59e0b; margin-bottom: 1rem;"></i>
                            <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Chunked Upload</h4>
                            <p style="margin: 0; color: #6b7280;">Große Dateien in Chunks aufteilen</p>
                    case 'direct':
                            <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #8b5cf6; margin-bottom: 1rem;"></i>
                            <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Direct Upload</h4>
                            <p style="margin: 0; color: #6b7280;">Direkter S3-Upload mit Presigned URLs</p>
        // 📊 Show Upload Progress
        function showUploadProgress(fileCount) {
                uploadArea.innerHTML = `
                    <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: #6366f1; margin-bottom: 1rem;"></i>
                    <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Uploading ${fileCount} files...</h4>
                    <p style="margin: 0; color: #6b7280;">Please wait while files are being processed</p>
        // ✅ Show Upload Success
        function showUploadSuccess(results) {
                    <i class="fas fa-check-circle" style="font-size: 3rem; color: #10b981; margin-bottom: 1rem;"></i>
                    <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Upload successful!</h4>
                    <p style="margin: 0; color: #6b7280;">${results.length} files uploaded successfully</p>
                // Reset after 3 seconds
                    uploadArea.innerHTML = `
                        <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #9ca3af; margin-bottom: 1rem;"></i>
                        <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Dateien hier ablegen oder klicken zum Auswählen</h4>
                        <p style="margin: 0; color: #6b7280;">Unterstützt: PDF, DOC, DOCX, JPG, PNG, GIF (max. 100MB)</p>
        // ❌ Show Upload Error
        function showUploadError(error) {
                    <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #ef4444; margin-bottom: 1rem;"></i>
                    <h4 style="margin: 0 0 0.5rem 0; color: #374151;">Upload failed</h4>
                    <p style="margin: 0; color: #6b7280;">${error.message}</p>
                // Reset after 5 seconds
                }, 5000);
        // 🔧 Setup Fallback Media Management
        function setupFallbackMediaManagement() {
            console.log('🔧 Setting up fallback media management...');
            // Basic file upload functionality
                    console.log('📁 Files selected:', files);
                    // Basic file handling would go here
        // 👤 Get Current User ID
        function getCurrentUserId() {
            // Try to get user ID from various sources
            if (typeof getUser === 'function') {
                const user = getUser();
                return user?.userId || 'anonymous';
            if (typeof simpleAuth !== 'undefined' && simpleAuth.getUser) {
                const user = simpleAuth.getUser();
            return 'anonymous';
        // 📁 BEWERBUNGSUNTERLAGEN - Smart API Integration
        function initializeBewerbungsunterlagenSmartAPI() {
            console.log('📁 Initializing Bewerbungsunterlagen Smart API...');
                console.log('✅ Smart API System available for Bewerbungsunterlagen');
                loadBewerbungsunterlagenFromCentralMedia();
                setupBewerbungsunterlagenSmartUpload();
                setupBewerbungsunterlagenFallback();
        // 📁 Load Bewerbungsunterlagen from Central Media
        async function loadBewerbungsunterlagenFromCentralMedia() {
                console.log('📁 Loading Bewerbungsunterlagen from central media...');
                // Show loading indicator
                const loadingDiv = document.getElementById('smart-api-loading');
                const smartDocumentsList = document.getElementById('smart-documentsList');
                const documentsCount = document.getElementById('documents-count');
                if (loadingDiv) loadingDiv.style.display = 'block';
                if (smartDocumentsList) smartDocumentsList.style.display = 'none';
                // Get user documents from central media management
                console.log('📁 Central media documents:', userDocs);
                // Filter for application-related documents
                const applicationDocs = userDocs.documents.filter(doc => 
                    doc.category === 'application' || 
                    doc.documentType === 'cv' || 
                    doc.documentType === 'certificate' ||
                    doc.documentType === 'cover-letter' ||
                    doc.documentType === 'portrait' ||
                    doc.documentType === 'certification'
                );
                console.log('📄 Application documents:', applicationDocs);
                // Update documents count
                if (documentsCount) {
                    documentsCount.textContent = applicationDocs.length;
                // Update documents list
                updateBewerbungsunterlagenList(applicationDocs);
                // Hide loading indicator
                if (loadingDiv) loadingDiv.style.display = 'none';
                if (smartDocumentsList) smartDocumentsList.style.display = 'flex';
                console.error('❌ Loading Bewerbungsunterlagen from central media failed:', error);
                // Show error message
                showBewerbungsunterlagenError('Fehler beim Laden der Dokumente aus der zentralen Medienverwaltung');
        // 📄 Update Bewerbungsunterlagen List
        function updateBewerbungsunterlagenList(documents) {
            const smartDocumentsList = document.getElementById('smart-documentsList');
            if (!smartDocumentsList) return;
            if (documents.length === 0) {
                smartDocumentsList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #666; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <i class="fas fa-folder-open" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <p style="margin: 0; font-weight: 500;">Keine Bewerbungsunterlagen gefunden</p>
                        <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem; color: #666;">Laden Sie Dokumente über die zentrale Medienverwaltung hoch</p>
                smartDocumentsList.innerHTML = documents.map(doc => `
                    <div class="smart-document-item" style="
                        padding: 1rem;
                        background: white;
                        border: 1px solid #e5e7eb;
                        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                        transition: all 0.3s ease;
                        cursor: pointer;
                    " onclick="selectBewerbungsunterlagenDocument('${doc.id}', '${doc.originalName}', '${doc.documentType}')">
                            <div style="
                                width: 40px;
                                height: 40px;
                                background: linear-gradient(135deg, #6366f1, #8b5cf6);
                                border-radius: 8px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                color: white;
                                font-size: 1.25rem;
                                <i class="fas fa-file-${getBewerbungsunterlagenFileIcon(doc.originalName)}"></i>
                            <div style="flex: 1; min-width: 0;">
                                <div style="font-weight: 600; color: #1f2937; margin-bottom: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                    ${doc.originalName}
                                <div style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.25rem;">
                                    ${doc.documentType} • ${formatBewerbungsunterlagenFileSize(doc.size)}
                                <div style="font-size: 0.75rem; color: #9ca3af;">
                                    ${formatBewerbungsunterlagenDate(doc.uploadedAt)}
                            <div style="display: flex; gap: 0.5rem;">
                                <button onclick="event.stopPropagation(); downloadBewerbungsunterlagenDocument('${doc.id}')" style="
                                    padding: 0.5rem;
                                    background: #f3f4f6;
                                    border: none;
                                    border-radius: 6px;
                                    color: #6b7280;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                " title="Download">
                                    <i class="fas fa-download"></i>
                                <button onclick="event.stopPropagation(); deleteBewerbungsunterlagenDocument('${doc.id}')" style="
                                    background: #fef2f2;
                                    color: #dc2626;
                                " title="Löschen">
        // 📄 Select Bewerbungsunterlagen Document
        function selectBewerbungsunterlagenDocument(docId, docName, docType) {
            console.log('📄 Selecting Bewerbungsunterlagen document:', { docId, docName, docType });
            // Add to selected documents
            const selectedDocs = JSON.parse(localStorage.getItem('selectedBewerbungsunterlagen') || '{}');
            selectedDocs[docId] = {
                id: docId,
                name: docName,
                type: docType,
                selectedAt: new Date().toISOString()
            localStorage.setItem('selectedBewerbungsunterlagen', JSON.stringify(selectedDocs));
            // Show success message
            showBewerbungsunterlagenMessage(`Dokument "${docName}" ausgewählt`, 'success');
            // Update UI
            updateBewerbungsunterlagenSelection();
        // 📄 Download Bewerbungsunterlagen Document
        async function downloadBewerbungsunterlagenDocument(docId) {
                console.log('📄 Downloading Bewerbungsunterlagen document:', docId);
                const downloadUrl = await window.smartAPI.getDownloadUrl(docId);
                if (downloadUrl.downloadUrl) {
                    window.open(downloadUrl.downloadUrl, '_blank');
                    throw new Error('Download URL not available');
                console.error('❌ Download failed:', error);
                showBewerbungsunterlagenMessage('Download fehlgeschlagen', 'error');
        // 📄 Delete Bewerbungsunterlagen Document
        async function deleteBewerbungsunterlagenDocument(docId) {
            if (!confirm('Sind Sie sicher, dass Sie dieses Dokument löschen möchten?')) {
                console.log('📄 Deleting Bewerbungsunterlagen document:', docId);
                await window.smartAPI.deleteFile(docId);
                showBewerbungsunterlagenMessage('Dokument gelöscht', 'success');
                // Refresh documents list
                console.error('❌ Delete failed:', error);
                showBewerbungsunterlagenMessage('Löschen fehlgeschlagen', 'error');
        // 📄 Get Bewerbungsunterlagen File Icon
        function getBewerbungsunterlagenFileIcon(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const iconMap = {
                'pdf': 'pdf',
                'doc': 'word',
                'docx': 'word',
                'jpg': 'image',
                'jpeg': 'image',
                'png': 'image',
                'gif': 'image'
            return iconMap[ext] || 'file';
        // 📄 Format Bewerbungsunterlagen File Size
        function formatBewerbungsunterlagenFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        // 📄 Format Bewerbungsunterlagen Date
        function formatBewerbungsunterlagenDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('de-DE', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
        // 📄 Update Bewerbungsunterlagen Selection
        function updateBewerbungsunterlagenSelection() {
            const selectedCount = Object.keys(selectedDocs).length;
            console.log('📄 Selected Bewerbungsunterlagen documents:', selectedCount);
            // Update UI to show selected documents
            const documentsCount = document.getElementById('documents-count');
            if (documentsCount) {
                documentsCount.textContent = selectedCount;
        // 📄 Show Bewerbungsunterlagen Message
        function showBewerbungsunterlagenMessage(message, type = 'info') {
            // Create message element if it doesn't exist
            let messageDiv = document.getElementById('bewerbungsunterlagen-message');
            if (!messageDiv) {
                messageDiv = document.createElement('div');
                messageDiv.id = 'bewerbungsunterlagen-message';
                messageDiv.style.cssText = `
                    top: 20px;
                    right: 20px;
                    z-index: 10000;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    transition: all 0.3s ease;
                document.body.appendChild(messageDiv);
            // Set message content and style
            messageDiv.textContent = message;
            messageDiv.style.display = 'block';
                success: '#10b981',
                error: '#ef4444',
                info: '#6366f1',
                warning: '#f59e0b'
            messageDiv.style.backgroundColor = colors[type] || colors.info;
            // Hide after 3 seconds
                messageDiv.style.display = 'none';
        // 📄 Show Bewerbungsunterlagen Error
        function showBewerbungsunterlagenError(message) {
            showBewerbungsunterlagenMessage(message, 'error');
        // 🚀 Setup Bewerbungsunterlagen Smart Upload
        function setupBewerbungsunterlagenSmartUpload() {
            const uploadButton = document.querySelector('[data-action="upload-document"]');
            if (uploadButton) {
                uploadButton.addEventListener('click', () => {
                    const fileInput = document.getElementById('doc-upload');
                    if (fileInput) {
                        fileInput.click();
                const fileInput = document.getElementById('doc-upload');
                if (fileInput) {
                    fileInput.addEventListener('change', async (e) => {
                        const files = Array.from(e.target.files);
                        await handleBewerbungsunterlagenSmartUpload(files);
        // 🚀 Handle Bewerbungsunterlagen Smart Upload
        async function handleBewerbungsunterlagenSmartUpload(files) {
            console.log('🚀 Handling Bewerbungsunterlagen smart upload for', files.length, 'files');
                showBewerbungsunterlagenMessage(`Uploading ${files.length} files...`, 'info');
                        type: 'application',
                        category: 'application',
                console.log('✅ Bewerbungsunterlagen smart upload successful:', results);
                showBewerbungsunterlagenMessage(`${results.length} Dokumente erfolgreich hochgeladen`, 'success');
                console.error('❌ Bewerbungsunterlagen smart upload failed:', error);
                showBewerbungsunterlagenError('Upload fehlgeschlagen');
        // 🔧 Setup Bewerbungsunterlagen Fallback
        function setupBewerbungsunterlagenFallback() {
            console.log('🔧 Setting up Bewerbungsunterlagen fallback...');
        // 🚀 Trigger Bewerbungsunterlagen Upload
        function triggerBewerbungsunterlagenUpload() {
            console.log('🚀 Triggering Bewerbungsunterlagen upload...');
            // Debug: Check current state
            console.log('🔍 Debug Info:');
            console.log('- Smart API available:', !!window.smartAPI);
            console.log('- File input exists:', !!document.getElementById('doc-upload'));
            console.log('- Current user ID:', getCurrentUserId());
            // Check if Smart API is available
                console.log('✅ Smart API available, using Smart Upload');
                    console.error('❌ File input not found');
                    showBewerbungsunterlagenMessage('Upload-Button nicht gefunden', 'error');
                console.log('⚠️ Smart API not available, using fallback');
                showBewerbungsunterlagenMessage('Smart API System wird geladen...', 'info');
                // Try to load Smart API System
                const smartApiScript = document.createElement('script');
                smartApiScript.src = 'js/smart-api-system.js?v=1.0';
                smartApiScript.onload = function() {
                    console.log('✅ Smart API System loaded, retrying upload');
                    triggerBewerbungsunterlagenUpload();
                smartApiScript.onerror = function() {
                    console.error('❌ Failed to load Smart API System');
                    showBewerbungsunterlagenMessage('Smart API System konnte nicht geladen werden', 'error');
                document.head.appendChild(smartApiScript);
        // 🔧 Debug Function for Testing
        function debugBewerbungsunterlagenSystem() {
            console.log('🔧 Debug Bewerbungsunterlagen System:');
            console.log('- Local storage documents:', localStorage.getItem('documents'));
            console.log('- Selected documents:', localStorage.getItem('selectedBewerbungsunterlagen'));
            // Test Smart API if available
                console.log('🧪 Testing Smart API...');
                window.smartAPI.getHealthStatus()
                    .then(result => console.log('✅ Smart API Health:', result))
                    .catch(error => console.error('❌ Smart API Health failed:', error));
        // Make debug function globally available
        window.debugBewerbungsunterlagenSystem = debugBewerbungsunterlagenSystem;
        // 🚀 BEWERBUNGSUNTERLAGEN TAB SYSTEM
        window.switchBewerbungsunterlagenTab = function(category) {
            console.log('🔄 Switching Bewerbungsunterlagen tab to:', category);
            // Update tab styles
            document.querySelectorAll('.doc-tab').forEach(tab => {
                tab.style.background = 'none';
                tab.style.borderBottom = '2px solid transparent';
                tab.style.color = '#374151';
            const activeTab = document.querySelector(`[data-param="${category}"]`);
            if (activeTab) {
                activeTab.style.background = '#6366f1';
                activeTab.style.borderBottom = '2px solid #6366f1';
                activeTab.style.color = 'white';
            // Filter documents based on category
            filterBewerbungsunterlagenDocuments(category);
        // 🚀 Filter Bewerbungsunterlagen Documents
        window.filterBewerbungsunterlagenDocuments = function(category) {
            console.log('🔍 Filtering Bewerbungsunterlagen documents by category:', category);
            const documentsList = document.getElementById('smart-documentsList');
            if (!documentsList) return;
            // Get all document elements
            const documentElements = documentsList.querySelectorAll('.document-item');
            documentElements.forEach(element => {
                const documentType = element.getAttribute('data-type');
                if (category === 'all' || documentType === category) {
                    element.style.display = 'block';
                    element.style.display = 'none';
            // Update document count
            const visibleDocuments = documentsList.querySelectorAll('.document-item[style*="block"], .document-item:not([style*="none"])');
            const countElement = document.getElementById('documents-count');
            if (countElement) {
                countElement.textContent = visibleDocuments.length;
        // 🚀 Bewerbungsunterlagen Upload Methods
        window.triggerBewerbungsunterlagenUploadMethod = function(method) {
            console.log('🚀 Triggering Bewerbungsunterlagen Upload Method:', method);
                console.log('✅ Smart API available for Bewerbungsunterlagen upload method:', method);
                showBewerbungsunterlagenMessage(`✅ ${method} Upload-Methode aktiviert`, 'success');
                // Configure upload method
                window.smartAPI.setUploadMethod(method);
                // Open file input
                    console.log('✅ Smart API System loaded, retrying upload method');
                    triggerBewerbungsunterlagenUploadMethod(method);
        // 🚀 Sync Bewerbungsunterlagen Documents
        window.syncBewerbungsunterlagenDocuments = function() {
            console.log('🔄 Syncing Bewerbungsunterlagen documents...');
                console.log('✅ Smart API available for sync');
                showBewerbungsunterlagenMessage('🔄 Synchronisiere Dokumente...', 'info');
                // Sync with central media management
                window.smartAPI.syncDocuments({
                    category: 'application',
                    userId: getCurrentUserId()
                }).then(result => {
                    console.log('✅ Sync successful:', result);
                    showBewerbungsunterlagenMessage('✅ Synchronisation erfolgreich', 'success');
                    // Reload documents
                    if (window.loadBewerbungsunterlagenFromCentralMedia) {
                        window.loadBewerbungsunterlagenFromCentralMedia();
                }).catch(error => {
                    console.error('❌ Sync failed:', error);
                    showBewerbungsunterlagenMessage(`❌ Synchronisation fehlgeschlagen: ${error.message}`, 'error');
                    console.log('✅ Smart API System loaded, retrying sync');
                    syncBewerbungsunterlagenDocuments();
        // 🚀 Upload All Bewerbungsunterlagen Documents
        window.uploadAllBewerbungsunterlagenDocuments = function() {
            console.log('🚀 Uploading all Bewerbungsunterlagen documents...');
                console.log('✅ Smart API available for bulk upload');
                showBewerbungsunterlagenMessage('🚀 Lade alle Dokumente hoch...', 'info');
                // Get local documents
                const localDocuments = JSON.parse(localStorage.getItem('localDocuments') || '[]');
                if (localDocuments.length === 0) {
                    showBewerbungsunterlagenMessage('❌ Keine lokalen Dokumente gefunden', 'warning');
                // Upload all documents
                const uploadPromises = localDocuments.map(doc => {
                    return window.smartAPI.uploadFile(doc.file, {
                        type: doc.type,
                        userId: getCurrentUserId(),
                        metadata: {
                            source: 'bulk-upload',
                            originalName: doc.name
                Promise.all(uploadPromises).then(results => {
                    console.log('✅ Bulk upload successful:', results);
                    showBewerbungsunterlagenMessage(`✅ ${results.length} Dokumente erfolgreich hochgeladen`, 'success');
                    console.error('❌ Bulk upload failed:', error);
                    showBewerbungsunterlagenMessage(`❌ Bulk Upload fehlgeschlagen: ${error.message}`, 'error');
                    console.log('✅ Smart API System loaded, retrying bulk upload');
                    uploadAllBewerbungsunterlagenDocuments();
        // 🚀 Open PDF Editor
        window.openPDFEditor = function() {
            console.log('📄 Opening PDF Editor...');
            // Check if PDF editor is available
            if (window.openPDFEditorWindow) {
                window.openPDFEditorWindow();
                showBewerbungsunterlagenMessage('📄 PDF Editor wird geöffnet...', 'info');
                // Open PDF editor in new window
                const pdfEditorWindow = window.open('', 'pdf-editor', 'width=1200,height=800,scrollbars=yes,resizable=yes');
                if (pdfEditorWindow) {
                    pdfEditorWindow.document.write(`
                        <html>
                            <head>
                                <title>PDF Editor</title>
                                <style>
                                    body { font-family: Arial, sans-serif; margin: 0; padding: 2rem; background: #f8fafc; }
                                    .editor-container { background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
                                    h1 { color: #1f2937; margin-bottom: 1rem; }
                                    .upload-area { border: 2px dashed #d1d5db; border-radius: 8px; padding: 3rem; text-align: center; margin: 2rem 0; }
                                    .upload-area:hover { border-color: #6366f1; background: #f8f9ff; }
                                </style>
                                <link rel="stylesheet" href="css/unified-auth-system.css">
</head>
                            <body>
                                <div class="editor-container">
                                    <h1><i class="fas fa-file-pdf"></i> PDF Editor</h1>
                                    <div class="upload-area">
                                        <i class="fas fa-file-pdf" style="font-size: 3rem; color: #dc2626; margin-bottom: 1rem;"></i>
                                        <h3>PDF-Datei hochladen</h3>
                                        <p>Ziehen Sie eine PDF-Datei hierher oder klicken Sie zum Auswählen</p>
                                        <input type="file" accept=".pdf" style="display: none;">
                                        <button onclick="this.previousElementSibling.click()" style="padding: 0.75rem 2rem; background: #dc2626; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">
                                            <i class="fas fa-upload"></i> PDF auswählen
                                    <div id="pdf-content" style="display: none;">
                                        <h3>PDF-Inhalt wird hier angezeigt</h3>
                                        <p>PDF-Editor-Funktionalität wird hier implementiert</p>
                                <!-- Auth Modals Container -->
    <div id="authModalsContainer"></div>
</body>
                        </html>
                    `);
                    showBewerbungsunterlagenMessage('❌ PDF Editor konnte nicht geöffnet werden', 'error');
        // 💬 Show Bewerbungsunterlagen Message
        window.showBewerbungsunterlagenMessage = function(message, type = 'info') {
        // 🚀 SMART MEDIA MANAGEMENT BUTTONS
        window.triggerSmartMediaUpload = function() {
            console.log('🚀 Triggering Smart Media Upload...');
                console.log('✅ Smart API available for media upload');
                const fileInput = document.getElementById('smart-file-input');
                    console.error('❌ Smart file input not found');
                    showSmartMediaMessage('Upload-Button nicht gefunden', 'error');
                showSmartMediaMessage('Smart API System wird geladen...', 'info');
                    triggerSmartMediaUpload();
                    showSmartMediaMessage('Smart API System konnte nicht geladen werden', 'error');
        window.triggerSmartFolderCreation = function() {
            console.log('🚀 Triggering Smart Folder Creation...');
            const folderName = prompt('Ordner-Name eingeben:');
            if (!folderName) return;
                console.log('✅ Smart API available for folder creation');
                // Use Smart API for folder creation
                window.smartAPI.createFolder(folderName, {
                    category: 'media',
                    console.log('✅ Smart API folder creation successful:', result);
                    showSmartMediaMessage(`✅ Ordner "${folderName}" erstellt`, 'success');
                    // Refresh media categories
                    if (window.loadMediaCategories) {
                        window.loadMediaCategories();
                    console.error('❌ Smart API folder creation failed:', error);
                    showSmartMediaMessage(`❌ Ordner-Erstellung fehlgeschlagen: ${error.message}`, 'error');
                    console.log('✅ Smart API System loaded, retrying folder creation');
                    triggerSmartFolderCreation();
        window.triggerSmartUploadMethod = function(method) {
            console.log('🚀 Triggering Smart Upload Method:', method);
                console.log('✅ Smart API available for upload method:', method);
                showSmartMediaMessage(`✅ ${method} Upload-Methode aktiviert`, 'success');
                    triggerSmartUploadMethod(method);
        // 🚀 SMART BEWERBUNGSUNTERLAGEN BUTTONS
        window.triggerSmartPortraitUpload = function() {
            console.log('🚀 Triggering Smart Portrait Upload...');
                console.log('✅ Smart API available for portrait upload');
                const fileInput = document.getElementById('portraitUpload');
                    console.error('❌ Portrait upload input not found');
                    showSmartMediaMessage('Portrait-Upload-Button nicht gefunden', 'error');
                    console.log('✅ Smart API System loaded, retrying portrait upload');
                    triggerSmartPortraitUpload();
        window.triggerSmartCVUpload = function() {
            console.log('🚀 Triggering Smart CV Upload...');
                console.log('✅ Smart API available for CV upload');
                const fileInput = document.getElementById('cvUpload');
                    console.error('❌ CV upload input not found');
                    showSmartMediaMessage('CV-Upload-Button nicht gefunden', 'error');
                    console.log('✅ Smart API System loaded, retrying CV upload');
                    triggerSmartCVUpload();
        window.triggerSmartCertificatesUpload = function() {
            console.log('🚀 Triggering Smart Certificates Upload...');
                console.log('✅ Smart API available for certificates upload');
                const fileInput = document.getElementById('certificatesUpload');
                    console.error('❌ Certificates upload input not found');
                    showSmartMediaMessage('Zeugnisse-Upload-Button nicht gefunden', 'error');
                    console.log('✅ Smart API System loaded, retrying certificates upload');
                    triggerSmartCertificatesUpload();
        window.triggerSmartCertificationsUpload = function() {
            console.log('🚀 Triggering Smart Certifications Upload...');
                console.log('✅ Smart API available for certifications upload');
                const fileInput = document.getElementById('certificationsUpload');
                    console.error('❌ Certifications upload input not found');
                    showSmartMediaMessage('Zertifikate-Upload-Button nicht gefunden', 'error');
                    console.log('✅ Smart API System loaded, retrying certifications upload');
                    triggerSmartCertificationsUpload();
        window.triggerSmartCoverLettersUpload = function() {
            console.log('🚀 Triggering Smart Cover Letters Upload...');
                console.log('✅ Smart API available for cover letters upload');
                const fileInput = document.getElementById('coverLettersUpload');
                    console.error('❌ Cover letters upload input not found');
                    showSmartMediaMessage('Anschreiben-Upload-Button nicht gefunden', 'error');
                    console.log('✅ Smart API System loaded, retrying cover letters upload');
                    triggerSmartCoverLettersUpload();
        window.triggerSmartFullApplicationsUpload = function() {
            console.log('🚀 Triggering Smart Full Applications Upload...');
                console.log('✅ Smart API available for full applications upload');
                const fileInput = document.getElementById('fullApplicationsUpload');
                    console.error('❌ Full applications upload input not found');
                    showSmartMediaMessage('Bewerbungsmappe-Upload-Button nicht gefunden', 'error');
                    console.log('✅ Smart API System loaded, retrying full applications upload');
                    triggerSmartFullApplicationsUpload();
        // 💬 Show Smart Media Message
        window.showSmartMediaMessage = function(message, type = 'info') {
            let messageDiv = document.getElementById('smart-media-message');
                messageDiv.id = 'smart-media-message';
        // PERSÖNLICHKEITSENTWICKLUNG: Alle aufgeklappten Methoden einklappen
        function collapseAllMethods() {
            console.log('🔄 Einklappen aller aufgeklappten Methoden...');
            // Alle aufgeklappten Ikigai-Schritte einklappen
            document.querySelectorAll('.ikigai-step-card.expanded, .ikigai-step-card.open').forEach(card => {
                card.classList.remove('expanded', 'open');
                console.log('✅ Ikigai-Schritt eingeklappt:', card.dataset.step);
            // Alle aufgeklappten Methoden-Karten einklappen
            document.querySelectorAll('.method-card.expanded, .method-card.open').forEach(card => {
                console.log('✅ Methoden-Karte eingeklappt:', card.dataset.method);
            // Alle aufgeklappten Workflow-Schritte einklappen
            document.querySelectorAll('.workflow-step.expanded, .workflow-step.open').forEach(step => {
                step.classList.remove('expanded', 'open');
                console.log('✅ Workflow-Schritt eingeklappt:', step.dataset.step);
            // Alle aufgeklappten Kategorien einklappen
            document.querySelectorAll('.category-card.expanded, .category-card.open').forEach(card => {
                console.log('✅ Kategorie eingeklappt:', card.dataset.category);
            // Alle aufgeklappten Details-Bereiche einklappen
            document.querySelectorAll('.method-details.expanded, .method-details.open').forEach(details => {
                details.classList.remove('expanded', 'open');
                details.style.display = 'none';
                console.log('✅ Methoden-Details eingeklappt');
            // Alle aufgeklappten Akkordeon-Bereiche einklappen
            document.querySelectorAll('.accordion-content.expanded, .accordion-content.open').forEach(content => {
                content.classList.remove('expanded', 'open');
                content.style.display = 'none';
                console.log('✅ Akkordeon-Bereich eingeklappt');
            // Alle aufgeklappten Tabs zurücksetzen
            document.querySelectorAll('.tab-content.active, .tab-content.open').forEach(content => {
                content.classList.remove('active', 'open');
                console.log('✅ Tab-Inhalt eingeklappt');
            console.log('✅ Alle aufgeklappten Methoden erfolgreich eingeklappt!');
        // ANALYTICS: Initialisierung und Funktionen
        function initializeAnalytics() {
            console.log('📊 Initializing Analytics...');
            loadAnalyticsData();
            // Setup analytics filters
            setupAnalyticsFilters();
            // Setup analytics charts
            setupAnalyticsCharts();
        function loadAnalyticsData() {
            // Simulate loading analytics data
            const analyticsData = {
                pageViews: 12453,
                uniqueVisitors: 3241,
                bounceRate: 42.3,
                avgSessionTime: '3:24',
                topPages: [
                    { name: 'Persönlichkeitsentwicklung', views: 2341 },
                    { name: 'Bewerbung', views: 1892 },
                    { name: 'Lebenslauf', views: 1567 }
                ],
                userEngagement: {
                    activeUsers: 1234,
                    newUsers: 567,
                    returningUsers: 667
            // Update analytics cards
            updateAnalyticsCards(analyticsData);
        function updateAnalyticsCards(data) {
            // Update page views
            const pageViewsEl = document.querySelector('[data-metric="page-views"]');
            if (pageViewsEl) {
                pageViewsEl.textContent = data.pageViews.toLocaleString();
            // Update unique visitors
            const visitorsEl = document.querySelector('[data-metric="visitors"]');
            if (visitorsEl) {
                visitorsEl.textContent = data.uniqueVisitors.toLocaleString();
            // Update bounce rate
            const bounceRateEl = document.querySelector('[data-metric="bounce-rate"]');
            if (bounceRateEl) {
                bounceRateEl.textContent = data.bounceRate + '%';
            // Update session time
            const sessionTimeEl = document.querySelector('[data-metric="session-time"]');
            if (sessionTimeEl) {
                sessionTimeEl.textContent = data.avgSessionTime;
        function setupAnalyticsFilters() {
            const periodSelect = document.querySelector('.period-select');
            if (periodSelect) {
                periodSelect.addEventListener('change', (e) => {
                    console.log('📊 Analytics period changed:', e.target.value);
                    loadAnalyticsData();
        function setupAnalyticsCharts() {
            // Initialize charts if Chart.js is available
            if (typeof Chart !== 'undefined') {
                console.log('📊 Setting up analytics charts...');
                // Chart implementation would go here
        // SETTINGS: Initialisierung und Funktionen
            console.log('⚙️ Initializing Settings...');
            // Load current settings
            loadSettings();
            // Setup settings tabs
            setupSettingsTabs();
            // Setup settings forms
            setupSettingsForms();
        function loadSettings() {
            // Load settings from localStorage or API
                general: {
                    siteName: 'Manuel Weiss - Persönlichkeitsentwicklung',
                    siteDescription: 'Professionelle Beratung für Persönlichkeitsentwicklung',
                    language: 'de',
                    timezone: 'Europe/Berlin'
                notifications: {
                    emailNotifications: true,
                    pushNotifications: false,
                    weeklyReports: true
                security: {
                    twoFactorAuth: false,
                    sessionTimeout: 30,
                    passwordPolicy: 'strong'
            // Update settings forms
            updateSettingsForms(settings);
        function updateSettingsForms(settings) {
            // Update general settings
            const siteNameInput = document.querySelector('#site-name');
            if (siteNameInput) {
                siteNameInput.value = settings.general.siteName;
            const siteDescInput = document.querySelector('#site-description');
            if (siteDescInput) {
                siteDescInput.value = settings.general.siteDescription;
            // Update notification settings
            const emailNotifCheckbox = document.querySelector('#email-notifications');
            if (emailNotifCheckbox) {
                emailNotifCheckbox.checked = settings.notifications.emailNotifications;
            const pushNotifCheckbox = document.querySelector('#push-notifications');
            if (pushNotifCheckbox) {
                pushNotifCheckbox.checked = settings.notifications.pushNotifications;
        function setupSettingsTabs() {
            const settingsContents = document.querySelectorAll('.settings-content');
                    const targetTab = tab.dataset.tab;
                    // Remove active class from all tabs and contents
                    settingsContents.forEach(c => c.classList.remove('active'));
                    // Add active class to clicked tab and corresponding content
                    const targetContent = document.querySelector(`#${targetTab}-settings`);
                    if (targetContent) {
                        targetContent.classList.add('active');
        function setupSettingsForms() {
            // Setup form submission handlers
            const saveButtons = document.querySelectorAll('[data-action="save-settings"]');
            saveButtons.forEach(btn => {
                btn.addEventListener('click', saveSettings);
        function saveSettings() {
            console.log('💾 Saving settings...');
            // Collect form data
                    siteName: document.querySelector('#site-name')?.value || '',
                    siteDescription: document.querySelector('#site-description')?.value || '',
                    language: document.querySelector('#language')?.value || 'de',
                    timezone: document.querySelector('#timezone')?.value || 'Europe/Berlin'
                    emailNotifications: document.querySelector('#email-notifications')?.checked || false,
                    pushNotifications: document.querySelector('#push-notifications')?.checked || false,
                    weeklyReports: document.querySelector('#weekly-reports')?.checked || false
                    twoFactorAuth: document.querySelector('#two-factor-auth')?.checked || false,
                    sessionTimeout: document.querySelector('#session-timeout')?.value || 30,
                    passwordPolicy: document.querySelector('#password-policy')?.value || 'strong'
            localStorage.setItem('admin_settings', JSON.stringify(settings));
            showStatus('✅ Einstellungen erfolgreich gespeichert!', 'success');
            console.log('✅ Settings saved:', settings);
        // PULSIERENDES MENÜ: Implementierung
        function initializePulsingMenu() {
            console.log('💫 Initializing Pulsing Menu...');
            // Add pulsing animation to specific menu items
            addPulsingAnimation();
            // Setup pulsing triggers
            setupPulsingTriggers();
        function addPulsingAnimation() {
            // Add pulsing class to important menu items
            const importantItems = [
                '.nav-item[data-section="dashboard"]',
                '.nav-item[data-section="analytics"]',
                '.nav-item[data-section="settings"]'
            importantItems.forEach(selector => {
                const item = document.querySelector(selector);
                if (item) {
                    item.classList.add('pulsing-item');
        function setupPulsingTriggers() {
            // Add pulsing animation to menu items based on conditions
            const menuItems = document.querySelectorAll('.nav-item');
            menuItems.forEach(item => {
                const section = item.dataset.section;
                // Add pulsing for specific conditions
                if (section === 'analytics') {
                    // Pulse analytics if there are new data
                    if (hasNewAnalyticsData()) {
                        item.classList.add('pulsing');
                if (section === 'settings') {
                    // Pulse settings if there are pending changes
                    if (hasPendingSettings()) {
                if (section === 'dashboard') {
                    // Pulse dashboard if there are new notifications
                    if (hasNewNotifications()) {
        function hasNewAnalyticsData() {
            // Check if there are new analytics data
            const lastUpdate = localStorage.getItem('analytics_last_update');
            const now = new Date().getTime();
            const oneHour = 60 * 60 * 1000;
            return !lastUpdate || (now - parseInt(lastUpdate)) > oneHour;
        function hasPendingSettings() {
            // Check if there are pending settings changes
            const pendingChanges = localStorage.getItem('settings_pending_changes');
            return pendingChanges === 'true';
        function hasNewNotifications() {
            // Check if there are new notifications
            const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
            return notifications.some(n => !n.read);
        // PULSING ANIMATION CSS
        function addPulsingStyles() {
                .pulsing-item {
                    position: relative;
                    overflow: hidden;
                .pulsing-item::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    background: linear-gradient(135deg, #3b82f6, #1e40af);
                    transform: translate(-50%, -50%);
                    opacity: 0.3;
                    animation: pulse 2s infinite;
                    z-index: -1;
                .pulsing {
                    animation: pulse-glow 1.5s ease-in-out infinite alternate;
                @keyframes pulse-glow {
                    0% { 
                        box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
                        transform: scale(1);
                    100% { 
                        box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
                        transform: scale(1.02);
                .pulsing-item.pulsing {
                .pulsing-item.pulsing i {
        // SIMPLE layout setup
        function fixLayout() {
            const sidebar = document.querySelector('.sidebar');
            if (!sidebar) return;
            // Create wrapper for all non-sidebar content
            if (!document.querySelector('.admin-page-wrapper')) {
                const wrapper = document.createElement('div');
                wrapper.className = 'admin-page-wrapper';
                // Move all content except sidebar to wrapper
                const children = Array.from(document.body.children);
                children.forEach(child => {
                    if (child !== sidebar && child.tagName !== 'SCRIPT') {
                        wrapper.appendChild(child);
                document.body.appendChild(wrapper);
        // Auto-fix layout
        setTimeout(fixLayout, 100);
        // MODERN SIDEBAR TOGGLE - UX Best Practices
        function initModernSidebar() {
            const body = document.body;
            // Set initial state - NO BODY MARGIN
            const mainContent = document.querySelector('.admin-main');
            if (mainContent) {
                mainContent.style.marginLeft = '280px';
                mainContent.style.transition = 'margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
            function toggleSidebar() {
                const isMobile = window.innerWidth <= 768;
                const isCollapsed = sidebar.classList.contains('collapsed');
                if (isMobile) {
                    // Mobile: Toggle overlay
                    sidebar.classList.toggle('mobile-open');
                    // Desktop/Tablet: Toggle width
                    sidebar.classList.toggle('collapsed');
                    // Body-Klassen für CSS-Selektoren
                    if (sidebar.classList.contains('collapsed')) {
                        body.classList.add('sidebar-collapsed');
                        body.classList.remove('sidebar-collapsed');
                // Labels dynamisch aktualisieren
                updateToggleLabels();
                // Layout nach Toggle neu berechnen
                setTimeout(fixLayout, 50);
                console.log('🔄 Sidebar', isCollapsed ? 'expanded' : 'collapsed', `(${isMobile ? 'Mobile' : 'Desktop'})`);
            // Labels dynamisch aktualisieren
            function updateToggleLabels() {
                const toggleLabel = sidebar.querySelector('.toggle-label');
                if (toggleLabel) {
                    toggleLabel.textContent = isCollapsed ? 'Ausklappen' : 'Einklappen';
            // Toggle button functionality with tracking
            if (sidebarToggle && sidebar) {
                sidebarToggle.addEventListener('click', toggleSidebarWithTracking);
                // Keyboard accessibility
                sidebarToggle.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        toggleSidebarWithTracking();
                // Improved visual feedback
                sidebarToggle.setAttribute('aria-label', 'Toggle sidebar');
                sidebarToggle.setAttribute('aria-expanded', 'true');
            // Responsive handling
            function handleResize() {
                const isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
                const isDesktop = window.innerWidth > 1024;
                // Body reset
                document.body.style.padding = '0';
                document.body.style.margin = '0';
                    // Mobile: Overlay mode, hidden by default
                    sidebar.classList.remove('collapsed');
                    sidebar.classList.remove('mobile-open');
                    body.classList.remove('sidebar-collapsed');
                } else if (isTablet) {
                    // Tablet: Auto-collapse
                    sidebar.classList.add('collapsed');
                    body.classList.add('sidebar-collapsed');
                } else if (isDesktop && !sidebar.dataset.userToggled) {
                    // Desktop: Auto-expand if user hasn't manually toggled
                // Apply responsive layout
                fixLayout();
            // Track user interaction
            function toggleSidebarWithTracking() {
                sidebar.dataset.userToggled = 'true';
                toggleSidebar();
            window.addEventListener('resize', handleResize);
            handleResize(); // Initial call
            // Initiale Labels setzen
            updateToggleLabels();
            console.log('✅ Modern sidebar initialized');
        // Initialize modern sidebar
            document.addEventListener('DOMContentLoaded', initModernSidebar);
            initModernSidebar();
        // Add pulsing styles immediately
        addPulsingStyles();
        // ANALYTICS FUNCTIONS
            console.log('📊 Loading analytics data...');
        // SETTINGS FUNCTIONS
            console.log('⚙️ Loading settings...');
        // PULSING MENU FUNCTIONS
            console.log('💫 Adding pulsing animation...');
            console.log('💫 Setting up pulsing triggers...');
        // Initialize Hero Settings
        function initializeHeroSettings() {
            console.log('🏠 Initializing Hero Settings...');
            // Load existing hero settings
            loadHeroSettings();
            // Setup event listeners
            setupHeroEventListeners();
            console.log('✅ Hero Settings initialized');
        function loadHeroSettings() {
            const heroSettings = JSON.parse(localStorage.getItem('heroSettings') || '{}');
            // Load form values
            const titleInput = document.getElementById('hero-title');
            const subtitleInput = document.getElementById('hero-subtitle');
            const bgColor1Input = document.getElementById('hero-bg-color1');
            const bgColor2Input = document.getElementById('hero-bg-color2');
            const textColorInput = document.getElementById('hero-text-color');
            const buttonTextInput = document.getElementById('hero-button-text');
            const buttonLinkInput = document.getElementById('hero-button-link');
            const animationsInput = document.getElementById('hero-animations');
            const glassEffectInput = document.getElementById('hero-glass-effect');
            if (titleInput) titleInput.value = heroSettings.title || '';
            if (subtitleInput) subtitleInput.value = heroSettings.subtitle || '';
            if (bgColor1Input) bgColor1Input.value = heroSettings.bgColor1 || '#667eea';
            if (bgColor2Input) bgColor2Input.value = heroSettings.bgColor2 || '#764ba2';
            if (textColorInput) textColorInput.value = heroSettings.textColor || '#ffffff';
            if (buttonTextInput) buttonTextInput.value = heroSettings.buttonText || '';
            if (buttonLinkInput) buttonLinkInput.value = heroSettings.buttonLink || '';
            if (animationsInput) animationsInput.checked = heroSettings.animations !== false;
            if (glassEffectInput) glassEffectInput.checked = heroSettings.glassEffect !== false;
            // Load image preview if exists
            if (heroSettings.imageUrl) {
                showImagePreview(heroSettings.imageUrl);
        function setupHeroEventListeners() {
            // Save hero settings
            const saveBtn = document.querySelector('[data-action="save-hero-settings"]');
                saveBtn.addEventListener('click', saveHeroSettings);
            // Preview hero
            const previewBtn = document.querySelector('[data-action="preview-hero"]');
                previewBtn.addEventListener('click', previewHero);
            // Reset hero
            const resetBtn = document.querySelector('[data-action="reset-hero"]');
                resetBtn.addEventListener('click', resetHero);
            // Update hero content button (AI Twin Sektion)
            const updateHeroBtn = document.querySelector('[data-action="update-hero-content"]');
            if (updateHeroBtn) {
                updateHeroBtn.addEventListener('click', updateHeroContent);
            // Hero settings buttons (Einstellungen-Sektion)
            const saveHeroBtn = document.querySelector('[data-action="save-hero-settings"]');
            if (saveHeroBtn) {
                saveHeroBtn.addEventListener('click', updateHeroContent);
            const previewHeroBtn = document.querySelector('[data-action="preview-hero"]');
            if (previewHeroBtn) {
                previewHeroBtn.addEventListener('click', function() {
                    alert('Vorschau-Funktion wird implementiert...');
            const resetHeroBtn = document.querySelector('[data-action="reset-hero"]');
            if (resetHeroBtn) {
                resetHeroBtn.addEventListener('click', function() {
                        // Reset alle Hero-Felder
                        const heroFields = ['hero-name', 'hero-title', 'hero-subtitle', 'hero-description', 'hero-text-effect', 'hero-bg-color1', 'hero-bg-color2', 'hero-text-color', 'hero-button-text', 'hero-button-link'];
                        heroFields.forEach(fieldId => {
                            const field = document.getElementById(fieldId);
                            if (field) {
                                if (field.type === 'checkbox') {
                                    field.checked = false;
                                } else {
                                    field.value = '';
                        localStorage.removeItem('heroContent');
                        alert('Hero-Einstellungen wurden zurückgesetzt!');
            // Settings tabs - add event listeners to all tabs
                    console.log(`🔄 Settings tab clicked: ${tabName}`);
                    showSettingsTab(tabName);
            // Hero settings tab (fallback)
            const heroTab = document.querySelector('[data-tab="hero-settings"]');
            if (heroTab) {
                heroTab.addEventListener('click', function() {
                    showSettingsTab('hero-settings');
            // Image upload
            const imageInput = document.getElementById('hero-image');
            if (imageInput) {
                imageInput.addEventListener('change', handleImageUpload);
            // Color changes
            if (bgColor1Input) bgColor1Input.addEventListener('change', updateHeroPreview);
            if (bgColor2Input) bgColor2Input.addEventListener('change', updateHeroPreview);
            if (textColorInput) textColorInput.addEventListener('change', updateHeroPreview);
        function saveHeroSettings() {
            const heroSettings = {
                animations: document.getElementById('hero-animations').checked,
                glassEffect: document.getElementById('hero-glass-effect').checked,
                imageUrl: document.getElementById('hero-image-preview').querySelector('img')?.src || ''
            localStorage.setItem('heroSettings', JSON.stringify(heroSettings));
            // Apply to main website
            applyHeroSettings(heroSettings);
            showMessage('✅ Hero-Einstellungen gespeichert!', 'success');
        function applyHeroSettings(settings) {
            // Apply to main website (this would need to be implemented in the main website)
            console.log('🎨 Applying hero settings:', settings);
            // Send to main website via postMessage or direct manipulation
            if (window.parent !== window) {
                window.parent.postMessage({
                    type: 'UPDATE_HERO',
                    settings: settings
                }, '*');
        function previewHero() {
                glassEffect: document.getElementById('hero-glass-effect').checked
            // Open preview window
            const previewWindow = window.open('', 'hero-preview', 'width=1200,height=800');
            previewWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Hero Preview</title>
                    <style>
                        body { margin: 0; font-family: Inter, sans-serif; }
                        .hero-preview {
                            background: linear-gradient(135deg, ${settings.bgColor1} 0%, ${settings.bgColor2} 100%);
                            color: ${settings.textColor};
                            min-height: 100vh;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            text-align: center;
                            position: relative;
                            overflow: hidden;
                        .hero-preview::before {
                            content: '';
                            position: absolute;
                            top: 0; left: 0; right: 0; bottom: 0;
                            background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                                       radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%);
                            z-index: 1;
                        .hero-content {
                            z-index: 2;
                            max-width: 800px;
                            padding: 2rem;
                        .hero-title {
                            font-size: 3rem;
                            font-weight: 700;
                            margin-bottom: 1rem;
                            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
                        .hero-subtitle {
                            font-size: 1.2rem;
                            margin-bottom: 2rem;
                            opacity: 0.9;
                        .hero-button {
                            background: rgba(255, 255, 255, 0.1);
                            border: 1px solid rgba(255, 255, 255, 0.2);
                            padding: 12px 24px;
                            border-radius: 8px;
                            text-decoration: none;
                            display: inline-block;
                            backdrop-filter: blur(10px);
                            transition: all 0.3s ease;
                        .hero-button:hover {
                            background: rgba(255, 255, 255, 0.2);
                            transform: translateY(-2px);
                    </style>
                    <link rel="stylesheet" href="css/unified-auth-system.css">
</head>
                <body>
                    <div class="hero-preview">
                        <div class="hero-content">
                            <h1 class="hero-title">${settings.title || 'Berater für AI & Digitalisierung'}</h1>
                            <p class="hero-subtitle">${settings.subtitle || 'Ihre Beschreibung hier...'}</p>
                            ${settings.buttonText ? `<a href="${settings.buttonLink || '#'}" class="hero-button">${settings.buttonText}</a>` : ''}
                    <!-- Auth Modals Container -->
    <div id="authModalsContainer"></div>
</body>
                </html>
            `);
        function resetHero() {
            if (confirm('Möchten Sie alle Hero-Einstellungen zurücksetzen?')) {
                localStorage.removeItem('heroSettings');
                loadHeroSettings();
                showMessage('🔄 Hero-Einstellungen zurückgesetzt!', 'info');
        function showSettingsTab(tabName) {
            console.log(`🔄 Switching to tab: ${tabName}`);
            // Hide all settings panels
            console.log(`📋 Found ${panels.length} settings panels`);
            panels.forEach(panel => {
                panel.style.display = 'none';
                panel.classList.remove('active');
                console.log(`📋 Hiding panel: ${panel.id}`);
            // Remove active class from all tabs
            console.log(`📋 Found ${tabs.length} settings tabs`);
                tab.classList.remove('active');
                console.log(`📋 Deactivating tab: ${tab.getAttribute('data-tab')}`);
            // Show selected panel based on tab name
            let targetPanel = null;
            switch(tabName) {
                case 'hero-settings':
                    targetPanel = document.getElementById('heroSettings');
                case 'general':
                    targetPanel = document.getElementById('generalSettings');
                case 'seo':
                    targetPanel = document.getElementById('seoSettings');
                case 'security':
                    targetPanel = document.getElementById('securitySettings');
                case 'backup':
                    targetPanel = document.getElementById('backupSettings');
            if (targetPanel) {
                targetPanel.style.display = 'block';
                targetPanel.classList.add('active');
                console.log(`✅ Showing panel: ${targetPanel.id}`);
                console.error(`❌ Panel not found for tab: ${tabName}`);
                // Fallback: show first available panel
                const firstPanel = document.querySelector('.settings-panel');
                if (firstPanel) {
                    firstPanel.style.display = 'block';
                    firstPanel.classList.add('active');
                    console.log(`🆘 Fallback: Showing first panel: ${firstPanel.id}`);
            // Add active class to selected tab
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
                activeTab.classList.add('active');
                console.log(`✅ Tab activated: ${tabName}`);
                console.error(`❌ Tab not found: ${tabName}`);
            console.log('📋 Settings tabs initialized');
            // Setup form validation and submission
            const forms = document.querySelectorAll('.settings-form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    console.log('📝 Settings form submitted');
            // Setup specific settings buttons
            const saveSeoBtn = document.querySelector('[data-action="save-seo-settings"]');
            if (saveSeoBtn) {
                saveSeoBtn.addEventListener('click', function() {
                    console.log('🔍 SEO Settings saved');
                    alert('✅ SEO-Einstellungen gespeichert!');
            const saveSecurityBtn = document.querySelector('[data-action="save-security-settings"]');
            if (saveSecurityBtn) {
                saveSecurityBtn.addEventListener('click', function() {
                    console.log('🔒 Security Settings saved');
                    alert('✅ Sicherheitseinstellungen gespeichert!');
            const createBackupBtn = document.querySelector('[data-action="create-backup"]');
            if (createBackupBtn) {
                createBackupBtn.addEventListener('click', function() {
                    console.log('💾 Creating backup...');
            const restoreBackupBtn = document.querySelector('[data-action="restore-backup"]');
            if (restoreBackupBtn) {
                restoreBackupBtn.addEventListener('click', function() {
                    console.log('📥 Restoring backup...');
            console.log('📝 Settings forms initialized');
        function handleImageUpload(event) {
            const file = event.target.files[0];
                    showImagePreview(e.target.result);
        function showImagePreview(imageUrl) {
            const preview = document.getElementById('hero-image-preview');
            if (preview) {
                preview.innerHTML = `<img src="${imageUrl}" alt="Hero Image Preview">`;
                preview.classList.remove('empty');
        function updateHeroPreview() {
            // Update preview in real-time if preview window is open
            console.log('🎨 Updating hero preview...');
        // Initialize all functions immediately
            console.log('🚀 Initializing all admin functions...');
            // Initialize Analytics immediately
            // Initialize Settings immediately
            // Initialize Hero Settings
            // Initialize Settings Tabs
            console.log('⚙️ Initializing Settings Tabs...');
            // Show first tab by default
            showSettingsTab('general');
            // Force show settings panels immediately
                console.log('🔄 Force showing settings panels...');
                const generalPanel = document.getElementById('generalSettings');
                if (generalPanel) {
                    generalPanel.style.display = 'block';
                    generalPanel.classList.add('active');
                    console.log('✅ General panel forced visible');
                // Also ensure all panels are properly initialized
                const allPanels = document.querySelectorAll('.settings-panel');
                allPanels.forEach(panel => {
                    if (panel.id === 'generalSettings') {
                        panel.style.display = 'block';
            // Initialize Pulsing Menu immediately
            console.log('✅ All admin functions initialized');
        // CLEAN LAYOUT FIX - CSS-basiert
            // Body reset
            document.body.style.padding = '0';
            document.body.style.margin = '0';
            // Container-Setup
            const adminContainer = document.querySelector('.admin-container');
            const contentWrapper = document.querySelector('.content-wrapper');
            if (adminContainer && sidebar && contentWrapper) {
                // Flexbox Layout aktivieren
                adminContainer.style.display = 'flex';
                adminContainer.style.width = '100vw';
                adminContainer.style.minHeight = '100vh';
                adminContainer.style.overflowX = 'hidden';
                // Sidebar Setup
                sidebar.style.flexShrink = '0';
                sidebar.style.transition = 'width 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                // Content Wrapper Setup
                contentWrapper.style.flex = '1';
                contentWrapper.style.transition = 'width 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                contentWrapper.style.overflowX = 'hidden';
                // Responsive Anpassung
                    sidebar.style.position = 'fixed';
                    sidebar.style.transform = 'translateX(-100%)';
                    contentWrapper.style.width = '100vw';
                    contentWrapper.style.marginLeft = '0';
                    sidebar.style.position = 'relative';
                    sidebar.style.transform = 'translateX(0)';
                    sidebar.style.width = isCollapsed ? '70px' : '280px';
                    contentWrapper.style.width = isCollapsed ? 'calc(100vw - 70px)' : 'calc(100vw - 280px)';
                // Alle Admin-Sektionen anpassen
                const allSections = document.querySelectorAll('.admin-section, #user-management-live, #analytics, #system-health, #settings, #dashboard, #content, #nutrition, #personality-development, #personal-training, #applications, #ai-settings, #ai-twin, #translations, #media, #vermietungen, #buchungen');
            allSections.forEach(section => {
                    section.style.width = '100%';
                    section.style.maxWidth = '100%';
                    section.style.margin = '0';
                    section.style.padding = 'clamp(10px, 2vw, 20px)';
                section.style.boxSizing = 'border-box';
                console.log(`✅ Clean Layout applied - Mobile: ${isMobile}, Collapsed: ${isCollapsed}`);
        // Apply immediately and on resize
        fixLayout();
        document.addEventListener('DOMContentLoaded', fixLayout);
        window.addEventListener('resize', fixLayout);
        // Immediate application
        setTimeout(initModernSidebar, 50);
        // Wait for all systems to initialize
        setTimeout(() => {
            initAdminMultiUser();
        }, 2000);
        function initAdminMultiUser() {
            console.log('🚀 Admin Multi-User Integration starting...');
            // Add system status to dashboard
            addSystemStatusToAdmin();
            // Add user management features
            addUserManagementFeatures();
            // Add system monitoring
            addSystemMonitoring();
            // Setup admin-specific auth handling
            if (window.GlobalAuth) {
                window.GlobalAuth.onAuthChange({
                    onLogin: (user) => {
                        console.log('👤 Admin user logged in:', user.email);
                        updateAdminUserContext(user);
                    onLogout: () => {
                        console.log('👤 Admin user logged out');
                        clearAdminUserContext();
                // Check if admin is already logged in
                if (window.GlobalAuth.isAuthenticated()) {
                    updateAdminUserContext(window.GlobalAuth.getCurrentUser());
            console.log('✅ Admin Multi-User Integration ready');
        function addSystemStatusToAdmin() {
            const dashboard = document.getElementById('dashboard');
            if (!dashboard) return;
            const systemStatus = document.createElement('div');
            systemStatus.id = 'admin-system-status';
            systemStatus.innerHTML = `
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white; padding: 2rem; border-radius: 16px;
                    margin: 2rem 0; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                    <h2 style="margin: 0 0 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-server"></i>
                        Live Multi-User System Status
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">✅</div>
                            <div style="font-size: 0.875rem;">Frontend</div>
                            <div style="font-size: 0.875rem;">AWS Backend</div>
                            <div style="font-size: 0.875rem;">Auth System</div>
                            <div style="font-size: 1.5rem; font-weight: bold;">📊</div>
                            <div style="font-size: 0.875rem;">Progress Track</div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <a href="./multi-user-dashboard.html" target="_blank" style="
                            background: rgba(255,255,255,0.2); color: white; text-decoration: none;
                            padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 500;
                            border: 1px solid rgba(255,255,255,0.3);
                            <i class="fas fa-chart-bar"></i> User Dashboard
                        </a>
            // Insert at the beginning of dashboard
            dashboard.insertBefore(systemStatus, dashboard.firstChild);
        function addUserManagementFeatures() {
            // Add user management section to admin
            // This would integrate with existing admin features
            console.log('👥 User management features added to admin');
        function addSystemMonitoring() {
            // Add real-time system monitoring
            console.log('📊 System monitoring active');
        function updateAdminUserContext(user) {
            // Update admin interface with user context
            console.log('🔧 Admin context updated for user:', user.email);
        function clearAdminUserContext() {
            // Clear admin user context
            console.log('🔧 Admin context cleared');
        console.log('📊 Multi-User-Features verfügbar:', {
            auth: typeof initAuth === 'function',
            docs: typeof listDocuments === 'function',
            userProfile: typeof getUserProfile === 'function',
            progressTracking: typeof getUserProgress === 'function',
            backend: 'AWS Services Live'
        // Verstecke das Info-Panel nach 15 Sekunden  
            const panel = document.querySelector('[style*="position: fixed"]');
            if (panel) {
                panel.style.transform = 'translateX(100%)';
                panel.style.transition = 'transform 0.3s ease';
        }, 15000);
        // Direkte Upload-Funktionen
        function triggerDirectUpload() {
            console.log('🚀 DIRECT UPLOAD: Button clicked');
            const fileInput = document.getElementById('direct-profile-upload');
            if (fileInput) {
                console.log('📁 DIRECT UPLOAD: File input found, triggering click');
                fileInput.click();
                console.error('❌ DIRECT UPLOAD: File input not found');
                alert('Upload-Element nicht gefunden!');
        function handleDirectUploadChange(input) {
            console.log('📸 DIRECT UPLOAD: File selected');
                console.log('❌ DIRECT UPLOAD: No file selected');
            console.log('📸 DIRECT UPLOAD: Processing file:', file.name, file.size, file.type);
            // Datei lesen
                const imageUrl = e.target.result;
                console.log('📸 DIRECT UPLOAD: Image loaded, URL length:', imageUrl.length);
                // Profilbild aktualisieren
                    currentImage.style.display = 'block';
                    console.log('✅ DIRECT UPLOAD: Image updated in admin panel');
                    console.error('❌ DIRECT UPLOAD: current-profile-image not found');
                    currentName.textContent = file.name;
                    console.log('✅ DIRECT UPLOAD: Name updated');
                    console.error('❌ DIRECT UPLOAD: current-profile-name not found');
                console.log('💾 DIRECT UPLOAD: Saved to localStorage');
                // Erfolgsmeldung
                alert('Profilbild erfolgreich hochgeladen!');
                console.log('✅ DIRECT UPLOAD: Upload completed successfully');
            reader.onerror = function(error) {
                console.error('❌ DIRECT UPLOAD: FileReader error:', error);
                alert('Fehler beim Lesen der Datei!');
        // Test-Funktion
        function testUpload() {
            console.log('🧪 TEST: Testing upload functionality...');
            const directBtn = document.getElementById('direct-upload-btn');
            const directInput = document.getElementById('direct-profile-upload');
            const currentName = document.getElementById('current-profile-name');
            console.log('🧪 TEST: Elements found:', {
                directBtn: !!directBtn,
                directInput: !!directInput,
                currentImage: !!currentImage,
                currentName: !!currentName
            if (directBtn) {
                console.log('🧪 TEST: Button clickable');
                console.error('❌ TEST: Button not found');
        // Test beim Laden
            setTimeout(testUpload, 1000);
        // EINFACHES LOGGING
        function log(message) {
            console.log('📸 UPLOAD:', message);
        // EINFACHE UPLOAD-FUNKTIONEN
            log('Button clicked');
            const fileInput = document.getElementById('file-upload');
                log('File input clicked');
            log('File selected');
                log('No file selected');
            log(`Processing file: ${file.name}`);
                log('Image loaded');
                // Bild anzeigen
                const img = document.getElementById('current-profile-image');
                const name = document.getElementById('current-profile-name');
                if (img) {
                    img.src = imageUrl;
                    img.style.display = 'block';
                    log('Image updated');
                if (name) {
                    name.textContent = file.name;
                    log('Name updated');
                // Speichern
                log('Saved to localStorage');
                // Website aktualisieren
                updateWebsiteImage(imageUrl);
                alert('✅ Bild erfolgreich hochgeladen!');
                log('FileReader error: ' + error);
        // EINFACHER TEST
        function simpleTest() {
            log('Testing upload system');
            const image = document.getElementById('current-profile-image');
            if (fileInput && image) {
                log('All elements found - system ready');
                log('Missing elements - system not ready');
        // Test nach 2 Sekunden
        setTimeout(simpleTest, 2000);
        // Upload-System
        function initSimpleUpload() {
            console.log('🚀 UPLOAD: Initializing upload system');
            const uploadBtn = document.getElementById('simple-upload-btn');
            const fileInput = document.getElementById('simple-file-input');
            const imageDisplay = document.getElementById('current-profile-image');
            const nameDisplay = document.getElementById('current-profile-name');
            console.log('🚀 SIMPLE UPLOAD: Elements found:', {
                uploadBtn: !!uploadBtn,
                fileInput: !!fileInput,
                imageDisplay: !!imageDisplay,
                nameDisplay: !!nameDisplay
                    console.log('🚀 SIMPLE UPLOAD: Button clicked');
                    console.log('🚀 SIMPLE UPLOAD: File selected');
                        console.log('🚀 SIMPLE UPLOAD: Processing file:', file.name);
                            const imageUrl = e.target.result;
                            console.log('🚀 SIMPLE UPLOAD: Image loaded, length:', imageUrl.length);
                            // Bild anzeigen
                            if (imageDisplay) {
                                imageDisplay.src = imageUrl;
                                imageDisplay.style.display = 'block';
                                console.log('✅ SIMPLE UPLOAD: Image displayed');
                            // Name anzeigen
                            if (nameDisplay) {
                                nameDisplay.textContent = file.name;
                                console.log('✅ SIMPLE UPLOAD: Name updated');
                            // In localStorage speichern
                                localStorage.setItem('heroProfileImage', imageUrl);
                                console.log('✅ SIMPLE UPLOAD: Saved to localStorage');
                                alert('Bild erfolgreich hochgeladen!');
                            } catch (error) {
                                console.error('❌ SIMPLE UPLOAD: localStorage error:', error);
                                alert('Fehler beim Speichern!');
                        reader.onerror = function(error) {
                            console.error('❌ SIMPLE UPLOAD: FileReader error:', error);
                            alert('Fehler beim Lesen der Datei!');
                console.log('✅ SIMPLE UPLOAD: Event listeners attached');
                console.error('❌ SIMPLE UPLOAD: Required elements not found');
        // FUNKTIONIERENDE UPLOAD-LÖSUNG
        function handleFileUpload(input) {
            console.log('🚀 UPLOAD: File selected');
                console.log('❌ UPLOAD: No file selected');
                alert('❌ Keine Datei ausgewählt!');
            console.log('🚀 UPLOAD: Processing file:', file.name, file.size, file.type);
                console.log('🚀 UPLOAD: Image loaded, length:', imageUrl.length);
                    console.log('✅ UPLOAD: Image updated');
                    console.error('❌ UPLOAD: Image element not found');
                    alert('❌ Bild-Element nicht gefunden!');
                    console.log('✅ UPLOAD: Name updated');
                    console.error('❌ UPLOAD: Name element not found');
                    // 1. localStorage speichern
                    localStorage.setItem('heroProfileImage', imageUrl);
                    console.log('✅ UPLOAD: Saved to localStorage');
                    // 2. Hero-Daten sammeln und speichern
                        name: document.getElementById('hero-name')?.value || 'Manuel Weiss',
                        title: document.getElementById('hero-title')?.value || 'HR Berater für AI & Transformation',
                        subtitle: document.getElementById('hero-subtitle')?.value || '',
                        description: document.getElementById('hero-description')?.value || '',
                        profileImage: imageUrl,
                        timestamp: new Date().toISOString()
                    console.log('✅ UPLOAD: Hero data saved');
                    // 3. Website sofort aktualisieren
                    updateWebsiteImage(imageUrl);
                    alert('✅ Bild erfolgreich hochgeladen und gespeichert!');
                    console.error('❌ UPLOAD: Save failed:', error);
                    alert('❌ Fehler beim Speichern: ' + error.message);
                console.error('❌ UPLOAD: FileReader error:', error);
                alert('❌ Fehler beim Lesen der Datei!');
        // Website sofort aktualisieren
        function updateWebsiteNow(heroData) {
                console.log('🌐 WEBSITE: Updating website immediately...');
                // Storage-Event auslösen für andere Tabs
                    newValue: JSON.stringify(heroData),
                    url: window.location.href
                console.log('✅ WEBSITE: Storage event dispatched');
                console.error('❌ WEBSITE: Update failed:', error);
        // Bild beim Laden anzeigen
        function loadImageOnStart() {
            console.log('🔄 LOAD: Loading stored image');
            const stored = localStorage.getItem('heroProfileImage');
            if (stored && stored !== 'manuel-weiss-photo.svg') {
                    img.src = stored;
                    console.log('✅ LOAD: Image loaded');
                    name.textContent = 'Hochgeladenes Profilbild';
                    console.log('✅ LOAD: Name updated');
                console.log('ℹ️ LOAD: No stored image');
        function testUploadSystem() {
            console.log('🧪 TEST: Testing upload system');
            const elements = {
                uploadBtn: document.querySelector('button[onclick*="file-upload"]'),
                fileInput: document.getElementById('file-upload'),
                image: document.getElementById('current-profile-image'),
                name: document.getElementById('current-profile-name')
                uploadBtn: !!elements.uploadBtn,
                fileInput: !!elements.fileInput,
                image: !!elements.image,
                name: !!elements.name
            // Test localStorage
            console.log('🧪 TEST: localStorage check:', {
                hasStored: !!stored,
                length: stored ? stored.length : 0
            // Test Button-Click
            if (elements.uploadBtn) {
                console.log('🧪 TEST: Testing button click');
                    elements.uploadBtn.click();
                    console.log('✅ TEST: Button click successful');
                    console.error('❌ TEST: Button click failed:', error);
        // EINFACHE WEBSITE-AKTUALISIERUNG
        function updateWebsiteImage(imageUrl) {
                console.log('🌐 WEBSITE: Updating website with image...');
                    name: document.getElementById('hero-name')?.value || 'Manuel Weiss',
                    title: document.getElementById('hero-title')?.value || 'HR Berater für AI & Transformation',
                    profileImage: imageUrl,
                    timestamp: new Date().toISOString()
                console.log('✅ WEBSITE: Hero data saved with image');
                // Storage-Event für Website auslösen
        function uploadImage() {
            console.log('🚀 UPLOAD: Button clicked');
            const fileInput = document.getElementById('image-upload');
                console.log('✅ UPLOAD: File dialog opened');
                console.error('❌ UPLOAD: File input not found');
        function processImage(input) {
            console.log('📸 PROCESS: File selected');
                console.log('❌ PROCESS: No file selected');
            console.log('📸 PROCESS: Processing file:', file.name, file.size, file.type);
                console.log('📸 PROCESS: Image loaded, length:', imageUrl.length);
                    console.log('✅ PROCESS: Image displayed');
                    console.error('❌ PROCESS: Image element not found');
                    alert('Bild-Element nicht gefunden!');
                    console.log('✅ PROCESS: Name updated');
                    // localStorage speichern
                    console.log('💾 PROCESS: Saved to localStorage');
                    // Hero-Daten sammeln
                    console.log('💾 PROCESS: Hero data saved');
                    // Website aktualisieren
                    window.dispatchEvent(new StorageEvent('storage', {
                        key: 'heroData',
                        newValue: JSON.stringify(heroData)
                    }));
                    console.log('🌐 PROCESS: Website update triggered');
                    alert('✅ Bild erfolgreich hochgeladen!');
                    console.error('❌ PROCESS: Save failed:', error);
                    alert('Fehler beim Speichern: ' + error.message);
                console.error('❌ PROCESS: FileReader error:', error);
        // Verbesserte Profilbild-Ladefunktion mit AWS-Integration
        async function loadStoredImage() {
            console.log('🔄 LOAD: Loading stored profile image...');
            if (!currentImage) {
                console.error('❌ LOAD: current-profile-image element not found');
                // 1. Erst localStorage prüfen
                const localImage = localStorage.getItem('heroProfileImage');
                if (localImage && localImage !== 'manuel-weiss-photo.svg') {
                    console.log('✅ LOAD: Found local image, updating display');
                    currentImage.src = localImage;
                    if (currentName) {
                        currentName.textContent = 'Hochgeladenes Profilbild';
                    updateAllProfilePreviews(localImage);
                // 2. AWS prüfen (falls Smart API verfügbar)
                    console.log('🔄 LOAD: Checking AWS for profile image...');
                    const awsImage = await loadProfileImageFromAWS();
                    if (awsImage) {
                        console.log('✅ LOAD: Found AWS image, updating display');
                        currentImage.src = awsImage;
                        currentImage.style.display = 'block';
                            currentName.textContent = 'AWS Profilbild';
                        updateAllProfilePreviews(awsImage);
                // 3. Fallback auf Standard
                console.log('ℹ️ LOAD: No custom image found, using default');
                currentImage.src = 'manuel-weiss-photo.svg';
                    currentName.textContent = 'Standard Profilbild';
                console.error('❌ LOAD: Error loading profile image:', error);
                // Fallback auf Standard bei Fehlern
        // AWS-Profilbild laden
        async function loadProfileImageFromAWS() {
                if (!window.smartAPI) {
                    console.log('ℹ️ AWS: Smart API not available');
                const result = await window.smartAPI.getProfileImage();
                if (result && result.url) {
                    console.log('✅ AWS: Profile image loaded from AWS');
                    return result.url;
                return null;
                console.error('❌ AWS: Error loading from AWS:', error);
        // Alle Profilbild-Previews aktualisieren
        function updateAllProfilePreviews(imageUrl) {
            const previews = [
                'navLogoPreview',
                'heroImagePreview', 
                'footerLogoPreview',
                'applicationPhotoPreview'
            previews.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.src = imageUrl;
                    console.log(`✅ Updated ${id} with new image`);
        // Verbesserte Upload-Funktion mit AWS-Integration
        async function uploadProfileImageToAWS(file) {
                console.log('🚀 UPLOAD: Starting AWS upload...');
                // 1. Lokal speichern für sofortige Anzeige
                    const imageUrl = e.target.result;
                    // Sofort anzeigen
                    const currentImage = document.getElementById('current-profile-image');
                    const currentName = document.getElementById('current-profile-name');
                    if (currentImage) {
                        currentImage.src = imageUrl;
                        currentName.textContent = file.name;
                    updateAllProfilePreviews(imageUrl);
                    console.log('✅ UPLOAD: Image displayed locally');
                // 2. AWS-Upload (falls verfügbar)
                        const result = await window.smartAPI.uploadProfileImage(file);
                        console.log('✅ UPLOAD: Successfully uploaded to AWS:', result);
                    } catch (awsError) {
                        console.warn('⚠️ UPLOAD: AWS upload failed, but local storage works:', awsError);
                    console.log('ℹ️ UPLOAD: Smart API not available, using local storage only');
                console.error('❌ UPLOAD: Error uploading profile image:', error);
                throw error;
        // Beim Laden starten
            console.log('🚀 PAGE: Page loaded - profile system ready');
            setTimeout(loadStoredImage, 1000);
        // =================== SMART MEDIA API INTEGRATION ===================
        // Initialize Smart Media API
        function initializeSmartMediaAPI() {
            console.log('🚀 Initializing Smart Media API...');
            // Load all media on page load
            if (window.smartMediaAPI) {
                window.smartMediaAPI.loadAllMedia();
            setupMediaEventListeners();
            console.log('✅ Smart Media API initialized');
        // Setup media event listeners
        function setupMediaEventListeners() {
            // Category tab switching
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    const category = e.currentTarget.dataset.category;
                    switchMediaCategory(category);
            // Search functionality
            const searchInput = document.getElementById('media-search');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value;
                    searchMedia(query);
            // AI search toggle
            const aiSearchToggle = document.getElementById('ai-search-toggle');
            if (aiSearchToggle) {
                aiSearchToggle.addEventListener('click', (e) => {
                    toggleAISearch();
            // Filter by type
            const filterSelect = document.getElementById('media-filter-type');
            if (filterSelect) {
                filterSelect.addEventListener('change', (e) => {
                    filterMediaByType(e.target.value);
            // Bulk actions
            const bulkActionsBtn = document.getElementById('bulk-actions-btn');
            if (bulkActionsBtn) {
                bulkActionsBtn.addEventListener('click', (e) => {
                    showBulkActionsMenu();
        // Switch media category
        function switchMediaCategory(category) {
            console.log(`📁 Switching to category: ${category}`);
            // Update active tab
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            // Show/hide analytics dashboard
            const analyticsDashboard = document.getElementById('analytics-dashboard');
            const mediaGrid = document.getElementById('media-grid');
            if (category === 'analytics') {
                analyticsDashboard.style.display = 'block';
                mediaGrid.style.display = 'none';
                loadAnalyticsDashboard();
                analyticsDashboard.style.display = 'none';
                mediaGrid.style.display = 'grid';
                loadMediaByCategory(category);
        // Load media by category
        async function loadMediaByCategory(category) {
            if (!window.smartMediaAPI) return;
                const media = window.smartMediaAPI.getMediaByCategory(category);
                window.smartMediaAPI.renderMediaGrid(media);
                console.error('❌ Failed to load media:', error);
        // Search media
        async function searchMedia(query) {
                const results = await window.smartMediaAPI.searchMedia(query, {
                    aiSearch: isAISearchEnabled()
                window.smartMediaAPI.renderMediaGrid(results);
                console.error('❌ Search failed:', error);
        // Toggle AI search
        function toggleAISearch() {
            const toggle = document.getElementById('ai-search-toggle');
            const isEnabled = toggle.classList.contains('ai-enabled');
            if (isEnabled) {
                toggle.classList.remove('ai-enabled');
                toggle.style.color = '#6366f1';
                toggle.title = 'KI-Suche aktivieren';
                toggle.classList.add('ai-enabled');
                toggle.style.color = '#10b981';
                toggle.title = 'KI-Suche deaktivieren';
        // Check if AI search is enabled
        function isAISearchEnabled() {
            return toggle.classList.contains('ai-enabled');
        // Filter media by type
        function filterMediaByType(type) {
            const allMedia = window.smartMediaAPI.getAllMedia();
            let filteredMedia = allMedia;
            if (type) {
                filteredMedia = allMedia.filter(media => media.type.includes(type));
            window.smartMediaAPI.renderMediaGrid(filteredMedia);
        // Show bulk actions menu
        function showBulkActionsMenu() {
            const menu = document.createElement('div');
            menu.className = 'bulk-actions-menu';
            menu.style.cssText = `
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                border-radius: 8px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                padding: 2rem;
                min-width: 300px;
            menu.innerHTML = `
                <h3 style="margin: 0 0 1rem 0; color: #333;">Bulk Actions</h3>
                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <button onclick="smartMediaAPI.bulkDelete()" style="padding: 0.75rem; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-trash"></i> Ausgewählte löschen
                    <button onclick="smartMediaAPI.bulkCompress()" style="padding: 0.75rem; background: #f59e0b; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-compress"></i> Komprimieren
                    <button onclick="smartMediaAPI.bulkGenerateThumbnails()" style="padding: 0.75rem; background: #8b5cf6; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-images"></i> Thumbnails generieren
                    <button onclick="smartMediaAPI.bulkExport()" style="padding: 0.75rem; background: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-download"></i> Exportieren
                <button onclick="this.parentElement.remove()" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 1.5rem; cursor: pointer;">×</button>
            document.body.appendChild(menu);
        // Load analytics dashboard
        async function loadAnalyticsDashboard() {
                const analytics = await window.smartMediaAPI.getAnalytics();
                // Update stats
                document.getElementById('total-files').textContent = analytics.totalFiles || 0;
                document.getElementById('total-size').textContent = formatFileSize(analytics.totalSize || 0);
                document.getElementById('storage-usage').textContent = `${Math.round(analytics.storageUsage?.percentage || 0)}%`;
                document.getElementById('recent-uploads').textContent = analytics.recentUploads?.length || 0;
                // Load category chart
                loadCategoryChart(analytics.categories);
                console.error('❌ Failed to load analytics:', error);
        // Load category chart
        function loadCategoryChart(categories) {
            const chartContainer = document.getElementById('category-chart');
            if (!chartContainer || !categories) return;
            // Simple chart implementation
            const chartData = Object.entries(categories).map(([category, data]) => ({
                category,
                count: data.count,
                size: data.size
            chartContainer.innerHTML = `
                <div style="width: 100%; height: 100%; display: flex; flex-direction: column; gap: 0.5rem; padding: 1rem;">
                    ${chartData.map(item => `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: #f8f9fa; border-radius: 4px;">
                            <span style="font-weight: 500;">${item.category}</span>
                            <div style="display: flex; gap: 1rem;">
                                <span style="color: #666;">${item.count} Dateien</span>
                                <span style="color: #666;">${formatFileSize(item.size)}</span>
                    `).join('')}
        // Format file size
        function formatFileSize(bytes) {
        // Initialize on page load
            setTimeout(initializeSmartMediaAPI, 1000);
        // =================== BEWERBUNGSMANAGER INTEGRATION ===================
        function navigateToBewerbungsSection() {
            console.log('🚀 Navigiere zur integrierten Bewerbungssektion...');
            // Animation des Buttons
            const button = document.getElementById('smartWorkflowButton');
            if (button) {
                button.style.transform = 'scale(0.95)';
                button.style.opacity = '0.8';
                    // Navigation zur Bewerbungen-Sektion im Admin Panel
                    navigateToSection('applications');
                    // Button Animation zurücksetzen
                    button.style.transform = 'scale(1)';
                    button.style.opacity = '1';
                }, 150);
                // Fallback ohne Animation
                navigateToSection('applications');
        // Legacy-Support
        function openBewerbungsmanager() {
            console.log('🔄 Legacy-Call: Weiterleitung zur integrierten Bewerbungssektion');
            navigateToBewerbungsSection();
        // Legacy-Support für bestehende Implementierungen
        function startSmartBewerbungsWorkflow() {
            console.log('🔄 Legacy-Call: Weiterleitung zum neuen Bewerbungsmanager');
            openBewerbungsmanager();
        console.log('✅ Bewerbungsmanager-Integration geladen');
    <!-- Auth Modals Container -->
    <div id="authModalsContainer"></div>
</body>
</html>
    
    <script>
        // Load auth modals
        async function loadAuthModals() {
            try {
                const response = await fetch('components/unified-auth-modals.html');
                const html = await response.text();
                document.getElementById('authModalsContainer').innerHTML = html;
            } catch (error) {
                console.error('Error loading auth modals:', error);
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadAuthModals();
        });
    </script>
